System.register("chunks:///_virtual/absolute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"bf087/OgI9HIaIKP+ZWp/tU","absolute",void 0);t("default",r({menu:"Math/Advanced/Absolute",title:"Absolute"})(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[u("In",o.ZERO,"vec4","vector")],outputs:[u("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = abs("+t+");\n        "},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/add.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,c,r,o,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){r=t.register},function(t){o=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"37762nev7BLgIRh9U7rJXkP","add",void 0);t("default",r({menu:"Math/Basic/Add",title:"Add"})(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Max,e.data={inputs:[u("A",c.ZERO,"vec4","vector"),u("B",c.ZERO,"vec4","vector")],outputs:[u("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = "+t+" + "+e+";\n        "},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/all.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,c,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){s=t.slot}],execute:function(){var u;n._RF.push({},"08b1ekFRoNLQ5UDBj6YtBOO","all",void 0);t("default",r({menu:"Logic/All",title:"All"})(u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Min,e.data={inputs:[s("In",o.ZERO,"vec4","vector")],outputs:[s("Out",!1,"boolean","boolean")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){for(var t=this.getInputValue(0),e=this.getOutputVarDefine(0),n=["x","y","z","w"],o=[],r=this.slots[0].concretePrecision,c=0;c<r;c++)o.push("("+t+"."+n[c]+" > 0.)");return"\n            "+e+" = ("+o.join(" && ")+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/and.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,i,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.register},function(t){i=t.ShaderNode},function(t){r=t.ConcretePrecisionType},function(t){c=t.slot}],execute:function(){var a;n._RF.push({},"ad796qaJ35K1pVtAoiLAQwn","and",void 0);t("default",o({menu:"Logic/And",title:"And"})(a=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).concretePrecisionType=r.Max,e.data={inputs:[c("A",!1,"boolean","boolean"),c("B",!1,"boolean","boolean")],outputs:[c("Out",!1,"boolean","boolean")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = ("+t+" && "+e+");\n        "},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationGraph.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,r,o,a,s,l,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.CCBoolean,l=t.animation,p=t.Component}],execute:function(){var c,u,h,f,g;o._RF.push({},"9470cSQRxtAIYqQT5Sm+ZX6","AnimationGraph",void 0);var m=a.ccclass,y=a.property;t("AnimationGraph",(c=m("AnimationGraph"),u=y(s),c((g=n((f=function(t){function n(){for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this)._graph=void 0,e(n,"isPose",g,r(n)),n}i(n,t);var o=n.prototype;return o.start=function(){if(this._graph=this.getComponent(l.AnimationController),void 0===this._graph||null===this._graph)throw new Error(this.node.name+" can not find AnimationController")},o.play=function(t,n){this.setValue(t,n)},o.setValue=function(t,n){var i;this.isPose?this._graph.setValue_experimental(t,n):null==(i=this._graph)||i.setValue(t,n)},o.setLayer=function(t,n){this._graph.setLayerWeight(t,n)},o.update=function(t){},n}(p)).prototype,"isPose",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationGraphGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationGraph.ts","./Constants.ts"],(function(t){var n,o,r,i,e,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,i=t.Component},function(t){e=t.AnimationGraph},function(t){s=t.CurrentEnviroment}],execute:function(){var a;o._RF.push({},"61dcf57FUBJ8oXIVFbL/HTv","AnimationGraphGroup",void 0);var u=r.ccclass;r.property,t("AnimationGraphGroup",u("AnimationGraphGroup")(a=function(t){function o(){for(var n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this)._groups=void 0,n.curActiveKey="",n}n(o,t);var r=o.prototype;return r.__preload=function(){if(this._groups=this.getComponentsInChildren(e),void 0===this._groups||null===this._groups)throw new Error(this.node.name+" node not find AnimationGraph")},r.play=function(t,n){if(this.curActiveKey!==t){this.curActiveKey=t;try{for(var o=0;o<this._groups.length;o++)this._groups[o].play(t,n)}catch(t){s.LOG&&console.log(t)}}},r.setLayer=function(t,n){for(var o=0;o<this._groups.length;o++)this._groups[o].setLayer(t,n)},o}(i))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisiblePanel.ts","./Defines.ts","./easing.ts","./audioManager.ts"],(function(i){var e,n,t,o,s,r,u,l,a,h,c,p,g,d,b,f,m;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,u=i._decorator,l=i.Enum,a=i.Vec3,h=i.v3,c=i.tween,p=i.KeyCode},function(i){g=i.VisiblePanel},function(i){d=i.ViewBeginType},function(i){b=i.EasingType,f=i.getEasingFunction},function(i){m=i.AudioManager}],execute:function(){var w,v,P,S,y,A,T,E,z,N,D,F,V,I,k,x,H,B,O,Y,X,C,_,L,M,R,Z,j,K;r._RF.push({},"0ade8jDYZpLPZyun6PIe4u6","AnimationPanel",void 0);var W=u.ccclass,q=u.property;i("AnimationPanel",(w=W("AnimationPanel"),v=q({group:"AnimationSetting"}),P=q({type:l(d),group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),S=q({type:a,group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),y=q({group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),A=q({group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),T=q({group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),E=q({group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),z=q({group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),N=q({group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),D=q({type:l(b),group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),F=q({type:l(b),group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),V=q({type:g,group:"AnimationSetting",visible:function(){return this.isShowPopupsetting}}),I=q({group:"AnimationSetting"}),w((H=e((x=function(i){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=i.call.apply(i,[this].concat(s))||this,t(e,"isShowPopupsetting",H,o(e)),t(e,"beginType",B,o(e)),t(e,"beginPosition",O,o(e)),t(e,"showFromPosX",Y,o(e)),e[0]=void 0,t(e,"hideToPosX",X,o(e)),t(e,"showFromPosY",C,o(e)),t(e,"hideToPosY",_,o(e)),t(e,"showFromScale",L,o(e)),t(e,"hideToScale",M,o(e)),t(e,"showEasingType",R,o(e)),t(e,"hideEasingType",Z,o(e)),t(e,"dimNode",j,o(e)),t(e,"shownAudioName",K,o(e)),e.opMain=null,e.visibleIndex=-1,e.visibleTween=null,e.scheduleDim=null,e}n(e,i);var r=e.prototype;return r.onLoad=function(){var i,e;switch(this.node.setPosition(this.beginPosition),this.beginType){case d.NONE:this.visibleIndex=-1;break;case d.HIDE:this.visibleIndex=0,this.setPanelVisible(!1,0),null==(i=this.dimNode)||i.setPanelVisible(!1,0);break;case d.SHOW:this.visibleIndex=1,this.setPanelVisible(!0,0),null==(e=this.dimNode)||e.setPanelVisible(!0,0)}},r.setAnimVisible=function(i,e,n){var t=this;if(void 0===e&&(e=null),void 0===n&&(n=.35),this.visibleIndex!=(i?1:0)){var o,s;if(this.visibleIndex=i?1:0,i)this.node.active=!0,this.node.position=h(this.showFromPosX,this.showFromPosY,0),this.node.setScale(h(this.showFromScale,this.showFromScale,this.showFromScale)),null==(o=this.visibleTween)||o.stop(),this.visibleTween=c(this.node).to(n,{scale:a.ONE,position:a.ZERO},{easing:this.getEasingShowAnim()}).call((function(){return null==e?void 0:e()})).start(),this.setDimBackground(!0,n,.15);else null==(s=this.visibleTween)||s.stop(),this.visibleTween=c(this.node).to(n,{scale:h(this.hideToScale,this.hideToScale,this.hideToScale),position:h(this.hideToPosX,this.hideToPosY,0)},{easing:this.getEasingHideAnim()}).call((function(){t.node.active=!1,null==e||e()})).start(),this.setDimBackground(!1,0,.1);this.setPanelVisible(i,1.2*n)}else null==e||e()},r.getEasingShowAnim=function(){return f(this.showEasingType)},r.getEasingHideAnim=function(){return f(this.hideEasingType)},r.setDimBackground=function(i,e,n){var t=this;void 0===n&&(n=.2),null!=this.dimNode&&(null!=this.scheduleDim&&this.unschedule(this.scheduleDim),this.scheduleDim=this.scheduleOnce((function(){return t.dimNode.setPanelVisible(i,n)}),e))},r.show=function(i,e){var n=this;this.shownAudioName&&1!=this.visibleIndex&&m.instance.playSound(this.shownAudioName),this.setAnimVisible(!0,(function(){n.shown(),null==e||e()}))},r.doShow=function(){this.show(null,void 0)},r.doHide=function(){this.hide(void 0)},r.hide=function(i){var e=this;this.setAnimVisible(!1,(function(){e.hided(),null==i||i()}),.1)},r.shown=function(){},r.hided=function(){},r.onKeyDown=function(i){0!=this.isEscable&&i.keyCode===p.ESCAPE&&this.doHide()},r.onTouch_Close=function(){this.doHide()},s(e,[{key:"isShowing",get:function(){return 1==this.visibleIndex}},{key:"isEscable",get:function(){return!1}}]),e}(g)).prototype,"isShowPopupsetting",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=e(x.prototype,"beginType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.NONE}}),O=e(x.prototype,"beginPosition",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h(0,0,0)}}),Y=e(x.prototype,"showFromPosX",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1080}}),X=e(x.prototype,"hideToPosX",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),C=e(x.prototype,"showFromPosY",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=e(x.prototype,"hideToPosY",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=e(x.prototype,"showFromScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=e(x.prototype,"hideToScale",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(x.prototype,"showEasingType",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.BackOut}}),Z=e(x.prototype,"hideEasingType",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.BackIn}}),j=e(x.prototype,"dimNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(x.prototype,"shownAudioName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=x))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatorController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,o,e,a;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator,e=t.SkeletalAnimation,a=t.Component}],execute:function(){var i;r._RF.push({},"2d25eUq/olFcqr07UVxslCs","AnimatorController",void 0);var l=o.ccclass;o.property,t("AnimatorController",l("AnimatorController")(i=function(t){function r(){for(var n,r=arguments.length,o=new Array(r),e=0;e<r;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this)._anim=Object.create(null),n._data=Object.create(null),n}n(r,t);var o=r.prototype;return o.init=function(t){this._data=t,this._anim=this.getComponent(e)},o.play=function(t){var n=this._data[t];this._anim.play(n[0])},r}(a))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/any.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,c,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){s=t.slot}],execute:function(){var u;n._RF.push({},"c213eN4ql1Fo5ECkorGOGam","any",void 0);t("default",r({menu:"Logic/Any",title:"Any"})(u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Min,e.data={inputs:[s("In",o.ZERO,"vec4","vector")],outputs:[s("Out",!1,"boolean","boolean")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){for(var t=this.getInputValue(0),e=this.getOutputVarDefine(0),n=["x","y","z","w"],o=[],r=this.slots[0].concretePrecision,c=0;c<r;c++)o.push("("+t+"."+n[c]+" > 0.)");return"\n            "+e+" = ("+o.join(" || ")+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/APIFakeData.ts",["cc"],(function(t){var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"bc1d75XEItMOZF3HZi0EoA3","APIFakeData",void 0);t("APIFakeData",{}),t("initFakeData",(function(){}));a._RF.pop()}}}));

System.register("chunks:///_virtual/APIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./APIFakeData.ts","./Constants.ts"],(function(e){var t,n,r,o,s,i;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.DEBUG},function(e){s=e.APIFakeData},function(e){i=e.CurrentEnviroment}],execute:function(){e({getApiKey:function(){return d},getEncrypedToken:function(){return l.AES.encrypt(m(),h).toString()},getToken:m,intervalPing:k,requestUserInfo:function(e){var t="users/info";if(u&&o)return null==e?void 0:e(s[t],null);p.request(t,function(e,t){void 0===e&&(e=null);if(!e)return{method:"POST",headers:v()};var n=Object.keys(e).filter((function(t){return null!==e[t]})).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");i.LOG&&console.log("encoded data: "+n);return{method:"POST",headers:v(),body:n}}(),(function(t){null==e||e(t.data,null)}),(function(t){null==e||e(null,t)}))},setAPIManagerURL:function(e){p.setBaseURL(e)},setApiKey:function(e){d=e},setFakeData:c,setKeyAuthen:function(e){h=e},setToken:function(e){f=e},updateApiKey:function(e){}}),r._RF.push({},"3b325m3/clNb7s376jIQ9MJ","APIManager",void 0);var a=function(){function e(){var e=this;this.baseURL=void 0,this.timeout=void 0,this.MAX_RETAKE_TOKEN=5,this.retakeTokenTimesThisSession=0,this.retakeToken=null,this.onFailedCallback=null,this.isLog=!0,this.log=function(t){e.isLog&&i.LOG&&console.log("[API] : ",t)},this.baseURL="",this.timeout=3e4}var r=e.prototype;return r.setBaseURL=function(e){this.baseURL=e},r.setTimeout=function(e){this.timeout=e},r.request=function(){var e=t(n().mark((function e(t,r,o,s,i){var a,u,c,f,h,p,k,v;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=null),a=null,u=!1,c=null,i||(i=d),e.prev=5,e.next=8,this.fetchWithRetry(t,r);case 8:if((f=e.sent).ok){e.next=11;break}throw{message:"Network response was not ok",statusCode:777};case 11:return e.next=13,f.json();case 13:a=e.sent,this.log("data:"+a),(c=a).statusCode&&200!=c.statusCode&&(u=!0,this.log("Server response ERROR:"+c.message),s(c),null==(h=this.onFailedCallback)||h.call(this,c)),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(5),u=!0,this.log("ERROR:"+e.t0),s(e.t0),null==(p=this.onFailedCallback)||p.call(this,e.t0);case 25:if(!u){try{k=l.AES.decrypt(c.data,i),v=k.toString(l.enc.Utf8),c.data=JSON.parse(v)}catch(e){this.log("resData: ERROR"+e)}o(c)}case 26:case"end":return e.stop()}}),e,this,[[5,19]])})));return function(t,n,r,o,s){return e.apply(this,arguments)}}(),r.fetchWithRetry=function(){var e=t(n().mark((function e(t,r,o){var s,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===o&&(o=3),s=0;case 2:if(!(s<o)){e.next=28;break}return e.prev=3,i=this.baseURL+t,this.log("fetch "+i),e.next=8,this.timeoutPromise(fetch(i,r));case 8:if(401!=(a=e.sent).status||!this.retakeToken){e.next=16;break}if(this.log("try get new token"),!(++this.retakeTokenTimesThisSession<=this.MAX_RETAKE_TOKEN)){e.next=16;break}return e.next=14,this.retakeToken();case 14:e.sent&&(r.headers=v());case 16:if(!a.ok){e.next=18;break}return e.abrupt("return",a);case 18:e.next=24;break;case 20:if(e.prev=20,e.t0=e.catch(3),s!==o-1){e.next=24;break}throw e.t0;case 24:s++,this.log("retry attemptes:"+s),e.next=2;break;case 28:throw{message:"All retries failed",statusCode:666};case 29:case"end":return e.stop()}}),e,this,[[3,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.timeoutPromise=function(e){var t=this;return new Promise((function(n,r){var o=setTimeout((function(){return r(new Error("Request timed out"))}),t.timeout);e.then((function(e){clearTimeout(o),n(e)}),(function(e){clearTimeout(o),r(e)}))}))},e}(),u=!1;function c(){u=!0}u&&o&&c();var l=window.CryptoJS,f="",h="",d="",p=new a;function k(){}p.onFailedCallback=function(e){},setInterval(k,3e5);var v=e("headers",(function(){return{Authorization:"Bearer "+f,"Content-Type":"application/json"}}));function m(){return"Bearer "+f}r._RF.pop()}}}));

System.register("chunks:///_virtual/arccosine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,c,r,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){r=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var s;n._RF.push({},"d296eo8ejhAz4SJ+Afh3Ceo","arccosine",void 0);t("default",r({menu:"Math/Trigonometry/Arccosine",title:"Arccosine"})(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[i("In",c.ZERO,"vec4","vector")],outputs:[i("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = acos("+t+");\n        "},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/arcsine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){i=t.ShaderNode},function(t){o=t.slot}],execute:function(){var s;n._RF.push({},"63135dmizRJ4Jf8BpVKF+Wm","arcsine",void 0);t("default",c({menu:"Math/Trigonometry/Arcsine",title:"Arcsine"})(s=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = asin("+t+");\n        "},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/arctangent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var a;n._RF.push({},"2986999N5lOG433MyYF3lBY","arctangent",void 0);t("default",c({menu:"Math/Trigonometry/Arctangent",title:"Arctangent"})(a=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = atan("+t+");\n        "},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/arctangent2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){a=t.slot}],execute:function(){var i;n._RF.push({},"2a9c8rn4+VHWa4BXpsUBf1R","arctangent2",void 0);t("default",c({menu:"Math/Trigonometry/Arctangent2",title:"Arctangent2"})(i=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[a("A",r.ZERO,"vec4","vector"),a("B",r.ZERO,"vec4","vector")],outputs:[a("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = atan2("+t+", "+e+");\n        "},n}(o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/assetRemoteUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts"],(function(e){var t,r,n,a,s,o,i,u,c;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,a=e.assetManager,s=e.SpriteAtlas,o=e.Texture2D,i=e.ImageAsset,u=e.SpriteFrame},function(e){c=e.CurrentEnviroment}],execute:function(){n._RF.push({},"ad288/O58VDkJlgQZZZjRwu","assetRemoteUtil",void 0);var l=e("assetRemoteUtil",function(){function e(){}return e.loadBundle=function(e,t){a.loadBundle(e,null,(function(e,r){if(e)return console.error(e),void t(e,null);t(null,r)}))},e.loadAltas=function(e,t,r){this.loadBundle(e,(function(e,n){e?null==r||r(e,null):n.load(t,s,(function(e,t){if(e)return console.error(e),void(null==r||r(e,null));null==r||r(null,t)}))}))},e.loadRemoteImage=function(){var e=t(r().mark((function e(t){var n,a,s,c,l,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="https://cors-anywhere.herokuapp.com/"+t,e.next=4,fetch(t);case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP error! Status: "+n.status);case 7:return e.next=9,n.blob();case 9:return a=e.sent,(s=new Image).crossOrigin="Anonymous",c=new Promise((function(e,t){s.onload=function(){return e(s)},s.onerror=function(){return t(new Error("Failed to load image element"))}})),s.src=URL.createObjectURL(a),e.next=16,c;case 16:return(l=new o).image=new i(s),(p=new u).texture=l,e.abrupt("return",p);case 23:throw e.prev=23,e.t0=e.catch(0),new Error("Failed to load remote image: "+e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),e.fetchImage=function(){var e=t(r().mark((function e(t){var n,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Failed to fetch image: URL is null or empty.");case 2:return e.prev=2,e.next=5,fetch(t);case 5:return n=e.sent,e.t0=Uint8Array,e.next=9,n.arrayBuffer();case 9:return e.t1=e.sent,a=new e.t0(e.t1),s=this.bufferToBase64(a),e.abrupt("return",this.convertBase64ToSpriteFrame(s));case 15:throw e.prev=15,e.t2=e.catch(2),new Error("Failed to get SpriteFrame: "+e.t2.message);case 18:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),e.bufferToBase64=function(e){var t=Array.from(e).map((function(e){return String.fromCharCode(e)})).join("");return btoa(t)},e.convertBase64ToSpriteFrame=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new Image;n.onload=function(){var t=new o;t.image=new i(n);var r=new u;r.texture=t,e(r),URL.revokeObjectURL(n.src)},n.onerror=function(){r(new Error("Failed to load base64 image")),URL.revokeObjectURL(n.src)},n.src="data:image/png;base64,"+t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.loadAndListenAvatar=function(e,t){var r=this;if(this.spriteFrameMap.has(e))null==t||t(this.spriteFrameMap.get(e));else if(this.spriteCallbacks.has(e)||this.spriteCallbacks.set(e,[]),this.spriteCallbacks.get(e).push(t),!(this.loadingSprites.indexOf(e)>=0)){this.loadingSprites.push(e);var n=function(t){r.spriteFrameMap.set(e,t),r.spriteCallbacks.get(e).forEach((function(e){return e(t)})),r.spriteCallbacks.set(e,[]),r.loadingSprites=r.loadingSprites.filter((function(t){return t!==e})),r.spriteFrameMap.size>100&&(r.spriteFrameMap.clear(),c.LOG&&console.log("SpriteFrameMap cache cleared due to exceeding 100 records.")),c.LOG&&console.log("Total loaded avatar: ",r.spriteFrameMap.size)};this.fetchImage(e).then((function(e){n(e)})).catch((function(e){n(null)}))}},e.removeListenAvatar=function(e,t){0!=this.spriteCallbacks.has(e)&&this.spriteCallbacks.set(e,this.spriteCallbacks.get(e).filter((function(e){return e!=t})))},e}());l.spriteFrameMap=new Map,l.loadingSprites=[],l.spriteCallbacks=new Map,l.loadedImages=[],l.loadedTextures=[],n._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./storageManager.ts","./resourceUtil.ts"],(function(s){var t,i,o,e,u,n,a,r,l,c,h,d,f,p;return{setters:[function(s){t=s.createClass},function(s){i=s.cclegacy,o=s._decorator,e=s.Node,u=s.director,n=s.game,a=s.AudioSource,r=s.AudioClip,l=s.tween,c=s.easing},function(s){h=s.GameConstant,d=s.CurrentEnviroment},function(s){f=s.StorageManager},function(s){p=s.resourceUtil}],execute:function(){var M,m;i._RF.push({},"d7ecda770NLF4OP1Afz5O5u","audioManager",void 0);var g=o.ccclass;o.property,s("AudioManager",g("AudioManager")(((m=function(){function s(){this.audioMap=new Map,this._persistRootNode=null,this._audioSources=[],this.dictWeaponSoundIndex={},this.bgmVolume=.8,this.sfxVolume=1,this.audios={},this.arrSound=[],this.BGM_VOLUME=.35,this.SFX_VOLUME=.75,this.asMusic=null,this.curGetSFXSourceIndex=0,this.tweenFadeMusic=null,this.init()}var i=s.prototype;return i.init=function(){if(!this._persistRootNode){this._persistRootNode=new e("audio"),u.getScene().addChild(this._persistRootNode),n.addPersistRootNode(this._persistRootNode),this.asMusic=this._persistRootNode.addComponent(a);for(var s=0;s<15;s++)this._audioSources.push(this._persistRootNode.addComponent(a));this.bgmVolume=this.getAudioSetting(!0),this.sfxVolume=this.getAudioSetting(!1),this.audioMap.clear()}},i.getAudioSetting=function(s){var t,i,o;s?t=null!=(i=f.instance.getGlobalData(h.STORAGE_KEY.BGM_VOLUME))?i:this.BGM_VOLUME:t=null!=(o=f.instance.getGlobalData(h.STORAGE_KEY.SFX_VOLUME))?o:this.SFX_VOLUME;return t},i.setBGMProgress=function(s){this.bgmVolume=s*this.BGM_VOLUME,f.instance.setGlobalData(h.STORAGE_KEY.BGM_VOLUME,this.bgmVolume)},i.setSFXProgress=function(s){this.sfxVolume=s*this.SFX_VOLUME,f.instance.setGlobalData(h.STORAGE_KEY.SFX_VOLUME,this.sfxVolume)},i.getSound=function(s){return this.audioMap.has(s)?this.audioMap.get(s):null},i.playMusic=function(s,t){var i=this,o=this.asMusic,e="sounds/bgm/"+s;return p.loadRes(e,r,(function(e,u){if(e)d.LOG&&console.error(e);else{if(!u)return null;var n={source:o,isMusic:!0};i.audios[s]=n,o.stop(),o.clip=u,o.volume=i.bgmVolume,o.loop=t,o.play()}})),o},i.setMusicFade=function(s,t,i){var o,e=this;void 0===t&&(t=.5),void 0===i&&(i=null);var u=s?0:1,n=s?1:0,a=n-u,r={value:u};null==(o=this.tweenFadeMusic)||o.stop(),this.tweenFadeMusic=l(r).to(t,{value:n},{easing:c.linear,progress:function(s,t,i,o){var n;return n=u+o*a,e.asMusic&&e.bgmVolume&&(e.asMusic.volume=e.bgmVolume*n),0}}).call((function(){return null==i?void 0:i()})).start()},i.dimAllSounds=function(){this._audioSources.forEach((function(s){s.volume=0}))},i.playSound=function(s,t){var i=this;if(void 0===t&&(t=1),this.sfxVolume){this.curGetSFXSourceIndex=++this.curGetSFXSourceIndex%this._audioSources.length;var o=this._audioSources[this.curGetSFXSourceIndex],e="sounds/sfx/"+s;return p.loadRes(e,r,(function(s,e){s?d.LOG&&console.error(s):e&&(o.stop(),o.clip=e,o.currentTime=0,o.volume=i.sfxVolume*t,o.play())})),o}},i.stop=function(s){if(this.audios.hasOwnProperty(s)){var t=this.audios[s];t.source.stop(),t.source.volume=0}},i.stopAll=function(){for(var s in this.audios)if(this.audios.hasOwnProperty(s)){var t=this.audios[s];t.source.stop(),t.source.clip=null}this.asMusic.stop(),this.asMusic.clip=null},i.getMusicVolume=function(){return this.bgmVolume},i.setMusic=function(s){var t=s*this.BGM_VOLUME;f.instance.setGlobalData(h.STORAGE_KEY.BGM_VOLUME,t),this.bgmVolume=t,this.asMusic.volume=this.bgmVolume},i.pauseAll=function(){for(var s in d.LOG&&console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(s))this.audios[s].source.pause()}},i.resumeAll=function(){for(var s in this.audios){if(this.audios.hasOwnProperty(s))this.audios[s].source.play()}},i.setSound=function(s){var t=s*this.SFX_VOLUME;for(var i in f.instance.setGlobalData(h.STORAGE_KEY.SFX_VOLUME,t),this.sfxVolume=t,this.audios){if(this.audios.hasOwnProperty(i)&&!this.audios[i].isMusic)this.audios[i].source.volume=this.sfxVolume}for(var o=0;o<this.arrSound.length;o++){this.arrSound[o].source.volume=this.sfxVolume}},i.stopSingleSound=function(s){this.audios.hasOwnProperty(s)&&!this.audios[s].isMusic&&this.audios[s].source.stop()},t(s,[{key:"bgmProgress",get:function(){return this.bgmVolume/this.BGM_VOLUME}},{key:"sfxProgress",get:function(){return this.sfxVolume/this.SFX_VOLUME}}]),s}()).instance=void 0,M=m))||M);i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./resourceUtil.ts","./MidiReader.ts"],(function(t){var e,i,a,r,n,u,s,o,c,m,p,h;return{setters:[function(t){e=t.createClass,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,n=t._decorator,u=t.Node,s=t.director,o=t.AudioSource,c=t.AudioClip},function(t){m=t.AudioManager},function(t){p=t.resourceUtil},function(t){h=t.loadMidi}],execute:function(){var l,d;r._RF.push({},"3f1f3G1DxNPvqoVbgokQUjm","AudioManager",void 0);var f=n.ccclass;n.property,t("MagicTilesAudioManager",f("MagicTilesAudioManager")(((d=function(){function t(){this.commonAudioManager=m.instance,this._beatmapAudioSource=null,this._currentBeatmap=null,this._beatCallbacks=[],this._isBuffering=!1,this._playbackTimer=0,this.audioTimeEstimation=0,this.lastSystemTime=0,this._timeCheckCounter=0,this._timeCheckInterval=30,this.init()}var r=t.prototype;return r.init=function(){var t=new u("beatmap-audio");s.getScene().addChild(t),this._beatmapAudioSource=t.addComponent(o)},r.loadBeatmapAudioData=function(){var t=i(a().mark((function t(e,i,r){var n,u,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=1),this._isBuffering=!0,t.prev=2,t.next=5,Promise.all([this.loadAudioClip(e),h(i,r)]);case 5:return n=t.sent,u=n[0],s=n[1],this._currentBeatmap={clip:u,trackInfo:s,totalDuration:u.getDuration(),currentTime:0,isPlaying:!1,isPaused:!1},this._beatmapAudioSource.clip=u,this._beatmapAudioSource.volume=1,this._isBuffering=!1,t.abrupt("return",this._currentBeatmap);case 15:return t.prev=15,t.t0=t.catch(2),console.error("Failed to load beatmap audio:",t.t0),this._isBuffering=!1,t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,this,[[2,15]])})));return function(e,i,a){return t.apply(this,arguments)}}(),r.setCurrentBeatmap=function(t){this._currentBeatmap=t,this._beatmapAudioSource.clip=t.clip,this._beatmapAudioSource.volume=1,this._isBuffering=!1},r.loadAudioClip=function(t){return new Promise((function(e,i){p.loadRes(t,c,(function(t,a){t?i(t):e(a)}))}))},r.playBeatmapAudio=function(t){void 0===t&&(t=0),this._currentBeatmap&&!this._isBuffering?(this._currentBeatmap.currentTime=t,this._currentBeatmap.isPlaying=!0,this._currentBeatmap.isPaused=!1,this._beatmapAudioSource.currentTime=t,this._beatmapAudioSource.play()):console.warn("No beatmap loaded or still buffering")},r.getEstimatedAudioTime=function(){var t=Date.now()/1e3;if(!this.lastSystemTime)return this.lastSystemTime=t,this.audioTimeEstimation=this._beatmapAudioSource.currentTime,this.audioTimeEstimation;var e=t-this.lastSystemTime;if(this.audioTimeEstimation+=e,this._timeCheckCounter++%this._timeCheckInterval==0){var i=this._beatmapAudioSource.currentTime;this.audioTimeEstimation=.95*this.audioTimeEstimation+.05*i}return this.lastSystemTime=t,this.audioTimeEstimation},r.getAudioTime=function(){return this._beatmapAudioSource.currentTime},r.pauseBeatmapAudio=function(){this._currentBeatmap&&this._currentBeatmap.isPlaying&&(this._beatmapAudioSource.pause(),this._currentBeatmap.isPaused=!0,this._currentBeatmap.isPlaying=!1)},r.resumeBeatmapAudio=function(){this._currentBeatmap&&this._currentBeatmap.isPaused&&(this._beatmapAudioSource.play(),this._currentBeatmap.isPaused=!1,this._currentBeatmap.isPlaying=!0)},r.stopBeatmapAudio=function(){this._currentBeatmap&&(this._beatmapAudioSource.stop(),this._currentBeatmap.isPlaying=!1,this._currentBeatmap.isPaused=!1,this._currentBeatmap.currentTime=0)},r.getCurrentTime=function(){return this._currentBeatmap?this._beatmapAudioSource.currentTime:0},r.getTotalDuration=function(){return this._currentBeatmap?this._currentBeatmap.totalDuration:0},r.onBeat=function(t){this._beatCallbacks.push(t)},r.offBeat=function(t){var e=this._beatCallbacks.indexOf(t);-1!==e&&this._beatCallbacks.splice(e,1)},r.startBeatTracking=function(){var t=this;if(this._currentBeatmap&&this._currentBeatmap.trackInfo.notes){this.stopBeatTracking();var e=this._currentBeatmap.trackInfo.notes,i=0;requestAnimationFrame((function a(){if(t._currentBeatmap&&t._currentBeatmap.isPlaying){for(var r=t._beatmapAudioSource.currentTime;i<e.length&&e[i].time<=r;)t._beatCallbacks.forEach((function(t){t(e[i])})),i++;requestAnimationFrame(a)}}))}},r.stopBeatTracking=function(){this._currentBeatmap&&(this._currentBeatmap.isPlaying=!1)},r.setMusicVolume=function(t){this._beatmapAudioSource.volume=t},r.getMusicVolume=function(){return this._beatmapAudioSource.volume},r.isBuffering=function(){return this._isBuffering},r.isPlaying=function(){return!!this._currentBeatmap&&this._currentBeatmap.isPlaying},r.isPaused=function(){return!!this._currentBeatmap&&this._currentBeatmap.isPaused},r.playSound=function(t,e){var i;return void 0===e&&(e=1),null==(i=this.commonAudioManager)?void 0:i.playSound(t,e)},r.createBeatmapAudioDataFromAssets=function(){var t=i(a().mark((function t(e,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._isBuffering=!0,t.prev=1,this._currentBeatmap={clip:e,trackInfo:i,totalDuration:e.getDuration(),currentTime:0,isPlaying:!1,isPaused:!1},this._beatmapAudioSource.clip=e,this._beatmapAudioSource.volume=1,this._isBuffering=!1,t.abrupt("return",this._currentBeatmap);case 9:return t.prev=9,t.t0=t.catch(1),console.error("Failed to create beatmap audio from assets:",t.t0),this._isBuffering=!1,t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,i){return t.apply(this,arguments)}}(),e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,l=d))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionAudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(e){var o,i,t,s,u,n,r,c,a,l,f;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,s=e.assertThisInitialized,u=e.createClass},function(e){n=e.cclegacy,r=e._decorator,c=e.AudioSource,a=e.AudioClip,l=e.Component},function(e){f=e.resourceUtil}],execute:function(){var d,m,h,p,g,S,y,b,x,v,A,V,w,T;n._RF.push({},"d703e2K9thB05Xmm4wf/DzN","AuditionAudioManager",void 0);var M=r.ccclass,P=r.property;e("AuditionAudioManager",(d=M("AuditionAudioManager"),m=P(c),h=P(c),p=P({range:[0,1]}),g=P({range:[0,1]}),d(((T=function(e){function o(){for(var o,i=arguments.length,u=new Array(i),n=0;n<i;n++)u[n]=arguments[n];return o=e.call.apply(e,[this].concat(u))||this,t(o,"musicFolder",b,s(o)),t(o,"musicSource",x,s(o)),t(o,"sfxSource",v,s(o)),t(o,"audioOffset",A,s(o)),t(o,"musicVolume",V,s(o)),t(o,"sfxVolume",w,s(o)),o.soundEffects=new Map,o.startTime=0,o.isPaused=!1,o.pauseTime=0,o}i(o,e);var n=o.prototype;return n.onLoad=function(){null===o._instance?(o._instance=this,this.musicSource||(this.musicSource=this.node.addComponent(c),this.musicSource.loop=!0,this.musicSource.volume=this.musicVolume),this.sfxSource||(this.sfxSource=this.node.addComponent(c),this.sfxSource.loop=!1,this.sfxSource.volume=this.sfxVolume),this.loadSoundEffects()):this.node.destroy()},n.loadSoundEffects=function(){var e=this;["good","miss"].forEach((function(o){f.loadRes("audition/audio/sfx/"+o,a,(function(i,t){i?console.error("Failed to load sound effect: "+o,i):(e.soundEffects.set(o,t),console.log("Sound effect loaded: "+o))}))}));for(var o=function(){var o=1===i?"perfect":"perfect"+i;f.loadRes("audition/audio/sfx/"+o,a,(function(i,t){i?console.error("Failed to load perfect sound effect: "+o,i):(e.soundEffects.set(o,t),console.log("Perfect sound effect loaded: "+o))}))},i=1;i<=5;i++)o()},n.loadSong=function(e){var o=this;return new Promise((function(i,t){console.log("Loading song: "+e);var s=o.musicFolder+e;f.loadRes(s,a,(function(e,u){if(e)return console.error("Failed to load song: "+s,e),void t(e);o.musicSource.clip=u,console.log("Song loaded: "+s),i()}))}))},n.playSong=function(e){void 0===e&&(e=0),this.musicSource.clip?(this.musicSource.currentTime=e/1e3,this.startTime=Date.now()-e,this.isPaused=!1,this.musicSource.play(),console.log("Playing song from "+e+"ms")):console.error("No song loaded")},n.pauseSong=function(){this.musicSource.playing&&(this.musicSource.pause(),this.isPaused=!0,this.pauseTime=this.getCurrentTime(),console.log("Song paused at "+this.pauseTime+"ms"))},n.resumeSong=function(){this.isPaused&&(this.musicSource.play(),this.startTime=Date.now()-this.pauseTime,this.isPaused=!1,console.log("Song resumed from "+this.pauseTime+"ms"))},n.stopSong=function(){this.musicSource.stop(),this.isPaused=!1,console.log("Song stopped")},n.getCurrentTime=function(){return this.isPaused?this.pauseTime:this.musicSource.playing?1e3*this.musicSource.currentTime:0},n.getDuration=function(){return this.musicSource.clip.getDuration()},n.playSound=function(e){var o=this.soundEffects.get(e);o?this.sfxSource.playOneShot(o):console.warn("Sound effect not found: "+e)},n.setMusicVolume=function(e){this.musicVolume=Math.max(0,Math.min(1,e)),this.musicSource.volume=this.musicVolume},n.setSfxVolume=function(e){this.sfxVolume=Math.max(0,Math.min(1,e)),this.sfxSource.volume=this.sfxVolume},n.getMusicVolume=function(){return this.musicVolume},n.getSfxVolume=function(){return this.sfxVolume},n.setAudioOffset=function(e){this.audioOffset=e,console.log("Audio offset set to "+e+"ms")},n.getAudioOffset=function(){return this.audioOffset},n.calibrateAudioOffset=function(){console.log("Audio calibration initiated"),this.audioOffset=-50,console.log("Audio calibrated with offset: "+this.audioOffset+"ms")},u(o,null,[{key:"instance",get:function(){return this._instance}}]),o}(l))._instance=null,b=o((y=T).prototype,"musicFolder",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"audition/music/"}}),x=o(y.prototype,"musicSource",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(y.prototype,"sfxSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(y.prototype,"audioOffset",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=o(y.prototype,"musicVolume",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),w=o(y.prototype,"sfxVolume",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=y))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionBeatmap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionNotePool.ts"],(function(t){var e,n,r,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component},function(t){a=t.AuditionNoteType}],execute:function(){var i;n._RF.push({},"b36e0MayvRDhqtAvXGvTrjp","AuditionBeatmap",void 0);var u=r.ccclass;r.property,t("AuditionBeatmap",u("AuditionBeatmap")(i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).currentBeatmap=null,e}e(n,t);var r=n.prototype;return r.generateBeatmap=function(t,e,n,r){var o=this;return new Promise((function(a){for(var i=[],u=6e4/e*r,c=1e3,s=n-2e3;c<s;)i.push({time:c,type:2}),c+=u;var p={songId:t,bpm:e,offset:0,notes:i,difficulty:2,creator:"System",version:"1.0"};o.currentBeatmap=p,console.log("Beatmap generated successfully: "+p.songId),a(p)}))},r.getCurrentBeatmap=function(){return this.currentBeatmap},r.getNotesInTimeRange=function(t,e){return this.currentBeatmap&&this.currentBeatmap.notes?this.currentBeatmap.notes.filter((function(n){return n.time>=t&&n.time<=e})):[]},r.getNotesToSpawn=function(t,e){return this.getNotesInTimeRange(t,t+e)},r.getTotalNoteCount=function(){var t;return(null==(t=this.currentBeatmap)||null==(t=t.notes)?void 0:t.length)||0},n.getNoteTypeFromBeatNote=function(t){return a.SPACE},n}(o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionBeatSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionAudioManager.ts","./AuditionInputHandler.ts","./AuditionNotePool.ts","./AuditionNote.ts"],(function(e){var t,i,n,o,s,a,r,u,l,c,p,h,d,y,g,m,f,S,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass},function(e){a=e.cclegacy,r=e._decorator,u=e.Node,l=e.Sprite,c=e.UIOpacity,p=e.CCFloat,h=e.Vec3,d=e.Component},function(e){y=e.AuditionAudioManager},function(e){g=e.AuditionInputHandler,m=e.AuditionInputType},function(e){f=e.AuditionNotePool,S=e.AuditionNoteType},function(e){b=e.AuditionNote}],execute:function(){var L,v,N,I,E,P,B,w,q,T,C,M,F,z,D,A,V,W,G,x,k,H,O,R,X,_,Z,j,U,J,K;a._RF.push({},"e8f01vW2ehGAbebHt2Bdk2+","AuditionBeatSystem",void 0);var Q=r.ccclass,Y=r.property,$=e("AuditionAccuracyRating",function(e){return e[e.PERFECT=0]="PERFECT",e[e.GOOD=1]="GOOD",e[e.MISS=2]="MISS",e}({})),ee=e("LevelSequenceType",function(e){return e.OFF="off",e.LEVEL="lv",e.FINISH="finish",e}({}));e("AuditionBeatSystem",(L=Q("AuditionBeatSystem"),v=Y({type:u,group:{name:"Visual Elements",id:"visual"}}),N=Y({type:u,group:{name:"Visual Elements",id:"visual"}}),I=Y({type:u,group:{name:"Visual Elements",id:"visual"}}),E=Y({type:u,group:{name:"Visual Elements",id:"visual"}}),P=Y({type:l,group:{name:"Visual Elements",id:"visual"}}),B=Y({type:c,group:{name:"Visual Elements",id:"visual"}}),w=Y({group:{name:"Beat Settings",id:"beat"}}),q=Y({group:{name:"Beat Settings",id:"beat"}}),T=Y({group:{name:"Timing Windows",id:"timing"}}),C=Y({group:{name:"Timing Windows",id:"timing"}}),M=Y({group:{name:"Timing Windows",id:"timing"}}),F=Y({type:f,group:{name:"Note Settings",id:"notes"}}),z=Y({type:u,group:{name:"Note Settings",id:"notes"}}),D=Y({type:p,group:{name:"Note Settings",id:"notes"}}),L((W=t((V=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"movingBeatNote",W,o(t)),n(t,"targetZone",G,o(t)),n(t,"startNode",x,o(t)),n(t,"endNode",k,o(t)),n(t,"heartBeatSprite",H,o(t)),n(t,"opacityGameplay",O,o(t)),n(t,"bpm",R,o(t)),n(t,"beatsPerLoop",X,o(t)),n(t,"perfectWindow",_,o(t)),n(t,"goodWindow",Z,o(t)),n(t,"missWindow",j,o(t)),n(t,"notePool",U,o(t)),n(t,"nodeContainer",J,o(t)),n(t,"nodeDistance",K,o(t)),t.isPlaying=!1,t.timingWindows=new Map,t.currentLoop=0,t.lastBeatTime=0,t.songDuration=0,t.scoringCallback=null,t.startX=-500,t.endX=500,t.targetX=0,t.noteSpeed=0,t.noteDelay=0,t.currentLevel=0,t.currentLevelLoop=0,t.requiredNotes=0,t.currentNotes=0,t.isInDelay=!1,t.delayLoops=0,t.levelSequences=[],t.currentSequenceIndex=0,t.penaltyPatternLoops=0,t.activeNoteIds=[],t.noteSequence=[],t.currentSequenceNotes=[],t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.timingWindows.set($.PERFECT,this.perfectWindow),this.timingWindows.set($.GOOD,this.goodWindow),this.timingWindows.set($.MISS,this.missWindow),this.startX=this.startNode.position.x,this.endX=this.endNode.position.x,this.targetX=this.targetZone.position.x,this.updateSpeed(),this.movingBeatNote?(this.movingBeatNote.position=new h(this.startX,this.startNode.position.y,this.startNode.position.z),this.heartBeatSprite&&(this.heartBeatSprite.node.scale=new h(1,1,1))):console.error("No note assigned to AuditionBeatSystem!")},a.updateSpeed=function(){var e=this.endX-this.startX,t=6e4/this.bpm/1e3*this.beatsPerLoop;this.noteSpeed=e/t;var i=this.endX-this.targetX;this.noteDelay=i/e*t},a.getCurrentTime=function(){return y.instance.getCurrentTime()},a.update=function(e){if(this.isPlaying&&this.movingBeatNote&&y.instance){var t=this.getCurrentTime(),i=6e4/this.bpm,n=i*this.beatsPerLoop;t-this.lastBeatTime>=n+this.missWindow&&(this.lastBeatTime=Math.round(t/n)*n,this.currentLoop++,this.updateLevelSystem()),this.updateBeatNoteMoving(t),this.updateHeartBeatEffect(t,i,n)}},a.initializeLevelSequences=function(){this.levelSequences=[{type:ee.OFF,loop:3,notes:0},{type:ee.LEVEL,loop:1,notes:1},{type:ee.LEVEL,loop:1,notes:2},{type:ee.LEVEL,loop:1,notes:3},{type:ee.LEVEL,loop:1,notes:4},{type:ee.LEVEL,loop:1,notes:5},{type:ee.LEVEL,loop:4,notes:6,delay:1},{type:ee.LEVEL,loop:4,notes:7,delay:1},{type:ee.LEVEL,loop:4,notes:8,delay:1},{type:ee.LEVEL,loop:4,notes:9,delay:1},{type:ee.FINISH,loop:1,notes:9},{type:ee.OFF,loop:4,notes:0}]},a.startBeatSystem=function(e,t,i){var n=this;if(this.movingBeatNote){this.bpm=e,this.updateSpeed(),this.isPlaying=!0,this.songDuration=t,this.initializeLevelSequences(),this.currentSequenceIndex=0,this.currentLevel=0,this.currentNotes=0,this.penaltyPatternLoops=0,this.activeNoteIds=[],this.noteSequence=[];var o=y.instance;this.lastBeatTime=o?o.getCurrentTime():Date.now(),this.currentLoop=0;var s=g.instance;s&&(s.registerInputCallback(m.SPACE,(function(e){return n.evaluateInput(e)})),s.registerInputCallback(m.LEFT,(function(e){return n.handleNoteInput(S.LEFT,e)})),s.registerInputCallback(m.RIGHT,(function(e){return n.handleNoteInput(S.RIGHT,e)}))),console.log("Beat system started with level sequences"),this.isInDelay=!1,this.delayLoops=0,this.currentLevelLoop=0,this.updateGameplayInteractableVisualize()}},a.updateLevelSystem=function(){var e=this;if(this.noteSequence.length>0&&this.handleMiss(),this.clearLastNotes(),this.isInDelay)return this.delayLoops--,void(this.delayLoops<=0&&(this.isInDelay=!1));var t=function(t){e.isInPenalty&&e.penaltyPatternLoops--,e.startNextPattern(),t.delay&&(e.delayLoops=t.delay,e.isInDelay=!0)},i=this.levelSequences[this.currentSequenceIndex];if(this.currentLevelLoop>=i.loop){this.currentSequenceIndex++,this.currentSequenceIndex>=this.levelSequences.length&&(this.currentSequenceIndex=0,this.penaltyPatternLoops=0);var n=this.levelSequences[this.currentSequenceIndex];n.type===ee.OFF?(this.delayLoops=n.loop,this.isInDelay=!0):n.type===ee.LEVEL?(this.currentLevel=n.notes,this.currentLevelLoop=0,t(n)):n.type===ee.FINISH&&this.handleFinishSequence()}else this.currentLevelLoop++,i.type===ee.LEVEL&&t(i)},a.startNextPattern=function(){var e=this.levelSequences[this.currentSequenceIndex];this.requiredNotes=e.notes,this.currentNotes=0,this.noteSequence=[],this.currentSequenceNotes=[];for(var t=-this.nodeDistance*this.requiredNotes/2+this.nodeDistance/2,i=0;i<this.requiredNotes;i++){var n=Math.random()<.5?S.LEFT:S.RIGHT;this.noteSequence.push(n);var o=this.notePool.getNote(n),s=o.id,a=o.node;if(a.parent=this.nodeContainer,a){this.activeNoteIds.push(s);var r=a.getComponent(b);r.initialize(n,this.lastBeatTime,s),this.currentSequenceNotes.push(r),a.setPosition(new h(t+i*this.nodeDistance,0,0))}}this.currentLevelLoop++,this.updateGameplayInteractableVisualize()},a.handleFinishSequence=function(){console.log("Finish sequence started")},a.handleNoteInput=function(e,t){this.isPlaying&&!this.isInPenalty&&(this.currentNotes>=this.noteSequence.length||(this.currentNotes<this.noteSequence.length&&this.noteSequence[this.currentNotes]===e?(this.currentSequenceNotes[this.currentNotes].playHitEffect($.PERFECT),this.currentNotes++):(this.currentNotes=0,this.currentSequenceNotes.forEach((function(e){return e.reset()})))))},a.evaluateInput=function(e){if(this.isPlaying&&!this.isInPenalty&&(0!=this.noteSequence.length&&y.instance)){var t,i=this.getCurrentTime(),n=6e4/this.bpm*this.beatsPerLoop,o=(i-this.lastBeatTime)/n,s=Math.abs(1-o);t=s<=this.timingWindows.get($.PERFECT)/n?$.PERFECT:s<=this.timingWindows.get($.GOOD)/n?$.GOOD:$.MISS,this.isMiss()||t==$.MISS?this.handleMiss():this.handleScored(t)}},a.clearLastNotes=function(){var e=this;this.activeNoteIds.forEach((function(t){return e.notePool.recycleNote(t)})),this.activeNoteIds=[],this.noteSequence=[],this.currentNotes=0},a.handleMiss=function(){this.isInPenalty||(this.penaltyPatternLoops=2,this.scoringCallback&&this.scoringCallback($.MISS),this.updateGameplayInteractableVisualize())},a.handleScored=function(e){this.clearLastNotes(),this.scoringCallback&&this.scoringCallback(e)},a.isMiss=function(){return this.currentNotes<this.requiredNotes},a.updateBeatNoteMoving=function(e){var t=(e-this.lastBeatTime)/1e3-this.noteDelay,i=this.startX;i=t>0?this.startX+this.noteSpeed*t:this.endX+this.noteSpeed*t,this.movingBeatNote.position=new h(i,this.movingBeatNote.position.y,this.movingBeatNote.position.z)},a.updateHeartBeatEffect=function(e,t,i){if(this.heartBeatSprite){var n=e-this.lastBeatTime,o=e%t,s=n>i-.5*t&&n<i+.5*t?Math.max(1,2*(1-o/t)):1;this.heartBeatSprite.node.setScale(new h(s,1,1));var a=Math.max(.5,1-o/t),r=this.heartBeatSprite.color.clone();r.a=255*a,this.heartBeatSprite.color=r}},a.updateGameplayInteractableVisualize=function(){if(this.opacityGameplay){var e=!this.isInPenalty&&this.isPlaying;this.opacityGameplay.opacity=e?255:50}},a.stopBeatSystem=function(){var e=this;this.isPlaying=!1;var t=g.instance;t&&(t.unregisterInputCallback(m.SPACE,(function(t){return e.evaluateInput(t)})),t.unregisterInputCallback(m.LEFT,(function(t){return e.handleNoteInput(S.LEFT,t)})),t.unregisterInputCallback(m.RIGHT,(function(t){return e.handleNoteInput(S.RIGHT,t)}))),console.log("Beat system stopped")},a.setScoreCallback=function(e){this.scoringCallback=e},a.getBPM=function(){return this.bpm},a.setBPM=function(e){this.bpm=Math.max(60,Math.min(200,e)),console.log("BPM set to "+this.bpm)},a.getBeatsPerLoop=function(){return this.beatsPerLoop},a.setBeatsPerLoop=function(e){this.beatsPerLoop=Math.max(1,Math.min(8,e)),console.log("Beats per loop set to "+this.beatsPerLoop)},s(t,[{key:"isInPenalty",get:function(){return this.penaltyPatternLoops>0}}]),t}(d)).prototype,"movingBeatNote",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(V.prototype,"targetZone",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(V.prototype,"startNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(V.prototype,"endNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(V.prototype,"heartBeatSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(V.prototype,"opacityGameplay",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(V.prototype,"bpm",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),X=t(V.prototype,"beatsPerLoop",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),_=t(V.prototype,"perfectWindow",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Z=t(V.prototype,"goodWindow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),j=t(V.prototype,"missWindow",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),U=t(V.prototype,"notePool",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(V.prototype,"nodeContainer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(V.prototype,"nodeDistance",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 65}}),A=V))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionCharacterAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionBeatSystem.ts","./AuditionCharacterAnimationData.ts","./resourceUtil.ts"],(function(t){var n,i,e,a,o,r,c,l,s,u,p,m,f,h,d,y,A,S,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.asyncToGenerator,r=t.regeneratorRuntime,c=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,s=t._decorator,u=t.Node,p=t.Animation,m=t.Component,f=t.Prefab,h=t.instantiate,d=t.SkeletalAnimation},function(t){y=t.AuditionAccuracyRating},function(t){A=t.AuditionCharacterAnimationData,S=t.SpecialStateType},function(t){g=t.resourceUtil}],execute:function(){var D,b,v,C,T,N,w,z,R,H;l._RF.push({},"1e7b6TmLYNOJqHH2ZZSRUXY","AuditionCharacterAnimation",void 0);var _=s.ccclass,I=s.property;t("AuditionCharacterAnimation",(D=_("AuditionCharacterAnimation"),b=I(u),v=I(p),D((N=n((T=function(t){function n(){for(var n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,e(n,"character",N,a(n)),e(n,"animationController",w,a(n)),e(n,"transitionDuration",z,a(n)),e(n,"comboThreshold",R,a(n)),e(n,"inputHistorySize",H,a(n)),n.currentAnimation="",n.currentCombo=0,n.isPlayingSpecial=!1,n.inputHistory=[],n.isMale=!0,n}i(n,t);var l=n.prototype;return l.loadDanceData=function(t){!this.animationController&&this.character&&(this.animationController=this.character.getComponent(p)),A.initialize();var n=t+"_Dance";A.loadDanceData(n),this.playSpecialAnimation(S.FIRST_STAND)},l.testLoadDanceAnim=function(){this.loadDanceAnim("Breakdance")},l.loadDanceAnim=function(){var t=o(r().mark((function t(n){var i=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){g.loadRes("audition/anims/"+n,f,(function(a,o){if(a)return console.error("Failed to load character animation prefab:",a),void e(a);try{var r=h(o),l=r.getComponent(d);if(!l)return console.error("No SkeletalAnimation component found in prefab: "+n),i.node.destroy(),void e(new Error("Missing SkeletalAnimation component"));var s=l.clips;if(!s||0===s.length)return console.error("No animation clips found in prefab: "+n),i.node.destroy(),void e(new Error("No animation clips found"));if(i.animationController){for(var u,p=c(s);!(u=p()).done;){var m=u.value;m&&(i.animationController.getState(m.name)||i.animationController.createState(m,m.name))}s[0]&&i.animationController.play(s[0].name)}else console.error("Animation controller not initialized"),e(new Error("Animation controller not initialized"));r.destroy(),console.log("Successfully loaded and setup animation prefab: "+n),t()}catch(t){console.error("Error processing animation prefab:",t),e(t)}}))})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),l.setGender=function(t){this.isMale=t},l.startDanceSequence=function(){var t=this,n=this.isMale?S.BOY_START:S.GIRL_START;this.playSpecialAnimation(n,(function(){t.playSpecialAnimation(S.DANCE_START,(function(){t.playNextDanceState()}))}))},l.reactToInput=function(t,n){this.currentCombo=n,this.recordInput(t),this.isPlayingSpecial||(t!==y.MISS?this.playNextDanceState():this.playMissAnimation())},l.playNextDanceState=function(){var t=A.getDanceState(this.currentAnimation);if(t){var n=t.transitions[0];n&&this.playAnimation(n.destState)}else{var i=A.getDefaultState();this.playAnimation(i)}},l.playSpecialAnimation=function(t,n){var i=A.getSpecialState(t);i?(this.isPlayingSpecial=!0,this.playAnimation(i.motion,i.speed,n)):console.error("Special animation state not found: "+t)},l.playMissAnimation=function(){},l.playAnimation=function(t,n,i){if(void 0===n&&(n=1),this.animationController){var e=this.animationController.getState(t);e?(e.speed=n,e.play(),i&&e.on("finished",i,this)):console.error("Animation state not found: "+t)}},l.recordInput=function(t){this.inputHistory.push({accuracyRating:t,timestamp:Date.now()}),this.inputHistory.length>this.inputHistorySize&&this.inputHistory.shift()},l.endDanceSequence=function(t){var n,i=this;n=this.isMale?t?S.END2:S.END1:t?S.END4:S.END3,this.playSpecialAnimation(n,(function(){i.playSpecialAnimation(S.LAST_STAND)}))},l.isPlayingSpecialAnimation=function(){return this.isPlayingSpecial},l.getCurrentAnimation=function(){return this.currentAnimation},l.resetToIdle=function(){this.currentCombo=0,this.isPlayingSpecial=!1,this.inputHistory=[],this.playSpecialAnimation(S.FIRST_STAND)},n}(m)).prototype,"character",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(T.prototype,"animationController",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(T.prototype,"transitionDuration",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),R=n(T.prototype,"comboThreshold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),H=n(T.prototype,"inputHistorySize",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),C=T))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionCharacterAnimationData.ts",["cc","./resourceUtil.ts"],(function(t){var e,i,s,a;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.TextAsset},function(t){a=t.resourceUtil}],execute:function(){var n,o;e._RF.push({},"5d9e2TkgsBGdK4Et+YVimdr","AuditionCharacterAnimationData",void 0);var r=i.ccclass,c=(i.property,t("AnimationStateType",function(t){return t[t.SPECIAL=0]="SPECIAL",t[t.DANCE=1]="DANCE",t}({})),t("SpecialStateType",function(t){return t.FIRST_STAND="first_stand",t.LAST_STAND="last_stand",t.BOY_START="boy_start",t.GIRL_START="girl_start",t.DANCE_START="dance_start",t.DANCE_END="dance_end",t.END1="end1",t.END2="end2",t.END3="end3",t.END4="end4",t.MISS="miss",t}({})));t("AuditionCharacterAnimationData",r("AuditionCharacterAnimationData")(((o=function(){function t(){}return t.initialize=function(){this.specialStates.clear(),this.danceStates.clear(),this.currentSequence=[],this.initializeSpecialStates()},t.initializeSpecialStates=function(){this.specialStates.set(c.FIRST_STAND,{speed:1,motion:"first_stand",transitions:[{srcState:"first_stand",destState:"boy_start",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.LAST_STAND,{speed:1,motion:"last_stand",transitions:[],isLooping:!0}),this.specialStates.set(c.BOY_START,{speed:1,motion:"boy_start",transitions:[{srcState:"boy_start",destState:"dance_start",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.GIRL_START,{speed:1,motion:"girl_start",transitions:[{srcState:"girl_start",destState:"dance_start",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.DANCE_START,{speed:1,motion:"dance_start",transitions:[{srcState:"dance_start",destState:"default_dance",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.DANCE_END,{speed:1,motion:"dance_end",transitions:[],isLooping:!1}),this.specialStates.set(c.END1,{speed:1,motion:"boy_lose",transitions:[{srcState:"boy_lose",destState:"last_stand",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.END2,{speed:1,motion:"boy_win",transitions:[{srcState:"boy_win",destState:"last_stand",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.END3,{speed:1,motion:"girl_lose",transitions:[{srcState:"girl_lose",destState:"last_stand",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.END4,{speed:1,motion:"girl_win",transitions:[{srcState:"girl_win",destState:"last_stand",transitionDuration:.2,transitionOffset:0,exitTime:.9}],isLooping:!1}),this.specialStates.set(c.MISS,{speed:1,motion:"miss",transitions:[],isLooping:!1})},t.loadDanceData=function(t){var e=this;a.loadRes("audition/dances/"+t,s,(function(t,i){t?console.error("Failed to load dance data:",t):e.parseDanceData(i)}))},t.parseDanceData=function(t){for(var e=t.split("\n"),i="",s=[],a=0;a<e.length;a++){var n=e[a].trim();if(n)if(n.startsWith("DefaultState:"))this.defaultState=n.split(":")[1].trim();else if(n.startsWith("[")&&n.endsWith("]"))i&&(this.saveState(i,s),s=[]),i=n.slice(1,-1).trim();else if(i)if(n.startsWith("Speed:")){var o=parseFloat(n.split(":")[1].trim());this.updateStateSpeed(i,o)}else if(n.startsWith("Motion:")){var r=n.split(":")[1].trim();this.updateStateMotion(i,r)}else if(n.startsWith("Transition:")){var c=this.parseTransition(e,a);c&&s.push(c)}else if(n.startsWith("IsLooping:")){var S="true"===n.split(":")[1].trim().toLowerCase();this.updateStateLooping(i,S)}else if(n.startsWith("NextState:")){var d=n.split(":")[1].trim();this.updateStateNext(i,d)}}i&&this.saveState(i,s),this.buildDanceSequence(),console.log("Loaded "+this.danceStates.size+" dance states")},t.buildDanceSequence=function(){this.currentSequence=[];for(var t=this.defaultState;t;){this.currentSequence.push(t);var e=this.danceStates.get(t);if(!e||!e.nextState)break;t=e.nextState}},t.parseTransition=function(t,e){for(var i={srcState:"",destState:"",transitionDuration:0,transitionOffset:0,exitTime:0},s=e+1;s<t.length&&t[s].trim().startsWith("\t");){var a=t[s].trim();if(a.startsWith("SrcState:"))i.srcState=a.split(":")[1].trim();else if(a.startsWith("DestState:"))i.destState=a.split(":")[1].trim();else if(a.startsWith("TransitionDuration:"))i.transitionDuration=parseFloat(a.split(":")[1].trim());else if(a.startsWith("TransitionOffset:"))i.transitionOffset=parseFloat(a.split(":")[1].trim());else if(a.startsWith("ExitTime:"))i.exitTime=parseFloat(a.split(":")[1].trim());else if(a.startsWith("Condition:")){var n=a.split(":")[1].trim();i.condition=this.parseCondition(n)}s++}return i},t.parseCondition=function(t){return new Function("combo","accuracy","return "+t)},t.saveState=function(t,e){var i=this.danceStates.get(t)||{speed:1,motion:t,transitions:[],isLooping:!1};i.transitions=e,this.danceStates.set(t,i)},t.updateStateSpeed=function(t,e){var i=this.danceStates.get(t)||{speed:1,motion:t,transitions:[],isLooping:!1};i.speed=e,this.danceStates.set(t,i)},t.updateStateMotion=function(t,e){var i=this.danceStates.get(t)||{speed:1,motion:t,transitions:[],isLooping:!1};i.motion=e,this.danceStates.set(t,i)},t.updateStateLooping=function(t,e){var i=this.danceStates.get(t)||{speed:1,motion:t,transitions:[],isLooping:!1};i.isLooping=e,this.danceStates.set(t,i)},t.updateStateNext=function(t,e){var i=this.danceStates.get(t)||{speed:1,motion:t,transitions:[],isLooping:!1};i.nextState=e,this.danceStates.set(t,i)},t.getDanceState=function(t){return this.danceStates.get(t)||null},t.getDefaultState=function(){return this.defaultState},t.getSpecialState=function(t){return this.specialStates.get(t)||null},t.getDanceSequence=function(){return[].concat(this.currentSequence)},t}()).specialStates=new Map,o.danceStates=new Map,o.defaultState="",o.currentSequence=[],n=o))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionGameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,s,o,i,a,l,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.extends,i=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.sys,g=e.Component}],execute:function(){var h,p,u,d;a._RF.push({},"b57afIZmvFIUbHEffVdkgkG","AuditionGameManager",void 0);var f=l.ccclass,S=l.property,v=function(e){return e[e.MENU=0]="MENU",e[e.SONG_SELECTION=1]="SONG_SELECTION",e[e.LOADING=2]="LOADING",e[e.PLAYING=3]="PLAYING",e[e.RESULTS=4]="RESULTS",e}(v||{});e("AuditionGameManager",f("AuditionGameManager")(((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"currentScene",u,s(t)),t.gameState=v.MENU,t.currentSong=null,t.playerProgress={unlockedSongs:["song0211"],highScores:{},experience:0,patternComplexityLevel:0,unlockedPatternLevels:[0],finishMovesUnlocked:!1,patternsCompleted:{},finishMovesCompleted:0},t.patternLevelExpThresholds=[0,500,1500,3e3,5e3,8e3,12e3],t.finishMoveExpThreshold=2e3,t.lastExperienceGain=0,t.lastPatternStats={completed:0,skipped:0,finishMoves:0},t.availableSongs=[{id:"song0211",title:"삐딱하게 (Crooked)",artist:"G-Dragon",difficulty:3,bpm:130,audioPath:"song0211",previewStart:3e4,previewEnd:45e3}],t}r(t,e);var a=t.prototype;return a.onLoad=function(){null===t._instance?(t._instance=this,this.initGame()):this.node.destroy()},a.initGame=function(){this.loadProgress(),console.log("Audition Game Manager initialized"),this.startSong("song0211")},a.changeScene=function(e){console.log("Changing scene to: "+e),this.currentScene=e},a.startSong=function(e){this.gameState=v.LOADING,console.log("Starting song: "+e);var t=this.availableSongs.find((function(t){return t.id===e}));t?(this.currentSong=t,this.gameState=v.PLAYING,this.changeScene("AuditionGameplay")):console.error("Song with id "+e+" not found")},a.endSong=function(e,t,r){if(void 0===r&&(r={completed:0,skipped:0,finishMoves:0}),this.currentSong){this.gameState=v.RESULTS,console.log("Song ended. Score: "+e+", Max Combo: "+t+", Patterns: "+r.completed+", Finish Moves: "+r.finishMoves),(!this.playerProgress.highScores[this.currentSong.id]||e>this.playerProgress.highScores[this.currentSong.id])&&(this.playerProgress.highScores[this.currentSong.id]=e,console.log("New high score for "+this.currentSong.title+": "+e)),this.lastPatternStats=r,this.playerProgress.patternsCompleted[this.currentSong.id]||(this.playerProgress.patternsCompleted[this.currentSong.id]=0),this.playerProgress.patternsCompleted[this.currentSong.id]+=r.completed,this.playerProgress.finishMovesCompleted+=r.finishMoves;var n=.5*this.currentSong.difficulty,s=Math.floor(.01*e*n),o=5*r.completed*n,i=20*r.finishMoves;this.lastExperienceGain=s+o+i,this.addExperience(this.lastExperienceGain),this.checkPatternLevelUnlocks(),this.saveProgress(),this.changeScene("AuditionResults")}else console.error("No song is currently active")},a.checkPatternLevelUnlocks=function(){for(var e=0;e<this.patternLevelExpThresholds.length;e++){var t=-1!==this.playerProgress.unlockedPatternLevels.indexOf(e);this.playerProgress.experience>=this.patternLevelExpThresholds[e]&&!t&&(this.playerProgress.unlockedPatternLevels.push(e),console.log("Unlocked pattern complexity level "+e+"!"),e>this.playerProgress.patternComplexityLevel&&(this.playerProgress.patternComplexityLevel=e))}this.playerProgress.experience>=this.finishMoveExpThreshold&&!this.playerProgress.finishMovesUnlocked&&(this.playerProgress.finishMovesUnlocked=!0,console.log("Finish moves unlocked!"))},a.getPatternComplexityLevel=function(){return this.playerProgress.patternComplexityLevel},a.setPatternComplexityLevel=function(e){return-1!==this.playerProgress.unlockedPatternLevels.indexOf(e)?(this.playerProgress.patternComplexityLevel=e,this.saveProgress(),console.log("Pattern complexity level set to "+e),!0):(console.warn("Pattern complexity level "+e+" is not unlocked"),!1)},a.getUnlockedPatternLevels=function(){return[].concat(this.playerProgress.unlockedPatternLevels)},a.areFinishMovesUnlocked=function(){return this.playerProgress.finishMovesUnlocked},a.getPatternComplexityValue=function(e){return e+3},a.getLastPatternStats=function(){return o({},this.lastPatternStats)},a.getTotalPatternsCompleted=function(){var e=0;for(var t in this.playerProgress.patternsCompleted)e+=this.playerProgress.patternsCompleted[t];return e},a.getTotalFinishMovesCompleted=function(){return this.playerProgress.finishMovesCompleted},a.getCurrentSong=function(){return this.currentSong},a.getHighScore=function(e){return this.playerProgress.highScores[e]||0},a.getAvailableSongs=function(){return this.availableSongs},a.getUnlockedSongs=function(){return this.playerProgress.unlockedSongs},a.isSongUnlocked=function(e){return-1!==this.playerProgress.unlockedSongs.indexOf(e)},a.unlockSong=function(e){this.isSongUnlocked(e)||(this.playerProgress.unlockedSongs.push(e),this.saveProgress(),console.log("Song unlocked: "+e))},a.getExperience=function(){return this.playerProgress.experience},a.addExperience=function(e){this.playerProgress.experience+=e,this.saveProgress(),console.log("Added "+e+" experience. Total: "+this.playerProgress.experience)},a.getLastExperienceGain=function(){return this.lastExperienceGain},a.getGameState=function(){return this.gameState},a.loadProgress=function(){var e=c.localStorage.getItem("auditionGameProgress");if(e)try{this.playerProgress=JSON.parse(e),console.log("Player progress loaded successfully")}catch(e){console.error("Failed to parse saved progress:",e)}},a.saveProgress=function(){try{c.localStorage.setItem("auditionGameProgress",JSON.stringify(this.playerProgress)),console.log("Player progress saved successfully")}catch(e){console.error("Failed to save progress:",e)}},i(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(g))._instance=null,u=t((p=d).prototype,"currentScene",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"AuditionMainMenu"}}),h=p))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionGameplayController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionGameManager.ts","./AuditionAudioManager.ts","./AuditionUIManager.ts","./AuditionBeatSystem.ts","./AuditionScoringSystem.ts","./AuditionCharacterAnimation.ts"],(function(t){var e,n,i,o,a,s,r,u,c,l,m,p,g,h,S,d,y,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Button,u=t.Node,c=t.ProgressBar,l=t.director,m=t.Component},function(t){p=t.AuditionGameManager},function(t){g=t.AuditionAudioManager},function(t){h=t.AuditionUIManager,S=t.FeedbackType},function(t){d=t.AuditionBeatSystem,y=t.AuditionAccuracyRating},function(t){f=t.AuditionScoringSystem},function(t){b=t.AuditionCharacterAnimation}],execute:function(){var A,B,C,v,G,P,I,M,D,E,T,R,k,w,N,L,z,F,U,x,O;a._RF.push({},"88430rgcWxFCqXyHcVl7nDY","AuditionGameplayController",void 0);var Y=function(t){return t[t.INIT=0]="INIT",t[t.PLAYING=1]="PLAYING",t[t.PAUSED=2]="PAUSED",t[t.GAME_OVER=3]="GAME_OVER",t}(Y||{}),_=s.ccclass,q=s.property;t("AuditionGameplayController",(A=_("AuditionGameplayController"),B=q(d),C=q(f),v=q(b),G=q(r),P=q(u),I=q(r),M=q(r),D=q(r),E=q(c),A((k=e((R=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"beatSystem",k,o(e)),i(e,"scoringSystem",w,o(e)),i(e,"characterAnimation",N,o(e)),i(e,"pauseButton",L,o(e)),i(e,"pauseMenu",z,o(e)),i(e,"resumeButton",F,o(e)),i(e,"restartButton",U,o(e)),i(e,"quitButton",x,o(e)),i(e,"songProgressBar",O,o(e)),e.gameState=Y.INIT,e.songStartTime=0,e.songDuration=0,e.notesProcessed=0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){},a.start=function(){h.instance.showGameplay(),this.setupButtonEvents(),this.scoringSystem&&(this.scoringSystem.reset(),this.scoringSystem.onScoreUpdate(this.updateScoreDisplay.bind(this)),this.scoringSystem.onComboUpdate(this.updateComboDisplay.bind(this))),this.characterAnimation&&this.characterAnimation.resetToIdle(),this.initGameplay()},a.initGameplay=function(){var t=this,e=p.instance,n=g.instance;if(e&&n&&this.beatSystem){var i=e.getCurrentSong();if(!i)return console.error("No song selected"),void e.changeScene("AuditionSongSelection");n.loadSong(i.audioPath).then((function(){return t.songDuration=1e3*n.getDuration(),t.songDuration})).then((function(){t.beatSystem.setScoreCallback(t.onScoringProcessed.bind(t)),t.startGameplay()})).catch((function(t){console.error("Failed to initialize gameplay:",t),e.changeScene("AuditionSongSelection")}))}else console.error("Required components not found")},a.startGameplay=function(){var t=p.instance.getCurrentSong();this.songStartTime=Date.now();var e=g.instance;e&&(this.songDuration=18e4),e.playSong(),this.beatSystem.startBeatSystem(t.bpm,this.songDuration),this.gameState=Y.PLAYING,console.log("Gameplay started")},a.setupButtonEvents=function(){this.pauseButton&&this.pauseButton.node.on(r.EventType.CLICK,this.onPauseButtonClicked,this),this.resumeButton&&this.resumeButton.node.on(r.EventType.CLICK,this.onResumeButtonClicked,this),this.restartButton&&this.restartButton.node.on(r.EventType.CLICK,this.onRestartButtonClicked,this),this.quitButton&&this.quitButton.node.on(r.EventType.CLICK,this.onQuitButtonClicked,this),this.pauseMenu&&(this.pauseMenu.active=!1)},a.update=function(t){if(this.gameState===Y.PLAYING){this.updateProgressBar();var e=g.instance;e&&0===e.getCurrentTime()&&this.songStartTime>0&&this.endGameplay()}},a.updateProgressBar=function(){if(this.songProgressBar&&!(this.songDuration<=0)){var t=g.instance;if(t){var e=t.getCurrentTime(),n=Math.min(1,e/this.songDuration);this.songProgressBar.progress=n,h.instance.updateProgress(n)}}},a.onScoringProcessed=function(t,e){var n;switch(this.notesProcessed++,this.scoringSystem.processNoteResult(t,e),this.characterAnimation.reactToInput(t,this.scoringSystem.getCombo()),t){case y.PERFECT:n=S.PERFECT;break;case y.GOOD:n=S.GOOD;break;case y.MISS:n=S.MISS;break;default:n=S.MISS}h.instance.showFeedback(n)},a.updateScoreDisplay=function(t){h.instance.updateScore(t)},a.updateComboDisplay=function(t){h.instance.updateCombo(t)},a.endGameplay=function(){this.gameState=Y.GAME_OVER;var t=g.instance;t&&t.stopSong(),this.beatSystem.stopBeatSystem();var e=this.scoringSystem.getScore(),n=this.scoringSystem.getMaxCombo(),i=this.scoringSystem.getAccuracyPercentage(),o=this.scoringSystem.getGrade(),a=this.scoringSystem.calculateExperiencePoints(),s=p.instance;s&&(s.endSong(e,n),s.addExperience(a)),h.instance.showResults(),h.instance.updateResults(e,i,n,o),console.log("Gameplay ended. Score: "+e+", Accuracy: "+i.toFixed(2)+"%, Max Combo: "+n+", Grade: "+o)},a.onPauseButtonClicked=function(){this.pauseGame()},a.onResumeButtonClicked=function(){this.resumeGame()},a.onRestartButtonClicked=function(){this.pauseMenu&&(this.pauseMenu.active=!1);var t=g.instance;t&&t.stopSong(),this.beatSystem.stopBeatSystem(),this.gameState=Y.INIT,l.loadScene(l.getScene().name)},a.onQuitButtonClicked=function(){var t=g.instance;t&&t.stopSong(),this.beatSystem.stopBeatSystem(),this.gameState=Y.INIT,p.instance.changeScene("AuditionSongSelection")},a.pauseGame=function(){if(this.gameState===Y.PLAYING){this.gameState=Y.PAUSED;var t=g.instance;t&&t.pauseSong(),this.pauseMenu&&(this.pauseMenu.active=!0)}},a.resumeGame=function(){if(this.gameState===Y.PAUSED){this.gameState=Y.PLAYING;var t=g.instance;t&&t.resumeSong(),this.pauseMenu&&(this.pauseMenu.active=!1)}},a.onDestroy=function(){var t=g.instance;t&&t.stopSong(),this.beatSystem&&this.beatSystem.stopBeatSystem()},e}(m)).prototype,"beatSystem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(R.prototype,"scoringSystem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(R.prototype,"characterAnimation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"pauseButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"pauseMenu",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"resumeButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(R.prototype,"restartButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(R.prototype,"quitButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(R.prototype,"songProgressBar",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=R))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionGameplayUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionInputHandler.ts","./AuditionBeatSystem.ts"],(function(t){var e,i,o,n,r,a,c,l,s,u,p,h,f,b,d,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Label,l=t.Node,s=t.Color,u=t.UIOpacity,p=t.tween,h=t.Vec3,f=t.Sprite,b=t.Animation,d=t.Component},function(t){y=t.AuditionInputType},function(t){g=t.AuditionAccuracyRating}],execute:function(){var v,m,C,w,B,I,P,D,F,L,z,k,S,M,N,A,E,T,R,x,H,G,U,O,_,q,V,W,j,J,K,Q,X,Y,Z,$,tt,et,it,ot,nt,rt,at;r._RF.push({},"13564WRJ8BHHoVT5R2hp2xb","AuditionGameplayUI",void 0);var ct=a.ccclass,lt=a.property;t("AuditionGameplayUI",(v=ct("AuditionGameplayUI"),m=lt(c),C=lt(c),w=lt(c),B=lt(l),I=lt(c),P=lt(l),D=lt([l]),F=lt(l),L=lt(l),z=lt(l),k=lt(c),S=lt(l),M=lt(l),N=lt(l),A=lt(s),E=lt(s),T=lt(s),R=lt(s),x=lt(s),H=lt(s),v((O=e((U=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"scoreLabel",O,n(e)),o(e,"comboLabel",_,n(e)),o(e,"multiplierLabel",q,n(e)),o(e,"accuracyFeedbackNode",V,n(e)),o(e,"accuracyLabel",W,n(e)),o(e,"patternDisplay",j,n(e)),o(e,"patternDots",J,n(e)),o(e,"patternProgressBar",K,n(e)),o(e,"syncPointIndicator",Q,n(e)),o(e,"finishMoveIndicator",X,n(e)),o(e,"finishMoveLabel",Y,n(e)),o(e,"leftButton",Z,n(e)),o(e,"rightButton",$,n(e)),o(e,"spaceButton",tt,n(e)),o(e,"leftButtonColor",et,n(e)),o(e,"rightButtonColor",it,n(e)),o(e,"spaceButtonColor",ot,n(e)),o(e,"perfectColor",nt,n(e)),o(e,"goodColor",rt,n(e)),o(e,"missColor",at,n(e)),e.currentSequence=[],e.currentProgress=0,e.activeFeedbackAnimation=null,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.resetUI()},r.resetUI=function(){this.updateScore(0),this.updateCombo(0),this.updateMultiplier(1),this.accuracyFeedbackNode&&(this.accuracyFeedbackNode.active=!1),this.clearPatternDisplay(),this.finishMoveIndicator&&(this.finishMoveIndicator.active=!1),this.resetButtons()},r.updateScore=function(t){this.scoreLabel&&(this.scoreLabel.string=t.toString())},r.updateCombo=function(t){this.comboLabel&&(t>0?(this.comboLabel.node.active=!0,this.comboLabel.string="Combo: "+t,this.pulseNode(this.comboLabel.node)):this.comboLabel.node.active=!1)},r.updateMultiplier=function(t){this.multiplierLabel&&(this.multiplierLabel.string="x"+t.toFixed(1),this.multiplierLabel.color=t>2?this.perfectColor:t>1.5?this.goodColor:s.WHITE)},r.showAccuracyFeedback=function(t){var e=this;if(this.accuracyFeedbackNode&&this.accuracyLabel){var i,o;switch(this.activeFeedbackAnimation&&this.activeFeedbackAnimation.stop(),t){case g.PERFECT:i="PERFECT",o=this.perfectColor;break;case g.GOOD:i="GOOD",o=this.goodColor;break;case g.MISS:i="MISS",o=this.missColor}this.accuracyLabel.string=i,this.accuracyLabel.color=o,this.accuracyFeedbackNode.active=!0;var n=this.accuracyFeedbackNode.scale.clone();this.accuracyFeedbackNode.setScale(0,0,1);var r=this.accuracyFeedbackNode.getComponent(u)||this.accuracyFeedbackNode.addComponent(u);r.opacity=255,this.activeFeedbackAnimation=p(this.accuracyFeedbackNode).to(.2,{scale:new h(1.2,1.2,1)}).to(.1,{scale:n}).delay(.5).to(.3,{scale:new h(.8,.8,1)}).parallel(p(r).to(.3,{opacity:0})).call((function(){e.accuracyFeedbackNode.active=!1,e.accuracyFeedbackNode.setScale(n)})).start()}},r.updatePatternDisplay=function(t){var e=this;if(this.patternDisplay){if(this.patternDisplay.active=!0,this.currentSequence=t,this.currentProgress=0,this.patternDots.forEach((function(i,o){var n=i.getComponent(f);o<t.length?(n.color=e.getColorForInput(t[o]),i.active=!0):i.active=!1})),this.syncPointIndicator&&(this.syncPointIndicator.active=!0,t.length>0&&t.length<=this.patternDots.length)){var i=this.patternDots[t.length-1].position;this.syncPointIndicator.setPosition(i.x+60,i.y,i.z)}this.updatePatternProgress(0,t.length)}},r.updatePatternProgress=function(t,e){if(this.patternProgressBar){this.currentProgress=t;var i=e>0?t/e:0,o=this.patternProgressBar.getComponent(f);o&&(o.fillRange=i);for(var n=0;n<this.patternDots.length;n++)if(n<this.currentSequence.length){var r=this.patternDots[n].getComponent(f);r.color=n<t?this.perfectColor:this.getColorForInput(this.currentSequence[n])}if(t===e&&this.syncPointIndicator){var a=this.syncPointIndicator.getComponent(f);a&&(a.color=this.perfectColor,this.pulseNode(this.syncPointIndicator))}}},r.clearPatternDisplay=function(){this.currentSequence=[],this.currentProgress=0,this.patternDisplay&&(this.patternDisplay.active=!1),this.syncPointIndicator&&(this.syncPointIndicator.active=!1),this.patternDots.forEach((function(t){t.active=!1}))},r.showButtonPress=function(t,e){var i=null;switch(t){case y.LEFT:i=this.leftButton;break;case y.RIGHT:i=this.rightButton;break;case y.SPACE:i=this.spaceButton}if(i){var o=i.getComponent(f);if(o){var n=o.color.clone();o.color=e?this.perfectColor:this.missColor;var r=i.scale.clone();p(i).to(.05,{scale:new h(.9*r.x,.9*r.y,r.z)}).to(.1,{scale:r}).call((function(){o.color=n})).start()}}},r.resetButtons=function(){if(this.leftButton){this.leftButton.setScale(1,1,1);var t=this.leftButton.getComponent(f);t&&(t.color=this.leftButtonColor)}if(this.rightButton){this.rightButton.setScale(1,1,1);var e=this.rightButton.getComponent(f);e&&(e.color=this.rightButtonColor)}if(this.spaceButton){this.spaceButton.setScale(1,1,1);var i=this.spaceButton.getComponent(f);i&&(i.color=this.spaceButtonColor)}},r.showFinishMoveEffect=function(){var t=this;if(this.finishMoveIndicator&&this.finishMoveLabel){this.finishMoveIndicator.active=!0,this.finishMoveLabel.string="FINISH MOVE!";var e=this.finishMoveIndicator.getComponent(b);e?e.play("finish_move_flash"):(this.pulseNode(this.finishMoveIndicator,1.5,.5),setTimeout((function(){t.finishMoveIndicator.active=!1}),3e3))}},r.getColorForInput=function(t){switch(t){case y.LEFT:return this.leftButtonColor;case y.RIGHT:return this.rightButtonColor;case y.SPACE:return this.spaceButtonColor;default:return s.WHITE}},r.pulseNode=function(t,e,i){if(void 0===e&&(e=1.2),void 0===i&&(i=.3),t){var o=t.scale.clone();p(t).to(i/2,{scale:new h(o.x*e,o.y*e,o.z)}).to(i/2,{scale:o}).start()}},r.showPatternSkipEffect=function(){var t=this;if(this.patternDisplay){var e=this.patternDisplay.getComponent(u)||this.patternDisplay.addComponent(u);e.opacity=255;var i=this.patternDisplay.position.clone();p(this.patternDisplay).to(.1,{position:new h(i.x+20,i.y,i.z)}).to(.1,{position:new h(i.x-200,i.y,i.z)}).parallel(p(e).to(.2,{opacity:0})).call((function(){t.patternDisplay.setPosition(i),t.patternDisplay.active=!1})).start()}},r.showPatternCompleteEffect=function(t){var e=this;if(void 0===t&&(t=!1),this.patternDisplay){t&&this.showFinishMoveEffect();var i=this.patternDisplay.getComponent(u)||this.patternDisplay.addComponent(u);i.opacity=255,p(i).to(.5,{opacity:0}).call((function(){e.patternDisplay.active=!1})).start()}},e}(d)).prototype,"scoreLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(U.prototype,"comboLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(U.prototype,"multiplierLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(U.prototype,"accuracyFeedbackNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(U.prototype,"accuracyLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(U.prototype,"patternDisplay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(U.prototype,"patternDots",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(U.prototype,"patternProgressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(U.prototype,"syncPointIndicator",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(U.prototype,"finishMoveIndicator",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(U.prototype,"finishMoveLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(U.prototype,"leftButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(U.prototype,"rightButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(U.prototype,"spaceButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(U.prototype,"leftButtonColor",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(79,195,247)}}),it=e(U.prototype,"rightButtonColor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,112,67)}}),ot=e(U.prototype,"spaceButtonColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,235,59)}}),nt=e(U.prototype,"perfectColor",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(120,255,120)}}),rt=e(U.prototype,"goodColor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,193,7)}}),at=e(U.prototype,"missColor",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(211,47,47)}}),G=U))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionInputHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,u,a,r,s,l,p,o,c,I;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,u=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,p=t.Input,o=t.input,c=t.KeyCode,I=t.Component}],execute:function(){var h,d,T,f,b,E,A,g,C,v;r._RF.push({},"3e57c37p+BC+q4zA+47ifrI","AuditionInputHandler",void 0);var y=s.ccclass,m=s.property,H=t("AuditionInputType",function(t){return t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.SPACE=2]="SPACE",t}({}));t("AuditionInputHandler",(h=y("AuditionInputHandler"),d=m(l),T=m(l),f=m(l),h(((v=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"leftInputArea",A,u(n)),i(n,"rightInputArea",g,u(n)),i(n,"spaceInputArea",C,u(n)),n.isInputEnabled=!0,n.inputCallbacks=new Map,n.lastInputTime=new Map,n.inputDebounceTime=100,n}e(n,t);var r=n.prototype;return r.onLoad=function(){null===n._instance?(n._instance=this,this.initialize()):this.node.destroy()},r.initialize=function(){this.inputCallbacks.set(H.LEFT,[]),this.inputCallbacks.set(H.RIGHT,[]),this.inputCallbacks.set(H.SPACE,[]),this.lastInputTime.set(H.LEFT,0),this.lastInputTime.set(H.RIGHT,0),this.lastInputTime.set(H.SPACE,0),this.registerTouchEvents(),this.registerKeyboardEvents(),console.log("Audition Input Handler initialized")},r.registerTouchEvents=function(){var t=this;this.leftInputArea&&this.leftInputArea.on(p.EventType.TOUCH_START,(function(n){t.isInputEnabled&&t.handleInput(H.LEFT)})),this.rightInputArea&&this.rightInputArea.on(p.EventType.TOUCH_START,(function(n){t.isInputEnabled&&t.handleInput(H.RIGHT)})),this.spaceInputArea&&this.spaceInputArea.on(p.EventType.TOUCH_START,(function(n){t.isInputEnabled&&t.handleInput(H.SPACE)}))},r.registerKeyboardEvents=function(){var t=this;o.on(p.EventType.KEY_DOWN,(function(n){if(t.isInputEnabled)switch(n.keyCode){case c.ARROW_LEFT:case c.KEY_A:t.handleInput(H.LEFT);break;case c.ARROW_RIGHT:case c.KEY_D:t.handleInput(H.RIGHT);break;case c.SPACE:t.handleInput(H.SPACE)}}))},r.handleInput=function(t){var n=Date.now(),e=this.lastInputTime.get(t);if(!(n-e<this.inputDebounceTime)){this.lastInputTime.set(t,n);var i=this.inputCallbacks.get(t);i&&i.forEach((function(t){return t(n)})),console.log("Input detected: "+H[t])}},r.registerInputCallback=function(t,n){var e=this.inputCallbacks.get(t);e&&e.push(n)},r.unregisterInputCallback=function(t,n){var e=this.inputCallbacks.get(t);if(e){var i=e.indexOf(n);-1!==i&&e.splice(i,1)}},r.setInputEnabled=function(t){this.isInputEnabled=t,console.log("Input "+(t?"enabled":"disabled"))},r.getInputEnabled=function(){return this.isInputEnabled},r.setInputDebounceTime=function(t){this.inputDebounceTime=t},r.getInputDebounceTime=function(){return this.inputDebounceTime},a(n,null,[{key:"instance",get:function(){return this._instance}}]),n}(I))._instance=null,A=n((E=v).prototype,"leftInputArea",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(E.prototype,"rightInputArea",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(E.prototype,"spaceInputArea",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=E))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionMainMenuController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionGameManager.ts","./AuditionAudioManager.ts"],(function(t){var n,o,e,i,u,a,l,r,s,c,p,d,h,b,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){u=t.cclegacy,a=t._decorator,l=t.Button,r=t.Node,s=t.Label,c=t.Vec3,p=t.tween,d=t.UIOpacity,h=t.Component},function(t){b=t.AuditionGameManager},function(t){y=t.AuditionAudioManager}],execute:function(){var f,g,m,v,B,C,L,E,z,M,k,S,w,A,x,P,T,I,N,O;u._RF.push({},"89cd9G0+vdPI7ElDHJDudjd","AuditionMainMenuController",void 0);var _=a.ccclass,D=a.property;t("AuditionMainMenuController",(f=_("AuditionMainMenuController"),g=D(l),m=D(l),v=D(l),B=D(l),C=D(r),L=D(s),E=D(s),f((k=n((M=function(t){function n(){for(var n,o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];return n=t.call.apply(t,[this].concat(u))||this,e(n,"playButton",k,i(n)),e(n,"customizeButton",S,i(n)),e(n,"optionsButton",w,i(n)),e(n,"exitButton",A,i(n)),e(n,"logoNode",x,i(n)),e(n,"playerLevelLabel",P,i(n)),e(n,"versionLabel",T,i(n)),e(n,"backgroundMusicPath",I,i(n)),e(n,"buttonSound",N,i(n)),e(n,"animateElements",O,i(n)),n}o(n,t);var u=n.prototype;return u.onLoad=function(){this.setupButtonEvents(),this.animateElements&&this.initializeAnimations(),this.versionLabel&&(this.versionLabel.string="v0.1.0 Alpha")},u.start=function(){this.playBackgroundMusic(),this.updatePlayerLevel()},u.setupButtonEvents=function(){this.playButton&&this.playButton.node.on(l.EventType.CLICK,this.onPlayButtonClicked,this),this.customizeButton&&this.customizeButton.node.on(l.EventType.CLICK,this.onCustomizeButtonClicked,this),this.optionsButton&&this.optionsButton.node.on(l.EventType.CLICK,this.onOptionsButtonClicked,this),this.exitButton&&this.exitButton.node.on(l.EventType.CLICK,this.onExitButtonClicked,this)},u.initializeAnimations=function(){this.logoNode&&(this.logoNode.scale=new c(1.2,1.2,1),p(this.logoNode).to(2,{scale:new c(1.1,1.1,1)}).to(2,{scale:new c(1.2,1.2,1)}).union().repeatForever().start()),[this.playButton,this.customizeButton,this.optionsButton,this.exitButton].forEach((function(t,n){if(t){var o=t.node.scale.clone();t.node.on(r.EventType.MOUSE_ENTER,(function(){p(t.node).to(.2,{scale:new c(1.1*o.x,1.1*o.y,1)}).start()})),t.node.on(r.EventType.MOUSE_LEAVE,(function(){p(t.node).to(.2,{scale:o}).start()})),t.node.setPosition(t.node.position.x,t.node.position.y-50);var e=t.node.getComponent(d);e||(e=t.node.addComponent(d)),e.opacity=0,p(t.node).delay(.2+.1*n).to(.5,{position:new c(t.node.position.x,t.node.position.y+50,0)},{easing:"backOut"}).start(),p(e).delay(.2+.1*n).to(.5,{opacity:255}).start()}}))},u.playBackgroundMusic=function(){var t=y.instance;t&&t.loadSong(this.backgroundMusicPath).then((function(){t.playSong()})).catch((function(t){console.error("Failed to load menu music:",t)}))},u.updatePlayerLevel=function(){var t=b.instance;if(t&&this.playerLevelLabel){var n=t.getExperience(),o=Math.floor(Math.sqrt(n/100))+1;this.playerLevelLabel.string="Level "+o}},u.onPlayButtonClicked=function(){y.instance.playSound(this.buttonSound),b.instance.changeScene("AuditionSongSelection")},u.onCustomizeButtonClicked=function(){y.instance.playSound(this.buttonSound),console.log("Customize button clicked - Feature coming soon")},u.onOptionsButtonClicked=function(){y.instance.playSound(this.buttonSound),console.log("Options button clicked - Feature coming soon")},u.onExitButtonClicked=function(){y.instance.playSound(this.buttonSound),console.log("Exit button clicked")},u.onDestroy=function(){var t=y.instance;t&&t.stopSong()},n}(h)).prototype,"playButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(M.prototype,"customizeButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(M.prototype,"optionsButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(M.prototype,"exitButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(M.prototype,"logoNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(M.prototype,"playerLevelLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(M.prototype,"versionLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(M.prototype,"backgroundMusicPath",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"audition/audio/menu_music"}}),N=n(M.prototype,"buttonSound",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),O=n(M.prototype,"animateElements",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=M))||z));u._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionNote.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionNotePool.ts","./AuditionNoteVisual.ts"],(function(t){var i,e,n,o,s,a,u,r,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,u=t.Component},function(t){r=t.AuditionNoteType},function(t){c=t.AuditionNoteVisual}],execute:function(){var l,h,p,f,d;s._RF.push({},"b06301HH+lNDJwPFjxXjoas","AuditionNote",void 0);var y=a.ccclass,g=a.property;t("AuditionNote",(l=y("AuditionNote"),h=g(c),l((d=i((f=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(i,"noteVisual",d,o(i)),i.noteType=r.LEFT,i.beatTime=0,i.targetY=0,i.startY=0,i.isMoving=!1,i.noteId=-1,i}e(i,t);var s=i.prototype;return s.initialize=function(t,i,e){switch(this.noteType=t,this.beatTime=i,this.noteId=e,this.noteVisual?this.noteVisual.initialize(t):console.warn("Note visual component is not assigned!"),this.noteType){case r.LEFT:this.node.name="LeftNote";break;case r.RIGHT:this.node.name="RightNote"}},s.playHitEffect=function(t){this.isMoving=!1,this.noteVisual&&this.noteVisual.showHitEffect(t)},s.playMissEffect=function(){this.isMoving=!1,this.noteVisual&&this.noteVisual.showMissEffect()},s.reset=function(){this.isMoving=!1,this.noteVisual&&this.noteVisual.reset(),this.node.active=!0},s.matchesInput=function(t){return this.noteType===t},s.getNoteId=function(){return this.noteId},s.getNoteType=function(){return this.noteType},i}(u)).prototype,"noteVisual",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionNotePool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n,r,l,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Prefab,s=e.instantiate,c=e.Component}],execute:function(){var u,f,p,h,P,N,d,g,y;r._RF.push({},"dcf6eWvaXRMR72esUo9n+2S","AuditionNotePool",void 0);var v=l.ccclass,b=l.property,T=e("AuditionNoteType",function(e){return e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e}({}));e("AuditionNotePool",(u=v("AuditionNotePool"),f=b(a),p=b(a),u((N=t((P=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"leftNotePrefab",N,n(t)),i(t,"rightNotePrefab",d,n(t)),i(t,"initialPoolSize",g,n(t)),i(t,"expandPoolAmount",y,n(t)),t.leftNotePool=[],t.rightNotePool=[],t.activeNotes=new Map,t.nextNoteId=0,t}o(t,e);var r=t.prototype;return r.onLoad=function(){this.initializePools()},r.initializePools=function(){this.leftNotePrefab&&this.createPool(T.LEFT,this.initialPoolSize),this.rightNotePrefab&&this.createPool(T.RIGHT,this.initialPoolSize)},r.createPool=function(e,t){var o=this.getPoolForType(e),i=this.getPrefabForType(e);if(i){for(var n=0;n<t;n++){var r=s(i);r.parent=this.node,r.active=!1,o.push(r)}console.log("Created pool for note type "+e+" with "+t+" notes")}else console.error("No prefab defined for note type: "+e)},r.getNote=function(e){var t=this.getPoolForType(e);0===t.length&&this.expandPool(e);var o=t.pop();if(!o)return console.error("Failed to get note of type "+e+" from pool"),null;o.active=!0;var i=this.nextNoteId++;return this.activeNotes.set(i,o),{id:i,node:o}},r.recycleNote=function(e){var t=this.activeNotes.get(e);if(t){t.active=!1,t.setPosition(0,0,0),t.setScale(1,1,1);var o=this.getNoteTypeFromNode(t);this.getPoolForType(o).push(t),this.activeNotes.delete(e)}else console.warn("Note with ID "+e+" not found in active notes")},r.recycleAllNotes=function(){var e=this;Array.from(this.activeNotes.keys()).forEach((function(t){return e.recycleNote(t)}))},r.expandPool=function(e){console.log("Expanding pool for note type "+e+" with "+this.expandPoolAmount+" more notes"),this.createPool(e,this.expandPoolAmount)},r.getPoolForType=function(e){switch(e){case T.LEFT:return this.leftNotePool;case T.RIGHT:return this.rightNotePool;default:return console.error("Unknown note type: "+e),null}},r.getPrefabForType=function(e){switch(e){case T.LEFT:return this.leftNotePrefab;case T.RIGHT:return this.rightNotePrefab;default:return console.error("Unknown note type: "+e),null}},r.getNoteTypeFromNode=function(e){return e.name.toLowerCase().includes("left")?T.LEFT:T.RIGHT},r.getActiveNoteCount=function(){return this.activeNotes.size},r.getAvailableNoteCount=function(e){var t=this.getPoolForType(e);return t?t.length:0},t}(c)).prototype,"leftNotePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(P.prototype,"rightNotePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(P.prototype,"initialPoolSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),y=t(P.prototype,"expandPoolAmount",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=P))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionNotePrefabGenerator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionNotePool.ts","./AuditionNote.ts","./AuditionNoteVisual.ts"],(function(e){var t,n,o,i,r,a,l,u,s,c,p,f,h,d,g,b,N,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Button,u=e.Label,s=e.Node,c=e.UITransform,p=e.UIOpacity,f=e.Sprite,h=e.Vec2,d=e.Component,g=e.Color},function(e){b=e.AuditionNoteType},function(e){N=e.AuditionNote},function(e){C=e.AuditionNoteVisual}],execute:function(){var y,S,m,w,L,z,A,T,v,E,P,R,I,B,G,F,V;r._RF.push({},"ccee5g9AUdGu4SYsqMys3Uz","AuditionNotePrefabGenerator",void 0);var D=a.ccclass,k=a.property,H=a.executeInEditMode;e("AuditionNotePrefabGenerator",(y=D("AuditionNotePrefabGenerator"),S=k(l),m=k(l),w=k(l),L=k(u),y(z=H((T=t((A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"prefabSavePath",T,i(t)),o(t,"noteSize",v,i(t)),o(t,"leftNoteColor",E,i(t)),o(t,"rightNoteColor",P,i(t)),o(t,"spaceNoteColor",R,i(t)),o(t,"glowColor",I,i(t)),o(t,"generateLeftNoteBtn",B,i(t)),o(t,"generateRightNoteBtn",G,i(t)),o(t,"generateSpaceNoteBtn",F,i(t)),o(t,"statusLabel",V,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.generateLeftNoteBtn&&this.generateLeftNoteBtn.node.on(l.EventType.CLICK,(function(){e.generateNotePrefab(b.LEFT)})),this.generateRightNoteBtn&&this.generateRightNoteBtn.node.on(l.EventType.CLICK,(function(){e.generateNotePrefab(b.RIGHT)})),this.generateSpaceNoteBtn&&this.generateSpaceNoteBtn.node.on(l.EventType.CLICK,(function(){e.generateNotePrefab(b.SPACE)}))},r.generateNotePrefab=function(e){this.updateStatus("Creating "+this.getNoteTypeName(e)+" note prefab...");var t=new s(this.getNoteTypeName(e)+"Note"),n=t.addComponent(c);n.width=this.noteSize,n.height=this.noteSize,t.addComponent(p).opacity=255;var o=new s("NoteShape");o.parent=t;var i=o.addComponent(c);i.width=.9*this.noteSize,i.height=.9*this.noteSize;var r=o.addComponent(f);switch(r.type=f.Type.FILLED,r.fillType=f.FillType.RADIAL,r.fillCenter=new h(.5,.5),r.fillStart=0,r.fillRange=1,e){case b.LEFT:r.color=this.leftNoteColor;break;case b.RIGHT:r.color=this.rightNoteColor;break;case b.SPACE:r.color=this.spaceNoteColor}var a=new s("Glow");a.parent=t,a.active=!1;var l=a.addComponent(c);l.width=1.2*this.noteSize,l.height=1.2*this.noteSize;var d=a.addComponent(f);d.type=f.Type.FILLED,d.fillType=f.FillType.RADIAL,d.fillCenter=new h(.5,.5),d.fillStart=0,d.fillRange=1,d.color=this.glowColor;var g=new s("KeyLabel");g.parent=t;var y=g.addComponent(c);y.width=.8*this.noteSize,y.height=.8*this.noteSize;var S=g.addComponent(u);switch(S.fontSize=.4*this.noteSize,S.horizontalAlign=u.HorizontalAlign.CENTER,S.verticalAlign=u.VerticalAlign.CENTER,S.cacheMode=u.CacheMode.NONE,e){case b.LEFT:S.string="←";break;case b.RIGHT:S.string="→";break;case b.SPACE:S.string="↑"}t.addComponent(N),t.addComponent(C);this.updateStatus("Components added. When using in the game, connect:\n        - noteVisual.noteSprite to "+o.name+"\n        - noteVisual.glowSprite to "+a.name+"\n        - noteVisual.keyLabel to "+g.name+"\n        - noteComponent.noteVisual to noteVisual"),this.updateStatus(this.getNoteTypeName(e)+" note prefab structure created!"),this.updateStatus("To complete prefab creation:"),this.updateStatus("1. Drag this node to your Assets folder"),this.updateStatus("2. Create a prefab from it"),this.updateStatus("3. Configure materials and textures"),this.updateStatus("4. Connect the component references in the Inspector")},r.getNoteTypeName=function(e){switch(e){case b.LEFT:return"Left";case b.RIGHT:return"Right";case b.SPACE:return"Space";default:return"Unknown"}},r.updateStatus=function(e){console.log("[AuditionNotePrefabGenerator]",e),this.statusLabel&&(this.statusLabel.string+=e+"\n")},t}(d)).prototype,"prefabSavePath",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"assets/Prefabs/Audition/Notes"}}),v=t(A.prototype,"noteSize",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),E=t(A.prototype,"leftNoteColor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(79,195,247)}}),P=t(A.prototype,"rightNoteColor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(255,112,67)}}),R=t(A.prototype,"spaceNoteColor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(255,235,59)}}),I=t(A.prototype,"glowColor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(255,255,255,180)}}),B=t(A.prototype,"generateLeftNoteBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"generateRightNoteBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(A.prototype,"generateSpaceNoteBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(A.prototype,"statusLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=A))||z)||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionNoteVisual.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionNotePool.ts","./AuditionBeatSystem.ts"],(function(i){var t,e,o,n,s,a,r,l,c,h,u,p,f,g;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,r=i.Sprite,l=i.UIOpacity,c=i.Color,h=i.Vec3,u=i.tween,p=i.Component},function(i){f=i.AuditionNoteType},function(i){g=i.AuditionAccuracyRating}],execute:function(){var y,w,d,S,b,m,v,A,T,C,z,D,N,I,H,E,O,R,F,P,k;s._RF.push({},"3407dOpf11DQZytuXaeEQcr","AuditionNoteVisual",void 0);var x=a.ccclass,L=a.property;i("AuditionNoteVisual",(y=x("AuditionNoteVisual"),w=L(r),d=L(r),S=L(l),b=L(c),m=L(c),v=L(c),A=L(c),T=L(c),y((D=t((z=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=i.call.apply(i,[this].concat(s))||this,o(t,"noteSprite",D,n(t)),o(t,"glowSprite",N,n(t)),o(t,"opacity",I,n(t)),o(t,"pulseSpeed",H,n(t)),o(t,"pulseIntensity",E,n(t)),o(t,"leftNoteColor",O,n(t)),o(t,"rightNoteColor",R,n(t)),o(t,"perfectColor",F,n(t)),o(t,"goodColor",P,n(t)),o(t,"missColor",k,n(t)),t.hitAnimDuration=.2,t.missAnimDuration=.4,t.appearAnimDuration=.05,t.noteType=f.LEFT,t.activeTweens=[],t.originalScale=new h(1,1,1),t.isHit=!1,t}e(t,i);var s=t.prototype;return s.onLoad=function(){this.node&&(this.originalScale=this.node.getScale().clone()),this.opacity||(this.opacity=this.getComponent(l),this.opacity||(this.opacity=this.addComponent(l)))},s.initialize=function(i){if(this.noteType=i,this.isHit=!1,this.node.setScale(this.originalScale),this.node.setRotation(0,0,0,1),this.opacity&&(this.opacity.opacity=255),this.noteSprite)switch(i){case f.LEFT:this.noteSprite.color=this.leftNoteColor;break;case f.RIGHT:this.noteSprite.color=this.rightNoteColor}},s.playAppearAnimation=function(){var i=this;if(this.node){this.stopAllTweens(),this.node.setScale(0,0,1);var t=u(this.node).to(this.appearAnimDuration,{scale:this.originalScale},{easing:"backOut"}).call((function(){i.startPulseAnimation()})).start();this.activeTweens.push(t)}},s.startPulseAnimation=function(){if(this.node&&!this.isHit){this.stopAllTweens();var i=u(this.node).to(this.pulseSpeed/2,{scale:new h(this.originalScale.x*(1+this.pulseIntensity),this.originalScale.y*(1+this.pulseIntensity),this.originalScale.z)},{easing:"sineInOut"}).to(this.pulseSpeed/2,{scale:this.originalScale},{easing:"sineInOut"}).union().repeatForever().start();this.activeTweens.push(i)}},s.stopAllTweens=function(){this.activeTweens.forEach((function(i){return i.stop()})),this.activeTweens=[]},s.showHitEffect=function(i){if(this.node){var t;switch(this.isHit=!0,this.stopAllTweens(),i){case g.PERFECT:t=this.perfectColor;break;case g.GOOD:t=this.goodColor;break;default:t=this.missColor}this.glowSprite&&(this.glowSprite.color=t,this.glowSprite.node.active=!0);var e=new h(1.5*this.originalScale.x,1.5*this.originalScale.y,this.originalScale.z),o=u(this.node).to(this.hitAnimDuration/3,{scale:e},{easing:"quadOut"}).to(2*this.hitAnimDuration/3,{scale:this.originalScale},{easing:"quadIn"}).start();if(this.activeTweens.push(o),this.opacity){var n=u(this.opacity).to(this.hitAnimDuration,{opacity:50}).start();this.activeTweens.push(n)}}},s.showMissEffect=function(){var i=this;if(this.node){this.isHit=!0,this.stopAllTweens(),this.glowSprite&&(this.glowSprite.color=this.missColor,this.glowSprite.node.active=!0);var t=new h(this.node.position.x,this.node.position.y-50,this.node.position.z),e=u(this.node).to(this.missAnimDuration,{position:t,scale:new h(.7*this.originalScale.x,.7*this.originalScale.y,this.originalScale.z)},{easing:"quadIn"}).call((function(){i.node.active=!1})).start();if(this.activeTweens.push(e),this.opacity){var o=u(this.opacity).to(this.missAnimDuration,{opacity:0}).start();this.activeTweens.push(o)}}},s.reset=function(){this.stopAllTweens(),this.node.setScale(this.originalScale),this.node.setRotation(0,0,0,1),this.opacity&&(this.opacity.opacity=255),this.glowSprite&&(this.glowSprite.node.active=!1),this.isHit=!1},t}(p)).prototype,"noteSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"glowSprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"opacity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"pulseSpeed",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=t(z.prototype,"pulseIntensity",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),O=t(z.prototype,"leftNoteColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(79,195,247)}}),R=t(z.prototype,"rightNoteColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(255,112,67)}}),F=t(z.prototype,"perfectColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(120,255,120)}}),P=t(z.prototype,"goodColor",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(255,193,7)}}),k=t(z.prototype,"missColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(211,47,47)}}),C=z))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionPatternManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionInputHandler.ts"],(function(t){var e,n,r,i,a,o,s,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.CCFloat,l=t.CCBoolean,c=t.Component},function(t){u=t.AuditionInputType}],execute:function(){var h,p,P,C,m,g,v,d;a._RF.push({},"019f7gud1JJLKjokIvOVLNi","AuditionPatternManager",void 0);var y=o.ccclass,f=o.property;t("AuditionPatternManager",(h=y("AuditionPatternManager"),p=f(s),P=f(l),h((g=e((m=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"patternComplexityLevels",g,i(e)),r(e,"patternInputTimeWindow",v,i(e)),r(e,"enableFinishMoves",d,i(e)),e.currentPattern=null,e.patternProgress=0,e.currentComplexityLevel=0,e.patternStartTime=0,e.finishMoveTriggered=!1,e.patternsCompleted=0,e.onPatternProgressCallback=null,e.onPatternCompleteCallback=null,e.onFinishMoveReadyCallback=null,e}n(e,t);var a=e.prototype;return a.loadPattern=function(t){this.currentPattern=t,this.patternProgress=0,this.patternStartTime=Date.now(),this.onPatternProgressCallback&&this.currentPattern&&this.onPatternProgressCallback(0,this.currentPattern.sequence.length),console.log("Loaded new pattern with complexity "+t.complexity+", finish move: "+t.isFinishMove)},a.validateInput=function(t){return!!this.currentPattern&&(Date.now()-this.patternStartTime>this.patternInputTimeWindow?(this.breakPattern(),!1):t===this.currentPattern.sequence[this.patternProgress]?(this.patternProgress++,this.onPatternProgressCallback&&this.currentPattern&&this.onPatternProgressCallback(this.patternProgress,this.currentPattern.sequence.length),this.isPatternComplete()&&(console.log("Pattern sequence completed. Ready for sync input!"),this.onPatternCompleteCallback&&this.onPatternCompleteCallback(!0,this.currentPattern.isFinishMove)),!0):(this.breakPattern(),!1))},a.isPatternComplete=function(){var t;return this.patternProgress>=((null==(t=this.currentPattern)?void 0:t.sequence.length)||0)},a.getCurrentPattern=function(){return this.currentPattern},a.breakPattern=function(){console.log("Pattern broken!"),this.onPatternCompleteCallback&&this.currentPattern&&this.onPatternCompleteCallback(!1,this.currentPattern.isFinishMove),this.resetPattern()},a.resetPattern=function(){this.currentPattern=null,this.patternProgress=0},a.advanceComplexityLevel=function(){this.currentComplexityLevel<this.patternComplexityLevels.length-1?(this.currentComplexityLevel++,this.patternsCompleted=0,console.log("Advanced to complexity level "+this.currentComplexityLevel+": "+this.getCurrentComplexity()+" inputs")):console.log("Already at maximum complexity level")},a.getCurrentComplexity=function(){return this.patternComplexityLevels[this.currentComplexityLevel]},a.shouldTriggerFinishMove=function(){return this.enableFinishMoves&&this.patternsCompleted>=5&&!this.finishMoveTriggered},a.createFinishMovePattern=function(t){return{sequence:[].concat(t.sequence).reverse(),syncPoint:t.syncPoint,complexity:t.complexity,isFinishMove:!0}},a.markPatternCompleted=function(t){t&&(this.patternsCompleted++,this.shouldTriggerFinishMove()&&(this.finishMoveTriggered=!0,this.onFinishMoveReadyCallback&&this.onFinishMoveReadyCallback())),this.resetPattern()},a.resetFinishMoveState=function(){this.finishMoveTriggered=!1,this.patternsCompleted=0},a.setPatternProgressCallback=function(t){this.onPatternProgressCallback=t},a.setPatternCompleteCallback=function(t){this.onPatternCompleteCallback=t},a.setFinishMoveReadyCallback=function(t){this.onFinishMoveReadyCallback=t},a.generateRandomPattern=function(t){for(var e=this.getCurrentComplexity(),n=[],r=0;r<e;r++){var i=Math.random()<.5?u.LEFT:u.RIGHT;n.push(i)}return{sequence:n,syncPoint:t,complexity:e,isFinishMove:!1}},e}(c)).prototype,"patternComplexityLevels",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[3,4,5,6,7,8,9]}}),v=e(m.prototype,"patternInputTimeWindow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2e3}}),d=e(m.prototype,"enableFinishMoves",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=m))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionResultsController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionGameManager.ts","./AuditionAudioManager.ts","./AuditionUIManager.ts"],(function(t){var n,e,i,o,u,a,s,r,l,c,p,h,d,b,f,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){u=t.cclegacy,a=t._decorator,s=t.Button,r=t.Node,l=t.Label,c=t.Vec3,p=t.UIOpacity,h=t.tween,d=t.Component},function(t){b=t.AuditionGameManager},function(t){f=t.AuditionAudioManager},function(t){y=t.AuditionUIManager}],execute:function(){var g,C,B,m,x,M,v,S,k,w,A,G,R,L,z,D,E,I;u._RF.push({},"2c315k/8UpN5rJQH/P/zdLe","AuditionResultsController",void 0);var P=a.ccclass,_=a.property;t("AuditionResultsController",(g=P("AuditionResultsController"),C=_(s),B=_(s),m=_(s),x=_(r),M=_(r),v=_(l),g((w=n((k=function(t){function n(){for(var n,e=arguments.length,u=new Array(e),a=0;a<e;a++)u[a]=arguments[a];return n=t.call.apply(t,[this].concat(u))||this,i(n,"retryButton",w,o(n)),i(n,"nextButton",A,o(n)),i(n,"mainMenuButton",G,o(n)),i(n,"resultsContent",R,o(n)),i(n,"expGainDisplay",L,o(n)),i(n,"expGainLabel",z,o(n)),i(n,"backgroundMusicPath",D,o(n)),i(n,"buttonClickSound",E,o(n)),i(n,"resultsSound",I,o(n)),n.isAnimatingResults=!1,n}e(n,t);var u=n.prototype;return u.onLoad=function(){if(y.instance.showResults(),this.setupButtonEvents(),this.resultsContent){this.resultsContent.scale=new c(.8,.8,1);var t=this.resultsContent.getComponent(p);t||(t=this.resultsContent.addComponent(p)),t.opacity=0}this.expGainDisplay&&(this.expGainDisplay.active=!1)},u.start=function(){var t=this;this.playBackgroundMusic(),f.instance.playSound(this.resultsSound),this.scheduleOnce((function(){t.animateResults()}),.5)},u.setupButtonEvents=function(){this.retryButton&&(this.retryButton.node.on(s.EventType.CLICK,this.onRetryButtonClicked,this),this.retryButton.interactable=!1),this.nextButton&&(this.nextButton.node.on(s.EventType.CLICK,this.onNextButtonClicked,this),this.nextButton.interactable=!1),this.mainMenuButton&&(this.mainMenuButton.node.on(s.EventType.CLICK,this.onMainMenuButtonClicked,this),this.mainMenuButton.interactable=!1)},u.playBackgroundMusic=function(){var t=f.instance;t&&t.loadSong(this.backgroundMusicPath).then((function(){t.playSong()})).catch((function(t){console.error("Failed to load results music:",t)}))},u.animateResults=function(){var t=this;if(this.resultsContent){this.isAnimatingResults=!0,this.resultsContent.active=!0,h(this.resultsContent).to(.5,{scale:new c(1,1,1)}).start();var n=this.resultsContent.getComponent(p)||this.resultsContent.addComponent(p);n&&h(n).to(.5,{opacity:255}).call((function(){t.scheduleOnce((function(){t.showExperienceGain()}),1)})).start()}},u.showExperienceGain=function(){var t=this;if(this.expGainDisplay&&this.expGainLabel&&b.instance){this.expGainLabel&&(this.expGainLabel.string="+100 EXP"),this.expGainDisplay.active=!0,this.expGainDisplay.scale=new c(.5,.5,1),h(this.expGainDisplay).to(.3,{scale:new c(1.2,1.2,1)}).to(.2,{scale:new c(1,1,1)}).call((function(){t.enableButtons(),t.isAnimatingResults=!1})).start()}},u.enableButtons=function(){this.retryButton&&(this.retryButton.interactable=!0),this.nextButton&&(this.nextButton.interactable=!0),this.mainMenuButton&&(this.mainMenuButton.interactable=!0)},u.onRetryButtonClicked=function(){f.instance.playSound(this.buttonClickSound);var t=b.instance;if(t){var n=t.getCurrentSong();n&&t.startSong(n.id)}},u.onNextButtonClicked=function(){f.instance.playSound(this.buttonClickSound),b.instance.changeScene("AuditionSongSelection")},u.onMainMenuButtonClicked=function(){f.instance.playSound(this.buttonClickSound),b.instance.changeScene("AuditionMainMenu")},u.onDestroy=function(){var t=f.instance;t&&t.stopSong()},n}(d)).prototype,"retryButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(k.prototype,"nextButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(k.prototype,"mainMenuButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(k.prototype,"resultsContent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(k.prototype,"expGainDisplay",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(k.prototype,"expGainLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(k.prototype,"backgroundMusicPath",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"audition/audio/results_music"}}),E=n(k.prototype,"buttonClickSound",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),I=n(k.prototype,"resultsSound",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"results"}}),S=k))||S));u._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionScoringSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionBeatSystem.ts","./AuditionAudioManager.ts"],(function(t){var e,i,o,r,a,n,c,s,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.extends},function(t){n=t.cclegacy,c=t._decorator,s=t.Component},function(t){l=t.AuditionAccuracyRating},function(t){u=t.AuditionAudioManager}],execute:function(){var p,h,m,b,d,S,C,f,M,y,g,P;n._RF.push({},"2ce00HNOcFEMZsuE2WXEEkB","AuditionScoringSystem",void 0);var k=c.ccclass,v=c.property;t("AuditionScoringSystem",k("AuditionScoringSystem")((m=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,o(e,"perfectScore",m,r(e)),o(e,"goodScore",b,r(e)),o(e,"missScore",d,r(e)),o(e,"comboMultiplierIncrement",S,r(e)),o(e,"maxComboMultiplier",C,r(e)),o(e,"comboBreakPenalty",f,r(e)),o(e,"patternComplexityMultiplier",M,r(e)),o(e,"consecutivePatternBonus",y,r(e)),o(e,"finishMoveMultiplier",g,r(e)),o(e,"patternSkipPenalty",P,r(e)),e.patternsCompleted=0,e.consecutivePatterns=0,e.finishMovesCompleted=0,e.patternsSkipped=0,e.totalScore=0,e.currentCombo=0,e.maxCombo=0,e.patternMultiplier=1,e.accuracyStats={perfect:0,good:0,miss:0,total:0},e.onScoreUpdateCallback=null,e.onComboUpdateCallback=null,e.onPatternMultiplierUpdateCallback=null,e}i(e,t);var n=e.prototype;return n.reset=function(){this.totalScore=0,this.currentCombo=0,this.maxCombo=0,this.patternMultiplier=1,this.patternsCompleted=0,this.consecutivePatterns=0,this.finishMovesCompleted=0,this.patternsSkipped=0,this.accuracyStats={perfect:0,good:0,miss:0,total:0},this.onScoreUpdateCallback&&this.onScoreUpdateCallback(this.totalScore),this.onComboUpdateCallback&&this.onComboUpdateCallback(this.currentCombo),this.onPatternMultiplierUpdateCallback&&this.onPatternMultiplierUpdateCallback(this.patternMultiplier),console.log("Scoring system reset")},n.processNoteResult=function(t,e){this.accuracyStats.total++;var i=0;switch(t){case l.PERFECT:this.accuracyStats.perfect++,i=this.perfectScore,this.updateCombo(!0);var o=1===this.currentCombo?"perfect":"perfect"+Math.min(this.currentCombo,5);u.instance.playSound(o);break;case l.GOOD:this.accuracyStats.good++,i=this.goodScore,this.updateCombo(!1),u.instance.playSound("good");break;case l.MISS:this.accuracyStats.miss++,i=this.missScore,this.updateCombo(!1),u.instance.playSound("miss")}var r=1+Math.min(this.maxComboMultiplier-1,this.comboMultiplierIncrement*(this.currentCombo-1)),a=t===l.MISS?i:Math.floor(i*r);this.totalScore+=a,this.onScoreUpdateCallback&&this.onScoreUpdateCallback(this.totalScore),console.log("Note result: "+l[t]+", Score: "+this.totalScore+", Combo: "+this.currentCombo+", Points earned: "+a)},n.processPatternResult=function(t,e,i){if(t===l.MISS)return this.patternsSkipped++,this.consecutivePatterns=0,this.resetPatternMultiplier(),this.totalScore=Math.max(0,this.totalScore-this.patternSkipPenalty),void console.log("Pattern missed! Score: "+this.totalScore+", Skipped: "+this.patternsSkipped);var o=50*e;t===l.PERFECT&&(o*=1.5);var r=Math.floor(o*this.patternMultiplier);if(this.patternsCompleted++,this.consecutivePatterns++,i){this.finishMovesCompleted++;var a=Math.floor(r*(this.finishMoveMultiplier-1));this.totalScore+=r+a,console.log("Finish move completed! Base: "+r+", Bonus: "+a)}else if(this.totalScore+=r,this.consecutivePatterns>1){var n=this.consecutivePatternBonus*(this.consecutivePatterns-1);this.totalScore+=n,console.log("Consecutive pattern bonus: +"+n)}this.increasePatternMultiplier(),this.onScoreUpdateCallback&&this.onScoreUpdateCallback(this.totalScore),console.log("Pattern completed! Complexity: "+e+", Score added: "+r+", Total: "+this.totalScore+", Pattern multiplier: "+this.patternMultiplier.toFixed(1)+"x")},n.updateCombo=function(t){t?(this.currentCombo++,this.currentCombo>this.maxCombo&&(this.maxCombo=this.currentCombo)):(this.comboBreakPenalty>0&&(this.totalScore=Math.max(0,this.totalScore-this.comboBreakPenalty)),this.currentCombo=0),this.onComboUpdateCallback&&this.onComboUpdateCallback(this.currentCombo)},n.onScoreUpdate=function(t){this.onScoreUpdateCallback=t},n.onComboUpdate=function(t){this.onComboUpdateCallback=t},n.onPatternMultiplierUpdate=function(t){this.onPatternMultiplierUpdateCallback=t},n.increasePatternMultiplier=function(){this.patternMultiplier+=.1,this.onPatternMultiplierUpdateCallback&&this.onPatternMultiplierUpdateCallback(this.patternMultiplier)},n.resetPatternMultiplier=function(){this.patternMultiplier=1,this.onPatternMultiplierUpdateCallback&&this.onPatternMultiplierUpdateCallback(this.patternMultiplier)},n.handlePatternBreak=function(){this.consecutivePatterns=0,this.resetPatternMultiplier(),this.updateCombo(!1)},n.getScore=function(){return this.totalScore},n.getCombo=function(){return this.currentCombo},n.getMaxCombo=function(){return this.maxCombo},n.getAccuracyStats=function(){return a({},this.accuracyStats)},n.getAccuracyPercentage=function(){return 0===this.accuracyStats.total?0:(1*this.accuracyStats.perfect+.5*this.accuracyStats.good+0*this.accuracyStats.miss)/this.accuracyStats.total*100},n.getGrade=function(){var t=this.getAccuracyPercentage();return t>=95?"S":t>=90?"A":t>=80?"B":t>=70?"C":t>=60?"D":"F"},n.calculateExperiencePoints=function(){return Math.floor(this.totalScore/100)+Math.floor(this.getAccuracyPercentage()/10)+Math.floor(this.maxCombo/10)+2*this.patternsCompleted+10*this.finishMovesCompleted},n.getPatternStats=function(){return{completed:this.patternsCompleted,skipped:this.patternsSkipped,finishMoves:this.finishMovesCompleted}},e}(s)).prototype,"perfectScore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),b=e(h.prototype,"goodScore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),d=e(h.prototype,"missScore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=e(h.prototype,"comboMultiplierIncrement",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),C=e(h.prototype,"maxComboMultiplier",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=e(h.prototype,"comboBreakPenalty",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(h.prototype,"patternComplexityMultiplier",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),y=e(h.prototype,"consecutivePatternBonus",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=e(h.prototype,"finishMoveMultiplier",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),P=e(h.prototype,"patternSkipPenalty",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),p=h))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionSongItemComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,l,r,c,a,u,s,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,c=t.Label,a=t.Sprite,u=t.Button,s=t.Node,d=t.Component}],execute:function(){var h,b,f,p,g,I,y,L,m,S,k,v,z,B,C,w,A;l._RF.push({},"6a29cIl249M9qUzgX5Tgjl0","AuditionSongItemComponent",void 0);var _=r.ccclass,D=r.property;t("AuditionSongItemComponent",(h=_("AuditionSongItemComponent"),b=D(c),f=D(c),p=D(c),g=D(c),I=D(a),y=D(u),L=D(s),h((k=e((S=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,n(e,"titleLabel",k,o(e)),n(e,"artistLabel",v,o(e)),n(e,"difficultyLabel",z,o(e)),n(e,"highScoreLabel",B,o(e)),n(e,"lockIcon",C,o(e)),n(e,"selectButton",w,o(e)),n(e,"selectedIndicator",A,o(e)),e.songId="",e.unlocked=!1,e.onSelect=null,e}i(e,t);var l=e.prototype;return l.setup=function(t){if(this.songId=t.id,this.unlocked=t.unlocked,this.titleLabel&&(this.titleLabel.string=t.title),this.artistLabel&&(this.artistLabel.string=t.artist),this.difficultyLabel){for(var e="",i=0;i<t.difficulty;i++)e+="★";this.difficultyLabel.string=e}this.highScoreLabel&&(this.highScoreLabel.string=t.highScore>0?t.highScore.toString():"-"),this.lockIcon&&(this.lockIcon.node.active=!t.unlocked),this.selectButton&&(this.selectButton.interactable=t.unlocked,this.selectButton.node.on(u.EventType.CLICK,this.onButtonClicked,this)),this.selectedIndicator&&(this.selectedIndicator.active=!1)},l.onButtonClicked=function(){this.unlocked&&(this.onSelect&&this.onSelect(this.songId),this.selectedIndicator&&(this.selectedIndicator.active=!0))},l.setSelected=function(t){this.selectedIndicator&&(this.selectedIndicator.active=t)},e}(d)).prototype,"titleLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(S.prototype,"artistLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(S.prototype,"difficultyLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(S.prototype,"highScoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(S.prototype,"lockIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(S.prototype,"selectButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(S.prototype,"selectedIndicator",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionSongSelectionController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AuditionGameManager.ts","./AuditionAudioManager.ts","./AuditionUIManager.ts"],(function(t){var e,i,n,o,r,a,l,u,s,c,g,b,p,h,d,f,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Button,u=t.ScrollView,s=t.Node,c=t.Prefab,g=t.Label,b=t.instantiate,p=t.Layout,h=t.Component},function(t){d=t.AuditionGameManager},function(t){f=t.AuditionAudioManager},function(t){S=t.AuditionUIManager}],execute:function(){var y,v,m,L,w,B,C,k,P,T,A,M,I,z,D,E,H,N,V,F,U,_,G,K,R,j;r._RF.push({},"1e799boHRpGq74bdTFaeFfD","AuditionSongSelectionController",void 0);var q=a.ccclass,x=a.property;t("AuditionSongSelectionController",(y=q("AuditionSongSelectionController"),v=x(l),m=x(u),L=x(s),w=x(c),B=x(g),C=x(g),k=x(g),P=x(g),T=x(g),A=x(l),y((z=e((I=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"backButton",z,o(e)),n(e,"songListScrollView",D,o(e)),n(e,"songListContent",E,o(e)),n(e,"songItemPrefab",H,o(e)),n(e,"songTitleLabel",N,o(e)),n(e,"artistLabel",V,o(e)),n(e,"difficultyLabel",F,o(e)),n(e,"bpmLabel",U,o(e)),n(e,"highScoreLabel",_,o(e)),n(e,"playButton",G,o(e)),n(e,"backgroundMusicPath",K,o(e)),n(e,"previewVolume",R,o(e)),n(e,"buttonSound",j,o(e)),e.selectedSongId=null,e.previewTimer=null,e}i(e,t);var r=e.prototype;return r.onLoad=function(){S.instance.showSongSelection(),this.setupButtonEvents(),this.playBackgroundMusic()},r.start=function(){this.populateSongList(),this.clearSongSelection()},r.setupButtonEvents=function(){this.backButton&&this.backButton.node.on(l.EventType.CLICK,this.onBackButtonClicked,this),this.playButton&&(this.playButton.node.on(l.EventType.CLICK,this.onPlayButtonClicked,this),this.playButton.interactable=!1)},r.playBackgroundMusic=function(){var t=f.instance;t&&t.loadSong(this.backgroundMusicPath).then((function(){t.playSong()})).catch((function(t){console.error("Failed to load selection music:",t)}))},r.populateSongList=function(){var t=this;this.songListContent&&this.songListContent.removeAllChildren();var e=d.instance;if(e){var i=e.getAvailableSongs();e.getUnlockedSongs();i.forEach((function(i){if(t.songItemPrefab){var n,o,r=b(t.songItemPrefab),a=null==(n=r.getChildByName("SongName"))?void 0:n.getComponent(g);a&&(a.string=i.title);var u=r.getChildByName("Difficulty");if(u)for(var s=u.children,c=0;c<s.length;c++)s[c].active=c<i.difficulty;var p=r.getChildByName("LockedIcon");p&&(p.active=!e.isSongUnlocked(i.id));var h=null==(o=r.getChildByName("HighScore"))?void 0:o.getComponent(g);if(h){var d=e.getHighScore(i.id);h.string=d>0?"High Score: "+d:""}var f=r.getComponent(l);if(f){var S=e.isSongUnlocked(i.id);f.interactable=S,S&&f.node.on(l.EventType.CLICK,(function(){t.onSongSelected(i.id)}))}t.songListContent.addChild(r)}}));var n=this.songListContent.getComponent(p);n&&n.updateLayout()}},r.onSongSelected=function(t){f.instance.playSound(this.buttonSound),this.selectedSongId=t;var e=d.instance;if(e){var i=e.getAvailableSongs().find((function(e){return e.id===t}));if(i){if(this.songTitleLabel&&(this.songTitleLabel.string=i.title),this.artistLabel&&(this.artistLabel.string=i.artist),this.difficultyLabel&&(this.difficultyLabel.string="Difficulty: "+i.difficulty),this.bpmLabel&&(this.bpmLabel.string="BPM: "+i.bpm),this.highScoreLabel){var n=e.getHighScore(t);this.highScoreLabel.string=n>0?"High Score: "+n:"No records yet"}this.playButton&&(this.playButton.interactable=!0),this.playPreview(i)}}},r.playPreview=function(t){var e=this,i=f.instance;i&&(this.stopPreview(),i.loadSong(t.audioPath).then((function(){i.setMusicVolume(e.previewVolume),i.playSong(t.previewStart);var n=t.previewEnd-t.previewStart;e.previewTimer=setTimeout((function(){e.stopPreview(),e.playBackgroundMusic()}),n)})).catch((function(t){console.error("Failed to play song preview:",t)})))},r.stopPreview=function(){this.previewTimer&&(clearTimeout(this.previewTimer),this.previewTimer=null);var t=f.instance;t&&t.stopSong()},r.clearSongSelection=function(){this.selectedSongId=null,this.songTitleLabel&&(this.songTitleLabel.string="Select a Song"),this.artistLabel&&(this.artistLabel.string=""),this.difficultyLabel&&(this.difficultyLabel.string=""),this.bpmLabel&&(this.bpmLabel.string=""),this.highScoreLabel&&(this.highScoreLabel.string=""),this.playButton&&(this.playButton.interactable=!1)},r.onBackButtonClicked=function(){f.instance.playSound(this.buttonSound),d.instance.changeScene("AuditionMainMenu")},r.onPlayButtonClicked=function(){this.selectedSongId&&(f.instance.playSound(this.buttonSound),d.instance.startSong(this.selectedSongId))},r.onDestroy=function(){this.stopPreview();var t=f.instance;t&&t.stopSong()},e}(h)).prototype,"backButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(I.prototype,"songListScrollView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(I.prototype,"songListContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(I.prototype,"songItemPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(I.prototype,"songTitleLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(I.prototype,"artistLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(I.prototype,"difficultyLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(I.prototype,"bpmLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(I.prototype,"highScoreLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(I.prototype,"playButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(I.prototype,"backgroundMusicPath",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"audition/audio/selection_music"}}),R=e(I.prototype,"previewVolume",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),j=e(I.prototype,"buttonSound",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),M=I))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuditionUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,a,o,c,l,s,u,b,h,S,g,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,c=e._decorator,l=e.Node,s=e.Label,u=e.Sprite,b=e.Color,h=e.Vec3,S=e.UIOpacity,g=e.tween,f=e.Component}],execute:function(){var m,p,L,d,w,y,M,C,v,I,k,E,T,O,A,N,U,z,G,_,F,R,B,P,x,D,W,Y,Z,j,q,H;o._RF.push({},"04144GbENxMebPIzsW6q1M6","AuditionUIManager",void 0);var V=c.ccclass,J=c.property,K=function(e){return e[e.MAIN_MENU=0]="MAIN_MENU",e[e.SONG_SELECTION=1]="SONG_SELECTION",e[e.GAMEPLAY=2]="GAMEPLAY",e[e.RESULTS=3]="RESULTS",e[e.SETTINGS=4]="SETTINGS",e}(K||{}),Q=e("FeedbackType",function(e){return e[e.PERFECT=0]="PERFECT",e[e.GOOD=1]="GOOD",e[e.MISS=2]="MISS",e[e.COMBO=3]="COMBO",e}({}));e("AuditionUIManager",(m=V("AuditionUIManager"),p=J(l),L=J(l),d=J(l),w=J(l),y=J(l),M=J(l),C=J(l),v=J(s),I=J(s),k=J(u),E=J(s),T=J(s),O=J(s),A=J(s),m(((H=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"mainMenuScreen",z,r(t)),i(t,"songSelectionScreen",G,r(t)),i(t,"gameplayScreen",_,r(t)),i(t,"resultsScreen",F,r(t)),i(t,"settingsScreen",R,r(t)),i(t,"feedbackLabel",B,r(t)),i(t,"comboLabel",P,r(t)),i(t,"scoreLabel",x,r(t)),i(t,"comboCountLabel",D,r(t)),i(t,"progressBar",W,r(t)),i(t,"finalScoreLabel",Y,r(t)),i(t,"accuracyLabel",Z,r(t)),i(t,"maxComboLabel",j,r(t)),i(t,"gradeLabel",q,r(t)),t.currentUIState=K.MAIN_MENU,t.feedbackTween=null,t.comboTween=null,t}n(t,e);var o=t.prototype;return o.onLoad=function(){null===t._instance?t._instance=this:this.node.destroy()},o.start=function(){this.showMainMenu()},o.showMainMenu=function(){this.hideAllScreens(),this.mainMenuScreen&&(this.mainMenuScreen.active=!0,this.currentUIState=K.MAIN_MENU),console.log("Showing main menu")},o.showSongSelection=function(){this.hideAllScreens(),this.songSelectionScreen&&(this.songSelectionScreen.active=!0,this.currentUIState=K.SONG_SELECTION),console.log("Showing song selection")},o.showGameplay=function(){this.hideAllScreens(),this.gameplayScreen&&(this.gameplayScreen.active=!0,this.currentUIState=K.GAMEPLAY),console.log("Showing gameplay")},o.showResults=function(){this.hideAllScreens(),this.resultsScreen&&(this.resultsScreen.active=!0,this.currentUIState=K.RESULTS),console.log("Showing results")},o.showSettings=function(){this.hideAllScreens(),this.settingsScreen&&(this.settingsScreen.active=!0,this.currentUIState=K.SETTINGS),console.log("Showing settings")},o.hideAllScreens=function(){this.mainMenuScreen&&(this.mainMenuScreen.active=!1),this.songSelectionScreen&&(this.songSelectionScreen.active=!1),this.gameplayScreen&&(this.gameplayScreen.active=!1),this.resultsScreen&&(this.resultsScreen.active=!1),this.settingsScreen&&(this.settingsScreen.active=!1)},o.updateScore=function(e){this.scoreLabel&&(this.scoreLabel.string=this.formatNumberWithZeros(e,8))},o.formatNumberWithZeros=function(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n},o.updateCombo=function(e){this.comboCountLabel&&(this.comboCountLabel.string=e.toString(),this.comboCountLabel.node.active=e>0,e>0&&e%10==0&&this.showComboFeedback(e))},o.updateProgress=function(e){this.progressBar&&(this.progressBar.fillRange=Math.max(0,Math.min(1,e)))},o.showFeedback=function(e){var t=this;if(this.feedbackLabel){var n=this.feedbackLabel.getComponent(s);if(n)switch(e){case Q.PERFECT:n.string="PERFECT",n.color=new b(255,215,0,255);break;case Q.GOOD:n.string="GOOD",n.color=new b(0,191,255,255);break;case Q.MISS:n.string="MISS",n.color=new b(255,69,0,255);break;case Q.COMBO:n.string="COMBO!",n.color=new b(255,105,180,255)}this.feedbackLabel.active=!0,this.feedbackLabel.scale=new h(1,1,1);var i=this.feedbackLabel.getComponent(S);i||(i=this.feedbackLabel.addComponent(S)),i.opacity=255,this.feedbackTween&&this.feedbackTween.stop(),this.feedbackTween=g(this.feedbackLabel).to(.1,{scale:new h(1.2,1.2,1)}).to(.5,{scale:new h(1,1,1)}).start(),g(i).to(.6,{opacity:0}).call((function(){t.feedbackLabel.active=!1})).start()}},o.showComboFeedback=function(e){var t=this;if(this.comboLabel){var n=this.comboLabel.getComponent(s);n&&(n.string=e+" COMBO!"),this.comboLabel.active=!0,this.comboLabel.scale=new h(1,1,1);var i=this.comboLabel.getComponent(S);i||(i=this.comboLabel.addComponent(S)),i.opacity=255,this.comboTween&&this.comboTween.stop(),this.comboTween=g(this.comboLabel).to(.2,{scale:new h(1.5,1.5,1)}).to(.8,{scale:new h(1,1,1)}).start(),g(i).to(1,{opacity:0}).call((function(){t.comboLabel.active=!1})).start()}},o.updateResults=function(e,t,n,i){if(this.finalScoreLabel&&(this.finalScoreLabel.string=this.formatNumberWithZeros(e,8)),this.accuracyLabel&&(this.accuracyLabel.string=t.toFixed(2)+"%"),this.maxComboLabel&&(this.maxComboLabel.string=""+n),this.gradeLabel)switch(this.gradeLabel.string=i,i){case"S":this.gradeLabel.color=new b(255,215,0,255);break;case"A":this.gradeLabel.color=new b(0,191,255,255);break;case"B":this.gradeLabel.color=new b(50,205,50,255);break;case"C":this.gradeLabel.color=new b(255,165,0,255);break;case"D":this.gradeLabel.color=new b(255,69,0,255);break;case"F":this.gradeLabel.color=new b(128,128,128,255)}},o.getCurrentUIState=function(){return this.currentUIState},a(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(f))._instance=null,z=t((U=H).prototype,"mainMenuScreen",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(U.prototype,"songSelectionScreen",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(U.prototype,"gameplayScreen",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(U.prototype,"resultsScreen",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(U.prototype,"settingsScreen",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(U.prototype,"feedbackLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(U.prototype,"comboLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(U.prototype,"scoreLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(U.prototype,"comboCountLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(U.prototype,"progressBar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"finalScoreLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"accuracyLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"maxComboLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"gradeLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=U))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./type.ts","./slot.ts"],(function(t){var e,i,n,o,s,r;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.ValueType},function(t){o=t.ConcretePrecisionType,s=t.TextureConcretePrecision},function(t){r=t.ShaderSlot}],execute:function(){i._RF.push({},"d0751arZzVMdrvnQr4rAMJC","base",void 0);var c=t("ShaderNodeProp",(function(t,e){this.value=void 0,this.data=void 0,this.value=t instanceof n?t.clone():t,this.data=e}));t("ShaderNode",function(){function t(){this.priority=0,this.uuid="",this.slots=[],this.depChunks=[],this.defines=[],this.isMasterNode=!1,this.isPropertyNode=!1,this.concretePrecisionType=o.Min,this.fixedConcretePrecision=0,this.inputs=[],this.outputs=[],this.props=new Map,this.data={}}var i=t.prototype;return i.init=function(){var t=this;this.slots.length=0,this.inputs.length=0,this.outputs.length=0,this.data.inputs&&this.data.inputs.forEach((function(e){var i=new r(e,t);t.inputs.push(i),t.slots.push(i)})),this.data.outputs&&this.data.outputs.forEach((function(e){var i=new r(e,t);t.outputs.push(i),t.slots.push(i)})),this.data.props&&this.data.props.forEach((function(e){var i=new c(e.default,e);t.props.set(e.display,i)}))},i.beforeGenreateCode=function(){},i.addDependency=function(t){t!==this&&(this.deps.includes(t)||this.deps.push(t))},i.calcConcretePrecision=function(){var t=this;if(this.fixedConcretePrecision>0&&this.slots.forEach((function(e){e._concretePrecision=t.fixedConcretePrecision})),this.concretePrecisionType!==o.Fixed){var e=1;this.concretePrecisionType===o.Min?(e=999,this.inputs.forEach((function(t){var i=t.concretePrecision;t.connectSlot&&(i=t.connectSlot.concretePrecision),e=Math.min(e,i)}))):this.concretePrecisionType===o.Max?(e=-999,this.inputs.forEach((function(t){var i=t.concretePrecision;t.connectSlot&&(i=t.connectSlot.concretePrecision),e=Math.max(e,i)}))):this.concretePrecisionType===o.Texture?e=s.Texture2D:console.error("Not supported ConcretePrecisionType : "+this.concretePrecisionType),this.slots.forEach((function(t){t._concretePrecision=e}))}},i.setPriority=function(t){this.priority=Math.max(t,this.priority);for(var e=0;e<this.deps.length;e++)this.deps[e].setPriority(this.priority+1)},i.getPropWithName=function(t){var e;return this.props&&(e=this.props.get(t)),e||new c(null,null)},i.getSlotWithSlotName=function(t){return this.slots.find((function(e){return e.displayName===t}))},i.getOutputSlotWithSlotName=function(t){return this.outputs.find((function(e){return e.displayName===t}))},i.getOutputVarName=function(t){return this.outputs[t].varName},i.getOutputVarDefine=function(t){return this.outputs[t].varDefine},i.getInputValue=function(t){return this.inputs[t].slotValue},i.generateCode=function(){return""},e(t,[{key:"type",get:function(){return this.constructor.name}},{key:"deps",get:function(){var t=[];return this.inputs.forEach((function(e){e.connectSlot&&t.push(e.connectSlot.node)})),t}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BeatmapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager2.ts","./resourceUtil.ts","./MTDefines.ts"],(function(t){var e,a,r,n,i,o,s,u,c;return{setters:[function(t){e=t.createClass,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy,i=t._decorator,o=t.JsonAsset},function(t){s=t.MagicTilesAudioManager},function(t){u=t.resourceUtil},function(t){c=t.NoteType}],execute:function(){var d,m;n._RF.push({},"f0997PWuMBCn4LtP5qegoPj","BeatmapManager",void 0);var l=i.ccclass;i.property,t("BeatmapManager",l("BeatmapManager")(((m=function(){function t(){this.audioManager=s.instance,this.beatmaps=new Map,this.activeBeatmap=null,this.beatmapDirectory="magic_tiles/beatmaps",this.maxLanes=4,this.init()}var n=t.prototype;return n.init=function(){console.log("BeatmapManager initialized")},n.loadBeatmapIndex=function(){var t=a(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.loadJsonAsset(this.beatmapDirectory+"/index");case 3:if((e=t.sent)&&Array.isArray(e)){t.next=6;break}throw new Error("Invalid beatmap index data");case 6:return t.abrupt("return",e);case 9:return t.prev=9,t.t0=t.catch(0),console.error("Failed to load beatmap index:",t.t0),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),n.loadBeatmapInfo=function(){var t=a(r().mark((function t(e){var a,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.beatmaps.has(e)){t.next=3;break}return this.activeBeatmap=this.beatmaps.get(e),t.abrupt("return",this.activeBeatmap);case 3:return t.prev=3,t.next=6,this.loadJsonAsset(this.beatmapDirectory+"/"+e);case 6:if(a=t.sent){t.next=9;break}throw new Error("Failed to load beatmap data for ID: "+e);case 9:return n=this.validateBeatmap(a),this.beatmaps.set(e,n),this.activeBeatmap=n,t.abrupt("return",n);case 15:return t.prev=15,t.t0=t.catch(3),console.error("Failed to load beatmap "+e+":",t.t0),t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,this,[[3,15]])})));return function(e){return t.apply(this,arguments)}}(),n.validateBeatmap=function(t){if(!t.metadata)throw new Error("Invalid beatmap format: missing metadata or notes");for(var e=0,a=["id","title","artist","bpm","difficulty","difficultyName","audioPath","midiPath"];e<a.length;e++){var r=a[e];if(!t.metadata[r])throw new Error("Invalid beatmap metadata: missing "+r)}return{metadata:{id:t.metadata.id,title:t.metadata.title,artist:t.metadata.artist,bpm:t.metadata.bpm,difficulty:t.metadata.difficulty,difficultyName:t.metadata.difficultyName,level:t.metadata.level||1,preview:{start:t.metadata.previewStart||0,end:t.metadata.previewEnd||30},audioPath:t.metadata.audioPath,midiPath:t.metadata.midiPath,backgroundImage:t.metadata.backgroundImage||"",coverImage:t.metadata.coverImage||""},notes:[]}},n.updateNotes=function(t,e){if(this.beatmaps.has(t)){var a=this.beatmaps.get(t);return a.notes=this.convertNotes(e,a.notes),this.beatmaps.set(t,a),a}return null},n.convertNotes=function(t,e){void 0===e&&(e=[]);var a,r=t.length;if(e.length>=r){for(var n=0;n<r;n++){var i=t[n];e[n].midi=i.midi,e[n].time=i.time,e[n].lane=this.getLandById(i.midi),e[n].duration=i.duration,e[n].durationTicks=i.durationTicks,e[n].velocity=i.velocity,e[n].type=this.getNoteType(i)}e.length>r&&(e.length=r),a=e}else{a=new Array(r);for(var o=0;o<r;o++){var s=t[o];o<e.length?(a[o]=e[o],a[o].midi=s.midi,a[o].time=s.time,a[o].lane=this.getLandById(s.midi),a[o].duration=s.duration,a[o].durationTicks=s.durationTicks,a[o].velocity=s.velocity,a[o].type=this.getNoteType(s)):a[o]={midi:s.midi,time:s.time,lane:this.getLandById(s.midi),duration:s.duration,durationTicks:s.durationTicks,velocity:s.velocity,type:this.getNoteType(s)}}}a.sort((function(t,e){return t.time-e.time}));for(var u=0;u<a.length-1;u++){var d=a[u],m=a[u+1];m.time===d.time&&u+2<a.length&&(m=a[u+2]),d.type!==c.HOLD&&(d.duration=Math.min(m.time-d.time,.23))}if(a.length>0){var l=a[a.length-1];l.type!==c.HOLD&&l.duration<=0&&(l.duration=.2)}return a},n.getLandById=function(t){return t-96},n.getNoteType=function(t){return t.duration>.3?c.HOLD:c.TAP},n.loadJsonAsset=function(t){return new Promise((function(e,a){u.loadRes(t,o,(function(r,n){r?a(r):n?e(n.json):a(new Error("JSON asset not found at path: "+t))}))}))},n.loadBeatmapAudioData=function(){var t=a(r().mark((function t(){var e,a,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.activeBeatmap){t.next=3;break}return console.error("No active beatmap to load audio for"),t.abrupt("return",null);case 3:return t.prev=3,e=this.activeBeatmap.metadata,a=e.audioPath,n=e.midiPath,t.next=7,this.audioManager.loadBeatmapAudioData(a,n);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(3),console.error("Failed to load beatmap audio:",t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),n.getActiveBeatmap=function(){return this.activeBeatmap},n.getNotes=function(){return this.activeBeatmap?this.activeBeatmap.notes:[]},n.calculateDifficulty=function(t){var e=t.notes;if(!e.length)return 1;for(var a=e[e.length-1].time-e[0].time,r=e.length/(a||1),n=e.filter((function(t){return t.type!==c.TAP})).length/e.length,i=0,o=1;o<e.length;o++)e[o].lane!==e[o-1].lane&&i++;for(var s=i/(e.length-1),u=0,d=1;d<e.length;d++){e[d].time-e[d-1].time<.3&&u++}var m=1+.5*r+2*n+2*s+3*(u/(e.length-1));return Math.min(Math.round(10*m)/10,10)},n.getBeatmapPreview=function(t){var e=this.beatmaps.get(t);if(!e)return[];var a=e.metadata.preview,r=a.start,n=a.end;return e.notes.filter((function(t){return t.time>=r&&t.time<=n}))},n.validateCustomBeatmap=function(t){try{return this.validateBeatmap(t)}catch(t){return console.error("Invalid custom beatmap format:",t),null}},n.addTempBeatmap=function(t,e){return this.beatmaps.set(t,e),this.activeBeatmap=e,e},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,d=m))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/boolean.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){c=t.ConcretePrecisionType},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"21fbes9bMJN6oBb3TRVMZZ3","boolean",void 0);t("default",o({menu:"Input/Basic/Boolean",title:"Boolean"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).concretePrecisionType=c.Fixed,e.data={inputs:[i("In",0,"float","vector")],outputs:[i("Out",0,"float","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = "+t+";\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/branch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,c,r,o,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e.Vec4},function(e){r=e.register},function(e){o=e.ShaderNode},function(e){i=e.ConcretePrecisionType},function(e){u=e.slot}],execute:function(){var a;n._RF.push({},"2f31f/lK6hGfInMVVNdS8Sy","branch",void 0);e("default",r({menu:"Logic/Branch",title:"Branch"})(a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).concretePrecisionType=i.Max,t.data={inputs:[u("Predicate",!1,"boolean","boolean"),u("True",c.ZERO,"vec4","vector"),u("False",c.ZERO,"vec4","vector")],outputs:[u("Out",c.ZERO,"vec4","vector")]},t}t(n,e);var r=n.prototype;return r.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = ("+e+") ? ("+t+") : ("+n+");\n        "},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts"],(function(i){var t,n,e,o,s,l;return{setters:[function(i){t=i.inheritsLoose},function(i){n=i.cclegacy,e=i._decorator,o=i.Vec3,s=i.Component},function(i){l=i.GameConstant}],execute:function(){var a;n._RF.push({},"be613BiyadMYYQcjSzr/JtE","Bullet",void 0);var c=e.ccclass;e.property,i("Bullet",c("Bullet")(a=function(i){function n(){for(var t,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(t=i.call.apply(i,[this].concat(e))||this).gravity=-18,t.elapsedTime=0,t.initialVelocity=new o(0,0,0),t.initialPosition=new o,t}t(n,i);var e=n.prototype;return e.shootWithVelocity=function(i){this.gravity=-l.GAME.PHYSIC_GRAVITY,this.elapsedTime=0,this.initialVelocity=i,this.initialPosition.set(this.node.position)},e.stop=function(){this.initialVelocity=o.ZERO.clone()},e.update=function(i){this.elapsedTime+=i;var t=this.calculatePosition(this.elapsedTime);this.node.setPosition(t)},e.calculatePosition=function(i){var t=new o;return t.x=this.initialPosition.x+this.initialVelocity.x*i,t.y=this.initialPosition.y+this.initialVelocity.y*i+.5*this.gravity*i*i,t.z=this.initialPosition.z+this.initialVelocity.z*i,t},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonAutoSound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(t){var n,o,e,u,i,r,a,c,l,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,u=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,a=t.Button,c=t.EventHandler,l=t.Component},function(t){s=t.AudioManager}],execute:function(){var d,p,f;i._RF.push({},"9bf359IqNNOdo7v0PQCju2a","ButtonAutoSound",void 0);var v=r.ccclass,h=r.property;t("ButtonAutoSound",v("ButtonAutoSound")((f=n((p=function(t){function n(){for(var n,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return n=t.call.apply(t,[this].concat(i))||this,e(n,"audioName",f,u(n)),n}o(n,t);var i=n.prototype;return i.onLoad=function(){var t=this.getComponent(a);if(t){var n=new c;n.target=this.node,n.component="ButtonAutoSound",n.handler="onButtonClicked",t.clickEvents.push(n)}},i.onButtonClicked=function(){var t;null==(t=s.instance)||t.playSound(this.audioName)},n}(l)).prototype,"audioName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"A_Click_Menu"}}),d=p))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonHotKey.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HotKey.ts"],(function(t){var o,n,e,r,u;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,r=t.Button},function(t){u=t.Hotkey}],execute:function(){var c;n._RF.push({},"099f7MZV3JPrp3nEUGlRKH5","ButtonHotKey",void 0);var i=e.ccclass;e.property,t("ButtonHotKey",i("ButtonHotKey")(c=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(o=t.call.apply(t,[this].concat(e))||this).button=null,o}o(n,t);var e=n.prototype;return e.onLoad=function(){t.prototype.onLoad.call(this),this.button=this.getComponent(r)},e.trigger=function(){t.prototype.trigger.call(this),this.button&&this.button.clickEvents.forEach((function(t){t.emit(null)}))},n}(u))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtil.ts"],(function(t){var e,i,n,o,r,a,s,l,u,c,h,p,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Vec3,u=t.sys,c=t.input,h=t.Input,p=t.Vec2,m=t.Component},function(t){f=t.MathUtil}],execute:function(){var y,g,v,d,T,E,b,N,V,D,M,C,O,S,_,W,z;r._RF.push({},"ee594FJk7xOGo9n2U0Qsd54","CameraController",void 0);var L=a.ccclass,w=a.property;t("CameraController",(y=L("CameraController"),g=w({type:s,displayName:"摄像机节点"}),v=w({type:s,displayName:"目标节点"}),d=w({displayName:"最小距离"}),T=w({displayName:"最大距离"}),E=w({displayName:"平滑时间"}),b=w({displayName:"鼠标滚轮敏感度"}),N=w({displayName:"双指触摸敏感度"}),y((M=e((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"cameraNode",M,o(e)),n(e,"targetNode",C,o(e)),n(e,"minDistance",O,o(e)),n(e,"maxDistance",S,o(e)),n(e,"smoothTime",_,o(e)),n(e,"mouseSensitivity",W,o(e)),n(e,"touchSensitivity",z,o(e)),e.currentValue=0,e.targetValue=0,e.currentVelocity=0,e.lastTouchesDistance=null,e.tempVec3=new l,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.init(),this.registerEvent()},r.onDestroy=function(){this.unregisterEvent()},r.registerEvent=function(){u.platform===u.Platform.MOBILE_BROWSER?(c.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(h.EventType.TOUCH_END,this.onTouchEnd,this)):c.on(h.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},r.unregisterEvent=function(){u.platform===u.Platform.MOBILE_BROWSER?(c.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),c.off(h.EventType.TOUCH_END,this.onTouchEnd,this)):c.off(h.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},r.init=function(){var t;this.cameraNode.lookAt(this.targetNode.getWorldPosition()),t=u.platform===u.Platform.MOBILE_BROWSER?15:8,this.setTarget(t)},r.onMouseWheel=function(t){var e=t.getScrollY()*this.mouseSensitivity;this.setTarget(this.targetValue-e)},r.onTouchMove=function(t){var e=t.getAllTouches();if(!(e.length<2)){var i=p.distance(e[0].getLocation(),e[1].getLocation());if(null!==this.lastTouchesDistance){var n=(i-this.lastTouchesDistance)*this.touchSensitivity;this.setTarget(this.targetValue-n)}this.lastTouchesDistance=i}},r.onTouchEnd=function(t){this.lastTouchesDistance=null},r.update=function(t){if(this.currentValue!==this.targetValue){var e=f.smoothDamp(this.currentValue,this.targetValue,this.currentVelocity,this.smoothTime);this.currentVelocity=e.velocity,this.setCurrent(e.value)}},r.setCurrent=function(t){var e=l.subtract(this.tempVec3,this.cameraNode.getWorldPosition(),this.targetNode.getWorldPosition());e.normalize().multiplyScalar(t),this.cameraNode.setWorldPosition(e),this.currentValue=t},r.setTarget=function(t){this.targetValue=f.clamp(t,this.minDistance,this.maxDistance)},e}(m)).prototype,"cameraNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(D.prototype,"targetNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(D.prototype,"minDistance",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=e(D.prototype,"maxDistance",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),_=e(D.prototype,"smoothTime",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),W=e(D.prototype,"mouseSensitivity",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),z=e(D.prototype,"touchSensitivity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),V=D))||V));r._RF.pop()}}}));

System.register("chunks:///_virtual/Cannon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ProjectileMath.ts","./TrajectoryDrawer.ts","./VectorUtil.ts","./Bullet.ts","./audioManager.ts"],(function(t){var e,i,r,n,a,o,l,c,s,u,h,p,y,f,m,g,d,b,w,A,P,v,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,l=t._decorator,c=t.Node,s=t.Prefab,u=t.Enum,h=t.SkeletalAnimation,p=t.Vec3,y=t.tween,f=t.v3,m=t.easing,g=t.instantiate,d=t.director,b=t.Component},function(t){w=t.ProjectileMath},function(t){A=t.TrajectoryDrawer},function(t){P=t.VectorUtil},function(t){v=t.Bullet},function(t){D=t.AudioManager}],execute:function(){var x,N,E,T,I,_,j,C,F,L,z,X,V,S,W,M,k,O,H,U,B,R,Y,G,q,K,J;o._RF.push({},"af3dac0xL5BLrK8YABTwvI2","Cannon",void 0);var Q=l.ccclass,Z=l.property,$=function(t){return t[t.FIXED_ALL=1]="FIXED_ALL",t[t.FIXED_PITCH_ANGLE=2]="FIXED_PITCH_ANGLE",t[t.FIXED_VELOCITY=3]="FIXED_VELOCITY",t[t.UNFIXED=4]="UNFIXED",t}($||{});t("Cannon",(x=Q("Cannon"),N=Z({type:c,displayName:"yawAxis",group:{name:"Configs",id:"1"}}),E=Z({type:c,displayName:"pitchAxis",group:{name:"Configs",id:"1"}}),T=Z({type:c,displayName:"firePoint",group:{name:"Configs",id:"1"}}),I=Z({type:s,displayName:"bulletPrefab",group:{name:"model",id:"2"}}),_=Z({type:c,group:{name:"model",id:"2"}}),j=Z({type:u($),displayName:"mode",group:{name:"settings",id:"3"}}),C=Z({displayName:"fixedPitchAngle",visible:function(){return this.mode===$.FIXED_PITCH_ANGLE||this.mode===$.FIXED_ALL},group:{name:"settings",id:"3"}}),F=Z({displayName:"fixedVelocity",visible:function(){return this.mode===$.FIXED_VELOCITY||this.mode===$.FIXED_ALL},group:{name:"settings",id:"3"}}),L=Z({displayName:"useSmallPitchAngle",visible:function(){return this.mode===$.FIXED_VELOCITY},group:{name:"settings",id:"3"}}),z=Z({type:A,displayName:"trajectoryDrawer",group:{name:"trajectory",id:"4"}}),X=Z({displayName:"showTrajectory",visible:function(){return null!=this.trajectoryDrawer},group:{name:"trajectory",id:"4"}}),V=Z({type:[h],group:{name:"Animation",id:"5"}}),x((M=e((W=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"yawAxis",M,n(e)),r(e,"pitchAxis",k,n(e)),r(e,"firePoint",O,n(e)),r(e,"bulletPrefab",H,n(e)),r(e,"bulletContainer",U,n(e)),r(e,"mode",B,n(e)),r(e,"fixedPitchAngle",R,n(e)),r(e,"fixedVelocity",Y,n(e)),r(e,"useSmallPitchAngle",G,n(e)),r(e,"trajectoryDrawer",q,n(e)),r(e,"_showTrajectory",K,n(e)),e.velocity=0,e.curTargetPos=new p(0,.753,-7.671),r(e,"shootAnimations",J,n(e)),e.shootAnimationState=[],e}i(e,t);var o=e.prototype;return o.rotateTo=function(t,e){this.pitch=t,this.yaw=e},o.aim=function(t){this.curTargetPos.set(t);var e=p.subtract(new p,t,this.mainPosition),i=-P.signedAngle(e,this.mainForward,this.mainUp),r=NaN,n=NaN,a=NaN,o=!1;switch(this.mode){case $.FIXED_ALL:r=this.fixedPitchAngle,a=this.fixedVelocity,o=!0;break;case $.FIXED_PITCH_ANGLE:r=this.fixedPitchAngle,a=this.calculateVelocity(t,-r);break;case $.FIXED_VELOCITY:a=this.fixedVelocity;var l=this.calculateAngle(t,a),c=l.angle1,s=l.angle2;isNaN(c)||isNaN(s)?o=!0:r=this.useSmallPitchAngle?-Math.min(c,s):-Math.max(c,s);break;case $.UNFIXED:var u=this.calculateWithMaxHeight(t);r=-u.angle,a=u.velocity,n=u.time}return isNaN(r)&&(r=this.pitch),this.rotateTo(r,i),isNaN(a)||(this.velocity=a),this.trajectoryDrawer&&this.drawTrajectory(t,-this.pitch,this.velocity,o),{time:n,velocity:a,pitchAngle:r}},o.fire=function(t){var e=0;t&&(e=this.aim(t).time);var i=this.shoot(this.velocity);return y(this.yawAxis).to(.1,{position:f(0,-.1,.035)}).to(.35,{position:f(0,0,0)},{easing:m.quartOut}).start(),{flyTime:e,bullet:i}},o.shoot=function(t){var e=this.generateBullet(),i=e.forward.negative();i.multiplyScalar(t);var r=e.getComponent(v);return r.shootWithVelocity(i),r},o.drawTrajectory=function(t,e,i,r){var n=this.firePoint.getWorldPosition();if(r){var a=w.calculateDisplacementAtMoment(e,i,2).x;this.trajectoryDrawer.draw(n,t,e,i,a)}else this.trajectoryDrawer.draw(n,t,e,i)},o.generateBullet=function(){var t=g(this.bulletPrefab);return d.getScene().addChild(t),t.setWorldPosition(this.firePoint.getWorldPosition()),t.setWorldRotation(this.firePoint.getWorldRotation()),t},o.calculateDisplacement=function(t){var e=this.firePoint.getWorldPosition(),i=p.subtract(new p,t,e),r=i.y;return{horizontal:P.projectOnPlane(i,p.UP).length(),vertical:r}},o.calculateVelocity=function(t,e){var i=this.calculateDisplacement(t),r=i.horizontal,n=i.vertical;return w.calculateWithAngle(r,n,e)},o.calculateAngle=function(t,e){var i=this.calculateDisplacement(t),r=i.horizontal,n=i.vertical;return w.calculateWithVelocity(r,n,e)},o.calculateWithMaxHeight=function(t){var e=this.calculateDisplacement(t),i=e.horizontal,r=e.vertical,n=Math.max(.5,r+.3*i);return w.calculateWithMaxHeight(i,r,n)},o.fireWithAnimation=function(t,e){var i=this;this.shootAnimationState=[],this.shootAnimations.forEach((function(t){var e=t.getState("Shoot");e.speed=1,e.time=0,e.play(),i.shootAnimationState.push(e)})),this.scheduleOnce((function(){var r=i.fire(t),n=r.flyTime,a=r.bullet;i.scheduleOnce((function(){null==e||e(a)}),n),D.instance.playSound("sfx_CannonWars_Shoot")}),.6)},a(e,[{key:"showTrajectory",get:function(){return this._showTrajectory},set:function(t){this._showTrajectory=t,this.trajectoryDrawer&&(t?this.curTargetPos&&this.aim(this.curTargetPos):this.trajectoryDrawer.clear())}},{key:"pitch",get:function(){return this.pitchAxis.eulerAngles.x},set:function(t){this.pitchAxis.setRotationFromEuler(t,0,0)}},{key:"yaw",get:function(){return this.yawAxis.eulerAngles.y},set:function(t){this.yawAxis.setRotationFromEuler(0,t,0)}},{key:"mainPosition",get:function(){return this.yawAxis.getWorldPosition()}},{key:"mainForward",get:function(){return this.yawAxis.parent.forward.negative()}},{key:"mainUp",get:function(){return this.yawAxis.up}}],[{key:"Mode",get:function(){return $}}]),e}(b)).prototype,"yawAxis",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(W.prototype,"pitchAxis",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(W.prototype,"firePoint",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(W.prototype,"bulletPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(W.prototype,"bulletContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(W.prototype,"mode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.FIXED_PITCH_ANGLE}}),R=e(W.prototype,"fixedPitchAngle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-45}}),Y=e(W.prototype,"fixedVelocity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),G=e(W.prototype,"useSmallPitchAngle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=e(W.prototype,"trajectoryDrawer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(W.prototype,"_showTrajectory",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(W.prototype,"showTrajectory",[X],Object.getOwnPropertyDescriptor(W.prototype,"showTrajectory"),W.prototype),J=e(W.prototype,"shootAnimations",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=W))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/ceil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,c,i,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){i=t.register},function(t){r=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;n._RF.push({},"9c519gjpitF6YbEaQTLOEve","ceil",void 0);t("default",i({menu:"Math/Round/Ceil",title:"Ceil"})(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).data={inputs:[o("In",c.ZERO,"vec4","vector")],outputs:[o("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var i=n.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = ceil("+t+");\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CenterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){var t,i,a,r,n,o,s,l,p,c,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.v3},function(e){p=e.Manager},function(e){c=e.AlwaysScroll},function(e){h=e.ScrollManager},function(e){u=e.ViewManager}],execute:function(){var d,g,v,f,_,m,w,M,A,x,z;o._RF.push({},"e5ff40NmxhKAaD04pv29iQm","CenterManager",void 0);var b=s.ccclass,S=s.property;e("CenterManager",(d=b("CenterManager"),g=S("boolean"),v=S({visible:function(){return this.enabled},tooltip:"自动居中动画的时长"}),f=S({range:[0,1],slide:!0,step:.1,tooltip:"容器(view)的锚点,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),_=S({range:[0,1],slide:!0,step:.1,tooltip:"元素(item)的锚点位置,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),d((M=t((w=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"_enabled",M,r(t)),a(t,"duration",A,r(t)),a(t,"containerAnchorPoint",x,r(t)),a(t,"elementAnchorPoint",z,r(t)),t}i(t,e);var o=t.prototype;return o.getContainerOffset=function(e){void 0===e&&(e=this.containerAnchorPoint);var t=0;return t=this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e,this.adapter.mainAxisSize*t},o.getElementOffset=function(e){void 0===e&&(e=this.elementAnchorPoint);return this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e},o.onInit=function(){this.adapter.scrollManager.on(h.Event.ON_ABOUT_TO_STOP,this._onAboutToStop,this),this.adapter.viewManager.on(u.Event.ON_UPDATE_VIEWS,this.scrollToCenter,this,!0)},o._onAboutToStop=function(){this.scrollToCenter()},o.scrollToCenter=function(e){if(void 0===e&&(e=this.duration),this.enabled){var t=this.getCenterVisibleIndex();if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);this.adapter.scrollManager.scrollToGroupIndex(e,i.index)}}},o.getCenterVisibleIndex=function(e,t){void 0===e&&(e=this.containerAnchorPoint),void 0===t&&(t=this.elementAnchorPoint);for(var i=this.adapter.mainAxis,a=this.getContainerOffset(e),r=-1,n=Number.MAX_SAFE_INTEGER,o=0;o<this.adapter.viewManager.visibleLength;o++){var s=this.adapter.viewManager.getVisibleView(o);if(!s||!s.group)break;var p={x:s.group.position.x,y:s.group.position.y};p[i]-=this.adapter.multiplier*s.group.size[i]*t;var c=this.adapter.scrollManager.content.convertToWorldSpaceAR(l(p.x,p.y)),h=this.adapter.scrollManager.view.convertToNodeSpaceAR(c),u=Math.abs(h[i]+this.adapter.multiplier*a);u<n&&(n=u,r=o)}return r},o.getPositionByGroupIndex=function(e,t,i){void 0===t&&(t=c.Auto),void 0===i&&(i=!1);var a=this.adapter.viewManager.getGroup(e);if(!a)return null;var r=null;if(t==c.Header&&this.adapter.viewManager.loopHeader)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysHeader(e,a));else if(t==c.Footer&&this.adapter.viewManager.loopFooter)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysFooter(e,a));else if(null==(r=this._checkExists(e))){var n=this.adapter.viewManager.header,o=this.adapter.viewManager.footer;n?e>o.index?r=this._calcTargetFooter(o.group,o.index+1,e,a):e<n.index&&(r=this._calcTargetHeader(n.group,n.index-1,e,a)):r={position:a.position[this.adapter.mainAxis],size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}}return this._convertTargetToPosition(r)},o._convertTargetToPosition=function(e){var t=null;if(e){var i=this.adapter.multiplier,a=-1==i?e.anchor:1-e.anchor;t=-e.position,t-=this.getContainerOffset()*i,t-=e.size*a*i,t+=e.size*this.getElementOffset()*i}return t},o._checkExists=function(e){var t=this.adapter.viewManager.getVisibleIndexByGroupIndex(e);if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);return{position:i.group.position[this.adapter.mainAxis],size:i.group.size[this.adapter.mainAxis],anchor:i.group.anchorPoint[this.adapter.mainAxis]}}return null},o._calcTargetFooter=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitFooterSize(e),n=t;n<=i;n++)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._calcTargetHeader=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitHeaderSize(e),n=t;n>=i;n--)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._alwaysHeader=function(e,t){var i=0,a=e,r=this.adapter.viewManager.header;return r&&(i=this.adapter.viewManager.internal_getInitHeaderSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToHeader(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._alwaysFooter=function(e,t){var i=0,a=e,r=this.adapter.viewManager.footer;return r&&(i=this.adapter.viewManager.internal_getInitFooterSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToFooter(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._calcSizeToHeader=function(e,t,i){for(;;){if(--e<0){if(!this.adapter.viewManager.loopHeader)return i;e=this.adapter.viewManager.groupLength-1}if(i+=this.adapter.viewManager.internal_accumulationSize(e),t==e)return i}},o._calcSizeToFooter=function(e,t,i){for(;;){if(++e>=this.adapter.viewManager.groupLength){if(!this.adapter.viewManager.loopFooter)return i;e=0}if(i+=this.adapter.viewManager.internal_accumulationSize(e),e==t)return i}},n(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e)}},{key:"max",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?e:this.adapter.mainAxisSize-e}},{key:"min",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?this.adapter.mainAxisSize-e:e}}]),t}(p)).prototype,"_enabled",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(w.prototype,"enabled",[g],Object.getOwnPropertyDescriptor(w.prototype,"enabled"),w.prototype),A=t(w.prototype,"duration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(w.prototype,"containerAnchorPoint",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(w.prototype,"elementAnchorPoint",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=w))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/clamp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,c,r,u,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){r=t.register},function(t){u=t.ShaderNode},function(t){o=t.slot}],execute:function(){var a;n._RF.push({},"4637audjsFPEKaBJvnUsO5t","clamp",void 0);t("default",r({menu:"Math/Range/Clamp",title:"Clamp"})(a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[o("In",c.ZERO,"vec4","vector"),o("Min",c.ZERO,"vec4","vector"),o("Max",c.ZERO,"vec4","vector")],outputs:[o("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = clamp("+t+", "+e+", "+n+");\n        "},n}(u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ClickToLoadUrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,l,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,c=e.Node,a=e.Component}],execute:function(){var s,u,p,f,h,d,v;r._RF.push({},"a48dbUuDTJPDp+LzPEDK4rA","ClickToLoadUrl",void 0);var y=l.ccclass,T=l.property;e("ClickToLoadUrl",(s=y("ClickToLoadUrl"),u=T({multiline:!0}),p=T({tooltip:"是否使用新窗口打开"}),s((d=t((h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"url",d,o(t)),i(t,"openInNewTap",v,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.registerEvent()},r.onDestroy=function(){this.unregisterEvent()},r.registerEvent=function(){this.node.on(c.EventType.TOUCH_END,this.onClick,this)},r.unregisterEvent=function(){this.node.off(c.EventType.TOUCH_END,this.onClick,this)},r.onClick=function(){var e=this.url;e&&""!==e&&(this.openInNewTap?window.open(e):window.location.href=e)},t}(a)).prototype,"url",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://gitee.com/ifaswind"}}),v=t(h.prototype,"openInNewTap",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=h))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/ClientEvent.ts",["cc"],(function(n){var r,e;return{setters:[function(n){r=n.cclegacy,e=n._decorator}],execute:function(){var t,a;r._RF.push({},"f3654C79/FGx7RDXCjGKZLE","ClientEvent",void 0);var l=e.ccclass;e.property,n("ClientEvent",l("clientEvent")(((a=function(){function n(){}return n.on=function(r,e,t){var a={handler:e,target:t},l=n._handlers[r];l||(l=[],n._handlers[r]=l);for(var c=0;c<l.length;c++)if(!l[c])return l[c]=a,c;return l.push(a),l.length},n.off=function(r,e,t){var a=n._handlers[r];if(a)for(var l=0;l<a.length;l++){var c=a[l];if(c.handler===e&&(!t||t===c.target)){a.splice(l,1);break}}},n.dispatchEvent=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var l,c=n._handlers[r],i=[];for(l=1;l<arguments.length;l++)i.push(arguments[l]);if(c)for(l=0;l<c.length;l++){var f=c[l];f.handler&&f.handler.apply(f.target,i)}},n}())._handlers={},t=a))||t);r._RF.pop()}}}));

System.register("chunks:///_virtual/color.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-node.ts","./utils.ts","./index3.ts","./register.ts"],(function(t){var e,o,r,n,u,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t.Vec4},function(t){n=t.default},function(t){u=t.prop,c=t.slot},null,function(t){i=t.register}],execute:function(){var l;o._RF.push({},"e3d34kNDmBJC7P5ldMA5yga","color",void 0);t("default",i({menu:"Input/Basic/Color",title:"Color"})(l=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).fixedConcretePrecision=4,e.data={props:[u("Color",new r,"color")],outputs:[c("Out",new r,"vec4","vector")]},e}return e(o,t),o.prototype.generateCode=function(){var t=this.getPropWithName("Color").value;return"vec4 "+this.getOutputVarName(0)+" = vec4("+t.x+", "+t.y+", "+t.z+", "+t.w+");"},o}(n))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/combine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./base.ts","./type.ts","./utils.ts","./register.ts"],(function(t){var e,o,l,n,i,c,u,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,l=t.Vec4,n=t.Vec3,i=t.Vec2},null,function(t){c=t.ShaderNode},function(t){u=t.ConcretePrecisionType},function(t){r=t.slot},function(t){s=t.register}],execute:function(){var a;o._RF.push({},"c9cd7cUxzJGfqrBxyo6i9Gm","combine",void 0);t("default",s({menu:"Channel/Combine",title:"Combine"})(a=function(t){function o(){for(var e,o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))||this).concretePrecisionType=u.Fixed,e.data={inputs:[r("R",0,"float","vector"),r("G",0,"float","vector"),r("B",0,"float","vector"),r("A",0,"float","vector")],outputs:[r("RGBA",l.ZERO,"vec4","vector"),r("RGB",n.ZERO,"vec3","vector"),r("RG",i.ZERO,"vec2","vector")]},e}return e(o,t),o.prototype.generateCode=function(){var t=this.getSlotWithSlotName("R"),e=this.getSlotWithSlotName("G"),o=this.getSlotWithSlotName("B"),l=this.getSlotWithSlotName("A"),n=this.getSlotWithSlotName("RGBA"),i=this.getSlotWithSlotName("RGB"),c=this.getSlotWithSlotName("RG"),u="";return n&&n.connectSlot&&(u+=(null==n?void 0:n.varDefine)+" = vec4("+(null==t?void 0:t.slotValue)+", "+(null==e?void 0:e.slotValue)+", "+(null==o?void 0:o.slotValue)+", "+(null==l?void 0:l.slotValue)+");\n"),i&&i.connectSlot&&(u+=(null==i?void 0:i.varDefine)+" = vec3("+(null==t?void 0:t.slotValue)+", "+(null==e?void 0:e.slotValue)+", "+(null==o?void 0:o.slotValue)+");\n"),c&&c.connectSlot&&(u+=(null==c?void 0:c.varDefine)+" = vec2("+(null==t?void 0:t.slotValue)+", "+(null==e?void 0:e.slotValue)+");\n"),u},o}(c))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/comparison.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,r,a,o,n,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy},function(e){a=e.register},function(e){o=e.ShaderNode},function(e){n=e.ConcretePrecisionType},function(e){s=e.prop,c=e.slot}],execute:function(){var u;r._RF.push({},"29cf0dWHHJIo4dVJcv8q6Ik","comparison",void 0);var i=function(e){return e[e.Equal=0]="Equal",e[e.NotEqual=1]="NotEqual",e[e.Less=2]="Less",e[e.LessOrEqual=3]="LessOrEqual",e[e.Greater=4]="Greater",e[e.GreaterOrEqual=5]="GreaterOrEqual",e}(i||{});e("default",a({menu:"Logic/Comparison",title:"Comparison"})(u=function(e){function r(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).concretePrecisionType=n.Fixed,t.fixedConcretePrecision=1,t.data={props:[s("Type",i.Equal,"enum",{enum:i})],inputs:[c("A",0,"float","vector"),c("B",0,"float","vector")],outputs:[c("Out",0,"boolean","boolean")]},t}t(r,e);var a=r.prototype;return a.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},a.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1),r=this.getOutputVarDefine(0),a="";switch(this.getPropWithName("Type").value){case i.Equal:a="("+e+" == "+t+")";break;case i.NotEqual:a="("+e+" != "+t+")";break;case i.Less:a="("+e+" < "+t+")";break;case i.LessOrEqual:a="("+e+" <= "+t+")";break;case i.Greater:a="("+e+" > "+t+")";break;case i.GreaterOrEqual:a="("+e+" >= "+t+")"}return"\n            "+r+" = "+a+";\n        "},r}(o))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/ComponentPool.ts",["cc"],(function(o){var t,n;return{setters:[function(o){t=o.cclegacy,n=o._decorator}],execute:function(){var e;t._RF.push({},"bebeaAU60hJjpSfuLpkpTPQ","ComponentPool",void 0);var r=n.ccclass;n.property,o("ComponentPool",r("ComponentPool")(e=function(){function o(o,t){this.pool=void 0,this.factory=void 0,this.parentNode=void 0,this.pool=[],this.factory=o,this.parentNode=t}var t=o.prototype;return t.init=function(o){for(var t=0;t<o;t++){var n=this.factory();n.node.parent=this.parentNode,this.put(n)}},t.get=function(){if(this.pool.length>0){var o=this.pool.pop();return o.node.active=!0,o}var t=this.factory();return t.node.parent=this.parentNode,t},t.put=function(o){o.node.active=!1,o.node.parent=this.parentNode,this.pool.push(o)},t.putAll=function(o){var t=this;o.forEach((function(o){return t.put(o)}))},t.clear=function(){this.pool.forEach((function(o){o.node.destroy()})),this.pool=[]},o}())||e);t._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"5f860beWrBGtbckv8i95YZU","Constants",void 0);E("GameConstant",{EVENT_NAME:{GAME_INITED:"GAME_INITED_DONE",USERDATA_UPDATED:"USERDATA_UPDATED",USERCOIN_UPDATED:"USERCOIN_UPDATED"},SCENE_NAME:{HOME:"Home"},RESOURCE_PATH:{GAME_MAIN_PATH:"prefab/Game"},SOUND_FILES:{SFX_PATH:"sounds/sfx/"},CAMERA_CONFIG:{MIN_SIZE:200},CAMERA_ZOOM_THRESHOLD:500,AUTO_TIME:3,STORAGE_KEY:{BGM_VOLUME:"BGM_VOLUME",SFX_VOLUME:"SFX_VOLUME",USER_MODIFIER:"USER_MODIFIER"},EFFECT:{MOVING_UI_OBJECT:"moving",UI_COINS:"coins",UI_TURNS:"turns",LEVLEUP_SMALL:"levelup_small",LEVLEUP_BIG:"levelup_big",CONFETTI:"confetti",TEXT:"text"},GAME:{PHYSIC_GRAVITY:18},VIEW:{TOPHUB:"ViewTopHub"},POPUP:{MESSAGE:"PopupMessage",LOADING:"PopupLoading"}}),E("CurrentEnviroment",{API:"",LOG:!0}),E("setEnvi",(function(_){E("CurrentEnviroment",_)}));_._RF.pop()}}}));

System.register("chunks:///_virtual/context.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"130e0LrRvNOq7GOFf5/5IGV","context",void 0);var s=t("ShaderContext",function(){function t(){this.shaderTemplatesDir=void 0,this.allNodes=[],this.properties=[],this.localVars=[],this.getLocalVars=[]}return t.prototype.reset=function(){this.allNodes.length=0,this.properties.length=0,this.localVars.length=0,this.getLocalVars.length=0},t}());t("shaderContext",new s);e._RF.pop()}}}));

System.register("chunks:///_virtual/cosine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.slot}],execute:function(){var s;n._RF.push({},"2e9b7mUik5Cj7/HtwG5GjOg","cosine",void 0);t("default",r({menu:"Math/Trigonometry/Cosine",title:"Cosine"})(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[i("In",o.ZERO,"vec4","vector")],outputs:[i("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = cos("+t+");\n        "},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/cross-product.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,r,c,o,n,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,c=t.Vec4},function(t){o=t.register},function(t){n=t.ShaderNode},function(t){u=t.slot}],execute:function(){var s;r._RF.push({},"13009pA4vlKI5jSuhV9uAJV","cross-product",void 0);t("default",o({menu:"Math/Vector/CrossProduct",title:"CrossProduct"})(s=function(t){function r(){for(var e,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this).data={inputs:[u("A",c.ZERO,"vec4","vector"),u("B",c.ZERO,"vec4","vector")],outputs:[u("Out",c.ZERO,"vec4","vector")]},e}e(r,t);var o=r.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = cross("+t+", "+e+");\n        "},r}(n))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/CSVLoader.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"a3605ZRcydAsqLfvt2I7n/+","CSVLoader",void 0);t("CSVLoader",function(){function t(){}return t.fromCSV=function(t,n,r){void 0===n&&(n=","),void 0===r&&(r="\n");var e=t.split(r),o=e[0].split(n);return e.shift(),e.filter((function(t){return null!=t&&""!=t})).map((function(t){var r=t.split(n),e={};return o.forEach((function(t,n){var o=r[n].trim();""!=o&&(isNaN(Number(o))?"true"!==o.toLowerCase()&&"false"!==o.toLowerCase()||(o="true"===o.toLowerCase()):o=Number(o)),e[t.trim()]=o})),e}))},t.toCSV=function(t,n,r){if(void 0===n&&(n=","),void 0===r&&(r="\n"),0===t.length)return"";var e=Object.keys(t[0]),o=e.join(n),i=t.map((function(t){return e.map((function(n){return t[n]})).join(n)}));return[o].concat(i).join(r)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i,s;r._RF.push({},"60302ameClCGbCam2xkotxy","csvManager",void 0);var u=n.ccclass,a=(n.property,[",",";","\t","|","^"]),o=["\r\n","\r","\n"],l=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:a[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,a,i),t.newline=t.newline||this.mostFrequent(e,o,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",u("CSVManager")(((s=function(){function e(){this._csvTables={},this._csvTableForArr={},this._tableCast={},this._tableComment={}}var r=e.prototype;return r.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];c.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=c.opts.cast,this._tableComment[e]=c.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},r.getTableArr=function(e){return this._csvTableForArr[e]},r.getTable=function(e){return this._csvTables[e]},r.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},r.queryByID=function(e,t){return this.queryOne(e,null,t)},r.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},r.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},r.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},r.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i=s))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/cubemap-asset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./texture-asset.ts"],(function(e){var t,u,n;return{setters:[function(e){t=e.inheritsLoose},function(e){u=e.cclegacy},function(e){n=e.default}],execute:function(){u._RF.push({},"f593b68ejRHboYTcPDL7dZe","cubemap-asset",void 0);e("default",function(e){function u(){return e.apply(this,arguments)||this}return t(u,e),u.prototype.generateCode=function(){return"samplerCube "+this.getOutputVarName(0)+" = "+this.getInputValue(0)+";"},u}(n));u._RF.pop()}}}));

System.register("chunks:///_virtual/Cursor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VectorUtil.ts"],(function(e){var t,r,o,a,i,n,u,c,s,p,l,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){n=e.cclegacy,u=e._decorator,c=e.Node,s=e.Vec3,p=e.Quat,l=e.Component},function(e){f=e.VectorUtil}],execute:function(){var d,y,h,m,b,S,T;n._RF.push({},"3e784wgXb5FD6qDmQMPWi5v","Cursor",void 0);var g=u.ccclass,v=u.property;e("Cursor",(d=g("Cursor"),y=v({displayName:"adaptToSurface"}),h=v({type:c,displayName:"referNode",visible:function(){return this.adaptToSurface}}),d((S=t((b=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return t=e.call.apply(e,[this].concat(i))||this,o(t,"_adaptToSurface",S,a(t)),o(t,"referNode",T,a(t)),t.tempVec3=new s,t.tempQuat=new p,t}return r(t,e),t.prototype.set=function(e,t){if(this.node.setWorldPosition(e),this.adaptToSurface&&t){var r,o,a=null!=(r=null==(o=this.referNode)?void 0:o.getWorldPosition())?r:s.ZERO,i=s.subtract(this.tempVec3,e,a),n=f.projectOnPlane(i,t).normalize(),u=p.fromViewUp(this.tempQuat,n,t);this.node.setWorldRotation(u)}},i(t,[{key:"adaptToSurface",get:function(){return this._adaptToSurface},set:function(e){this._adaptToSurface=e,e||this.node.setWorldRotation(p.fromEuler(new p,0,0,0))}}]),t}(l)).prototype,"_adaptToSurface",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(b.prototype,"adaptToSurface",[y],Object.getOwnPropertyDescriptor(b.prototype,"adaptToSurface"),b.prototype),T=t(b.prototype,"referNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/DataManagement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BeatmapManager.ts"],(function(t){var s,e,o,i,a,n,r,c;return{setters:[function(t){s=t.inheritsLoose,e=t.extends,o=t.createClass},function(t){i=t.cclegacy,a=t._decorator,n=t.sys,r=t.Component},function(t){c=t.BeatmapManager}],execute:function(){var l,g;i._RF.push({},"9ca9bpOcERGC7OMbq07ARhv","DataManagement",void 0);var h=a.ccclass;a.property,t("DataManager",h("DataManager")(((g=function(t){function i(){for(var s,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(s=t.call.apply(t,[this].concat(o))||this).settings={musicVolume:.8,sfxVolume:1,noteSpeed:1,audioOffset:0,vibrationEnabled:!0,notificationEnabled:!0,autoPlayCount:5,language:"en",lastPlayedSongId:"",visualEffectsLevel:2},s.progress={level:1,exp:0,coins:0,gems:0,unlockedSongs:[],completedTutorials:[]},s.statistics={totalPlayCount:0,totalPlayTime:0,perfectCount:0,goodCount:0,okCount:0,missCount:0,maxCombo:0,averageAccuracy:0,songPlayCounts:{}},s.highScores={},s.onSettingsChangedCallback=null,s.onProgressChangedCallback=null,s.onCoinsChangedCallback=null,s.beatmapManager=null,s}s(i,t);var a=i.prototype;return a.onLoad=function(){null===i._instance?(i._instance=this,this.beatmapManager=c.instance,this.loadAllData()):this.destroy()},a.loadAllData=function(){this.loadSettings(),this.loadProgress(),this.loadStatistics(),this.loadHighScores(),console.log("All player data loaded")},a.saveAllData=function(){this.saveSettings(),this.saveProgress(),this.saveStatistics(),this.saveHighScores(),console.log("All player data saved")},a.loadSettings=function(){var t=n.localStorage.getItem(i.SETTINGS_KEY);if(t)try{var s=JSON.parse(t);this.settings=e({},this.settings,s)}catch(t){console.error("Failed to parse settings data:",t)}},a.saveSettings=function(){try{var t=JSON.stringify(this.settings);n.localStorage.setItem(i.SETTINGS_KEY,t)}catch(t){console.error("Failed to save settings data:",t)}},a.loadProgress=function(){var t=n.localStorage.getItem(i.PROGRESS_KEY);if(t)try{var s=JSON.parse(t);this.progress=e({},this.progress,s)}catch(t){console.error("Failed to parse progress data:",t)}},a.saveProgress=function(){try{var t=JSON.stringify(this.progress);n.localStorage.setItem(i.PROGRESS_KEY,t)}catch(t){console.error("Failed to save progress data:",t)}},a.loadStatistics=function(){var t=n.localStorage.getItem(i.STATISTICS_KEY);if(t)try{var s=JSON.parse(t);this.statistics=e({},this.statistics,s)}catch(t){console.error("Failed to parse statistics data:",t)}},a.saveStatistics=function(){try{var t=JSON.stringify(this.statistics);n.localStorage.setItem(i.STATISTICS_KEY,t)}catch(t){console.error("Failed to save statistics data:",t)}},a.loadHighScores=function(){var t=n.localStorage.getItem(i.HIGH_SCORES_KEY);if(t)try{this.highScores=JSON.parse(t)}catch(t){console.error("Failed to parse high scores data:",t)}},a.saveHighScores=function(){try{var t=JSON.stringify(this.highScores);n.localStorage.setItem(i.HIGH_SCORES_KEY,t)}catch(t){console.error("Failed to save high scores data:",t)}},a.getSettings=function(){return e({},this.settings)},a.updateSettings=function(t){this.settings=e({},this.settings,t),this.saveSettings(),this.onSettingsChangedCallback&&this.onSettingsChangedCallback()},a.getProgress=function(){return e({},this.progress)},a.addExperience=function(t){if(!(t<=0)){this.progress.exp+=t;var s=Math.floor(Math.sqrt(this.progress.exp/100))+1,e=s>this.progress.level;if(e){var o=this.progress.level;this.progress.level=s,console.log("Player leveled up from "+o+" to "+s+"!")}return this.saveProgress(),this.onProgressChangedCallback&&this.onProgressChangedCallback(this.getProgress()),e}},a.updateCoins=function(t){return this.progress.coins+=t,this.progress.coins<0&&(this.progress.coins=0),this.saveProgress(),this.onCoinsChangedCallback&&this.onCoinsChangedCallback(this.progress.coins),this.progress.coins},a.updateGems=function(t){return this.progress.gems+=t,this.progress.gems<0&&(this.progress.gems=0),this.saveProgress(),this.progress.gems},a.isSongUnlocked=function(t){return this.progress.unlockedSongs.indexOf(t)>=0},a.unlockSong=function(t){return!this.isSongUnlocked(t)&&(this.progress.unlockedSongs.push(t),this.saveProgress(),!0)},a.getUnlockedSongs=function(){return[].concat(this.progress.unlockedSongs)},a.getStatistics=function(){return e({},this.statistics)},a.updateStatistics=function(t,s,e,o,i,a,n,r){this.statistics.songPlayCounts[t]||(this.statistics.songPlayCounts[t]=0),this.statistics.songPlayCounts[t]++,this.statistics.totalPlayCount++,this.statistics.totalPlayTime+=s,this.statistics.perfectCount+=e,this.statistics.goodCount+=o,this.statistics.okCount+=i,this.statistics.missCount+=a,n>this.statistics.maxCombo&&(this.statistics.maxCombo=n);var c=(this.statistics.totalPlayCount-1)/this.statistics.totalPlayCount,l=1/this.statistics.totalPlayCount;this.statistics.averageAccuracy=this.statistics.averageAccuracy*c+r*l,this.saveStatistics()},a.getSongPlayCount=function(t){return this.statistics.songPlayCounts[t]||0},a.getAllSongPlayCounts=function(){return e({},this.statistics.songPlayCounts)},a.getHighScore=function(t){return this.highScores[t]||null},a.submitScore=function(t,s,e,o,i,a,n,r){var c=this.getHighScore(t),l=!c||s>c.score;if(l){var g={score:s,accuracy:e,maxCombo:o,perfect:i,good:a,ok:n,miss:r,date:Date.now()};this.highScores[t]=g,this.saveHighScores()}return l},a.getAllHighScores=function(){return e({},this.highScores)},a.clearAllData=function(){n.localStorage.removeItem(i.SETTINGS_KEY),n.localStorage.removeItem(i.PROGRESS_KEY),n.localStorage.removeItem(i.STATISTICS_KEY),n.localStorage.removeItem(i.HIGH_SCORES_KEY),this.settings={musicVolume:.8,sfxVolume:1,noteSpeed:1,audioOffset:0,vibrationEnabled:!0,notificationEnabled:!0,autoPlayCount:5,language:"en",lastPlayedSongId:"",visualEffectsLevel:2},this.progress={level:1,exp:0,coins:0,gems:0,unlockedSongs:[],completedTutorials:[]},this.statistics={totalPlayCount:0,totalPlayTime:0,perfectCount:0,goodCount:0,okCount:0,missCount:0,maxCombo:0,averageAccuracy:0,songPlayCounts:{}},this.highScores={},console.log("All player data cleared")},a.onSettingsChanged=function(t){this.onSettingsChangedCallback=t},a.onProgressChanged=function(t){this.onProgressChangedCallback=t},a.onCoinsChanged=function(t){this.onCoinsChangedCallback=t},a.completeTutorial=function(t){this.progress.completedTutorials.indexOf(t)<0&&(this.progress.completedTutorials.push(t),this.saveProgress())},a.isTutorialCompleted=function(t){return this.progress.completedTutorials.indexOf(t)>=0},a.exportData=function(){var t={settings:this.settings,progress:this.progress,statistics:this.statistics,highScores:this.highScores};return JSON.stringify(t)},a.importData=function(t){try{var s=JSON.parse(t);return s.settings&&(this.settings=s.settings),s.progress&&(this.progress=s.progress),s.statistics&&(this.statistics=s.statistics),s.highScores&&(this.highScores=s.highScores),this.saveAllData(),!0}catch(t){return console.error("Failed to import data:",t),!1}},o(i,null,[{key:"instance",get:function(){return i._instance}}]),i}(r))._instance=null,g.SETTINGS_KEY="magicTiles_settings",g.PROGRESS_KEY="magicTiles_progress",g.STATISTICS_KEY="magicTiles_statistics",g.HIGH_SCORES_KEY="magicTiles_highScores",l=g))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/ddx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){i=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;n._RF.push({},"a9e8cu/8AxJgqL6Mn6GY7sg","ddx",void 0);t("default",c({menu:"Math/Derivative/DDX",title:"DDX"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = dFdx("+t+");\n        "},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ddxy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){i=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;n._RF.push({},"ec1afn79wpEi5T7OYFN+OIo","ddxy",void 0);t("default",c({menu:"Math/Derivative/DDXY",title:"DDXY"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = abs(dFdx("+t+")) + abs(dFdy("+t+"));\n        "},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ddy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){i=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;n._RF.push({},"8231cetsI5JAKl/k454/49j","ddy",void 0);t("default",c({menu:"Math/Derivative/DDY",title:"DDY"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = dFdy("+t+");\n        "},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc"],(function(_){var e,D;return{setters:[function(_){e=_.cclegacy,D=_.Color}],execute:function(){e._RF.push({},"a66bdQHmTxEUris3Jx+UGmB","debug",void 0);_("DEBUG_DRAW_LINE_COLOR",new D(238,124,55,255)),_("DEBUG_DRAW_FILL_COLOR",new D(88,175,64,50)),_("DEBUG_DRAW_BORDER_COLOR",new D(56,120,94,255)),_("DEBUG_DRAW_LIND_WIDTH",3),_("ADAPTER_DEBUG_VIEW",!1),_("ADAPTER_DEBUG_CONTENT",!1);e._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(T){var O;return{setters:[function(T){O=T.cclegacy}],execute:function(){O._RF.push({},"6cbe82sbBRJZ5dw448hn0pZ","Defines",void 0);T("UserInteractEventType",function(T){return T[T.NONE=0]="NONE",T[T.TOUCH=1]="TOUCH",T[T.DRAG=2]="DRAG",T[T.ZOOM=3]="ZOOM",T[T.SWIPE=4]="SWIPE",T[T.HOVER=5]="HOVER",T[T.DOUBLE_TOUCH=6]="DOUBLE_TOUCH",T[T.END_INTERACTED=7]="END_INTERACTED",T}({})),T("ViewBeginType",function(T){return T[T.NONE=0]="NONE",T[T.HIDE=1]="HIDE",T[T.SHOW=2]="SHOW",T}({})),T("CornerType",function(T){return T[T.LEFT_TOP=0]="LEFT_TOP",T[T.LEFT=1]="LEFT",T[T.LEFT_BOTTOM=2]="LEFT_BOTTOM",T[T.TOP=3]="TOP",T[T.RIGHT_TOP=4]="RIGHT_TOP",T[T.RIGHT=5]="RIGHT",T[T.RIGHT_BOTTOM=6]="RIGHT_BOTTOM",T[T.BOTTOM=7]="BOTTOM",T[T.CENTER=8]="CENTER",T}({})),T("MissionType",function(T){return T.DAILY="DAILY",T.ONE_TIME="ONE_TIME",T.STREAK="STREAK",T.SOCIAL="SOCIAL",T}({})),T("MissionRewardType",function(T){return T[T.NORMAL=0]="NORMAL",T[T.CLAIMABLE=1]="CLAIMABLE",T[T.CLAIMED=2]="CLAIMED",T[T.PENDING=3]="PENDING",T}({}));O._RF.pop()}}}));

System.register("chunks:///_virtual/degrees-to-radians.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,r,o,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){o=e.register},function(e){c=e.ShaderNode},function(e){i=e.slot}],execute:function(){var s;n._RF.push({},"54cccLnyalN+rGU9RVdf0Ob","degrees-to-radians",void 0);e("default",o({menu:"Math/Trigonometry/DegreesToRadians",title:"DegreesToRadians"})(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = radians("+e+");\n        "},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/distance.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,c,i,r,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){i=t.register},function(t){r=t.ShaderNode},function(t){o=t.ConcretePrecisionType},function(t){s=t.slot}],execute:function(){var u;n._RF.push({},"1d67fgjFt5PYIIoSIE7uP03","distance",void 0);t("default",i({menu:"Math/Vector/Distance",title:"Distance"})(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).concretePrecisionType=o.Fixed,e.data={inputs:[s("A",c.ZERO,"vec4","vector"),s("B",c.ZERO,"vec4","vector")],outputs:[s("Out",0,"float","vector")]},e}e(n,t);var i=n.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = distance("+t+", "+e+");\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/divide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,i,c,r,o,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.Vec4},function(e){c=e.register},function(e){r=e.ShaderNode},function(e){o=e.ConcretePrecisionType},function(e){u=e.slot}],execute:function(){var s;n._RF.push({},"027926d68NB7rx2YRTbh0wu","divide",void 0);e("default",c({menu:"Math/Basic/Divide",title:"Divide"})(s=function(e){function n(){for(var t,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))||this).concretePrecisionType=o.Max,t.data={inputs:[u("A",i.ZERO,"vec4","vector"),u("B",i.ZERO,"vec4","vector")],outputs:[u("Out",i.ZERO,"vec4","vector")]},t}t(n,e);var c=n.prototype;return c.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = "+e+" / "+t+";\n        "},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/dot-product.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,o,n,r,c,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;o._RF.push({},"fe81frs65tLqqp2QPfF1tCJ","dot-product",void 0);t("default",r({menu:"Math/Vector/DotProduct",title:"DotProduct"})(s=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Fixed,e.data={inputs:[u("A",n.ZERO,"vec4","vector"),u("B",n.ZERO,"vec4","vector")],outputs:[u("Out",0,"float","vector")]},e}e(o,t);var r=o.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = dot("+t+", "+e+");\n        "},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/DynamicSkeletonAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,o,t,e,a,r,c,l,p,s;return{setters:[function(n){i=n.applyDecoratedDescriptor,o=n.inheritsLoose,t=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,c=n.Animation,l=n.resources,p=n.AnimationClip,s=n.Component}],execute:function(){var m,u,y,d,f;a._RF.push({},"97270evPX5NaoJ6I7QVNd3F","DynamicSkeletonAnimation",void 0);var h=r.ccclass,C=r.property;n("DynamicAnimationClip",(m=h("DynamicAnimationClip"),u=C({type:c}),m((f=i((d=function(n){function i(){for(var i,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return i=n.call.apply(n,[this].concat(a))||this,t(i,"animationComponent",f,e(i)),i}return o(i,n),i.prototype.start=function(){var n=this;l.load("3d/animation_clips/your_animation_clip",p,(function(i,o){i?console.error("Failed to load animation clip:",i):o?n.animationComponent?(n.animationComponent.addClip(o),n.animationComponent.play("your_animation_clip")):console.error("Animation component is not assigned in the editor."):console.warn("Animation clip not found at the specified path.")}))},i}(s)).prototype,"animationComponent",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/easing.ts",["cc"],(function(u){var n,t;return{setters:[function(u){n=u.cclegacy,t=u.easing}],execute:function(){u("getEasingFunction",(function(u){var n;return((n={})[I.Linear]=t.linear,n[I.SineIn]=t.sineIn,n[I.SineOut]=t.sineOut,n[I.SineInOut]=t.sineInOut,n[I.QuadIn]=t.quadIn,n[I.QuadOut]=t.quadOut,n[I.QuadInOut]=t.quadInOut,n[I.CubicIn]=t.cubicIn,n[I.CubicOut]=t.cubicOut,n[I.CubicInOut]=t.cubicInOut,n[I.QuartIn]=t.quartIn,n[I.QuartOut]=t.quartOut,n[I.QuartInOut]=t.quartInOut,n[I.QuintIn]=t.quintIn,n[I.QuintOut]=t.quintOut,n[I.QuintInOut]=t.quintInOut,n[I.ExpoIn]=t.expoIn,n[I.ExpoOut]=t.expoOut,n[I.ExpoInOut]=t.expoInOut,n[I.CircIn]=t.circIn,n[I.CircOut]=t.circOut,n[I.CircInOut]=t.circInOut,n[I.ElasticIn]=t.elasticIn,n[I.ElasticOut]=t.elasticOut,n[I.ElasticInOut]=t.elasticInOut,n[I.BackIn]=t.backIn,n[I.BackOut]=t.backOut,n[I.BackInOut]=t.backInOut,n[I.BounceIn]=t.bounceIn,n[I.BounceOut]=t.bounceOut,n[I.BounceInOut]=t.bounceInOut,n)[u]})),n._RF.push({},"996b7qdfwFAPbtK5uluV2M2","easing",void 0);var I=u("EasingType",function(u){return u[u.Linear=0]="Linear",u[u.SineIn=1]="SineIn",u[u.SineOut=2]="SineOut",u[u.SineInOut=3]="SineInOut",u[u.QuadIn=4]="QuadIn",u[u.QuadOut=5]="QuadOut",u[u.QuadInOut=6]="QuadInOut",u[u.CubicIn=7]="CubicIn",u[u.CubicOut=8]="CubicOut",u[u.CubicInOut=9]="CubicInOut",u[u.QuartIn=10]="QuartIn",u[u.QuartOut=11]="QuartOut",u[u.QuartInOut=12]="QuartInOut",u[u.QuintIn=13]="QuintIn",u[u.QuintOut=14]="QuintOut",u[u.QuintInOut=15]="QuintInOut",u[u.ExpoIn=16]="ExpoIn",u[u.ExpoOut=17]="ExpoOut",u[u.ExpoInOut=18]="ExpoInOut",u[u.CircIn=19]="CircIn",u[u.CircOut=20]="CircOut",u[u.CircInOut=21]="CircInOut",u[u.ElasticIn=22]="ElasticIn",u[u.ElasticOut=23]="ElasticOut",u[u.ElasticInOut=24]="ElasticInOut",u[u.BackIn=25]="BackIn",u[u.BackOut=26]="BackOut",u[u.BackInOut=27]="BackInOut",u[u.BounceIn=28]="BounceIn",u[u.BounceOut=29]="BounceOut",u[u.BounceInOut=30]="BounceInOut",u}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectTime.ts"],(function(i){var n,e,t,a,r,o,c,l;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,c=i.Animation},function(i){l=i.EffectTime}],execute:function(){var u,f,s,p,m,y,h;r._RF.push({},"8ca3fmen/FAube9ooAPgxCz","EffectAnimation",void 0);var b=o.ccclass,d=o.property;i("EffectAnimation",(u=b("EffectAnimation"),f=d(c),u((m=n((p=function(i){function n(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=i.call.apply(i,[this].concat(r))||this,t(n,"animMain",m,a(n)),t(n,"animName",y,a(n)),t(n,"delay",h,a(n)),n}e(n,i);var r=n.prototype;return r.onLoad=function(){this.animMain.node.active=!1},r.init=function(n,e,t){var a=this;i.prototype.init.call(this,n,e,t),this.scheduleOnce((function(){a.animMain.play(a.animName)}),this.delay)},n}(l)).prototype,"animMain",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(p.prototype,"animName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=n(p.prototype,"delay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=p))||s));r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){var t,n,i,r,o,c,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,a=e.Component},function(e){s=e.AudioManager}],execute:function(){var u,l,f;o._RF.push({},"4a695abDKBOU7c/73mimyQe","EffectBase",void 0);var p=c.ccclass,h=c.property;e("EffectBase",p("EffectBase")((f=t((l=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).define="",t.recycleMe=null,i(t,"sound",f,r(t)),t}n(t,e);var o=t.prototype;return o.init=function(e,t,n){this.define=e,this.recycleMe=t,this.sound&&s.instance.playSound(this.sound)},o.putToPool=function(){var e;null==this||null==(e=this.recycleMe)||e.call(this,this)},t}(a)).prototype,"sound",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=l))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts","./ComponentPool.ts","./resourceUtil.ts","./Constants.ts"],(function(t){var n,e,o,i,r,f,l,c,a,u,s,p,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,f=t._decorator,l=t.Node,c=t.instantiate,a=t.Component},function(t){u=t.EffectBase},function(t){s=t.ComponentPool},function(t){p=t.resourceUtil},function(t){d=t.CurrentEnviroment}],execute:function(){var h,v,P,E,C,g;r._RF.push({},"f1faaHNgYdAgqUp6WWlyLaO","EffectController",void 0);var m=f.ccclass,y=f.property;t("EffectController",(h=m("EffectController"),v=y(l),h(((g=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),f=0;f<e;f++)r[f]=arguments[f];return(n=t.call.apply(t,[this].concat(r))||this).preloadPrefabNames=[],o(n,"uiEffectContainer",C,i(n)),n.effectPoolMap=new Map,n}e(n,t);var r=n.prototype;return r.onLoad=function(){n.instance=this,this.initPool(),this.preloadEffects()},r.onDestroy=function(){n.instance=null},r.start=function(){this.initPool()},r.preloadEffects=function(){var t=this;this.preloadPrefabNames.forEach((function(n){0==t.effectPoolMap.has(n)&&p.loadEffectRes(n).then((function(e){t.effectPoolMap.set(n,t.createPool(e,t.uiEffectContainer,u))})).catch((function(t){d.LOG&&console.error(t,n)}))}))},r.initPool=function(){},r.createPool=function(t,n,e,o){if(void 0===o&&(o=1),!t||!n)return null;var i=new s((function(){var n=c(t).getComponent(e);return n||(console.warn("Component of the specified class not found in prefab."),null)}),n);return i.init(o),i},r.putEffects=function(t,n){var e;null==(e=this.effectPoolMap.get(n))||e.putAll(t)},r.spawnResourceEffectAt=function(t,n,e,o,i){var r=this;void 0===e&&(e=null),void 0===o&&(o=null),void 0===i&&(i=function(){});var f=function(){var f,l=null==(f=r.effectPoolMap)||null==(f=f.get(n))?void 0:f.get(),c=n;null!=e&&(l.node.parent=e),l.node.setWorldPosition(t),setTimeout((function(){l.init(c,(function(t){var n;null==(n=r.effectPoolMap)||null==(n=n.get(c))||n.put(t)}),o),null==i||i(l)}))};0==this.effectPoolMap.has(n)?p.loadEffectRes(n).then((function(t){r.effectPoolMap.set(n,r.createPool(t,r.uiEffectContainer,u)),f()})).catch((function(t){d.LOG&&console.error(t,n),null==i||i(null,"could not find the effect prefab")})):f()},n}(a)).instance=null,C=n((E=g).prototype,"uiEffectContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=E))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,o,a,c,l,s,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,c=e._decorator,l=e.Prefab,s=e.instantiate,u=e.director,f=e.Component}],execute:function(){var p,y,d,h,b,g,v;a._RF.push({},"b1385xAyyhPB6TsvEBSW4MY","EffectManger",void 0);var E=c.ccclass,_=c.property,P=c.executionOrder;e("EffectManger",(p=E("EffectManger"),y=P(-1),d=_({type:l,displayName:"炮弹爆炸效果预制体"}),p(h=y(((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"bulletExplosionPrefab",g,i(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){t._instance=this},a.onDestroy=function(){t._instance===this&&(t._instance=null)},a.playBulletExplosion=function(e){var t=s(this.bulletExplosionPrefab);u.getScene().addChild(t),t.setWorldPosition(e),this.scheduleOnce((function(){return t.destroy()}),1)},o(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(f))._instance=null,g=t((b=v).prototype,"bulletExplosionPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h)||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/EffectMovingObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(t){var i,n,e,o,l,a,s,r,c,u,d,h,f,p,v,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,s=t.Sprite,r=t.Label,c=t.Node,u=t.randomRangeInt,d=t.random,h=t.Vec3,f=t.tween,p=t.v3,v=t.easing},function(t){m=t.EffectBase}],execute:function(){var g,P,w,b,y,F,M,T,E;l._RF.push({},"4dd0e4qDG1PXZh+cEHXUaeh","EffectMovingObject",void 0);var z=a.ccclass,S=a.property;t("EffectMovingObject",(g=z("EffectMovingObject"),P=S(s),w=S(r),b=S(c),g((M=i((F=function(t){function i(){for(var i,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l))||this,e(i,"sprtMain",M,o(i)),e(i,"lbMain",T,o(i)),e(i,"nodeFollow",E,o(i)),i.data=null,i.movingValue={value:0},i.tweenValue=null,i.startPoint=null,i.endPoint=null,i.controlPoint1=null,i.controlPoint2=null,i.scaleTime=.05,i.holdTime=.15,i.movingTime=.23,i.finalScale=.5,i}n(i,t);var l=i.prototype;return l.onDisable=function(){var t;null==(t=this.tweenValue)||t.stop()},l.init=function(i,n,e){var o,l,a=this;t.prototype.init.call(this,i,n,e),this.data=e,this.movingValue.value=0;var s=function(t,i){void 0===i&&(i=1),a.lbMain&&(a.lbMain.string=null!=t?t:"",a.lbMain.node.scale=p(1.5*i,1.5*i),f(a.lbMain.node).to(.2,{scale:p(i,i)}).start())};this.sprtMain&&this.data.spriteFrame&&(this.sprtMain.spriteFrame=this.data.spriteFrame),this.startPoint=this.node.worldPosition.clone(),this.endPoint=this.data.destination.clone();var r=this.calculateControlPoints(this.startPoint,this.endPoint,u(100,250)*(d()>=.5?1:-1));this.controlPoint1=r[0],this.controlPoint2=r[1],s(null!=(o=null==(l=this.data)?void 0:l.text)?o:""),this.data.text2&&this.scheduleOnce((function(){s(a.data.text2,1.5)}),this.scaleTime+this.holdTime/2),this.doEffectSpriteMain(),this.doEffectMoving()},l.getTotalTime=function(){return this.scaleTime+this.holdTime+this.movingTime},l.setActive=function(t){this.node.active=t,this.nodeFollow&&(this.nodeFollow.active=!1)},l.setParentForFollowNode=function(t){this.nodeFollow&&(this.nodeFollow.parent=t,this.nodeFollow.setSiblingIndex(99))},l.doEffectSpriteMain=function(){this.node.scale=h.ZERO,f(this.node).to(this.scaleTime,{scale:p(1.5,1.5,1.5)},{easing:v.backOut}).delay(this.holdTime).to(this.movingTime,{scale:p(this.finalScale,this.finalScale,this.finalScale)},{easing:v.quartIn}).start()},l.doEffectFade=function(){},l.doEffectMoving=function(){var t=this;this.tweenValue=f(this.movingValue).delay(this.scaleTime+this.holdTime).call((function(){t.nodeFollow&&(t.nodeFollow.active=!0)})).to(this.movingTime,{value:1},{easing:v.quartIn}).call((function(){t.movingValue.value=1,t.tweenValue=null,null==t.data.onEnd||t.data.onEnd(),t.putToPool()})).start()},l.update=function(t){this.updatePosition()},l.updatePosition=function(){this.tweenValue&&(this.node.worldPosition=this.cubicBezierPoint(this.startPoint,this.controlPoint1,this.controlPoint2,this.endPoint,this.movingValue.value),this.nodeFollow&&(this.nodeFollow.worldPosition=this.node.worldPosition))},l.cubicBezierPoint=function(t,i,n,e,o){var l=1-o,a=o*o,s=l*l,r=s*l,c=a*o,u=new h;return u.set(r*t.x+3*s*o*i.x+3*l*a*n.x+c*e.x,r*t.y+3*s*o*i.y+3*l*a*n.y+c*e.y,r*t.z+3*s*o*i.z+3*l*a*n.z+c*e.z),u},l.calculateControlPoints=function(t,i,n){var e=i.clone().subtract(t).normalize(),o=new h(-e.y,e.x);return[t.clone().add(o.clone().multiplyScalar(n)),i.clone().add(o.clone().multiplyScalar(n))]},i}(m)).prototype,"sprtMain",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(F.prototype,"lbMain",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(F.prototype,"nodeFollow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=F))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/EffectMultiMovingObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts","./EffectMovingObject.ts","./audioManager.ts"],(function(t){var e,n,i,a,o,r,c,s,d,l,u,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.randomRange,s=t.Vec3,d=t.tween,l=t.v3},function(t){u=t.EffectBase},function(t){h=t.EffectMovingObject},function(t){f=t.AudioManager}],execute:function(){var p,m,v,E,g,M;o._RF.push({},"79538OeyiNCXKnP2hHWrfF9","EffectMultiMovingObject",void 0);var b=r.ccclass,D=r.property;t("EffectMultiMovingObject",(p=b("EffectMultiMovingObject"),m=D([h]),p((g=e((E=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"childs",g,a(e)),i(e,"soundEachEmitterReached",M,a(e)),e.data=null,e.isInited=!1,e}return n(e,t),e.prototype.init=function(e,n,i){var a=this;t.prototype.init.call(this,e,n,i),this.data=i,i.randomDuration||(i.randomDuration=0),this.isInited||(this.isInited=!0,this.childs.length<=0&&(this.childs=this.node.getComponentsInChildren(h),this.childs.forEach((function(t){return t.setParentForFollowNode(a.node)}))));for(var o=function(){var t=r<i.number,e=c(.3,.65),n=c(.1,.3),o=1-e-n;if(a.childs[r].setActive(t),t){var u=a.childs[r],h=c(i.duration-i.randomDuration,i.duration+i.randomDuration);u.movingTime=e*h,u.scaleTime=n*h;var p=o*h;u.holdTime=0,i.spreadDistance<=0&&(u.movingTime+=p,u.movingTime+=u.scaleTime,u.scaleTime=0,p=0),u.finalScale=0,u.sprtMain&&(u.sprtMain.node.active=!0,a.data.isRandomRotation&&(u.sprtMain.node.angle=c(0,360))),i.spriteFrame&&u.sprtMain&&(u.sprtMain.spriteFrame=i.spriteFrame),u.node.position=s.ZERO,d(u.node).to(p,{position:l(c(-i.spreadDistance,i.spreadDistance),c(-i.spreadDistance,i.spreadDistance))}).call((function(){u.init("",null,{onEnd:function(){u.sprtMain&&(u.sprtMain.node.active=!1),null==i.onEachObject||i.onEachObject(u),a.soundEachEmitterReached&&f.instance.playSound(a.soundEachEmitterReached)},destination:i.end,spriteFrame:i.spriteFrame,text:"",text2:""})})).start()}},r=0;r<this.childs.length;r++)o();this.scheduleOnce((function(){null==i.onEnd||i.onEnd()}),i.duration+i.randomDuration),this.scheduleOnce((function(){a.putToPool()}),1.5*(i.duration+i.randomDuration))},e}(u)).prototype,"childs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(E.prototype,"soundEachEmitterReached",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=E))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(t){var e,i,r,c,n,o,l,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,l=t.ParticleSystem},function(t){a=t.EffectBase}],execute:function(){var s,u,f,p,y;n._RF.push({},"52b3dLzk9pE2JwkxnQV/APT","EffectParticle",void 0);var h=o.ccclass,v=o.property;t("EffectParticle",(s=h("EffectParticle"),u=v(l),s((y=e((p=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"particleSystems",y,c(e)),e}i(e,t);var n=e.prototype;return n.init=function(e,i,r){var c;t.prototype.init.call(this,e,i,r),null==(c=this.particleSystems)||c.forEach((function(t){null==t||t.play()}))},n.stopParticle=function(t){var e,i=this;void 0===t&&(t=4),null==(e=this.particleSystems)||e.forEach((function(t){null==t||t.stopEmitting()})),this.scheduleOnce((function(){i.putToPool()}),t)},e}(a)).prototype,"particleSystems",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=p))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectPoints.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(t){var n,o,e,i,l,a,s,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Vec3,l=t.tween,a=t.v3,s=t.easing},function(t){c=t.EffectBase}],execute:function(){var u;o._RF.push({},"c2301FhRClBM7qSV+ZoQLbZ","EffectPoints",void 0);var r=e.ccclass;e.property,t("EffectMovingObject",r("EffectMovingObject")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).data=null,n.movingValue={value:0},n.tweenValue=null,n.startPoint=null,n.endPoint=null,n.controlPoint1=null,n.controlPoint2=null,n}n(o,t);var e=o.prototype;return e.onDisable=function(){var t;null==(t=this.tweenValue)||t.stop()},e.init=function(n,o,e){var c=this;t.prototype.init.call(this,n,o,e),this.data=e,this.startPoint=this.node.worldPosition.clone(),this.endPoint=this.data.destination.clone();var u=this.calculateControlPoints(this.startPoint,this.endPoint,500);this.controlPoint1=u[0],this.controlPoint2=u[1],this.node.scale=i.ZERO;l(this.node).to(.25,{scale:a(1.5,1.5,1.5)},{easing:s.backOut}).delay(.5).to(.75,{scale:a(.5,.5,.5)},{easing:s.quartIn}).start(),this.tweenValue=l(this.movingValue).delay(.75).to(.75,{value:1},{easing:s.quartIn}).call((function(){c.movingValue.value=1,c.tweenValue=null,null==c.data.onEnd||c.data.onEnd(),c.putToPool()})).start()},e.update=function(t){this.updatePosition()},e.updatePosition=function(){this.tweenValue&&(this.node.worldPosition=this.cubicBezierPoint(this.startPoint,this.controlPoint1,this.controlPoint2,this.endPoint,this.movingValue.value))},e.cubicBezierPoint=function(t,n,o,e,l){var a=1-l,s=l*l,c=a*a,u=c*a,r=s*l,h=new i;return h.set(u*t.x+3*c*l*n.x+3*a*s*o.x+r*e.x,u*t.y+3*c*l*n.y+3*a*s*o.y+r*e.y,u*t.z+3*c*l*n.z+3*a*s*o.z+r*e.z),h},e.calculateControlPoints=function(t,n,o){var e=n.clone().subtract(t).normalize(),l=new i(-e.y,e.x);return[t.clone().add(l.clone().multiplyScalar(o)),n.clone().add(l.clone().multiplyScalar(o))]},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectText.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectTime.ts"],(function(t){var e,i,n,r,o,a,l,c,s,u,f,p,b,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Label,c=t.UIOpacity,s=t.Color,u=t.v3,f=t.tween,p=t.Vec3,b=t.easing},function(t){h=t.EffectTime}],execute:function(){var y,d,g,M,v,E,T;o._RF.push({},"4bb4ddfy3ZF7IT9EWgZoUId","EffectText",void 0);var I=a.ccclass,m=a.property;t("EffectText",(y=I("EffectText"),d=m(l),g=m(c),y((E=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"lbMain",E,r(e)),n(e,"opMain",T,r(e)),e}return i(e,t),e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n);var r=n.text,o=n.color,a=n.time,l=n.size,c=n.distance;this.lbMain.string=null!=r?r:"NULL",this.lbMain.color=null!=o?o:s.WHITE,this.lbMain.fontSize=null!=l?l:60,this.node.scale=u(1.2,1.2),this.opMain.opacity=255;var h=null!=a?a:.5,y=null!=c?c:100;f(this.node).to(h,{scale:p.ONE},{easing:b.quadIn}).start(),f(this.node).by(h,{worldPosition:u(0,y,0)},{easing:b.quadIn}).start(),f(this.opMain).to(h,{opacity:0},{easing:b.quartIn}).start()},e}(h)).prototype,"lbMain",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(v.prototype,"opMain",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=v))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectTime.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts"],(function(e){var t,i,r,n,l,c,a,o,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,c=e._decorator,a=e.ParticleSystem,o=e.ParticleSystem2D},function(e){s=e.EffectBase}],execute:function(){var u,f,p,y,m,h,d,b;l._RF.push({},"b11edLPNrlIvrzI4yYh6uVF","EffectTime",void 0);var S=c.ccclass,T=c.property;e("EffectTime",(u=S("EffectTime"),f=T(a),p=T([o]),u((h=t((m=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return t=e.call.apply(e,[this].concat(l))||this,r(t,"delayKillTime",h,n(t)),r(t,"particleSystems",d,n(t)),r(t,"particleSystem2ds",b,n(t)),t}return i(t,e),t.prototype.init=function(t,i,r){var n,l,c=this;e.prototype.init.call(this,t,i,r),null==(n=this.particleSystems)||n.forEach((function(e){null==e||e.play()})),null==(l=this.particleSystem2ds)||l.forEach((function(e){e.resetSystem()})),this.scheduleOnce((function(){c.putToPool()}),this.delayKillTime)},t}(s)).prototype,"delayKillTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=t(m.prototype,"particleSystems",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(m.prototype,"particleSystem2ds",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=m))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/ellipse.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,i,o,r,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Vec2},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){c=t.ConcretePrecisionType},function(t){s=t.slot}],execute:function(){var u;n._RF.push({},"71cb8o0v7xEvJDEaB1PCHhM","ellipse",void 0);t("default",o({menu:"Procedural/Shape/Ellipse",title:"Ellipse"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).concretePrecisionType=c.Fixed,e.depChunks=["shape"],e.data={inputs:[s("uv",i.ZERO,"vec2","vector"),s("width",.5,"float","vector"),s("height",.5,"float","vector")],outputs:[s("Out",0,"float","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);this.inputs[0].connectSlot||(t="v_uv.xy");var e=this.getInputValue(1),n=this.getInputValue(2);return this.getOutputVarDefine(0)+" = Ellipse("+t+", "+e+", "+n+");"},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/enum.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.Enum}],execute:function(){t._RF.push({},"f34a2opKdlGHZC9qbc+L0O/","enum",void 0);var o=e("Orientation",function(e){return e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e}({})),n=e("MovementType",function(e){return e[e.Unrestricted=0]="Unrestricted",e[e.Elastic=1]="Elastic",e[e.Clamped=2]="Clamped",e}({})),i=e("ArrangeAxis",function(e){return e[e.Start=0]="Start",e[e.End=1]="End",e}({})),u=e("StretchDirection",function(e){return e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e[e.Center=3]="Center",e}({})),c=(e("Layer",function(e){return e[e.Lowest=0]="Lowest",e[e.Medium=1]="Medium",e[e.Highest=2]="Highest",e}({})),e("WrapMode",function(e){return e[e.Auto=0]="Auto",e[e.Wrap=1]="Wrap",e[e.Nowrap=2]="Nowrap",e}({})),e("TouchMode",function(e){return e[e.Auto=0]="Auto",e[e.AlwaysAllow=1]="AlwaysAllow",e[e.Disabled=2]="Disabled",e}({}))),a=e("MagneticDirection",function(e){return e[e.Header=0]="Header",e[e.Footer=1]="Footer",e}({})),l=e("ChildAlignment",function(e){return e[e.UpperLeft=0]="UpperLeft",e[e.UpperCenter=1]="UpperCenter",e[e.UpperRight=2]="UpperRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.LowerLeft=6]="LowerLeft",e[e.LowerCenter=7]="LowerCenter",e[e.LowerRight=8]="LowerRight",e}({})),L=(e("ScrollDirection",function(e){return e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.None=4]="None",e}({})),e("ScrollbarDirection",function(e){return e[e.Top_To_Bottom=0]="Top_To_Bottom",e[e.Bottom_To_Top=1]="Bottom_To_Top",e[e.Left_To_Right=2]="Left_To_Right",e[e.Right_To_Left=3]="Right_To_Left",e}({}))),d=(e("NestedDirection",function(e){return e[e.Both=0]="Both",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e}({})),e("AlwaysScroll",function(e){return e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e}({})),e("IndicatorMode",function(e){return e[e.Normal=0]="Normal",e[e.Button=1]="Button",e}({}))),E=e("Transition",function(e){return e[e.None=0]="None",e[e.ColorTint=1]="ColorTint",e[e.SpriteSwap=2]="SpriteSwap",e[e.Scale=3]="Scale",e}({}));e("ReleaseState",function(e){return e.IDLE="IDLE",e.PULL="PULL",e.WAIT="WAIT",e.RELEASE="RELEASE",e}({})),e("HolderEvent",function(e){return e.CREATED="ADAPTER:HOLDER:CREATED",e.VISIBLE="ADAPTER:HOLDER:VISIBLE",e.DISABLE="ADAPTER:HOLDER:DISABLE",e}({})),e("ViewEvent",function(e){return e.VISIBLE="ADAPTER:VIEW:VISIBLE",e.DISABLE="ADAPTER::VIEW:DISABLE",e}({}));r(o),r(n),r(i),r(u),r(a),r(L),r(l),r(c),r(d),r(E),t._RF.pop()}}}));

System.register("chunks:///_virtual/EscHotkey.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonHotKey.ts"],(function(t){var e,n,o,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,c=t.KeyCode},function(t){s=t.ButtonHotKey}],execute:function(){var i,r;n._RF.push({},"2d53e8mnhxHI4l+waizfjCg","EscHotkey",void 0);var a=o.ccclass;o.property,t("EscHotkey",a("EscHotkey")(((r=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).index=0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.keys=[c.ESCAPE],t.prototype.onLoad.call(this)},o.onEnable=function(){n.escIndex+=1,this.index=n.escIndex,t.prototype.onEnable.call(this)},o.onDisable=function(){n.escIndex-=1,this.index=-1,t.prototype.onDisable.call(this)},o.trigger=function(){n.escIndex<0||this.index==n.escIndex&&t.prototype.trigger.call(this)},n}(s)).escIndex=-1,i=r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/exponential.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,c,o,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"5c4913KTCJGjqbcTxcC/UmQ","exponential",void 0);t("default",o({menu:"Math/Advanced/Exponential",title:"Exponential"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).data={inputs:[i("In",c.ZERO,"vec4","vector")],outputs:[i("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = exp("+t+");\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/FacialEmotionController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,a,o,s,h,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,h=e.SkinnedMeshRenderer,l=e.Component}],execute:function(){var u,c,p,f,d,m,g;o._RF.push({},"6e75aYdfoVM5bOfW6DB+f+a","FacialEmotionController",void 0);var v=s.ccclass,S=s.property,y=e("FacialEmotion",function(e){return e.NEUTRAL="neutral",e.HAPPY="happy",e.SAD="sad",e.ANGRY="angry",e.SURPRISED="surprised",e.FEAR="fear",e.DISGUST="disgust",e}({}));e("FacialEmotionController",(u=v("FacialEmotionController"),c=S({type:h}),p=S({tooltip:"Define emotions with blend shape weights"}),u((m=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"faceRenderer",m,r(t)),n(t,"emotions",g,r(t)),t.currentEmotion=y.NEUTRAL,t.isTransitioning=!1,t.transitionTime=0,t.transitionDuration=.5,t.fromWeights=new Map,t.toWeights=new Map,t.blendShapeNames=[],t.faceMaterial=null,t}i(t,e);var o=t.prototype;return o.start=function(){this.faceRenderer?(this.faceRenderer.material&&(this.faceMaterial=this.faceRenderer.material),this.blendShapeNames=this.getBlendShapeNames(),this.setEmotion(y.NEUTRAL)):console.error("Face renderer not assigned!")},o.getBlendShapeNames=function(){return["eyeBrowUp","eyeBrowDown","eyeClose","mouthOpen","mouthSmile","mouthFrown"]},o.update=function(e){if(this.isTransitioning&&this.faceMaterial){this.transitionTime+=e;for(var t,i=Math.min(this.transitionTime/this.transitionDuration,1),n=a(this.blendShapeNames);!(t=n()).done;){var r=t.value,o=this.fromWeights.get(r)||0,s=this.toWeights.get(r)||0,h=this.lerp(o,s,this.easeInOutQuad(i));this.applyBlendShapeWeight(r,h)}this.transitionTime>=this.transitionDuration&&(this.isTransitioning=!1)}},o.applyBlendShapeWeight=function(e,t){if(this.faceMaterial){var i="blendShape_"+e;this.faceMaterial.setProperty(i,t)}},o.setEmotion=function(e,t){if(void 0===t&&(t=.5),this.faceMaterial){var i=this.emotions.find((function(t){return t.name===e}));if(i){if(t>0){this.fromWeights.clear();for(var n,r=a(this.blendShapeNames);!(n=r()).done;){var o=n.value,s=this.getCurrentBlendShapeWeight(o);this.fromWeights.set(o,s)}this.toWeights.clear();for(var h,l=a(i.blendShapes);!(h=l()).done;){var u=h.value;this.toWeights.set(u.name,u.weight)}this.isTransitioning=!0,this.transitionTime=0,this.transitionDuration=t}else{for(var c,p=a(this.blendShapeNames);!(c=p()).done;){var f=c.value;this.applyBlendShapeWeight(f,0)}for(var d,m=a(i.blendShapes);!(d=m()).done;){var g=d.value;this.applyBlendShapeWeight(g.name,g.weight)}}this.currentEmotion=e}else console.warn('Emotion "'+e+'" not found')}},o.getCurrentBlendShapeWeight=function(e){if(!this.faceMaterial)return 0;var t="blendShape_"+e;try{var i=this.faceMaterial.getProperty(t);return"number"==typeof i?i:0}catch(e){return 0}},o.getCurrentEmotion=function(){return this.currentEmotion},o.lerp=function(e,t,i){return e+(t-e)*i},o.easeInOutQuad=function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},t}(l)).prototype,"faceRenderer",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(d.prototype,"emotions",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=d))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/FacialEmotionDemo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FacialEmotionController.ts"],(function(t){var o,n,e,i,r,a,s,c,u,l,m,f,E,h;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,u=t.Button,l=t.Vec3,m=t.Component,f=t.EventHandler},function(t){E=t.FacialEmotionController,h=t.FacialEmotion}],execute:function(){var p,d,D,v,C,b,S,B;a._RF.push({},"72db6UNpkhFOa4J9jHDXQ/n","FacialEmotionDemo",void 0);var g=s.ccclass,R=s.property;t("FacialEmotionDemo",(p=g("FacialEmotionDemo"),d=R(E),D=R(c),p((b=o((C=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,e(o,"faceController",b,i(o)),e(o,"emotionButtonsContainer",S,i(o)),e(o,"transitionDuration",B,i(o)),o.emotionButtons=new Map,o}n(o,t);var a=o.prototype;return a.start=function(){this.faceController?(this.emotionButtonsContainer&&this.setupEmotionButtons(),this.setEmotion(h.NEUTRAL)):console.error("Face controller not assigned!")},a.setupEmotionButtons=function(){var t=this;if(this.emotionButtonsContainer)for(var o,n=this.emotionButtonsContainer.getComponentsInChildren(u),e=function(){var n=o.value,e=n.node.name.toLowerCase(),i=[h.NEUTRAL,h.HAPPY,h.SAD,h.ANGRY,h.SURPRISED,h.FEAR,h.DISGUST].find((function(t){return e.includes(t.toLowerCase())}));if(i){t.emotionButtons.set(i,n);var r=new f;r.target=t.node,r.component="FacialEmotionDemo",r.handler="onEmotionButtonClicked",r.customEventData=i,n.clickEvents.push(r)}},i=r(n);!(o=i()).done;)e()},a.onEmotionButtonClicked=function(t,o){this.setEmotion(o)},a.setEmotion=function(t){this.faceController&&(console.log("Setting emotion: "+t),this.faceController.setEmotion(t,this.transitionDuration),this.updateButtonStates(t))},a.updateButtonStates=function(t){this.emotionButtons.forEach((function(o,n){o.interactable=n!==t;var e=n===t?1.2:1;o.node.setScale(new l(e,e,e))}))},a.triggerEmotionBasedOnEvent=function(t){switch(t){case"victory":this.setEmotion(h.HAPPY);break;case"defeat":this.setEmotion(h.SAD);break;case"damage":this.setEmotion(h.ANGRY);break;case"surprise":this.setEmotion(h.SURPRISED);break;case"scary":this.setEmotion(h.FEAR);break;case"disgust":this.setEmotion(h.DISGUST);break;default:this.setEmotion(h.NEUTRAL)}},a.playEmotionSequence=function(){var t=this,o=[{emotion:h.SURPRISED,duration:1},{emotion:h.HAPPY,duration:2},{emotion:h.NEUTRAL,duration:1}],n=0;o.forEach((function(o){t.scheduleOnce((function(){t.setEmotion(o.emotion)}),n),n+=o.duration}))},o}(m)).prototype,"faceController",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(C.prototype,"emotionButtonsContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=o(C.prototype,"transitionDuration",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),v=C))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/FeedbackManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts","./AudioManager2.ts","./poolManager.ts"],(function(e){var o,t,i,a,n,r,s,c,p,l,u,f,b,h,d,m,P,g,y,w,v,k,C,S;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose,r=e.createClass},function(e){s=e.cclegacy,c=e._decorator,p=e.Prefab,l=e.Animation,u=e.Node,f=e.ParticleSystem2D,b=e.Label,h=e.Camera,d=e.Color,m=e.UIOpacity,P=e.instantiate,g=e.Vec3,y=e.tween,w=e.easing,v=e.Component},function(e){k=e.HitRating},function(e){C=e.MagicTilesAudioManager},function(e){S=e.PoolManager}],execute:function(){var _,M,F,z,T,E,N,R,L,O,D,A,x,I,G,H,V,B,j,Q,U,Z,q,J,K,W,X,Y,$,ee,oe,te,ie,ae,ne,re,se,ce,pe,le;s._RF.push({},"38482d0oyNDQos3rad3oDFt","FeedbackManager",void 0);var ue=c.ccclass,fe=c.property,be=function(e){return e[e.PERFECT=0]="PERFECT",e[e.GREAT=1]="GREAT",e[e.COOL=2]="COOL",e[e.MISS=3]="MISS",e}(be||{});e("FeedbackManager",(_=ue("FeedbackManager"),M=fe(p),F=fe(p),z=fe(p),T=fe(p),E=fe(l),N=fe({type:[u],tooltip:"Feedback animation nodes in order: perfect, good, cool, miss"}),R=fe(f),L=fe(b),O=fe(p),D=fe(u),A=fe(h),x=fe(u),I=fe([Number]),G=fe(p),H=fe(p),_((j=o((B=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o=e.call.apply(e,[this].concat(n))||this,i(o,"perfectPrefab",j,a(o)),i(o,"greatPrefab",Q,a(o)),i(o,"coolPrefab",U,a(o)),i(o,"missPrefab",Z,a(o)),i(o,"animScoreFeedBacks",q,a(o)),i(o,"feedbackNodes",J,a(o)),i(o,"particleSystemPerfectFragments",K,a(o)),i(o,"comboLabel",W,a(o)),i(o,"comboPopupPrefab",X,a(o)),i(o,"feedbackContainer",Y,a(o)),i(o,"gameCamera",$,a(o)),i(o,"cameraShakeNode",ee,a(o)),o.audioManager=null,i(o,"perfectSoundEffect",oe,a(o)),i(o,"greatSoundEffect",te,a(o)),i(o,"coolSoundEffect",ie,a(o)),i(o,"missSoundEffect",ae,a(o)),i(o,"comboSoundEffect",ne,a(o)),i(o,"comboMilestones",re,a(o)),o.lanePositions=[],i(o,"feedbackDuration",se,a(o)),i(o,"feedbackScaleMultiplier",ce,a(o)),i(o,"scorePopupPrefab",pe,a(o)),i(o,"messagePopupPrefab",le,a(o)),o.feedbackAnimNames=["perfect","great","cool","miss"],o._scorePopupPool=[],o._messagePopupPool=[],o._scorePopupTemplate=null,o._messagePopupTemplate=null,o._poolRoot=null,o.comboTween=null,o}t(o,e);var s=o.prototype;return s.onLoad=function(){this.audioManager=C.instance,this.comboLabel&&(this.comboLabel.string="",this.comboLabel.node.active=!1),this.feedbackContainer||(this.feedbackContainer=new u("FeedbackContainer"),this.feedbackContainer.parent=this.node),this.perfectPrefab&&S.instance.preloadPool(this.perfectPrefab,10),this.greatPrefab&&S.instance.preloadPool(this.greatPrefab,10),this.coolPrefab&&S.instance.preloadPool(this.coolPrefab,10),this.missPrefab&&S.instance.preloadPool(this.missPrefab,5),this.comboPopupPrefab&&S.instance.preloadPool(this.comboPopupPrefab,3),this.scorePopupPrefab?S.instance.preloadPool(this.scorePopupPrefab,1):this.createScorePopupPrefab(),this.messagePopupPrefab?S.instance.preloadPool(this.messagePopupPrefab,1):this.createMessagePopupPrefab()},s.createScorePopupPrefab=function(){var e=new u("ScorePopup"),o=e.addComponent(b);o.fontSize=36,o.color=new d(255,255,100,255),e.addComponent(m),this._poolRoot||(this._poolRoot=new u("PoolContainer"),this._poolRoot.parent=this.node,this._poolRoot.active=!1),this._scorePopupPool||(this._scorePopupPool=[]);for(var t=0;t<10;t++){var i=P(e);i.parent=this._poolRoot,i.active=!1,this._scorePopupPool.push(i)}this._scorePopupTemplate=e,e.parent=this._poolRoot,e.active=!1},s.createMessagePopupPrefab=function(){var e=new u("Message"),o=e.addComponent(b);o.fontSize=48,o.color=new d(255,255,255,255),e.addComponent(m),this._poolRoot||(this._poolRoot=new u("PoolContainer"),this._poolRoot.parent=this.node,this._poolRoot.active=!1),this._messagePopupPool||(this._messagePopupPool=[]);for(var t=0;t<3;t++){var i=P(e);i.parent=this._poolRoot,i.active=!1,this._messagePopupPool.push(i)}this._messagePopupTemplate=e,e.parent=this._poolRoot,e.active=!1},s.getScorePopupFromPool=function(){var e;return(e=this._scorePopupPool.length>0?this._scorePopupPool.pop():P(this._scorePopupTemplate)).active=!0,e},s.putScorePopupToPool=function(e){e&&(e.active=!1,e.removeFromParent(),this._scorePopupPool.push(e))},s.getMessagePopupFromPool=function(){var e;return(e=this._messagePopupPool.length>0?this._messagePopupPool.pop():P(this._messagePopupTemplate)).active=!0,e},s.putMessagePopupToPool=function(e){e&&(e.active=!1,e.removeFromParent(),this._messagePopupPool.push(e))},s.setLanePositions=function(e){this.lanePositions=e},s.showRatingFeedback=function(e,o){var t=this.getLanePosition(e),i=null,a="";switch(o){case k.PERFECT:i=this.perfectPrefab,a=this.perfectSoundEffect,this.showFeedback(be.PERFECT),this.particleSystemPerfectFragments.resetSystem();break;case k.GREAT:i=this.greatPrefab,a=this.greatSoundEffect,this.showFeedback(be.GREAT);break;case k.COOL:i=this.coolPrefab,a=this.coolSoundEffect,this.showFeedback(be.COOL);break;case k.MISS:i=this.missPrefab,a=this.missSoundEffect,this.showFeedback(be.MISS)}a&&this.audioManager.playSound(a),i&&this.showFeedbackPrefab(i,t)},s.showFeedbackPrefab=function(e,o){var t=S.instance.getNode(e,this.feedbackContainer);t.position=o;var i=t.getComponent(m)||t.addComponent(m);i.opacity=255,t.scale=new g(1,1,1),y(t).to(.3*this.feedbackDuration,{scale:new g(this.feedbackScaleMultiplier,this.feedbackScaleMultiplier,1)}).to(.7*this.feedbackDuration,{position:new g(o.x,o.y+50,o.z)}).start(),y(i).delay(.3*this.feedbackDuration).to(.7*this.feedbackDuration,{opacity:0}).call((function(){S.instance.putNode(t)})).start()},s.updateCombo=function(e){this.comboLabel&&(e>1?(this.comboLabel.string="x"+e,this.comboLabel.node.active=!0,this.comboTween&&this.comboTween.stop(),this.comboLabel.node.scale=new g(0,0,0),this.comboTween=y(this.comboLabel.node).to(.1,{scale:new g(1.2,1.2,1)}).delay(.5).to(.35,{scale:g.ZERO},{easing:w.backIn}).start(),this.isComboMilestone(e)&&this.showComboMilestone(e)):(this.comboLabel.string="",this.comboLabel.node.active=!1))},s.isComboMilestone=function(e){return this.comboMilestones.indexOf(e)>=0},s.showComboMilestone=function(e){if(this.audioManager.playSound(this.comboSoundEffect),this.comboPopupPrefab){var o=S.instance.getNode(this.comboPopupPrefab,this.feedbackContainer);o.position=new g(0,0,0),o.scale=new g(1,1,1);var t=o.getComponentInChildren(b);t&&(t.string=e+" COMBO!"),y(o).to(.2,{scale:new g(1.5,1.5,1)}).to(.2,{scale:new g(1,1,1)}).delay(1).to(.3,{position:new g(0,100,0)}).call((function(){S.instance.putNode(o)})).start(),this.shakeCamera(.2,e/300)}},s.shakeCamera=function(e,o){if(void 0===o&&(o=.5),this.gameCamera||this.cameraShakeNode){if(this.cameraShakeNode){var t=this.cameraShakeNode.getComponent(l);if(t)return t.play(),void this.scheduleOnce((function(){t.stop()}),e)}for(var i=this.cameraShakeNode||this.gameCamera.node,a=i.position.clone(),n=10*o,r=Math.floor(e/.05),s=y(i),c=0;c<r;c++){var p=(2*Math.random()-1)*n,u=(2*Math.random()-1)*n;s=s.to(.05,{position:new g(a.x+p,a.y+u,a.z)})}s.to(.1,{position:a}).start()}},s.showScorePopup=function(e,o){var t=this;if(void 0===o&&(o=new g(0,0,0)),this.scorePopupPrefab){var i=S.instance.getNode(this.scorePopupPrefab,this.feedbackContainer);i.position=o;var a=i.getComponent(b);a&&(a.string="+"+e);var n=i.getComponent(m);n&&(n.opacity=255),y(i).to(.5,{position:new g(o.x,o.y+80,o.z)}).delay(.2).to(.3,{position:new g(o.x,o.y+120,o.z)}).call((function(){S.instance.putNode(i)})).start()}else if(this._scorePopupTemplate){var r=this.getScorePopupFromPool();r.parent=this.feedbackContainer,r.position=o;var s=r.getComponent(b);s&&(s.string="+"+e);var c=r.getComponent(m);c&&(c.opacity=255),y(r).to(.5,{position:new g(o.x,o.y+80,o.z)}).delay(.2).to(.3,{position:new g(o.x,o.y+120,o.z)}).call((function(){t.putScorePopupToPool(r)})).start()}else{var p=new u("ScorePopup");p.parent=this.feedbackContainer,p.position=o;var l=p.getComponent(b)||p.addComponent(b);l.string="+"+e,l.fontSize=36,l.color=new d(255,255,100,255),y(p).to(.5,{position:new g(o.x,o.y+80,o.z)}).delay(.2).to(.3,{position:new g(o.x,o.y+120,o.z)}).call((function(){p.removeFromParent(),p.destroy()})).start()}},s.getLanePosition=function(e){return e>=0&&e<this.lanePositions.length?this.lanePositions[e]:new g(0,0,0)},s.showMessage=function(e,o,t){var i=this;if(void 0===o&&(o=2),void 0===t&&(t=80),this.messagePopupPrefab){var a=S.instance.getNode(this.messagePopupPrefab,this.feedbackContainer);a.position=new g(0,0,0);var n=a.getComponent(b);n&&(n.string=e,n.fontSize=t,n.lineHeight=t);var r=a.getComponent(m);r&&(r.opacity=0,y(r).to(.3,{opacity:255}).delay(o-.6).to(.3,{opacity:0}).call((function(){S.instance.putNode(a)})).start())}else if(this._messagePopupTemplate){var s=this.getMessagePopupFromPool();s.parent=this.feedbackContainer,s.position=new g(0,0,0);var c=s.getComponent(b);c&&(c.string=e,c.fontSize=t,c.lineHeight=t);var p=s.getComponent(m);p&&(p.opacity=0,y(p).to(.3,{opacity:255}).delay(o-.6).to(.3,{opacity:0}).call((function(){i.putMessagePopupToPool(s)})).start())}else{var l=new u("Message");l.parent=this.feedbackContainer,l.position=new g(0,0,0);var f=l.getComponent(b)||l.addComponent(b);f.string=e,f.fontSize=t,f.color=new d(255,255,255,255);var h=l.getComponent(m)||l.addComponent(m);h.opacity=0,y(h).to(.3,{opacity:255}).delay(o-.6).to(.3,{opacity:0}).call((function(){l.removeFromParent(),l.destroy()})).start()}},s.playHapticFeedback=function(e){if(void 0===e&&(e=.5),"navigator"in globalThis&&"vibrate"in navigator){var o=Math.floor(10+90*e);navigator.vibrate(o)}},s.showFeedback=function(e){for(var o,t=n(this.feedbackNodes);!(o=t()).done;){o.value.active=!1}this.feedbackNodes[e]&&(this.feedbackNodes[e].active=!0);var i=this.feedbackAnimNames[e];this.animScoreFeedBacks.play(i)},s.showPerfect=function(){this.showFeedback(be.PERFECT)},s.showGood=function(){this.showFeedback(be.GREAT)},s.showCool=function(){this.showFeedback(be.COOL)},s.showMiss=function(){this.showFeedback(be.MISS)},s.onDestroy=function(){this._scorePopupPool&&(this._scorePopupPool.forEach((function(e){e&&e.isValid&&e.destroy()})),this._scorePopupPool=[]),this._messagePopupPool&&(this._messagePopupPool.forEach((function(e){e&&e.isValid&&e.destroy()})),this._messagePopupPool=[]),this._scorePopupTemplate&&this._scorePopupTemplate.isValid&&(this._scorePopupTemplate.destroy(),this._scorePopupTemplate=null),this._messagePopupTemplate&&this._messagePopupTemplate.isValid&&(this._messagePopupTemplate.destroy(),this._messagePopupTemplate=null),this._poolRoot&&this._poolRoot.isValid&&(this._poolRoot.destroy(),this._poolRoot=null)},r(o,[{key:"perfectAnimNode",get:function(){return this.feedbackNodes[0]}},{key:"goodNode",get:function(){return this.feedbackNodes[1]}},{key:"coolNode",get:function(){return this.feedbackNodes[2]}},{key:"missNode",get:function(){return this.feedbackNodes[3]}}]),o}(v)).prototype,"perfectPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=o(B.prototype,"greatPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(B.prototype,"coolPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=o(B.prototype,"missPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=o(B.prototype,"animScoreFeedBacks",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=o(B.prototype,"feedbackNodes",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=o(B.prototype,"particleSystemPerfectFragments",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=o(B.prototype,"comboLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=o(B.prototype,"comboPopupPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=o(B.prototype,"feedbackContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=o(B.prototype,"gameCamera",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=o(B.prototype,"cameraShakeNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=o(B.prototype,"perfectSoundEffect",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"perfect"}}),te=o(B.prototype,"greatSoundEffect",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"good"}}),ie=o(B.prototype,"coolSoundEffect",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ok"}}),ae=o(B.prototype,"missSoundEffect",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"miss"}}),ne=o(B.prototype,"comboSoundEffect",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"combo"}}),re=o(B.prototype,"comboMilestones",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[50,100,200,300,500]}}),se=o(B.prototype,"feedbackDuration",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),ce=o(B.prototype,"feedbackScaleMultiplier",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),pe=o(B.prototype,"scorePopupPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=o(B.prototype,"messagePopupPrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=B))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/float.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){c=t.ConcretePrecisionType},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"68e4bUVUSRHKo5B3bmMbsMV","float",void 0);t("default",o({menu:"Input/Basic/Float",title:"Float"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).concretePrecisionType=c.Fixed,e.data={inputs:[i("In",0,"float","vector")],outputs:[i("Out",0,"float","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = "+t+";\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/floor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"ee049iD/ZRMAqYgcXswPl0X","floor",void 0);t("default",r({menu:"Math/Round/Floor",title:"Floor"})(u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[i("In",o.ZERO,"vec4","vector")],outputs:[i("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = floor("+t+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/fraction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"1be9a5SW39Pr7Ypuq6zuC9D","fraction",void 0);t("default",c({menu:"Math/Range/Fraction",title:"Fraction"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = fract("+t+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/fresnel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,r,o,c,i,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec3},function(e){o=e.register},function(e){c=e.ShaderNode},function(e){i=e.ConcretePrecisionType},function(e){s=e.slot}],execute:function(){var u;n._RF.push({},"861c8JYxalKB66ptbnD6WdM","fresnel",void 0);e("default",o({menu:"Math/Vector/Fresnel",title:"Fresnel"})(u=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=i.Fixed,t.data={inputs:[s("Normal",r.ZERO,"vec3","vector"),s("ViewDir",r.ZERO,"vec3","vector"),s("Power",0,"float","vector")],outputs:[s("Out",0,"float","vector")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = pow((1.0 - saturate(dot(normalize("+e+"), normalize("+t+")))), "+n+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameEnviromentSetter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./APIManager.ts","./PopupBase.ts","./audioManager.ts","./uiManager.ts","./EffectController.ts"],(function(e){var n,t,r,o,i,s,a,c,u,l,p,f,h,d,m,P,g,b,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.Node,c=e.Sprite,u=e.Label,l=e.director,p=e.Component},function(e){f=e.GameConstant,h=e.setEnvi,d=e.CurrentEnviroment},function(e){m=e.setAPIManagerURL},function(e){P=e.PopupBase},function(e){g=e.AudioManager},function(e){b=e.UIManager},function(e){y=e.EffectController}],execute:function(){var E,A,v,w,G,L,S,C,M,_,I,z,B,F;i._RF.push({},"58916U7dudCXZ4FreIgnM5F","GameEnviromentSetter",void 0);var N=s.ccclass,O=s.property;e("GameEnviromentSetter",(E=N("GameEnviromentSetter"),A=O(a),v=O(c),w=O(P),G=O(u),E((C=n((S=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,r(n,"API",C,o(n)),r(n,"LOG",M,o(n)),r(n,"FAKEDATA",_,o(n)),r(n,"sckContainer",I,o(n)),r(n,"sprtProcessBar",z,o(n)),r(n,"popupError",B,o(n)),r(n,"lbError",F,o(n)),n.sceneName=f.SCENE_NAME.HOME,n.retryCount=0,n}t(n,e);var i=n.prototype;return i.onLoad=function(){h({API:this.API,LOG:this.LOG}),this.init(),this.initGameProcess()},i.init=function(){m(d.API)},i.initGameProcess=function(){var e=this;Promise.all([this.step_ProcessData(),this.step_ProcessPreloadSceneAssets()]).then((function(n){e.loadGame()})).catch((function(n){e.showError(n)}))},i.retry=function(){++this.retryCount>3?this.lbError.string="Please try again later!":(this.popupError.doHide(),this.initGameProcess())},i.showError=function(e){this.lbError.string=e,this.popupError.doShow()},i.step_ProcessData=function(){var e=this;return new Promise((function(n,t){e.step_initManagers().then((function(e){n("success")})).catch((function(e){t(e)}))}))},i.step_initManagers=function(){return new Promise((function(e,n){g.instance=new g,b.instance=new b,y.instance=new y,e("success")}))},i.step_ProcessPreloadSceneAssets=function(){var e=this;return new Promise((function(n,t){l.preloadScene(e.sceneName,(function(n,t,r){e.sprtProcessBar&&(e.sprtProcessBar.fillRange=n/t*.95)}),(function(r,o){if(r)return d.LOG&&console.error("Failed to preload scene "+e.sceneName+":",r),void t("Failed to load assets. Please retry. If retrying doesn't help, please clear the cache and try again.");n("loaded assets done")}))}))},i.loadGame=function(){var e=this;this.sprtProcessBar.fillRange=1,d.LOG&&console.log("doneLoadAssets"),l.loadScene(this.sceneName,(function(){d.LOG&&console.log("Scene "+e.sceneName+" loaded successfully")}))},i.onTouch_Retry=function(){this.retry()},n}(p)).prototype,"API",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=n(S.prototype,"LOG",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=n(S.prototype,"FAKEDATA",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=n(S.prototype,"sckContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(S.prototype,"sprtProcessBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(S.prototype,"popupError",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(S.prototype,"lbError",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./Constants.ts"],(function(n){var e,t,i,o;return{setters:[function(n){e=n.cclegacy,t=n.game,i=n.Game},function(n){o=n.CurrentEnviroment}],execute:function(){e._RF.push({},"399f2AVXt9B5ozV4m+hAt4r","GameManager",void 0);var s=n("GameManager",function(){function n(){this.userInfo=null,this.isNeedToReload=!1,this.isShouldSync=!0,this.initGameEvents()}var e=n.prototype;return e.initGameEvents=function(){t.on(i.EVENT_HIDE,(function(){o.LOG&&console.log("GameManager: on game hided")}))},e.setUserInfo=function(n){this.userInfo=n,this.isNeedToReload=!1,this.isShouldSync=!0},n}());s.instance=null,s.instance=new s,e._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager2.ts","./BeatmapManager.ts","./TileManager.ts","./InputManager.ts","./FeedbackManager.ts","./TapValidator.ts","./ScoreManager.ts","./Tile.ts"],(function(e){var a,t,i,n,r,s,o,l,u,c,h,g,p,m,d,b,f,M;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,l=e._decorator,u=e.Toggle,c=e.Component},function(e){h=e.MagicTilesAudioManager},function(e){g=e.BeatmapManager},function(e){p=e.TileManager},function(e){m=e.InputManager},function(e){d=e.FeedbackManager},function(e){b=e.TapValidator},function(e){f=e.ScoreManager},function(e){M=e.HitRating}],execute:function(){var P,v,S,G,y,T,A,E,H,k,C,I,N,L,w,B,R,O,D,F,x;o._RF.push({},"54bffb59LVEi6v9WbidyqIN","GameplayManager",void 0);var z=l.ccclass,V=l.property,_=e("GameState",function(e){return e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.WAITING_FOR_START=2]="WAITING_FOR_START",e[e.PLAYING=3]="PLAYING",e[e.PAUSED=4]="PAUSED",e[e.COMPLETED=5]="COMPLETED",e[e.FAILED=6]="FAILED",e}({}));e("GameplayManager",(P=z("GameplayManager"),v=V(p),S=V(m),G=V(d),y=V(b),T=V(f),A=V(u),P((k=a((H=function(e){function a(){for(var a,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(a=e.call.apply(e,[this].concat(r))||this).gameState=_.NONE,i(a,"tileManager",k,n(a)),i(a,"inputManager",C,n(a)),i(a,"feedbackManager",I,n(a)),i(a,"tapValidator",N,n(a)),i(a,"scoreManager",L,n(a)),i(a,"toggleAutoPlay",w,n(a)),i(a,"countdownDuration",B,n(a)),i(a,"minSurvivalHP",R,n(a)),i(a,"maxSurvivalHP",O,n(a)),i(a,"missHPPenalty",D,n(a)),i(a,"badHitHPPenalty",F,n(a)),i(a,"perfectHPRecovery",x,n(a)),a.survivalHP=100,a.currentBeatmapId="",a.elapsedTime=0,a.notesPassed=0,a.totalNotes=0,a.autoPlay=!1,a.isPaused=!1,a.onGameStateChangedCallback=null,a.onSurvivalHPChangedCallback=null,a.audioManager=null,a.beatmapManager=null,a}t(a,e);var o=a.prototype;return o.onLoad=function(){this.audioManager||(this.audioManager=h.instance),this.beatmapManager||(this.beatmapManager=g.instance),this.tapValidator&&this.tapValidator.onRating(this.onRatingEvent.bind(this))},o.LoadBeatMap=function(){var e=r(s().mark((function e(a){var t,i,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resetGameState(),this.currentBeatmapId=a,this.setGameState(_.LOADING),e.prev=3,e.next=6,this.beatmapManager.loadBeatmapInfo(a);case 6:if(t=e.sent){e.next=10;break}return console.error("Failed to load beatmap: "+a),e.abrupt("return",!1);case 10:return e.next=12,this.beatmapManager.loadBeatmapAudioData();case 12:if(i=e.sent){e.next=16;break}return console.error("Failed to load beatmap audio"),e.abrupt("return",!1);case 16:return null==t.notes||0==t.notes.length?(n=this.beatmapManager.updateNotes(a,i.trackInfo.notes),this.totalNotes=n.notes.length):this.totalNotes=t.notes.length,this.tileManager.initGame(),this.createBeginningTile(),e.abrupt("return",!0);case 22:return e.prev=22,e.t0=e.catch(3),console.error("Error starting game:",e.t0),e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e,this,[[3,22]])})));return function(a){return e.apply(this,arguments)}}(),o.startPlaying=function(){this.setAutoPlay(this.toggleAutoPlay.isChecked),this.tapValidator.resetCombo(),this.scoreManager.resetScore(),this.scoreManager.startTracking(),this.inputManager.setEnabled(!0),this.tileManager.startGame(),this.audioManager.playBeatmapAudio(),this.setGameState(_.PLAYING),this.schedule(this.gameUpdate,0)},o.pauseGame=function(){this.gameState===_.PLAYING&&(this.audioManager.pauseBeatmapAudio(),this.tileManager.pauseGame(),this.inputManager.setEnabled(!1),this.scoreManager.pauseTracking(),this.isPaused=!0,this.setGameState(_.PAUSED),this.unschedule(this.gameUpdate))},o.resumeGame=function(){this.gameState===_.PAUSED&&(this.audioManager.resumeBeatmapAudio(),this.tileManager.resumeGame(),this.inputManager.setEnabled(!0),this.scoreManager.resumeTracking(),this.isPaused=!1,this.setGameState(_.PLAYING),this.schedule(this.gameUpdate,0))},o.gameUpdate=function(e){if(this.elapsedTime+=e,this.audioManager.isPlaying()){var a=this.audioManager.getCurrentTime();this.tileManager.setGameTime(a)}this.survivalHP<=0?this.failGame():this.notesPassed>=this.totalNotes&&0===this.tileManager.getActiveTileCount()&&this.completeGame()},o.onRatingEvent=function(e,a){switch(this.feedbackManager.showRatingFeedback(e,a),this.feedbackManager.updateCombo(this.tapValidator.getCombo()),this.notesPassed++,a){case M.PERFECT:this.changeSurvivalHP(this.perfectHPRecovery);break;case M.GREAT:break;case M.COOL:this.changeSurvivalHP(-this.badHitHPPenalty);break;case M.MISS:this.changeSurvivalHP(-this.missHPPenalty)}},o.changeSurvivalHP=function(e){this.survivalHP=Math.max(0,Math.min(this.maxSurvivalHP,this.survivalHP+e)),this.onSurvivalHPChangedCallback&&this.onSurvivalHPChangedCallback(this.survivalHP)},o.completeGame=function(){this.stopGameplay(),this.setGameState(_.COMPLETED),this.feedbackManager.showMessage("LEVEL COMPLETE!");var e=this.scoreManager.getFinalScore(),a=this.tapValidator.getAccuracy(),t=this.tapValidator.getMaxCombo();console.log("Game completed! Score: "+e+", Accuracy: "+a+"%, Max Combo: "+t),this.scheduleOnce((function(){console.log("Show results screen")}),2)},o.failGame=function(){this.stopGameplay(),this.setGameState(_.FAILED),this.feedbackManager.showMessage("GAME OVER"),this.feedbackManager.shakeCamera(.3,.8),this.scheduleOnce((function(){console.log("Show fail screen")}),2)},o.stopGameplay=function(){this.audioManager.stopBeatmapAudio(),this.tileManager.stopGame(),this.inputManager.setEnabled(!1),this.scoreManager.stopTracking(),this.unschedule(this.gameUpdate)},o.resetGameState=function(){this.gameState=_.NONE,this.survivalHP=this.maxSurvivalHP,this.elapsedTime=0,this.notesPassed=0,this.totalNotes=0,this.isPaused=!1},o.setGameState=function(e){this.gameState=e,this.onGameStateChangedCallback&&this.onGameStateChangedCallback(e)},o.onGameStateChanged=function(e){this.onGameStateChangedCallback=e},o.onSurvivalHPChanged=function(e){this.onSurvivalHPChangedCallback=e},o.getGameState=function(){return this.gameState},o.getSurvivalHP=function(){return this.survivalHP},o.getProgress=function(){return 0===this.totalNotes?0:this.notesPassed/this.totalNotes},o.setAutoPlay=function(e){this.autoPlay=e,this.tileManager.toggleAutoplay(e)},o.isAutoPlayEnabled=function(){return this.autoPlay},o.togglePause=function(){this.isPaused?this.resumeGame():this.pauseGame()},o.restartGame=function(){this.currentBeatmapId&&this.LoadBeatMap(this.currentBeatmapId)},o.exitGame=function(){this.stopGameplay(),this.resetGameState(),console.log("Exit to menu")},o.createBeginningTile=function(){this.setGameState(_.WAITING_FOR_START),this.feedbackManager.showMessage("Tap to Start",0,140),this.tileManager&&this.tileManager.setupBeginningTile(),this.inputManager.setEnabled(!0),this.inputManager.onLaneTap(this.onBeginningTileTap.bind(this))},o.onBeginningTileTap=function(e){this.gameState===_.WAITING_FOR_START&&(this.tileManager.checkBeginningTileTap(e)&&(this.inputManager.removeOnLaneTap(this.onBeginningTileTap.bind(this)),this.startPlaying()))},a}(c)).prototype,"tileManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=a(H.prototype,"inputManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=a(H.prototype,"feedbackManager",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=a(H.prototype,"tapValidator",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=a(H.prototype,"scoreManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=a(H.prototype,"toggleAutoPlay",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=a(H.prototype,"countdownDuration",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),R=a(H.prototype,"minSurvivalHP",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),O=a(H.prototype,"maxSurvivalHP",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),D=a(H.prototype,"missHPPenalty",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),F=a(H.prototype,"badHitHPPenalty",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=a(H.prototype,"perfectHPRecovery",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),E=H))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/get-local-var.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,n,r,a,o,i,u,c;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){r=e.cclegacy,a=e.Vec4},function(e){o=e.ShaderNode},function(e){i=e.prop,u=e.slot},null,function(e){c=e.register}],execute:function(){var s;r._RF.push({},"30feaYkdKtOs5doShMcgDKA","get-local-var",void 0);e("default",c({menu:"Input/Variable/GetLocalVar",title:"GetLocalVar"})(s=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).data={props:[i("Name","local_var","dynamicEnum",{registerEnum:{type:"RegisterLocalVarName",property:"Name"}})],outputs:[u("Out",a.ZERO,"vec4","vector")]},t}return t(r,e),r.prototype.generateCode=function(){return this.inputs[0].connectSlot.precisionName+" "+this.name+"= "+this.getInputValue(0)+";"},n(r,[{key:"name",get:function(){var e=this.getPropWithName("Name");return e&&e.value},set:function(e){this.getPropWithName("Name").value=e}}]),r}(o))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/gradient-noise.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,i,o,r,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.Vec2},function(e){o=e.register},function(e){r=e.ShaderNode},function(e){c=e.ConcretePrecisionType},function(e){s=e.slot}],execute:function(){var u;n._RF.push({},"5ccd4lVn2JLsKN+1DWNpIFz","gradient-noise",void 0);e("default",o({menu:"Procedural/Noise/GradientNoise",title:"GradientNoise"})(u=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=c.Fixed,t.depChunks=["noise"],t.data={inputs:[s("uv",i.ZERO,"vec2","vector"),s("scale",0,"float","vector")],outputs:[s("Out",0,"float","vector")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0);this.inputs[0].connectSlot||(e="v_uv.xy");var t=this.getInputValue(1);return this.getOutputVarDefine(0)+" = GradientNoise("+e+", "+t+");"},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts"],(function(i){var t,e,n;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy},function(i){n=i.StretchDirection}],execute:function(){e._RF.push({},"745449vUL5G0oNZ/T6pUfiN","Group",void 0);i("Group",function(){function i(i){this._adapter=void 0,this._index=-1,this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._adapter=i,this.internal_reset()}var e=i.prototype;return e.findModelIndex=function(i){return this.models.findIndex((function(t){return t.index==i}))},e.internal_reset=function(){this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._setAnchorPoint()},e.internal_setPosition=function(i){var t=this.adapter.mainAxis;this.oldPosition[t]=this.position[t],this.position[t]=i},e.internal_setIndex=function(i){this._index=i},e.internal_insert=function(i,t,e){t.internal_reset();var n=this.models;if(this.internal_reset(),this._fixedIndex=i.fixedIndex,!e)for(var s=0;s<n.length;s++){var r=n[s];if(!(r.index<i.modelIndex))break;if(!this._insertHandler(r,t))return i.modelIndex=r.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,!0}for(var o=i.modelIndex;o<this.adapter.modelManager.length;o++){var a=this.adapter.modelManager.get(o);if(!this._insertHandler(a,t))return i.modelIndex=a.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,a.index}return!1},e.internal_includes=function(i){for(var t,e=this,n=function(){var t=i[s];if(-1!=e.models.findIndex((function(i){return i.data==t})))return{v:!0}},s=0;s<i.length;s++)if(t=n())return t.v;return!1},e._insertHandler=function(i,t){if(t.internal_isWrap(i,this))return t.internal_reset(),!1;t.internal_push(i),i.element.fixed&&(this._isFixed=!0,this._fixedIndex=-1);var e=this.adapter.mainAxis,n=this.adapter.crossAxis;return(!i.element.ignoreLayout||i.element.ignoreLayout&&i.element.placeholder)&&(this.size[e]=Math.max(this.size[e],i.size[e]*i.scale[e])),this.size[n]=this.adapter.crossAxisSize,this.oldSize[e]=this.size[e],this.oldSize[n]=this.size[n],this.models.push(i),!0},e._setAnchorPoint=function(){switch(this.adapter.viewManager.stretchDirection){case n.Center:this.anchorPoint[this.adapter.mainAxis]=.5;break;case n.Header:this.anchorPoint[this.adapter.mainAxis]=1-this.adapter.mainAxisAnchorPoint;break;default:this.anchorPoint[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint}},t(i,[{key:"adapter",get:function(){return this._adapter}},{key:"index",get:function(){return this._index}},{key:"models",get:function(){return this._models}},{key:"size",get:function(){return this._size}},{key:"oldSize",get:function(){return this._oldSize}},{key:"anchorPoint",get:function(){return this._anchorPoint}},{key:"position",get:function(){return this._position}},{key:"oldPosition",get:function(){return this._oldPosition}},{key:"totalMinSize",get:function(){return this._totalMinSize}},{key:"totalPreferredSize",get:function(){return this._totalPreferredSize}},{key:"totalFlexibleSize",get:function(){return this._totalFlexibleSize}},{key:"isFixed",get:function(){return this._isFixed}},{key:"fixedIndex",get:function(){return this._fixedIndex}}]),i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/helper.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"9951cDVtORNYrBREEqRMzYS","helper",void 0);var r=n("Helper",function(){function n(){}return n.smoothStep=function(n,t,r){return t*(r=-2*(r=this.clamp01(r))*r*r+3*r*r)+n*(1-r)},n.smoothDamp=function(n,t,r,e,o,a){var i=2/(e=Math.max(1e-4,e)),u=i*a,c=1/(1+u+.48*u*u+.235*u*u*u),x=n-t,p=t,f=o*e,h=(r+i*(x=this.clamp(x,0-f,f)))*a;r=(r-i*h)*c;var s=(t=n-x)+(x+h)*c;return p-n>0==s>p&&(r=((s=p)-p)/a),{velocity:r,position:s}},n.clamp01=function(n){return this.clamp(n,0,1)},n.clamp=function(n,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),Math.min(Math.max(n,t),r)},n.sign=function(n){return n>=0?1:-1},n.lerp=function(n,t,r){return n+(t-n)*this.clamp01(r)},n.approximately=function(n,t){return Math.abs(t-n)<Math.max(1e-4*Math.max(Math.abs(n),Math.abs(t)),8*this.Epsilon)},n.round=function(n,t){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)},n.pingpang=function(n){var t=n;t=Math.abs(n);var r=Math.trunc(t);return r%2==0?t-=r:t=1-(t-r),t},n.isNumber=function(n){return"number"==typeof n&&!isNaN(n)},n.progress=function(n,t,r,e){return n+(t-n)*e},n.getGuid=function(){var n=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?r:3&r|8).toString(16)}))},n}());r.Epsilon=1401298e-51,r.Infinity=1/0,t._RF.pop()}}}));

System.register("chunks:///_virtual/Holder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper.ts","./ModelManager.ts"],(function(e){var t,i,s,n,o,a,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,s=e._decorator,n=e.Node,o=e.UITransform},function(e){a=e.Helper},function(e){h=e.ModelManager}],execute:function(){var r;i._RF.push({},"e143cqYQS9Lga09ceG48Qky","Holder",void 0);var d=s.ccclass;s.property,e("Holder",d("Holder")(r=function(){function e(e,t,i){this._node=void 0,this._transform=void 0,this._code=void 0,this._adapter=void 0,this._model=void 0,this._view=void 0,this._fixedIndex=-1,this._oldData=null,this._oldElement=null,this._isCallCreated=!1,this._isLayout=!1,this._node=e,this._code=t,this._adapter=i,this._transform=this.node.getComponent(o)}var i=e.prototype;return i.internal_visible=function(e,t,i){var s=this;this._view=e,this._model=t,this._oldElement=Object.assign({},t.element),this._model.element.update=this._updateElement.bind(this),this._oldData=this.data,i&&(this.node.active=!0,this._isCallCreated||(this._isCallCreated=!0,this.onCreated()),this.element.fixed&&(this._fixedIndex=this.view.group.models.findIndex((function(e){return e.index==s.model.index}))),this.transform.setContentSize(this.model.size.x,this.model.size.y),this.node.setScale(this.model.scale.x,this.model.scale.y),this._register(),this.onVisible(),this._model.update=this._updateHandler.bind(this))},i._updateElement=function(){this._oldElement.layer!=this.element.layer&&(this.node.parent=this.adapter.scrollManager.getLayerNode(this.element.layer),this._oldElement.layer=this.element.layer),(this._oldElement.wrapAfterMode!=this.element.wrapAfterMode||this._oldElement.wrapBeforeMode!=this.element.wrapBeforeMode||this._oldElement.ignoreLayout!=this.element.ignoreLayout||this.element.ignoreLayout&&this._oldElement.placeholder!=this.element.placeholder)&&(this.adapter.viewManager.internal_updateVisibleView(this.model.index),this._oldElement.wrapAfterMode=this.element.wrapAfterMode,this._oldElement.wrapBeforeMode=this.element.wrapBeforeMode,this._oldElement.ignoreLayout=this.element.ignoreLayout,this._oldElement.placeholder=this.element.placeholder)},i._updateHandler=function(){this._model.update=function(){},this.onVisible(),this._model.update=this._updateHandler.bind(this)},i.internal_disable=function(){this.adapter.scrollManager.internal_disableTouchTarget(this.node),this.onDisable(),this._unregister(),this._model.update=function(){},this._model.element.update=function(){},this._view=null,this._model=null,this._fixedIndex=-1,this._isLayout=!1,this._oldData=null,this.node.active=!1},i.internal_layout=function(){var e={x:this.model.size.x,y:this.model.size.y};this.adapter.layoutManager.isControlMainAxisSize&&(e[this.adapter.mainAxis]=this.model.layoutSize[this.adapter.mainAxis]),this.adapter.layoutManager.isControlCrossAxisSize&&(e[this.adapter.crossAxis]=this.model.layoutSize[this.adapter.crossAxis]),this._isLayout=!0,this.transform.setContentSize(e.x,e.y),this._isLayout=!1,this.node.setPosition(this.model.position.x,this.model.position.y)},i._register=function(){this.node.on(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.on(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.on(h.Event.ON_UPDATE,this._updateHandler,this)},i._unregister=function(){this.node.off(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.off(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.off(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.off(h.Event.ON_UPDATE,this._updateHandler,this)},i._onSizeChanged=function(){if(!this._isLayout){var e=a.approximately(this.model.size[this.adapter.mainAxis],this.transform.contentSize[this.adapter.mainAxis]),t=a.approximately(this.model.size[this.adapter.crossAxis],this.transform.contentSize[this.adapter.crossAxis]);this.model.size.x=this.transform.width,this.model.size.y=this.transform.height,e&&t||this.view.internal_holderChanged(e)}},i._onScaleChanged=function(e){if(e==n.TransformBit.SCALE&&(this.adapter.layoutManager.controlScaleWidth||this.adapter.layoutManager.controlScaleHeight)){var t=a.approximately(this.model.scale[this.adapter.mainAxis],this.node.scale[this.adapter.mainAxis]),i=a.approximately(this.model.scale[this.adapter.crossAxis],this.node.scale[this.adapter.crossAxis]);this.model.scale.x=this.node.scale.x,this.model.scale.y=this.node.scale.y,t&&i||this.view.internal_holderChanged(t)}},i._onAnchorPointChanged=function(){var e=a.approximately(this.model.anchorPoint[this.adapter.mainAxis],this.transform.anchorPoint[this.adapter.mainAxis]),t=a.approximately(this.model.anchorPoint[this.adapter.crossAxis],this.transform.anchorPoint[this.adapter.crossAxis]);this.model.anchorPoint.x=this.transform.anchorPoint.x,this.model.anchorPoint.y=this.transform.anchorPoint.y,e&&t||this.view.internal_holderChanged(e)},t(e,[{key:"node",get:function(){return this._node}},{key:"transform",get:function(){return this._transform}},{key:"code",get:function(){return this._code}},{key:"adapter",get:function(){return this._adapter}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}},{key:"data",get:function(){return this._model&&this._model.data}},{key:"fixedIndex",get:function(){return this._fixedIndex}},{key:"oldData",get:function(){return this._oldData}},{key:"element",get:function(){return this._model&&this._model.element}},{key:"index",get:function(){return this._model&&this._model.index}}]),e}())||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/HomeController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,n,r;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,r=o.Component}],execute:function(){var c;e._RF.push({},"7be4edEMP9G4o2PKnJZVUkm","HomeController",void 0);var u=n.ccclass;n.property,o("HomeController",u("HomeController")(c=function(o){function e(){return o.apply(this,arguments)||this}t(e,o);var n=e.prototype;return n.start=function(){console.log(window)},n.update=function(o){},n.onTouch_Test=function(){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/HotKey.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,s,a,y,c,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Enum,y=e.KeyCode,c=e.input,p=e.Input,u=e.Component}],execute:function(){var h,f,l,k,K;r._RF.push({},"e01eb+jQTRNdbPwrEVkkCRc","HotKey",void 0);var v=s.ccclass,d=s.property;e("Hotkey",(h=v("Hotkey"),f=d({type:[a(y)]}),h((K=t((k=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"keys",K,o(t)),t.keyMap=new Map,t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.keys.forEach((function(t){return e.keyMap.set(t,!1)}))},r.getKeyString=function(){try{var e=y[this.keys[0]];if(e.length<=2)return e;var t=e.split("_");return t[t.length-1]}catch(e){return""}},r.onEnable=function(){c.on(p.EventType.KEY_DOWN,this.onKeyDown,this),c.on(p.EventType.KEY_UP,this.onKeyUp,this)},r.onDisable=function(){c.off(p.EventType.KEY_DOWN,this.onKeyDown,this),c.off(p.EventType.KEY_UP,this.onKeyUp,this)},r.onKeyDown=function(e){this.keyMap.has(e.keyCode)&&(this.keyMap.set(e.keyCode,!0),this.isKeyCombinationPressed()&&this.trigger())},r.onKeyUp=function(e){this.keyMap.has(e.keyCode)&&this.keyMap.set(e.keyCode,!1)},r.isKeyCombinationPressed=function(){var e=!0;return this.keyMap.forEach((function(t,n){t||(e=!1)})),e},r.trigger=function(){},t}(u)).prototype,"keys",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=k))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/HUD_Options.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./Cannon.ts","./Cursor.ts"],(function(n){var e,t,o,i,r,a,c,l,s,g,u,d,h,p,f,E;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Node,l=n.ToggleContainer,s=n.EditBox,g=n.Toggle,u=n.sys,d=n.Vec3,h=n.Component},function(n){p=n.Bullet},function(n){f=n.Cannon},function(n){E=n.Cursor}],execute:function(){var y,T,b,x,C,v,B,A,m,w,D,_,V,S,I,N,k,z,L,M,F,H,O;r._RF.push({},"1b4097H5s5E1YZkd5DJRPR9","HUD_Options",void 0);var P=a.ccclass,j=a.property;n("HUD_Options",(y=P("HUD_Options"),T=j({type:c}),b=j({type:c}),x=j({type:l}),C=j({type:s}),v=j({type:s}),B=j({type:g}),A=j({type:g}),m=j({type:g}),w=j({type:f}),D=j({type:E}),y((S=e((V=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,o(e,"content",S,i(e)),o(e,"arrow",I,i(e)),o(e,"cannonModeToggleContainer",N,i(e)),o(e,"cannonAngleEditBox",k,i(e)),o(e,"cannonVelocityEditBox",z,i(e)),o(e,"cannonTrajectoryToggle",L,i(e)),o(e,"bulletExplodeToggle",M,i(e)),o(e,"cursorAdaptToggle",F,i(e)),o(e,"cannon",H,i(e)),o(e,"cursor",O,i(e)),e}t(e,n);var r=e.prototype;return r.onLoad=function(){this.init(),this.registerEvent()},r.onDestroy=function(){this.unregisterEvent()},r.registerEvent=function(){this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this)},r.unregisterEvent=function(){this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this)},r.onTouchEnd=function(n){this.changeState(!this.content.active)},r.init=function(){u.platform===u.Platform.MOBILE_BROWSER?this.node.setScale(new d(2,2,1)):this.node.setScale(new d(1,1,1)),this.changeState(!0);for(var n=f.Mode[this.cannon.mode],e=this.cannonModeToggleContainer.toggleItems,t=0;t<e.length;t++)e[t].node.name===n&&(e[t].isChecked=!0);this.cannonAngleEditBox.string=this.cannon.fixedPitchAngle.toString(),this.cannonAngleEditBox.placeholder=this.cannon.fixedPitchAngle.toString(),this.cannonVelocityEditBox.string=this.cannon.fixedVelocity.toString(),this.cannonVelocityEditBox.placeholder=this.cannon.fixedVelocity.toString(),this.cannonTrajectoryToggle.isChecked=this.cannon.showTrajectory,this.bulletExplodeToggle.isChecked=p.triggerExplode,this.cursorAdaptToggle.isChecked=this.cursor.adaptToSurface,this.changeState(!1)},r.changeState=function(n){this.content.active=n,this.arrow.angle=n?180:0},r.onCannonModeToggleChanged=function(n){switch(this.cannonModeToggleContainer.activeToggles()[0].node.name){case"FIXED_ALL":this.cannon.mode=f.Mode.FIXED_ALL,this.cannonAngleEditBox.node.parent.active=!0,this.cannonVelocityEditBox.node.parent.active=!0;break;case"FIXED_PITCH_ANGLE":this.cannon.mode=f.Mode.FIXED_PITCH_ANGLE,this.cannonAngleEditBox.node.parent.active=!0,this.cannonVelocityEditBox.node.parent.active=!1;break;case"FIXED_VELOCITY":this.cannon.mode=f.Mode.FIXED_VELOCITY,this.cannonAngleEditBox.node.parent.active=!1,this.cannonVelocityEditBox.node.parent.active=!0;break;case"UNFIXED":this.cannon.mode=f.Mode.UNFIXED,this.cannonAngleEditBox.node.parent.active=!1,this.cannonVelocityEditBox.node.parent.active=!1}},r.onCannonAngleEditBoxChanged=function(n){var e=Number(this.cannonAngleEditBox.string);isNaN(e)||e>0?this.cannonAngleEditBox.string=this.cannon.fixedPitchAngle.toString():this.cannon.fixedPitchAngle=e},r.onCannonVelocityEditBoxChanged=function(n){var e=Number(this.cannonVelocityEditBox.string);isNaN(e)||e<=0?this.cannonVelocityEditBox.string=this.cannon.fixedVelocity.toString():this.cannon.fixedVelocity=e},r.onCannonTrajectoryToggleChanged=function(n){var e=this.cannonTrajectoryToggle.isChecked;this.cannon.showTrajectory=e},r.onBulletExplodeToggleChanged=function(n){var e=this.bulletExplodeToggle.isChecked;p.triggerExplode=e},r.onCursorAdaptToggleChanged=function(n){var e=this.cursorAdaptToggle.isChecked;this.cursor.adaptToSurface=e},e}(h)).prototype,"content",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(V.prototype,"arrow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(V.prototype,"cannonModeToggleContainer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(V.prototype,"cannonAngleEditBox",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(V.prototype,"cannonVelocityEditBox",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(V.prototype,"cannonTrajectoryToggle",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(V.prototype,"bulletExplodeToggle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(V.prototype,"cursorAdaptToggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(V.prototype,"cannon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(V.prototype,"cursor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=V))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/HUD_Tips.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,l,a,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Label,s=e.sys,c=e.Vec3,p=e.Component}],execute:function(){var u,f,h,y,d;o._RF.push({},"8d90ax9dDlNL5GpGoJYpjmB","HUD_Tips",void 0);var b=l.ccclass,_=l.property;e("HUD_Tips",(u=b("HUD_Tips"),f=_({type:a}),u((d=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"label",d,r(t)),t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.init()},o.init=function(){s.platform===s.Platform.MOBILE_BROWSER?(this.node.setScale(new c(1.5,1.5,1)),this.label.string="双指滑动可以调整摄像机距离"):(this.node.setScale(new c(1,1,1)),this.label.string="鼠标滚轮可以调整摄像机距离")},t}(p)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/hyperbolic-cosine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,o,r,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.Vec4},function(e){r=e.register},function(e){c=e.ShaderNode},function(e){i=e.slot}],execute:function(){var s;n._RF.push({},"d1158zUxl5K7KSvlL2F7+wS","hyperbolic-cosine",void 0);e("default",r({menu:"Math/Trigonometry/HyperbolicCosine",title:"HyperbolicCosine"})(s=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this).data={inputs:[i("In",o.ZERO,"vec4","vector")],outputs:[i("Out",o.ZERO,"vec4","vector")]},t}t(n,e);var r=n.prototype;return r.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = cosh("+e+");\n        "},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/hyperbolic-sine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,r,i,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){i=e.register},function(e){o=e.ShaderNode},function(e){c=e.slot}],execute:function(){var u;n._RF.push({},"d0e30ycExdAl4oLI765JfTS","hyperbolic-sine",void 0);e("default",i({menu:"Math/Trigonometry/HyperbolicSine",title:"HyperbolicSine"})(u=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).data={inputs:[c("In",r.ZERO,"vec4","vector")],outputs:[c("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var i=n.prototype;return i.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = sinh("+e+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/hyperbolic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){o=t.register},function(t){c=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"b180bsrU6dCOKdx5slTh5p9","hyperbolic",void 0);t("default",o({menu:"Math/Trigonometry/Hyperbolic",title:"Hyperbolic"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = tanh("+t+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ImageLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,a,n,i,o,p,s,u,l;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,a=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){i=r.cclegacy,o=r._decorator,p=r.SpriteFrame,s=r.math,u=r.randomRangeInt,l=r.Component}],execute:function(){var c,f,m,h,g,v,d,y,S,b,F,I;i._RF.push({},"449f63urB5BrqfvzhGei/dM","ImageLoader",void 0);var w=o.ccclass,z=o.property;r("ImageLoader",(c=w("ImageLoader"),f=z([p]),m=z([p]),h=z(p),g=z(p),c(((I=function(r){function e(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=r.call.apply(r,[this].concat(i))||this,a(e,"preloadSpriteFrames",y,n(e)),a(e,"avatarSpriteframe",S,n(e)),a(e,"sfDiamonds",b,n(e)),a(e,"sfCoins",F,n(e)),e.spriteFrameMap=new Map,e}t(e,r);var i=e.prototype;return i.onLoad=function(){e.instance=this,this.initSpriteFrames()},i.initSpriteFrames=function(){var r=this;this.preloadSpriteFrames.forEach((function(e){r.spriteFrameMap.set(e.name,e)}))},i.getSpriteFrame=function(r){return this.spriteFrameMap.has(r)?this.spriteFrameMap.get(r):(console.error("Unknown sprite"+r),null)},i.getAvatar=function(r){var e=(Number(r)%1e3).toString(),t=function(r){try{var t;return parseInt(null!=(t=e[e.length-r])?t:"0")}catch(r){return 0}};try{var a=t(1),n=t(2),i=s.clamp(a+n,0,this.avatarSpriteframe.length-1);return this.avatarSpriteframe[i]}catch(r){return null}},i.getRandomCapyImage=function(){return this.avatarSpriteframe[u(0,this.avatarSpriteframe.length)]},e}(l)).instance=null,y=e((d=I).prototype,"preloadSpriteFrames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=e(d.prototype,"avatarSpriteframe",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=e(d.prototype,"sfDiamonds",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(d.prototype,"sfCoins",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./polar-coordinates.ts","./rotate-coordinates.ts","./tilling-and-offset.ts","./boolean.ts","./float.ts","./slider.ts","./vector2.ts","./vector3.ts","./vector4.ts","./absolute.ts","./exponential.ts","./length.ts","./log.ts","./modulo.ts","./negate.ts","./normalize.ts","./posterize.ts","./reciprocal-square.ts","./reciprocal.ts","./add.ts","./divide.ts","./multiply.ts","./power.ts","./square.ts","./substract.ts","./ddx.ts","./ddxy.ts","./ddy.ts","./inverse-lerp.ts","./lerp.ts","./smoothstep.ts","./clamp.ts","./fraction.ts","./max.ts","./min.ts","./one-minus.ts","./random-range.ts","./remap.ts","./saturate.ts","./ceil.ts","./floor.ts","./round.ts","./sign.ts","./step.ts","./truncate.ts","./arccosine.ts","./arcsine.ts","./arctangent.ts","./arctangent2.ts","./cosine.ts","./degrees-to-radians.ts","./hyperbolic-cosine.ts","./hyperbolic-sine.ts","./hyperbolic.ts","./radians-to-degrees.ts","./sine.ts","./tangent.ts","./cross-product.ts","./distance.ts","./dot-product.ts","./fresnel.ts","./projection.ts","./reflection.ts","./rejection.ts","./sphere-mask.ts","./noise-sine-wave.ts","./sawtooth-wave.ts","./square-wave.ts","./triangle-wave.ts","./gradient-noise.ts","./simple-noise.ts","./ellipse.ts","./rectangle.ts","./round-rectangle.ts","./index4.ts","./combine.ts","./split.ts","./input-node.ts","./property-node.ts","./all.ts","./and.ts","./any.ts","./branch.ts","./comparison.ts","./is-nan.ts","./not.ts","./or.ts","./MasterNode.ts","./SurfaceMasterNode.ts","./UnlitMasterNode.ts","./SubGraphNode.ts","./SubGraphOutputNode.ts","./PreviewNode.ts","./color.ts","./time.ts","./normal-vector.ts","./position.ts","./uv.ts","./vertex-color.ts","./view-direction.ts","./cubemap-asset.ts","./sample-cubemap.ts","./sample-texture2d.ts","./texture-asset.ts","./texture2d-asset.ts","./get-local-var.ts","./register-local-var.ts"],(function(){var l;return{setters:[function(t){l=t.cclegacy},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){l._RF.push({},"00450ydLIRBS6bzTCNNRjmm","index",void 0),l._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){e("CenterManager",n.CenterManager)},function(n){e("LayoutManager",n.LayoutManager)},function(n){e("ModelManager",n.ModelManager)},function(n){e("PageViewManager",n.PageViewManager)},function(n){var r={};r.ReleaseEvent=n.ReleaseEvent,r.ReleaseManager=n.ReleaseManager,e(r)},function(n){var r={};r.ADAPTER=n.ADAPTER,r.ScrollManager=n.ScrollManager,e(r)},function(n){e("ViewManager",n.ViewManager)},function(n){e("Group",n.Group)},function(n){e("Holder",n.Holder)},function(n){e("Manager",n.Manager)},function(n){e("ScrollAdapter",n.ScrollAdapter)},function(n){e("View",n.View)},function(n){e("Indicator",n.Indicator)},function(n){e("Scrollbar",n.Scrollbar)},function(n){var r={};r.ADAPTER_DEBUG_CONTENT=n.ADAPTER_DEBUG_CONTENT,r.ADAPTER_DEBUG_VIEW=n.ADAPTER_DEBUG_VIEW,r.DEBUG_DRAW_BORDER_COLOR=n.DEBUG_DRAW_BORDER_COLOR,r.DEBUG_DRAW_FILL_COLOR=n.DEBUG_DRAW_FILL_COLOR,r.DEBUG_DRAW_LIND_WIDTH=n.DEBUG_DRAW_LIND_WIDTH,r.DEBUG_DRAW_LINE_COLOR=n.DEBUG_DRAW_LINE_COLOR,e(r)},function(n){var r={};r.AlwaysScroll=n.AlwaysScroll,r.ArrangeAxis=n.ArrangeAxis,r.ChildAlignment=n.ChildAlignment,r.HolderEvent=n.HolderEvent,r.IndicatorMode=n.IndicatorMode,r.Layer=n.Layer,r.MagneticDirection=n.MagneticDirection,r.MovementType=n.MovementType,r.NestedDirection=n.NestedDirection,r.Orientation=n.Orientation,r.ReleaseState=n.ReleaseState,r.ScrollDirection=n.ScrollDirection,r.ScrollbarDirection=n.ScrollbarDirection,r.StretchDirection=n.StretchDirection,r.TouchMode=n.TouchMode,r.Transition=n.Transition,r.ViewEvent=n.ViewEvent,r.WrapMode=n.WrapMode,e(r)},null,function(n){e("Helper",n.Helper)}],execute:function(){n._RF.push({},"0a2997sehVGrL8shCrZiUoV","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./register.ts"],(function(e){var r;return{setters:[function(e){r=e.cclegacy},function(r){var s={};s.register=r.register,s.shaderNodeClassMap=r.shaderNodeClassMap,s.shaderNodeMap=r.shaderNodeMap,s.shaderPropertyMap=r.shaderPropertyMap,e(s)}],execute:function(){r._RF.push({},"ca808INO7FLGrJCNKRU+Sjn","index",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/index4.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"ce045mF1/xFUKqKc7YUTgo5","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Indicator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./PageViewManager.ts"],(function(e){var t,i,n,a,r,o,l,c,s,p,u,h,d,g,f,_,y,m,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.SpriteFrame,s=e.Color,p=e.Node,u=e.Sprite,h=e.UITransform,d=e.Button,g=e.EventHandler,f=e.Layout,_=e.Component,y=e.Size},function(e){m=e.ScrollAdapter},function(e){v=e.IndicatorMode},function(e){C=e.PageViewManager}],execute:function(){var S,b,w,M,z,E,I,L,P,T,N;o._RF.push({},"518d6bEinVOEZVOae09QC8Z","Indicator",void 0);var V=l.ccclass,A=l.property;e("Indicator",(S=V("Indicator"),b=A(m),w=A({type:c}),M=A({type:v}),S((I=t((E=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"adapter",I,a(t)),n(t,"spriteFrame",L,a(t)),n(t,"indicatorMode",P,a(t)),n(t,"cellSize",T,a(t)),n(t,"spacing",N,a(t)),t._indicators=[],t._layout=null,t._color=new s,t}i(t,e);var o=t.prototype;return o.__preload=function(){this.adapter&&(this.adapter.pageViewManager.on(C.Event.ON_PAGE_LENGTH_CHANGED,this._onPageLengthChanged,this),this.adapter.pageViewManager.on(C.Event.ON_SCROLL_PAGE_END,this._onScrollPageEnd,this))},o._onScrollPageEnd=function(){this.changedState()},o._onPageLengthChanged=function(){if(this.adapter){var e=this._indicators,t=this.adapter.viewManager.groupLength;if(t!==e.length){var i=0;if(t>e.length)for(i=0;i<t;++i)e[i]||(e[i]=this._createIndicator(i));else for(i=e.length-t;i>0;--i){var n=e[i-1];this.node.removeChild(n.node),e.splice(i-1,1)}this.layout&&this.layout.enabledInHierarchy&&this.layout.updateLayout(),this.changedState()}}},o._createIndicator=function(e){var t=new p;t.layer=this.node.layer;var i=t.addComponent(u);i.spriteFrame=this.spriteFrame,i.sizeMode=u.SizeMode.CUSTOM,t.parent=this.node;var n=t.getComponent(h);if(n.setContentSize(this.cellSize),this.indicatorMode==v.Button){var a=t.getComponent(d)||t.addComponent(d),r=new g;r.component="Indicator",r.handler="_click",r.target=this.node,r.customEventData=e,a.clickEvents.push(r)}return n},o._click=function(e,t){this.adapter.pageViewManager.scrollToPage(this.adapter.pageViewManager.pageTurningSpeed,t)},o.changedState=function(){var e=this._indicators;if(0!==e.length&&this.adapter){var t=this.adapter.pageViewManager.currentIndex;if(!(t>=e.length)){for(var i=0;i<e.length;++i){var n=e[i].getComponent(u);this._color.set(n.color),this._color.a=127.5,n.color=this._color}if(e[t]){var a=e[t].getComponent(u);this._color.set(a.color),this._color.a=255,a.color=this._color}}}},r(t,[{key:"layout",get:function(){return null==this._layout&&(this._layout=this.getComponent(f)||this.addComponent(f),this.adapter.isHorizontal?(this._layout.type=f.Type.HORIZONTAL,this._layout.spacingX=this.spacing):(this._layout.type=f.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=f.ResizeMode.CONTAINER),this._layout}}]),t}(_)).prototype,"adapter",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"spriteFrame",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"indicatorMode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Normal}}),T=t(E.prototype,"cellSize",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(10,10)}}),N=t(E.prototype,"spacing",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=E))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/input-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts"],(function(e){var n,t,c,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){c=e.ShaderNode},function(e){o=e.ConcretePrecisionType}],execute:function(){t._RF.push({},"fcee9eMBvJBt5SDLbWEpbbO","input-node",void 0);e("default",function(e){function t(){for(var n,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return(n=e.call.apply(e,[this].concat(c))||this).concretePrecisionType=o.Fixed,n}return n(t,e),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/InputManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileManager.ts","./TapValidator.ts"],(function(e){var t,a,n,i,o,s,h,r,c,l,d,u,p,T,v,f,g,b,y,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,h=e._decorator,r=e.Node,c=e.Camera,l=e.UITransform,d=e.Sprite,u=e.Color,p=e.UIOpacity,T=e.Vec3,v=e.input,f=e.Input,g=e.KeyCode,b=e.Component},function(e){y=e.TileManager},function(e){k=e.TapValidator}],execute:function(){var C,m,E,F,L,M,w,N,_,D,K,I,S,U,O,W;s._RF.push({},"19aa5JfAPNMBLEL5AtzqFm7","InputManager",void 0);var V=h.ccclass,z=h.property;e("InputManager",(C=V("InputManager"),m=z([r]),E=z(r),F=z(r),L=z(y),M=z(k),w=z(c),C((D=t((_=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"tapFeedbackNodes",D,i(t)),n(t,"hitLineNode",K,i(t)),n(t,"laneContainer",I,i(t)),n(t,"tileManager",S,i(t)),n(t,"tapValidator",U,i(t)),n(t,"camera",O,i(t)),n(t,"tapFeedbackDuration",W,i(t)),t.isEnabled=!0,t.laneWidth=0,t.laneCount=4,t.laneStartX=0,t.activeTouches=new Map,t._laneTapCallback=null,t.activeKeyLanes=new Map,t}a(t,e);var s=t.prototype;return s.onLoad=function(){this.initTapFeedback(),this.registerEvents()},s.start=function(){this.initLaneInfo()},s.initLaneInfo=function(){if(this.laneContainer){var e=this.laneContainer.getComponent(l);e?(this.laneCount=4,this.laneWidth=e.width/this.laneCount,this.laneStartX=0):console.error("Lane container doesn't have a UITransform component")}else console.error("Lane container is not assigned to InputManager")},s.initTapFeedback=function(){if(this.tapFeedbackNodes.length<this.laneCount){console.warn("Need "+this.laneCount+" tap feedback nodes, but only "+this.tapFeedbackNodes.length+" were provided.");for(var e=this.tapFeedbackNodes.length;e<this.laneCount;e++){var t=new r("TapFeedback_"+e);t.parent=this.node,t.addComponent(d).color=new u(255,255,255,120),t.addComponent(p).opacity=0,this.tapFeedbackNodes.push(t)}}for(var a=0;a<this.laneCount;a++){var n=this.tapFeedbackNodes[a],i=n.getComponent(l)||n.addComponent(l);i.width=.9*this.laneWidth,i.height=100;var o=this.laneStartX+(a+.5)*this.laneWidth,s=this.hitLineNode?this.hitLineNode.position.y:0;n.position=new T(o,s,0)}},s.registerEvents=function(){v.on(f.EventType.TOUCH_START,this.onTouchStart,this),v.on(f.EventType.TOUCH_MOVE,this.onTouchMove,this),v.on(f.EventType.TOUCH_END,this.onTouchEnd,this),v.on(f.EventType.TOUCH_CANCEL,this.onTouchCancel,this),v.on(f.EventType.KEY_DOWN,this.onKeyDown,this),v.on(f.EventType.KEY_UP,this.onKeyUp,this)},s.onDestroy=function(){v.off(f.EventType.TOUCH_START,this.onTouchStart,this),v.off(f.EventType.TOUCH_MOVE,this.onTouchMove,this),v.off(f.EventType.TOUCH_END,this.onTouchEnd,this),v.off(f.EventType.TOUCH_CANCEL,this.onTouchCancel,this),v.off(f.EventType.KEY_DOWN,this.onKeyDown,this),v.off(f.EventType.KEY_UP,this.onKeyUp,this)},s.onTouchStart=function(e){if(this.isEnabled)for(var t,a=e.getTouches(),n=o(a);!(t=n()).done;){var i=t.value,s=i.getLocation(),h=this.convertToWorldSpace(s.x,s.y),r=this.getLaneFromPosition(h.x);if(r>=0){var c={id:i.getID(),lane:r,startTime:Date.now()/1e3,position:h,active:!0,node:this.tapFeedbackNodes[r]};this.activeTouches.set(i.getID(),c),this.showTapFeedback(r),this._laneTapCallback&&this._laneTapCallback(r);var l=this.tileManager.getGameTime(),d=this.tileManager.handleLaneTouch(r,!0);this.tapValidator.validateTap(r,l,d)}}},s.onTouchMove=function(e){if(this.isEnabled)for(var t,a=e.getTouches(),n=o(a);!(t=n()).done;){var i=t.value,s=i.getID();if(this.activeTouches.has(s)){var h=this.activeTouches.get(s),r=i.getLocation(),c=this.convertToWorldSpace(r.x,r.y);h.position=c;var l=this.getLaneFromPosition(c.x);if(l>=0&&l!==h.lane){this.tileManager.handleLaneTouch(h.lane,!1),this.hideTapFeedback(h.lane),h.lane=l,h.node=this.tapFeedbackNodes[l],this.showTapFeedback(l);var d=this.tileManager.getGameTime(),u=this.tileManager.handleLaneTouch(l,!0);this.tapValidator.validateTap(l,d,u)}}}},s.onTouchEnd=function(e){if(this.isEnabled)for(var t,a=e.getTouches(),n=o(a);!(t=n()).done;){var i=t.value.getID();if(this.activeTouches.has(i)){var s=this.activeTouches.get(i);this.tileManager.getGameTime(),this.tileManager.handleLaneTouch(s.lane,!1);this.hideTapFeedback(s.lane),this.activeTouches.delete(i)}}},s.onTouchCancel=function(e){this.onTouchEnd(e)},s.onMouseDown=function(e){if(this.isEnabled){var t=e.getLocation(),a=this.convertToWorldSpace(t.x,t.y),n=this.getLaneFromPosition(a.x);if(n>=0){var i={id:0,lane:n,startTime:Date.now()/1e3,position:a,active:!0,node:this.tapFeedbackNodes[n]};this.activeTouches.set(0,i),this.showTapFeedback(n);var o=this.tileManager.getGameTime(),s=this.tileManager.handleLaneTouch(n,!0);this.tapValidator.validateTap(n,o,s)}}},s.onMouseMove=function(e){if(this.isEnabled&&this.activeTouches.has(0)){var t=this.activeTouches.get(0),a=e.getLocation(),n=this.convertToWorldSpace(a.x,a.y);t.position=n;var i=this.getLaneFromPosition(n.x);if(i>=0&&i!==t.lane){this.tileManager.handleLaneTouch(t.lane,!1),this.hideTapFeedback(t.lane),t.lane=i,t.node=this.tapFeedbackNodes[i],this.showTapFeedback(i);var o=this.tileManager.getGameTime(),s=this.tileManager.handleLaneTouch(i,!0);this.tapValidator.validateTap(i,o,s)}}},s.onMouseUp=function(e){if(this.isEnabled&&this.activeTouches.has(0)){var t=this.activeTouches.get(0);this.tileManager.getGameTime(),this.tileManager.handleLaneTouch(t.lane,!1);this.hideTapFeedback(t.lane),this.activeTouches.delete(0)}},s.showTapFeedback=function(e){var t=this;if(!(e<0||e>=this.tapFeedbackNodes.length)){var a=this.tapFeedbackNodes[e].getComponent(p);a&&(a.opacity=255,this.scheduleOnce((function(){t.hideTapFeedback(e)}),this.tapFeedbackDuration))}},s.hideTapFeedback=function(e){if(!(e<0||e>=this.tapFeedbackNodes.length)){var t=this.tapFeedbackNodes[e].getComponent(p);t&&(t.opacity=0)}},s.convertToWorldSpace=function(e,t){var a=this.camera;if(!a){var n=this.node.getComponent(l);if(!n)return new T(e,t,0);var i=n.width,o=n.height;return new T(e-i/2,t-o/2,0)}var s=new T(e,t,0);return a.screenToWorld(s)},s.getLaneFromPosition=function(e){var t=e-this.laneStartX;return t<0||t>=this.laneWidth*this.laneCount?-1:Math.floor(t/this.laneWidth)},s.setEnabled=function(e){if(this.isEnabled=e,!e){this.activeTouches.clear();for(var t=0;t<this.tapFeedbackNodes.length;t++)this.hideTapFeedback(t)}},s.isInputEnabled=function(){return this.isEnabled},s.getActiveTouchInLane=function(e){for(var t,a=o(this.activeTouches);!(t=a()).done;){var n=t.value,i=(n[0],n[1]);if(i.lane===e)return i}return null},s.getActiveTouchCount=function(){return this.activeTouches.size},s.onLaneTap=function(e){this._laneTapCallback=e},s.removeOnLaneTap=function(e){this._laneTapCallback===e&&(this._laneTapCallback=null)},s.onKeyDown=function(e){if(this.isEnabled){var t=-1;switch(e.keyCode){case g.KEY_A:t=0;break;case g.KEY_S:t=1;break;case g.KEY_D:t=2;break;case g.KEY_F:t=3}if(t>=0&&t<this.laneCount){this.activeKeyLanes.set(e.keyCode,t),this.showTapFeedback(t),this._laneTapCallback&&this._laneTapCallback(t);var a=this.tileManager.getGameTime(),n=this.tileManager.handleLaneTouch(t,!0);this.tapValidator.validateTap(t,a,n)}}},s.onKeyUp=function(e){if(this.isEnabled&&this.activeKeyLanes.has(e.keyCode)){var t=this.activeKeyLanes.get(e.keyCode);this.tileManager.getGameTime(),this.tileManager.handleLaneTouch(t,!1);this.hideTapFeedback(t),this.activeKeyLanes.delete(e.keyCode)}},t}(b)).prototype,"tapFeedbackNodes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(_.prototype,"hitLineNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(_.prototype,"laneContainer",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(_.prototype,"tileManager",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(_.prototype,"tapValidator",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(_.prototype,"camera",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(_.prototype,"tapFeedbackDuration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),N=_))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/InteractableItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,e,i,s,h,r,a,c,u,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,h=t._decorator,r=t.Node,a=t.NodeEventType,c=t.UITransform,u=t.rect,l=t.Component}],execute:function(){var d,T,f,g,E;s._RF.push({},"05db20FCuhNgIZ/Of1+Usnv","InteractableItem",void 0);var v=h.ccclass,p=h.property;t("InteractableItem",(d=v("InteractableItem"),T=p(r),d((E=n((g=function(t){function n(){for(var n,o=arguments.length,s=new Array(o),h=0;h<o;h++)s[h]=arguments[h];return n=t.call.apply(t,[this].concat(s))||this,e(n,"nodeTouch",E,i(n)),n.onSelected=null,n.onStart=null,n.onDrag=null,n.onHover=null,n.onEndInteracted=null,n.isInteracting=!1,n.passThroughNode=null,n.dragCount=0,n.interactNode=null,n.transform=null,n}o(n,t);var s=n.prototype;return s.setInteractable=function(t,n){var o;void 0===n&&(n=null),this.passThroughNode=n;var e=null!=(o=this.nodeTouch)?o:this.node;t?(e.on(a.TOUCH_END,this.onTouchEnd,this),e.on(a.TOUCH_START,this.onTouchStart,this),e.on(a.TOUCH_MOVE,this.onTouchMove,this),e.on(a.MOUSE_ENTER,this.onMouseHover,this),e.on(a.MOUSE_LEAVE,this.onMouseLeave,this)):(e.off(a.TOUCH_END,this.onTouchEnd,this),e.off(a.TOUCH_START,this.onTouchStart,this),e.off(a.TOUCH_MOVE,this.onTouchMove,this),e.off(a.MOUSE_ENTER,this.onMouseHover,this),e.off(a.MOUSE_LEAVE,this.onMouseLeave,this))},s.getTransform=function(){var t;null==this.transform&&(this.interactNode=null!=(t=this.nodeTouch)?t:this.node,this.transform=this.interactNode.getComponent(c));return this.transform},s.isContainsPosition=function(t){var n=this.getTransform().contentSize;return u(this.interactNode.position.x-n.width/2,this.interactNode.position.y-n.height/2,n.width,n.height).contains(t)},s.onTouchEnd=function(t){var n,o;this.dragCount<=4&&(null==(o=this.onSelected)||o.call(this,this));this.dragCount=0,this.isInteracting=!1,this.checkPassThroughNode(a.TOUCH_END,t),null==(n=this.onEndInteracted)||n.call(this,this)},s.onTouchStart=function(t){var n;this.dragCount=0,this.isInteracting=!0,this.checkPassThroughNode(a.TOUCH_START,t),null==(n=this.onStart)||n.call(this,this)},s.onTouchMove=function(t){var n;(this.dragCount++,this.checkPassThroughNode(a.TOUCH_MOVE,t),this.dragCount>=4)&&(null==(n=this.onDrag)||n.call(this,this))},s.onMouseHover=function(t){var n;this.checkPassThroughNode(a.MOUSE_ENTER,t),null==(n=this.onHover)||n.call(this,this)},s.onMouseLeave=function(t){var n;this.checkPassThroughNode(a.MOUSE_ENTER,t),this.isInteracting=!1,null==(n=this.onEndInteracted)||n.call(this,this)},s.checkPassThroughNode=function(t,n){this.passThroughNode&&this.passThroughNode.emit(t,n)},n}(l)).prototype,"nodeTouch",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/interface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"40680UcTm9G/ZhjtPkyAjKr","interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/inverse-lerp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,r,c,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){c=e.register},function(e){o=e.ShaderNode},function(e){i=e.slot}],execute:function(){var u;n._RF.push({},"c589fRsjwlOb5Fzx0G64yl/","inverse-lerp",void 0);e("default",c({menu:"Math/Interpolation/InverseLerp",title:"InverseLerp"})(u=function(e){function n(){for(var t,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))||this).data={inputs:[i("A",r.ZERO,"vec4","vector"),i("B",r.ZERO,"vec4","vector"),i("T",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var c=n.prototype;return c.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = ("+n+" - "+e+") / ("+t+" - "+e+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/is-nan.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,o,i,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.register},function(e){i=e.ShaderNode},function(e){r=e.ConcretePrecisionType},function(e){c=e.slot}],execute:function(){var s;n._RF.push({},"c8ed6hsGT1HOKJ9Qr9y8+aM","is-nan",void 0);e("default",o({menu:"Logic/IsNan",title:"IsNan"})(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=r.Fixed,t.fixedConcretePrecision=1,t.data={inputs:[c("In",0,"float","vector")],outputs:[c("Out",!1,"boolean","boolean")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = isnan("+e+");\n        "},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper.ts"],(function(t){var e,i,r,n,o,l,a,s,h,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,a=t._decorator},function(t){s=t.Manager},function(t){h=t.ChildAlignment,c=t.Orientation},function(t){p=t.Helper}],execute:function(){var g,u,_,f,d,z,S,A,y,m,x,H,E,b,O,T,v,L,C,W,M,D,N,P,w;l._RF.push({},"9a8caWSYQZLqr6N7OEAXSa7","LayoutManager",void 0);var k=a.ccclass,I=a.property,U=function(t){return t[t.ON_LAYOUT_COMPLATED=0]="ON_LAYOUT_COMPLATED",t[t.ON_CHANGED_LAYOUT_STATE=1]="ON_CHANGED_LAYOUT_STATE",t}(U||{});t("LayoutManager",(g=k("LayoutManager"),u=I({type:h}),_=I({type:h,tooltip:"布局元素的对齐方式"}),f=I({tooltip:"元素交叉轴布局的间距"}),d=I({tooltip:"反转布局"}),z=I({tooltip:"延迟布局，开启后会统一在下一帧布局，建议开启"}),S=I({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素宽度扩展以填充额外的可用空间"}),A=I({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素高度扩展以填充额外的可用空间"}),y=I({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响宽度，在这种情况下你可以设置元素的宽度\n如果设置为 true，元素的宽度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的宽度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的宽度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),m=I({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响高度，在这种情况下你可以设置元素的高度\n如果设置为 true，元素的高度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的高度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的高度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),x=I({group:{id:"0",name:"controlScale"},tooltip:"是否使用 x 缩放计算宽度"}),H=I({group:{id:"0",name:"controlScale"},tooltip:"是否使用 y 缩放计算高度"}),g(((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_childAlignment",O,n(e)),r(e,"_spacing",T,n(e)),r(e,"_reverseArrangement",v,n(e)),r(e,"delayLayout",L,n(e)),r(e,"_forceExpandWidth",C,n(e)),r(e,"_forceExpandHeight",W,n(e)),r(e,"_controlSizeWidth",M,n(e)),r(e,"_controlSizeHeight",D,n(e)),r(e,"_controlScaleWidth",N,n(e)),r(e,"_controlScaleHeight",P,n(e)),e._isDirty=!1,e._layoutQueue=[],e}i(e,t);var l=e.prototype;return l.onInit=function(){},l.layout=function(t){t&&(this.delayLayout?(this.unLayout(t.index),this._layoutQueue.push(t),this._isDirty=!0):(this._layoutHandler(t),this.emit(U.ON_LAYOUT_COMPLATED,[t.index])))},l.unLayout=function(t){-1!=(t=this._layoutQueue.findIndex((function(e){return e.index==t})))&&this._layoutQueue.splice(t,1)},l._layoutHandler=function(t){this._calcAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._calcAlongAxis(t,c.Vertical,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Vertical,this.adapter.isHorizontal)},l._calcAlongAxis=function(t,e,i){for(var r=e==c.Horizontal?this.horizontal:this.vertical,n=this._getControlSize(e),o=this._getControlScale(e),l=this._getForceExpandSize(e),a=r,s=r,h=0,p=i!=(e==c.Vertical),g=this._getLayoutList(t.models),u=0;u<g.length;u++){var _=g[u],f=this._getChildSizes(_,e,n,l),d=f.min,z=f.preferred,S=f.flexible;if(o){var A=_.scale[this._getAxis(e)];d*=A,z*=A,S*=A}p?(a=Math.max(d+r,a),s=Math.max(z+r,s),h=Math.max(S,h)):(a+=d+this.spacing,s+=z+this.spacing,h+=S)}!p&&g.length>0&&(a-=this.spacing,s-=this.spacing),s=Math.max(a,s),this._setLayoutInputForAxis(t,a,s,h,e)},l._getControlSize=function(t){return t==c.Horizontal?this.controlSizeWidth:this.controlSizeHeight},l._getControlScale=function(t){return t==c.Horizontal?this.controlScaleWidth:this.controlScaleHeight},l._getForceExpandSize=function(t){return t==c.Horizontal?this.forceExpandWidth:this.forceExpandHeight},l._setChildrenAlongAxis=function(t,e,i){var r=t.size[this._getAxis(e)],n=this._getControlSize(e),o=this._getControlScale(e),l=this._getForceExpandSize(e),a=this._getAlignmentOnAxis(e),s=this._getLayoutList(t.models),h=i!=(e==c.Vertical),g=this.reverseArrangement?s.length-1:0,u=this.reverseArrangement?0:s.length,_=this.reverseArrangement?-1:1,f=this._getAxis(e);if(h)for(var d=r-(e==c.Horizontal?this.horizontal:this.vertical),z=g;this.reverseArrangement?z>=u:z<u;z+=_){var S=s[z],A=this._getChildSizes(S,e,n,l),y=A.min,m=A.preferred,x=A.flexible,H=o?S.scale[f]:1,E=p.clamp(d,y,x>0?r:m),b=this._getStartOffset(t,e,E*H);if(n)this._setChildAlongAxisWithScale(t,S,e,b,H,E);else{var O=(E-S.size[f])*a;O*=H,this._setChildAlongAxisWithScale(t,S,e,b+O,H)}}else{var T=e==c.Horizontal?this.left:this.top,v=0,L=r-this._getTotalPreferredSize(t,e);L>0&&(0==this._getTotalFlexibleSize(t,e)?T=this._getStartOffset(t,e,this._getTotalPreferredSize(t,e)-(e==c.Horizontal?this.horizontal:this.vertical)):this._getTotalFlexibleSize(t,e)>0&&(v=L/this._getTotalFlexibleSize(t,e)));var C=0;this._getTotalMinSize(t,e)!=this._getTotalPreferredSize(t,e)&&(C=p.clamp01((r-this._getTotalMinSize(t,e))/(this._getTotalPreferredSize(t,e)-this._getTotalMinSize(t,e))));for(z=g;this.reverseArrangement?z>=u:z<u;z+=_){var W=s[z],M=this._getChildSizes(W,e,n,l),D=(y=M.min,m=M.preferred,x=M.flexible,o?W.scale[f]:1),N=p.lerp(y,m,C);if(N+=x*v,n)this._setChildAlongAxisWithScale(t,W,e,T,D,N);else{O=(N-W.size[f])*a;this._setChildAlongAxisWithScale(t,W,e,T+O,D)}T+=N*D+this.spacing}}},l._setChildAlongAxisWithScale=function(t,e,i,r,n,o){if(null!=e){var l=this._getAxis(i),a=0;isNaN(o)?a=e.size[l]:(e.layoutSize[l]=o,a=o);var s={x:e.position.x,y:e.position.y},h=0;i==c.Horizontal?(h=r+a*e.anchorPoint[l]*n,h-=t.size[l]*t.anchorPoint[l],h+=t.position[l]):(h=-r-a*(1-e.anchorPoint[l])*n,h+=t.size[l]*(1-t.anchorPoint[l]),h+=t.position[l]),s[l]=h,e.position=s}},l._getStartOffset=function(t,e,i){var r=i+(e==c.Horizontal?this.horizontal:this.vertical),n=t.size[this._getAxis(e)]-r,o=this._getAlignmentOnAxis(e);return(e==c.Horizontal?this.left:this.top)+n*o},l._setLayoutInputForAxis=function(t,e,i,r,n){var o=this._getAxis(n);t.totalMinSize[o]=e,t.totalPreferredSize[o]=i,t.totalFlexibleSize[o]=r},l._getAxis=function(t){return t==c.Horizontal?"x":"y"},l._getMinSize=function(t,e){return t.minSize[this._getAxis(e)]},l._getPreferredSize=function(t,e){var i=this._getAxis(e);return Math.max(t.minSize[i],t.preferredSize[i])},l._getFlexibleSize=function(t,e){return t.flexibleSize[this._getAxis(e)]},l._getTotalMinSize=function(t,e){return t.totalMinSize[this._getAxis(e)]},l._getTotalPreferredSize=function(t,e){return t.totalPreferredSize[this._getAxis(e)]},l._getTotalFlexibleSize=function(t,e){return t.totalFlexibleSize[this._getAxis(e)]},l._getChildSizes=function(t,e,i,r){var n,o,l;return i?(n=this._getMinSize(t.element,e),o=this._getPreferredSize(t.element,e),l=this._getFlexibleSize(t.element,e)):(o=n=t.size[this._getAxis(e)],l=0),r&&(l=Math.max(l,1)),{min:n,preferred:o,flexible:l}},l._getAlignmentOnAxis=function(t){return t==c.Horizontal?this.adapter.layoutManager.childAlignment%3*.5:.5*Math.floor(this.adapter.layoutManager.childAlignment/3)},l._getLayoutList=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];r.element.ignoreLayout||e.push(r)}return e},l.internal_lateUpdate=function(t){if(this._isDirty){this._isDirty=!1;for(var e=[];this._layoutQueue.length>0;){var i=this._layoutQueue.shift();this._layoutHandler(i),e.push(i.index)}e.length>0&&this.emit(U.ON_LAYOUT_COMPLATED,e)}},o(e,[{key:"childAlignment",get:function(){return this._childAlignment},set:function(t){t!=this._childAlignment&&(this._childAlignment=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"spacing",get:function(){return this._spacing},set:function(t){t!=this._spacing&&(this._spacing=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"reverseArrangement",get:function(){return this._reverseArrangement},set:function(t){t!=this._reverseArrangement&&(this._reverseArrangement=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandWidth",get:function(){return this._forceExpandWidth},set:function(t){t!=this._forceExpandWidth&&(this._forceExpandWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandHeight",get:function(){return this._forceExpandHeight},set:function(t){t!=this._forceExpandHeight&&(this._forceExpandHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeWidth",get:function(){return this._controlSizeWidth},set:function(t){t!=this._controlSizeWidth&&(this._controlSizeWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeHeight",get:function(){return this._controlSizeHeight},set:function(t){t!=this._controlSizeHeight&&(this._controlSizeHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleWidth",get:function(){return this._controlScaleWidth},set:function(t){t!=this._controlScaleWidth&&(this._controlScaleWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleHeight",get:function(){return this._controlScaleHeight},set:function(t){t!=this._controlScaleHeight&&(this._controlScaleHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"top",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.top}},{key:"bottom",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.bottom}},{key:"left",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.left}},{key:"right",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.right}},{key:"horizontal",get:function(){return this.left+this.right}},{key:"vertical",get:function(){return this.top+this.bottom}},{key:"isControlMainAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeWidth||this.adapter.isVertical&&this.controlSizeHeight}},{key:"isControlCrossAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeHeight||this.adapter.isVertical&&this.controlSizeWidth}},{key:"isControlCrossAxisScale",get:function(){return this.adapter.isHorizontal&&this.controlScaleHeight||this.adapter.isVertical&&this.controlScaleWidth}}]),e}(s)).Event=U,O=e((b=w).prototype,"_childAlignment",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.UpperLeft}}),e(b.prototype,"childAlignment",[_],Object.getOwnPropertyDescriptor(b.prototype,"childAlignment"),b.prototype),T=e(b.prototype,"_spacing",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(b.prototype,"spacing",[f],Object.getOwnPropertyDescriptor(b.prototype,"spacing"),b.prototype),v=e(b.prototype,"_reverseArrangement",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"reverseArrangement",[d],Object.getOwnPropertyDescriptor(b.prototype,"reverseArrangement"),b.prototype),L=e(b.prototype,"delayLayout",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=e(b.prototype,"_forceExpandWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"forceExpandWidth",[S],Object.getOwnPropertyDescriptor(b.prototype,"forceExpandWidth"),b.prototype),W=e(b.prototype,"_forceExpandHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(b.prototype,"forceExpandHeight",[A],Object.getOwnPropertyDescriptor(b.prototype,"forceExpandHeight"),b.prototype),M=e(b.prototype,"_controlSizeWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlSizeWidth",[y],Object.getOwnPropertyDescriptor(b.prototype,"controlSizeWidth"),b.prototype),D=e(b.prototype,"_controlSizeHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlSizeHeight",[m],Object.getOwnPropertyDescriptor(b.prototype,"controlSizeHeight"),b.prototype),N=e(b.prototype,"_controlScaleWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlScaleWidth",[x],Object.getOwnPropertyDescriptor(b.prototype,"controlScaleWidth"),b.prototype),P=e(b.prototype,"_controlScaleHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlScaleHeight",[H],Object.getOwnPropertyDescriptor(b.prototype,"controlScaleHeight"),b.prototype),E=b))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/length.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){u=t.slot}],execute:function(){var i;n._RF.push({},"d16658ODu5NPKUU74aU5bA5","length",void 0);t("default",c({menu:"Math/Advanced/Length",title:"Length"})(i=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[u("In",r.ZERO,"vec4","vector")],outputs:[u("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = length("+t+");\n        "},n}(o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/lerp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,r,c,o,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"0583aaFcfFDfr3SugrLLX4t","lerp",void 0);t("default",c({menu:"Math/Interpolation/Lerp",title:"Lerp"})(s=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).concretePrecisionType=i.Max,e.data={inputs:[u("A",r.ZERO,"vec4","vector"),u("B",r.ZERO,"vec4","vector"),u("T",r.ZERO,"vec4","vector")],outputs:[u("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = mix("+t+", "+e+", "+n+");\n        "},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./csvManager.ts","./resourceUtil.ts"],(function(n){var t,e,a,r,c,i;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,a=n._decorator,r=n.resources},function(n){c=n.CSVManager},function(n){i=n.resourceUtil}],execute:function(){var o,s;e._RF.push({},"aca4damK49DYqlWPDNwTrSS","localConfig",void 0);var u=a.ccclass;a.property,n("LocalConfig",u("LocalConfig")(((s=function(){function n(){this._csvManager=new c,this._callback=new Function,this._currentLoad=0,this._cntLoad=0}var e=n.prototype;return e.loadConfig=function(n){this._callback=n,this._loadCSV()},e._loadCSV=function(){var n=this;r.loadDir("datas",(function(t,e){if(!t){var a=e.filter((function(n){return".md"!==n._native}));n._cntLoad=a.length,a.length?a.forEach((function(t,e,a){i.getTextData(t.name,(function(e){n._csvManager.addTable(t.name,e),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},e.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},e.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},e.getTable=function(n){return this._csvManager.getTable(n)},e.getTableArr=function(n){return this._csvManager.getTableArr(n)},e.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},e.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},e.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},e._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,u;n._RF.push({},"6743cVJ1/1Ha68y/dyVx1hh","lodash",void 0);var i=t.ccclass;r("lodash",i("lodash")(((u=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}()).MAX_SAFE_INTEGER=9007199254740991,e=u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/log.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){u=t.slot}],execute:function(){var i;n._RF.push({},"40ca6yOjaJE8J+qRdu62/Jd","log",void 0);t("default",r({menu:"Math/Advanced/Log",title:"Log"})(i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[u("In",o.ZERO,"vec4","vector")],outputs:[u("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = log("+t+");\n        "},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CSVLoader.ts","./ClientEvent.ts","./ComponentPool.ts","./ImageLoader.ts","./MidiReader.ts","./ObjectPoolData.ts","./UIAvatar.ts","./UICashAnimation.ts","./UITimer.ts","./AnimationPanel.ts","./ButtonAutoSound.ts","./HotKey.ts","./ButtonHotKey.ts","./EscHotkey.ts","./ToggleHotKey.ts","./UIHotkeyLabel.ts","./InteractableItem.ts","./PageViewBase.ts","./PageViewBaseItem.ts","./PageViewBasePage.ts","./PopupBase.ts","./ScrollViewBase.ts","./ScrollViewBaseItem.ts","./ScrollViewBaseLine.ts","./ToggleAutoSound.ts","./UIAutoVersion.ts","./UIBattleShipTicket.ts","./UICoins.ts","./UICountdownNumber.ts","./UIDiamond.ts","./UIFastToggle.ts","./UIItemUser.ts","./UIName.ts","./UINumberByImages.ts","./UINumberLabel.ts","./UINumberLabelComponent.ts","./UIScaler.ts","./UISlider.ts","./UISliderRectSize.ts","./UITicket.ts","./UIToggleGroups.ts","./UITon.ts","./UIViewDrawer.ts","./UserInteractHandler.ts","./VisiblePanel.ts","./Utils2.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper.ts","./index2.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./assetRemoteUtil.ts","./audioManager.ts","./csvManager.ts","./easing.ts","./localConfig.ts","./lodash.ts","./poolManager.ts","./resourceUtil.ts","./storageManager.ts","./uiManager.ts","./Constants.ts","./Defines.ts","./SocketEventDefines.ts","./DynamicSkeletonAnimation.ts","./APIFakeData.ts","./APIManager.ts","./GameManager.ts","./UserManager.ts","./UserModel.ts","./AuditionGameManager.ts","./AuditionNotePrefabGenerator.ts","./AuditionNoteVisual.ts","./AuditionAudioManager.ts","./AuditionBeatSystem.ts","./AuditionBeatmap.ts","./AuditionCharacterAnimation.ts","./AuditionCharacterAnimationData.ts","./AuditionInputHandler.ts","./AuditionNote.ts","./AuditionNotePool.ts","./AuditionPatternManager.ts","./AuditionScoringSystem.ts","./PatternData.ts","./AuditionGameplayController.ts","./AuditionGameplayUI.ts","./AuditionMainMenuController.ts","./AuditionResultsController.ts","./AuditionSongItemComponent.ts","./AuditionSongSelectionController.ts","./AuditionUIManager.ts","./AnimationGraph.ts","./AnimationGraphGroup.ts","./AnimatorController.ts","./EffectController.ts","./EffectAnimation.ts","./EffectBase.ts","./EffectMovingObject.ts","./EffectMultiMovingObject.ts","./EffectParticle.ts","./EffectPoints.ts","./EffectText.ts","./EffectTime.ts","./FacialEmotionController.ts","./FacialEmotionDemo.ts","./GameEnviromentSetter.ts","./HomeController.ts","./AudioManager2.ts","./BeatmapManager.ts","./DataManagement.ts","./FeedbackManager.ts","./GameplayManager.ts","./InputManager.ts","./MTDefines.ts","./MTDragAndDropTool.ts","./MTUIManager.ts","./MTItemSong.ts","./PopupMTSongSelection.ts","./ScoreManager.ts","./SongSelectionManager.ts","./TapValidator.ts","./Tile.ts","./TileManager.ts","./PopupLoading.ts","./PopupMessage.ts","./Bullet.ts","./CameraController.ts","./Cannon.ts","./Cursor.ts","./EffectManger.ts","./ProjectileController.ts","./ProjectileMath.ts","./TrajectoryDrawer.ts","./ClickToLoadUrl.ts","./HUD_Options.ts","./HUD_Tips.ts","./MathUtil.ts","./VectorUtil.ts","./index3.ts","./register.ts","./base.ts","./context.ts","./boolean.ts","./float.ts","./slider.ts","./vector2.ts","./vector3.ts","./vector4.ts","./absolute.ts","./exponential.ts","./length.ts","./log.ts","./modulo.ts","./negate.ts","./normalize.ts","./posterize.ts","./reciprocal-square.ts","./reciprocal.ts","./add.ts","./divide.ts","./multiply.ts","./power.ts","./square.ts","./substract.ts","./ddx.ts","./ddxy.ts","./ddy.ts","./inverse-lerp.ts","./lerp.ts","./smoothstep.ts","./clamp.ts","./fraction.ts","./max.ts","./min.ts","./one-minus.ts","./random-range.ts","./remap.ts","./saturate.ts","./ceil.ts","./floor.ts","./round.ts","./sign.ts","./step.ts","./truncate.ts","./arccosine.ts","./arcsine.ts","./arctangent.ts","./arctangent2.ts","./cosine.ts","./degrees-to-radians.ts","./hyperbolic-cosine.ts","./hyperbolic-sine.ts","./hyperbolic.ts","./radians-to-degrees.ts","./sine.ts","./tangent.ts","./cross-product.ts","./distance.ts","./dot-product.ts","./fresnel.ts","./projection.ts","./reflection.ts","./rejection.ts","./sphere-mask.ts","./noise-sine-wave.ts","./sawtooth-wave.ts","./square-wave.ts","./triangle-wave.ts","./gradient-noise.ts","./simple-noise.ts","./ellipse.ts","./rectangle.ts","./round-rectangle.ts","./polar-coordinates.ts","./rotate-coordinates.ts","./tilling-and-offset.ts","./index.ts","./combine.ts","./split.ts","./index4.ts","./color.ts","./time.ts","./normal-vector.ts","./position.ts","./uv.ts","./vertex-color.ts","./view-direction.ts","./input-node.ts","./property-node.ts","./cubemap-asset.ts","./sample-cubemap.ts","./sample-texture2d.ts","./texture-asset.ts","./texture2d-asset.ts","./get-local-var.ts","./register-local-var.ts","./all.ts","./and.ts","./any.ts","./branch.ts","./comparison.ts","./is-nan.ts","./not.ts","./or.ts","./MasterNode.ts","./SurfaceMasterNode.ts","./UnlitMasterNode.ts","./SubGraphNode.ts","./SubGraphOutputNode.ts","./PreviewNode.ts","./property.ts","./shadergraph.ts","./slot.ts","./type.ts","./utils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t._decorator}],execute:function(){var i;n._RF.push({},"2be49b5ffhLSZVXKWyATSqt","Manager",void 0);var r=a.ccclass;a.property,t("Manager",r("Manager")(i=function(){function t(){this._inited=!1,this._eventMap=new Map,this._adapter=null}var n=t.prototype;return n.internal_create=function(t){this._adapter=t},n.internal_init=function(){this._inited||(this._inited=!0,this.onInit())},n.on=function(t,e,n,a){void 0===a&&(a=!1),this._eventMap.has(t)||this._eventMap.set(t,[]);var i=this._eventMap.get(t);null!=i&&i.find((function(t){return t.target==n&&t.callback==e}))||i.push({callback:e,target:n,once:a})},n.off=function(t,e,n){if(this._eventMap.has(t)){var a=this._eventMap.get(t),i=null==a?void 0:a.findIndex((function(t){return t.callback==e&&t.target==n}));-1!=i&&a.splice(i,1)}},n.emit=function(t){if(this._eventMap.has(t)){for(var e=this._eventMap.get(t),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r=0;r<e.length;r++){var c,s=e[r];(c=s.callback).call.apply(c,[s.target].concat(a)),s.once&&(e.splice(r,1),r--)}}},e(t,[{key:"adapter",get:function(){return this._adapter}}]),t}())||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/MasterNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts","./utils.ts","./property.ts","./context.ts"],(function(e){var r,n,t,o,a,i,c,s,u,p,f,l,h,d,v,m,g;return{setters:[function(e){r=e.inheritsLoose,n=e.createClass,t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy,i=e.assetManager,c=e.Material},function(e){s=e.ShaderNode},function(e){u=e.NormalSpace,p=e.PositionSpace,f=e.ViewDirSpace,l=e.ConcretePrecisionType},function(e){h=e.path,d=e.fs,v=e.ensureEnumDefines},function(e){m=e.ShaderPropertyType},function(e){g=e.shaderContext}],execute:function(){a._RF.push({},"1eab7ptCA1KiK+C6tmMVON/","MasterNode",void 0);e("MasterSlotType",function(e){return e[e.Vertex=0]="Vertex",e[e.Fragment=1]="Fragment",e}({}));function y(e,r){if(e.connectSlot){var n=e.connectNode;if(n){if(r.includes(n))return;n.inputs.forEach((function(e){y(e,r)})),r.push(n)}}}e("default",function(e){function a(){for(var r,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(r=e.call.apply(e,[this].concat(t))||this).isMasterNode=!0,r.concretePrecisionType=l.Fixed,r.properties=[],r.data={inputs:[]},r}r(a,e);var s=a.prototype;return s.getConnectNodes=function(e){var r=[];return e.forEach((function(e){y(e,r)})),r.sort((function(e,r){return r.priority-e.priority})),r},s.generatePropertiesCode=function(){var e="\n",r="\n",n="",t=g.properties;t.sort((function(e,r){return r.concretePrecision-e.concretePrecision}));var o=0;return t.forEach((function(t){var a="",i="",c=t.value,s=t.type===m.Color,u=c.x,p=c.y,f=c.z,l=c.w;if(t.type===m.Texture2D)a="sampler2D",i="white";else if(t.type===m.TextureCube)a="samplerCube",i="white";else{var h=t.concretePrecision;1===h?(a="float",i=""+c):2===h?(a="vec2",i="["+u+", "+p+"]"):3===h?(a="vec4",i="["+u+", "+p+", "+f+", 0]"):4===h&&(a="vec4",i="["+u+", "+p+", "+f+",  "+l+"]")}var d=s?", editor: { type: color }":"";t.isTexture()?n+="  uniform "+a+" "+t.name+";\n":(e+="    "+a+" "+t.name+";\n",o++),r+="        "+t.name+": { value: "+i+" "+d+"}\n"})),0===o&&(e+="    vec4 empty_value;\n"),{uniform:e,uniformSampler:n,mtl:r}},s.replaceChunks=function(e){var r=["common"];g.allNodes.forEach((function(e){for(var n=0;n<e.depChunks.length;n++)r.includes(e.depChunks[n])||r.push(e.depChunks[n])}));var n="\n",t="\n";return r.forEach((function(e){var r=h.join(g.shaderTemplatesDir,"chunks/"+e+".chunk"),o=d.readFileSync(r,"utf-8");o?(t+=o+"\n",n+="  #include <shader_graph_"+e+">\n"):console.error("Can not find chunk with path ["+r+"]")})),e=(e=(e=e.replace("{{chunks}}",t)).replace("{{vs_chunks}}",n)).replace("{{fs_chunks}}",n)},s.generateDefines=function(e){var r=[];g.allNodes.forEach((function(e){e.defines.forEach((function(e){r.includes(e)||r.push(e)}))}));var n="";r.forEach((function(e){n+=e+"\n"})),n=v(u,n),n=v(p,n);var t=(n=v(f,n)).split("\n");return t=t.map((function(e){return"  "+e})),n=t.join("\n"),e.replace(/{{defines}}/g,n)},s.generateSlotsCode=function(e){var r=["\n"];return this.getConnectNodes(e).forEach((function(e){e.calcConcretePrecision(),e.generateCode().split("\n").forEach((function(n){n&&(n+=" // "+e.constructor.name,r.push("    "+n))}))})),r.join("\n")},s.generateCodeChunk=function(e){var r=this,n=[];return this.inputs.forEach((function(e){var r=e.data;n[r.codeChunk]||(n[r.codeChunk]=[]),n[r.codeChunk].push(e)})),n.forEach((function(n,t){var o=r.generateSlotsCode(n);e=e.replace("{{code_chunk_"+t+"}}",o)})),e},s.generateCode=function(){var e=d.readFileSync(this.templatePath,"utf-8");e=this.generateCodeChunk(e),e=this.generateDefines(e),e=this.replaceChunks(e),g.properties&&0!==g.properties.length||(e=(e=e.replace(/properties: &props/g,"")).replace(/properties: \*props/g,""));var r=this.generatePropertiesCode();e=(e=(e=e.replace("{{properties}}",r.uniform)).replace("{{properties_sampler}}",r.uniformSampler)).replace("{{properties_mtl}}",r.mtl);var n=["Vertex Position","Vertex Normal","Vertex Tangent","Position"];return this.inputs.forEach((function(r){var t,o="slot_"+r.displayName.replace(/ /g,"_");n.includes(r.displayName)||"Normal"===r.displayName?r.connectSlot&&(t=r.slotValue):t=r.slotValue;var a=new RegExp("{{"+o+" *= *(.*)}}","g");if(void 0===t){var i=a.exec(e);i&&(t=i[1])}e=e.replace(a,t)})),e},s.createMaterial=function(){var e=t(o().mark((function e(r){var n,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.generateCode(),a=new c,"shader-graph-preview.effect",e.next=5,r("shader-graph-preview.effect",n);case 5:return s=e.sent,u=new cc.EffectAsset,Object.assign(u,s),u.onLoaded(),a.initialize({effectAsset:s}),e.next=12,Promise.all(g.properties.map(t(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.type!==m.Texture2D&&r.type!==m.TextureCube){e.next=3;break}return n=r.value.uuid,e.abrupt("return",new Promise((function(e){i.loadAny(n,(function(n,t){if(n)return console.error(n),e(null);a.setProperty(r.name,t),e(null)}))})));case 3:case"end":return e.stop()}}),e)})))));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),n(a,[{key:"templatePath",get:function(){return""}}]),a}(s));a._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,u=t.game}],execute:function(){e._RF.push({},"ac60c1uuSNLz566NcMsAduq","MathUtil",void 0);var r=180/Math.PI,c=Math.PI/180;t("MathUtil",function(){function t(){}return t.radiansToDegrees=function(t){return t*r},t.degreesToRadians=function(t){return t*c},t.clamp=function(t,n,e){return t<n?n:t>e?e:t},t.clamp01=function(n){return t.clamp(n,0,1)},t.lerp=function(n,e,u){return n+(e-n)*t.clamp01(u)},t.step=function(t,n){return n<t?0:1},t.smoothStep=function(n,e,u){return e*(u=-2*(u=t.clamp01(u))*u*u+3*u*u)+n*(1-u)},t.smoothDamp=function(n,e,r,c,a,o){a=null!=a?a:Number.POSITIVE_INFINITY,o=null!=o?o:u.deltaTime;var i=2/(c=Math.max(1e-4,c)),l=i*o,s=1/(1+l+.47999998927116394*l*l+.23499999940395355*l*l*l),f=n-e,p=e,m=a*c,d=t.clamp(f,-m,m),g=(r+i*d)*o,h=(r-i*g)*s,M=(e=n-d)+(d+g)*s;return p-n>0==M>p&&(h=((M=p)-p)/o),{value:M,velocity:h}},n(t,null,[{key:"rad2Deg",get:function(){return r}},{key:"deg2Rad",get:function(){return c}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/max.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){u=t.slot}],execute:function(){var a;n._RF.push({},"6e8a0vJMJZHLaTkO3zIBxfl","max",void 0);t("default",c({menu:"Math/Range/Max",title:"Max"})(a=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[u("A",r.ZERO,"vec4","vector"),u("B",r.ZERO,"vec4","vector")],outputs:[u("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = max("+t+", "+e+");\n        "},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/MidiReader.ts",["cc"],(function(r){var e,n,o;return{setters:[function(r){e=r.cclegacy,n=r.resources,o=r.Asset}],execute:function(){r({loadMidi:function(r,e){void 0===e&&(e=1);return new Promise((function(a,t){n.load(r,(function(r,n){if(r)return console.error("Error loading asset:",r),void t(r);if(!(n instanceof o)){var i=new Error("Invalid asset type loaded");return console.error(i.message,n),void t(i)}var s=n.nativeUrl,d=new XMLHttpRequest;d.open("GET",s,!0),d.responseType="arraybuffer",d.onload=function(){if(200===d.status){var r=d.response,n=new Uint8Array(r);try{var o=new Midi(n.buffer);console.log("MIDI file loaded successfully:",o),e>=0&&o.tracks&&o.tracks.length>e?a(o.tracks[e]):a(o)}catch(r){console.error("Error parsing MIDI data:",r),t(r)}}else{var i=new Error("Error loading binary data: "+d.statusText);console.error(i.message),t(i)}},d.onerror=function(r){t(new Error("Network error during MIDI file loading"))},d.send()}))}))},loadMidiFromURL:function(r,e){void 0===e&&(e=1);return new Promise((function(n,o){var a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType="arraybuffer",a.onload=function(){if(200===a.status){var r=a.response,t=new Uint8Array(r);try{if("undefined"!=typeof window&&window.Midi){var i=new window.Midi(t.buffer);console.log("MIDI file loaded successfully:",i);var s=i.tracks&&i.tracks.length>e?i.tracks[e]:null;n(s||i)}else o(new Error("Midi parser not available"))}catch(r){console.error("Error parsing MIDI data:",r),o(r)}}else o(new Error("Error loading binary data: "+a.statusText))},a.onerror=function(){o(new Error("Network error during MIDI file loading"))},a.send()}))}}),e._RF.push({},"1b61cY0MSxGRrqa3QwVp8IO","MidiReader",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/min.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,i,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){i=t.register},function(t){c=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;n._RF.push({},"65629wgX7ZFlosarXfPMufw","min",void 0);t("default",i({menu:"Math/Range/Min",title:"Min"})(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))||this).data={inputs:[o("A",r.ZERO,"vec4","vector"),o("B",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var i=n.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = min("+t+", "+e+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ModelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper.ts"],(function(e){var t,i,n,o,r,a,s,l,h,c,d,u;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.UITransform},function(e){h=e.Manager},function(e){c=e.WrapMode,d=e.Layer},function(e){u=e.Helper}],execute:function(){var f,_;r._RF.push({},"36ea76OAA9IiJKehmGOQ6xW","ModelManager",void 0);var p=a.ccclass,y=(a.property,function(e){return e[e.ON_CLEAR=0]="ON_CLEAR",e[e.ON_INSERT=1]="ON_INSERT",e[e.ON_REMOVE=2]="ON_REMOVE",e[e.ON_MOVE=3]="ON_MOVE",e[e.ON_UPDATE=4]="ON_UPDATE",e[e.ON_CHANGE_BEFORE=5]="ON_CHANGE_BEFORE",e}(y||{}));e("ModelManager",p("ModelManager")(((_=function(e){function r(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._modelList=[],t._length=0,t}t(r,e);var a=r.prototype;return a.onInit=function(){},a.insert=function(){var e=n(o().mark((function e(t,i){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i=this.length),n=this._toArray(t),i=u.clamp(i,0,this.length),this.emit(y.ON_CHANGE_BEFORE),this._insertHandler(n,i),this._length=this._modelList.length,n.length>0&&this.emit(y.ON_INSERT,i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),a._insertHandler=function(e,t){var i=this,n=t;this._length=this._modelList.length;for(var o=[],r=function(e,t){return(u=i._getNewModel(e)).index=t,i._modelList.push(u),u},a=function(e){var t=i.get(n);if(t)o.push(i._copyModel(t,{})),t.data=e,t.index=n,i._initModel(t);else{var a=r(e,n);i._initModel(a)}n++},s=0,l=e.length;s<l;s++)a(e[s]);for(var h=0;h<o.length;h++){var c=o[h],d=n+h;if(this.get(d)){var u=this.get(d);o.push(this._copyModel(u,{})),this._copyModel(c,u)}else{var f=r(c.data,d);this._copyModel(c,f)}}},a.remove=function(e,t){if(void 0===t&&(t=1),0!=t&&!(e<0||e>=this.length)){var i=this.length;this.emit(y.ON_CHANGE_BEFORE);for(var n=e;n<this.length;n++){var o=this.get(n),r=this.get(n+t);if(!r){i=n;break}this._copyModel(r,o),o.index=n}this._modelList.splice(i,this.length),this._length=this._modelList.length,this.emit(y.ON_REMOVE,e)}},a.move=function(e,t,i){var n=this;if(!(e<0||t<=0)){this.emit(y.ON_CHANGE_BEFORE);var o=this._modelList.map((function(e){return n._copyModel(e,{})})),r=o.splice(e,t);o.splice.apply(o,[i,0].concat(r));for(var a=0;a<o.length;a++)this._copyModel(o[a],this._modelList[a]);var s=Math.min(e,i);this.emit(y.ON_MOVE,s)}},a.update=function(){this.emit(y.ON_UPDATE)},a.clear=function(){this._modelList.length=0,this._length=0,this.emit(y.ON_CLEAR)},a.has=function(e){return!!this._modelList[e]},a.get=function(e){return isNaN(e)?null:this._modelList[e]},a.slice=function(e,t){return 0==this.length?[]:this._modelList.slice(e,t)},a._toArray=function(e){return e?e instanceof Array?e:[e]:[]},a._getNewModel=function(e){return{data:e,index:-1,code:null,size:{x:0,y:0},layoutSize:{x:0,y:0},scale:{x:0,y:0},position:{x:0,y:0},anchorPoint:{x:0,y:0},element:{wrapBeforeMode:c.Wrap,wrapAfterMode:c.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},isValid:!0,update:function(){}}},a._initModel=function(e){var t=this.adapter.getPrefab(e.data);if(!t)throw Error("预制体不能为空");if(t instanceof s){var i=t.getComponent(l);e.code=t.uuid,e.size={x:i.width,y:i.height},e.scale={x:i.node.scale.x,y:i.node.scale.y},e.anchorPoint={x:i.anchorPoint.x,y:i.anchorPoint.y}}else{var n=t.data.getComponent(l);e.code=t.data._prefab.fileId,e.size={x:n.width,y:n.height},e.scale={x:n.node.scale.x,y:n.node.scale.y},e.anchorPoint={x:n.anchorPoint.x,y:n.anchorPoint.y}}e.layoutSize={x:0,y:0},e.position={x:0,y:0},e.element={wrapBeforeMode:c.Wrap,wrapAfterMode:c.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},this.adapter.initElement(e.element,e.data)},a._copyModel=function(e,t){e.element.update=function(){};return function e(t,i){for(var n in t){var o=t[n];"data"!=n?"index"!=n&&(null!=o&&"object"==typeof o?(i[n]={},e(o,i[n])):i[n]=o):i[n]=o}}(e,t),t},i(r,[{key:"length",get:function(){return this._length}},{key:"modelList",get:function(){return this._modelList}}]),r}(h)).Event=y,f=_))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/modulo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){u=t.slot}],execute:function(){var i;n._RF.push({},"20807G1bipGRriFOGyGJxbW","modulo",void 0);t("default",r({menu:"Math/Advanced/Modulo",title:"Modulo"})(i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[u("A",o.ZERO,"vec4","vector"),u("B",o.ZERO,"vec4","vector")],outputs:[u("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = mod("+t+", "+e+");\n        "},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/MTDefines.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"12489oNGpZFfYaPjF1Ir4kw","MTDefines",void 0);e("NoteType",function(e){return e[e.TAP=0]="TAP",e[e.HOLD=1]="HOLD",e[e.SLIDE=2]="SLIDE",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/MTDragAndDropTool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager2.ts","./GameplayManager.ts","./BeatmapManager.ts","./MidiReader.ts","./resourceUtil.ts"],(function(e){var t,i,n,o,r,a,s,l,d,c,u,p,f,m,g,h,y,v,D,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){l=e.cclegacy,d=e._decorator,c=e.Node,u=e.Label,p=e.sys,f=e.director,m=e.AudioClip,g=e.Component},function(e){h=e.MagicTilesAudioManager},function(e){y=e.GameState,v=e.GameplayManager},function(e){D=e.BeatmapManager},function(e){_=e.loadMidiFromURL},function(e){b=e.resourceUtil}],execute:function(){var x,M,T,I,A,N,F,w;l._RF.push({},"04c89d3uFxCxYqeuP2zDazt","MTDragAndDropTool",void 0);var C=d.ccclass,L=d.property;e("MTDragAndDropTool",(x=C("MTDragAndDropTool"),M=L(c),T=L(u),x(((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"notificationNode",N,o(t)),n(t,"notificationLabel",F,o(t)),t._midiFile=null,t._audioFile=null,t._tempBeatmapId=null,t._tempAssets=null,t._dropOverlay=null,t}i(t,e);var l=t.prototype;return l.onLoad=function(){t._instance=this,this.createDragOverlay(),this.initialize()},l.onDestroy=function(){this._dropOverlay&&this._dropOverlay.parentNode&&this._dropOverlay.parentNode.removeChild(this._dropOverlay),t._instance===this&&(t._instance=null)},l.createDragOverlay=function(){if(p.isBrowser){var e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 100, 255, 0.3)",e.style.display="none",e.style.zIndex="9999",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="24px",e.style.color="white",e.style.textShadow="0 0 5px black",e.innerHTML='<div style="background: rgba(0,0,0,0.7); padding: 20px; border-radius: 10px;">Drop MIDI and Audio files here<br><small>(Need both files to start)</small></div>',document.body.appendChild(e),this._dropOverlay=e}},l.initialize=function(){var e=this;if(p.isBrowser){var t=document.body;t.addEventListener("dragover",(function(t){t.preventDefault(),t.stopPropagation(),e._dropOverlay&&(e._dropOverlay.style.display="flex")})),t.addEventListener("dragleave",(function(i){i.preventDefault(),i.stopPropagation();var n=t.getBoundingClientRect();(i.clientX<=n.left||i.clientX>=n.right||i.clientY<=n.top||i.clientY>=n.bottom)&&e._dropOverlay&&(e._dropOverlay.style.display="none")})),t.addEventListener("drop",(function(t){t.preventDefault(),t.stopPropagation(),e._dropOverlay&&(e._dropOverlay.style.display="none"),e.handleFileDrop(t.dataTransfer.files)})),console.log("MTDragAndDropTool: Initialized drag and drop handlers")}else console.warn("MTDragAndDropTool: Drag and drop is only supported in browser environments")},l.handleFileDrop=function(e){var t=this;if(e&&0!==e.length){for(var i=!1,n=0;n<e.length;n++){var o=e[n];if(o.name.toLowerCase().endsWith(".mid")||o.name.toLowerCase().endsWith(".midi")){this._midiFile=o,i=!0,console.log("MTDragAndDropTool: MIDI file dropped:",o.name);break}}i?(this.notifyNextStep("MIDI file received! Processing..."),this.scheduleOnce((function(){t.processFiles()}),0)):this.notifyNextStep("Please drop a MIDI file (.mid/.midi).")}},l.processFiles=function(){var e=a(s().mark((function e(){var t,i,n,o,r,a,l,d,c,u,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.notifyNextStep("Processing files..."),this._tempBeatmapId="temp_"+Date.now(),t=this._midiFile.name.replace(/\.(mid|midi)$/i,""),i="magic_tiles/audios/"+t,console.log("Attempting to load audio from resources: "+i),e.prev=6,e.next=9,this.loadAudioFromResources(i);case 9:n=e.sent,console.log("Successfully loaded audio from resources:",n.name),e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(6),console.error("Failed to load audio resource at "+i+":",e.t0),this.notifyNextStep('Could not find matching audio file in resources. Please ensure audio file "'+t+'.mp3" exists in magic_tiles/audios folder.'),this.resetFiles(),e.abrupt("return");case 19:return o=URL.createObjectURL(this._midiFile),e.next=22,_(o);case 22:if(r=e.sent,a={id:this._tempBeatmapId,title:t,artist:"Unknown Artist",bpm:r.tempo||120,difficulty:3,difficultyName:"Medium",level:5,preview:{start:0,end:30},audioPath:null,midiPath:null,backgroundImage:"magic_tiles/images/default_background",coverImage:"magic_tiles/images/default_cover"},l={metadata:a,notes:[]},!r||!r.notes){e.next=32;break}d=[],d=D.instance.convertNotes(r.notes,d),l.notes=d,console.log("Processed "+l.notes.length+" notes from MIDI data"),e.next=36;break;case 32:return console.warn("No valid MIDI tracks found in the file"),this.notifyNextStep("MIDI file doesn't contain valid note data. Please try another file."),this.resetFiles(),e.abrupt("return");case 36:c=D.instance,u=h.instance,console.log("AudioClip details:",{name:n.name,duration:n.getDuration(),isValid:n.loaded,type:typeof n._nativeAsset}),p={clip:n,trackInfo:r,totalDuration:n.getDuration()||180,currentTime:0,isPlaying:!1,isPaused:!1},u.setCurrentBeatmap(p),c.addTempBeatmap(this._tempBeatmapId,l),this.startGame(),e.next=50;break;case 45:e.prev=45,e.t1=e.catch(0),console.error("MTDragAndDropTool: Error processing files:",e.t1),this.notifyNextStep("Error processing files: "+e.t1.message),this.resetFiles();case 50:case"end":return e.stop()}}),e,this,[[0,45],[6,13]])})));return function(){return e.apply(this,arguments)}}(),l.startGame=function(){var e=this.findGameplayManager();if(!e)return console.error("MTDragAndDropTool: GameplayManager not found"),void this.notifyNextStep("Cannot start game. Please try loading files from the game menu.");this.notifyNextStep("Starting game..."),e.resetGameState(),e.setGameState(y.LOADING),e.tileManager.initGame(),e.createBeginningTile(),this.resetFiles()},l.findGameplayManager=function(){return f.getScene().getComponentInChildren(v)},l.loadAudioFromResources=function(e){return new Promise((function(t,i){b.loadRes(e,m,(function(e,n){if(e)return console.error("Failed to load audio from resources:",e),void i(e);n&&n instanceof m?(console.log("Successfully loaded AudioClip from resources:",n),t(n)):(console.error("Invalid AudioClip received:",n),i("Invalid AudioClip received"))}))}))},l.resetFiles=function(){this._midiFile&&URL.revokeObjectURL(URL.createObjectURL(this._midiFile)),this._midiFile=null,this._tempBeatmapId=null,this._tempAssets=null},l.notifyNextStep=function(e){var t=this;console.log("MTDragAndDropTool: "+e),this.notificationNode&&this.notificationLabel?(this.notificationNode.active=!0,this.notificationLabel.string=e,this.scheduleOnce((function(){t.notificationNode.active=!1}),3)):this.showTemporaryNotification(e)},l.showTemporaryNotification=function(e){if(p.isBrowser){var t=document.createElement("div");t.style.position="fixed",t.style.bottom="20px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.padding="10px 20px",t.style.borderRadius="5px",t.style.zIndex="10000",t.innerText=e,document.body.appendChild(t),setTimeout((function(){t.parentNode&&t.parentNode.removeChild(t)}),3e3)}},r(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(g))._instance=null,N=t((A=w).prototype,"notificationNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(A.prototype,"notificationLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=A))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/MTItemSong.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,l,r,a,o,s,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,o=t.Label,s=t.Button,c=t.Sprite,u=t.Component}],execute:function(){var f,b,p,g,h,y,d,m,L,S,v,D,k;r._RF.push({},"dd74eu3S4NEpap53qs6fEO1","MTItemSong",void 0);var w=a.ccclass,z=a.property;t("MTItemSong",(f=w("MTItemSong"),b=z(o),p=z(o),g=z(o),h=z(s),y=z(c),f((L=e((m=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"songNameLabel",L,l(e)),n(e,"artistLabel",S,l(e)),n(e,"difficultyLabel",v,l(e)),n(e,"selectButton",D,l(e)),n(e,"coverSprite",k,l(e)),e.songData=null,e.selectionCallback=null,e}i(e,t);var r=e.prototype;return r.start=function(){this.selectButton&&this.selectButton.node.on("click",this.onSongSelected,this)},r.setSongData=function(t,e){this.songData=t,this.selectionCallback=e,this.songNameLabel&&(this.songNameLabel.string=t.title||"Unknown Title"),this.artistLabel&&(this.artistLabel.string=t.artist||"Unknown Artist"),this.difficultyLabel&&(this.difficultyLabel.string="Difficulty: "+(t.difficultyName||"Medium")),this.coverSprite&&t.coverImage},r.onSongSelected=function(){this.selectionCallback&&this.songData&&this.selectionCallback(this.songData.id)},r.update=function(t){},e}(u)).prototype,"songNameLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(m.prototype,"artistLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(m.prototype,"difficultyLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(m.prototype,"selectButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(m.prototype,"coverSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/MTUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager2.ts"],(function(e){var t,n,i,r,a,o,s,l,c,u,h,g,p,S,b,f,d,m,L,y,v,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Node,c=e.Label,u=e.ProgressBar,h=e.Sprite,g=e.view,p=e.sys,S=e.Vec3,b=e.UITransform,f=e.Widget,d=e.tween,m=e.instantiate,L=e.Button,y=e.EventHandler,v=e.Component},function(e){T=e.MagicTilesAudioManager}],execute:function(){var M,U,I,w,E,C,N,A,z,P,B,_,O,R,k,D,G,H,W,F,x,Y,j,K,V,X,q,J,Q,Z,$,ee,te,ne,ie,re,ae,oe,se,le,ce,ue,he,ge,pe,Se,be,fe,de,me,Le,ye;o._RF.push({},"974fdPppslMoKLXs565FEx6","MTUIManager",void 0);var ve=s.ccclass,Te=s.property,Me=e("UIState",function(e){return e[e.NONE=0]="NONE",e[e.MAIN_MENU=1]="MAIN_MENU",e[e.SONG_SELECT=2]="SONG_SELECT",e[e.GAMEPLAY=3]="GAMEPLAY",e[e.PAUSE_MENU=4]="PAUSE_MENU",e[e.RESULTS=5]="RESULTS",e[e.SETTINGS=6]="SETTINGS",e[e.TUTORIAL=7]="TUTORIAL",e[e.SHOP=8]="SHOP",e}({}));e("MTUIManager",(M=ve("MTUIManager"),U=Te(l),I=Te(l),w=Te(l),E=Te(l),C=Te(l),N=Te(l),A=Te(l),z=Te(l),P=Te(l),B=Te(c),_=Te(c),O=Te(c),R=Te(u),k=Te(h),D=Te(c),G=Te(c),H=Te(c),W=Te(c),F=Te(c),x=Te(c),Y=Te(c),j=Te(c),K=Te(c),M(((ye=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"mainMenuScreen",q,r(t)),i(t,"songSelectScreen",J,r(t)),i(t,"gameplayScreen",Q,r(t)),i(t,"pauseMenuScreen",Z,r(t)),i(t,"resultsScreen",$,r(t)),i(t,"settingsScreen",ee,r(t)),i(t,"tutorialScreen",te,r(t)),i(t,"shopScreen",ne,r(t)),i(t,"loadingScreen",ie,r(t)),i(t,"scoreLabel",re,r(t)),i(t,"songTimeLabel",ae,r(t)),i(t,"comboLabel",oe,r(t)),i(t,"progressBar",se,r(t)),i(t,"healthBar",le,r(t)),i(t,"songTitleLabel",ce,r(t)),i(t,"songArtistLabel",ue,r(t)),i(t,"finalScoreLabel",he,r(t)),i(t,"accuracyLabel",ge,r(t)),i(t,"maxComboLabel",pe,r(t)),i(t,"perfectCountLabel",Se,r(t)),i(t,"goodCountLabel",be,r(t)),i(t,"okCountLabel",fe,r(t)),i(t,"missCountLabel",de,r(t)),i(t,"transitionDuration",me,r(t)),i(t,"popupScaleDuration",Le,r(t)),t.currentUIState=Me.NONE,t.previousUIState=Me.NONE,t.isTransitioning=!1,t.audioManager=null,t.screenWidth=0,t.screenHeight=0,t.safeAreaTop=0,t.safeAreaBottom=0,t.isPortrait=!0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){t._instance=this,this.audioManager=T.instance,this.initializeUI(),g.on("design-resolution-changed",this.onScreenResize,this),g.on("canvas-resize",this.onScreenResize,this),this.onScreenResize()},o.onDestroy=function(){g.off("design-resolution-changed",this.onScreenResize,this),g.off("canvas-resize",this.onScreenResize,this),t._instance===this&&(t._instance=null)},o.initializeUI=function(){this.hideAllScreens(),this.changeUIState(Me.MAIN_MENU)},o.onScreenResize=function(){var e=g.getVisibleSize();if(this.screenWidth=e.width,this.screenHeight=e.height,this.isPortrait=this.screenHeight>this.screenWidth,p.platform===p.Platform.MOBILE_BROWSER||p.platform===p.Platform.IOS||p.platform===p.Platform.ANDROID){var t=p.getSafeAreaRect();this.safeAreaTop=t.y,this.safeAreaBottom=e.height-(t.y+t.height)}this.adjustLayoutForScreenSize()},o.adjustLayoutForScreenSize=function(){this.updateWidgetsInNode(this.node),this.isPortrait?this.applyPortraitLayout():this.applyLandscapeLayout()},o.applyPortraitLayout=function(){if(this.scoreLabel&&(this.scoreLabel.node.position=new S(0,.4*this.screenHeight,0)),this.comboLabel&&(this.comboLabel.node.position=new S(0,.3*this.screenHeight,0)),this.progressBar){var e=this.progressBar.getComponent(b);e&&(e.width=.8*this.screenWidth)}console.log("Applied portrait layout")},o.applyLandscapeLayout=function(){if(this.scoreLabel&&(this.scoreLabel.node.position=new S(.3*this.screenWidth,.4*this.screenHeight,0)),this.comboLabel&&(this.comboLabel.node.position=new S(.3*this.screenWidth,.3*this.screenHeight,0)),this.progressBar){var e=this.progressBar.getComponent(b);e&&(e.width=.6*this.screenWidth)}console.log("Applied landscape layout")},o.updateWidgetsInNode=function(e){var t=e.getComponent(f);t&&t.updateAlignment();for(var n=0;n<e.children.length;n++)this.updateWidgetsInNode(e.children[n])},o.changeUIState=function(e){var t=this;if(!this.isTransitioning&&e!==this.currentUIState){this.isTransitioning=!0,this.previousUIState=this.currentUIState,this.currentUIState=e;var n=this.getScreenForState(this.previousUIState);if(n)d(n).to(this.transitionDuration/2,{scale:new S(.9,.9,1)}).call((function(){n.active=!1;var i=t.getScreenForState(e);i?(i.active=!0,i.scale=new S(.9,.9,1),d(i).to(t.transitionDuration/2,{scale:new S(1,1,1)}).call((function(){t.isTransitioning=!1,t.onUIStateChanged(e)})).start()):t.isTransitioning=!1})).start();else{var i=this.getScreenForState(e);i?(i.active=!0,i.scale=new S(.9,.9,1),d(i).to(this.transitionDuration/2,{scale:new S(1,1,1)}).call((function(){t.isTransitioning=!1,t.onUIStateChanged(e)})).start()):this.isTransitioning=!1}}},o.getScreenForState=function(e){switch(e){case Me.MAIN_MENU:return this.mainMenuScreen;case Me.SONG_SELECT:return this.songSelectScreen;case Me.GAMEPLAY:return this.gameplayScreen;case Me.PAUSE_MENU:return this.pauseMenuScreen;case Me.RESULTS:return this.resultsScreen;case Me.SETTINGS:return this.settingsScreen;case Me.TUTORIAL:return this.tutorialScreen;case Me.SHOP:return this.shopScreen;default:return null}},o.onUIStateChanged=function(e){switch(e){case Me.MAIN_MENU:this.audioManager.playSound("menu_music");break;case Me.SONG_SELECT:break;case Me.GAMEPLAY:this.updateGameplayUI();break;case Me.RESULTS:}},o.hideAllScreens=function(){this.mainMenuScreen&&(this.mainMenuScreen.active=!1),this.songSelectScreen&&(this.songSelectScreen.active=!1),this.gameplayScreen&&(this.gameplayScreen.active=!1),this.pauseMenuScreen&&(this.pauseMenuScreen.active=!1),this.resultsScreen&&(this.resultsScreen.active=!1),this.settingsScreen&&(this.settingsScreen.active=!1),this.tutorialScreen&&(this.tutorialScreen.active=!1),this.shopScreen&&(this.shopScreen.active=!1),this.loadingScreen&&(this.loadingScreen.active=!1)},o.showLoadingScreen=function(e){this.loadingScreen&&(this.loadingScreen.active=e)},o.updateGameplayUI=function(){},o.updateScoreDisplay=function(e){this.scoreLabel&&(this.scoreLabel.string=e.toLocaleString())},o.updateSongTimeDisplay=function(e){this.songTimeLabel&&(this.songTimeLabel.string=this.formatTime(e))},o.formatTime=function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return t+":"+(n<10?"0"+n:n)},o.updateComboDisplay=function(e){this.comboLabel&&(e>1?(this.comboLabel.string=e+"x",this.comboLabel.node.active=!0,d(this.comboLabel.node).to(.1,{scale:new S(1.2,1.2,1)}).to(.1,{scale:new S(1,1,1)}).start()):(this.comboLabel.string="",this.comboLabel.node.active=!1))},o.updateProgressBar=function(e){this.progressBar&&(this.progressBar.progress=e)},o.updateHealthBar=function(e){},o.prepareResultsScreen=function(e,t,n,i){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i={perfect:0,good:0,ok:0,miss:0}),this.resultsScreen){this.finalScoreLabel&&(this.finalScoreLabel.string=e.toLocaleString()),this.accuracyLabel&&(this.accuracyLabel.string=t.toFixed(2)+"%"),this.maxComboLabel&&(this.maxComboLabel.string=n+"x"),this.perfectCountLabel&&(this.perfectCountLabel.string=i.perfect.toString()),this.goodCountLabel&&(this.goodCountLabel.string=i.good.toString()),this.okCountLabel&&(this.okCountLabel.string=i.ok.toString()),this.missCountLabel&&(this.missCountLabel.string=i.miss.toString());var r=this.resultsScreen.getChildByName("HighScoreLabel");r&&(r.active=!1)}},o.showPopup=function(e,t,n){var i,r,a,o;void 0===t&&(t=""),void 0===n&&(n="OK");var s=this.node.getChildByName("PopupTemplate");if(s){var l=m(s);l.parent=this.node,l.active=!0;var u=null==(i=l.getChildByName("Title"))?void 0:i.getComponent(c),h=null==(r=l.getChildByName("Message"))?void 0:r.getComponent(c),g=null==(a=l.getChildByName("OkButton"))?void 0:a.getComponent(L),p=null==g||null==(o=g.node.getChildByName("Label"))?void 0:o.getComponent(c);if(u&&(u.string=t,u.node.active=t.length>0),h&&(h.string=e),p&&(p.string=n),g){var b=new y;b.target=l,b.component="UIManager",b.handler="onPopupButtonClicked",g.clickEvents.push(b)}return l.scale=new S(.8,.8,1),d(l).to(this.popupScaleDuration,{scale:new S(1,1,1)}).start(),l}},o.closePopup=function(e){d(e).to(this.popupScaleDuration,{scale:new S(.8,.8,1)}).call((function(){e.destroy()})).start()},o.onPopupButtonClicked=function(e,t){var n=e.target;if(n){var i=n.parent;i&&this.closePopup(i)}},o.navigateToMainMenu=function(){this.changeUIState(Me.MAIN_MENU)},o.navigateToSongSelect=function(){this.changeUIState(Me.SONG_SELECT)},o.navigateToSettings=function(){this.changeUIState(Me.SETTINGS)},o.navigateToTutorial=function(){this.changeUIState(Me.TUTORIAL)},o.navigateToShop=function(){this.changeUIState(Me.SHOP)},o.handleBackNavigation=function(){switch(this.currentUIState){case Me.SONG_SELECT:case Me.SETTINGS:case Me.TUTORIAL:case Me.SHOP:this.navigateToMainMenu();break;case Me.GAMEPLAY:case Me.PAUSE_MENU:break;case Me.RESULTS:this.navigateToSongSelect()}},a(t,null,[{key:"instance",get:function(){return t._instance?t._instance:null}}]),t}(v))._instance=null,q=t((X=ye).prototype,"mainMenuScreen",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(X.prototype,"songSelectScreen",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(X.prototype,"gameplayScreen",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(X.prototype,"pauseMenuScreen",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(X.prototype,"resultsScreen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(X.prototype,"settingsScreen",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(X.prototype,"tutorialScreen",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(X.prototype,"shopScreen",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(X.prototype,"loadingScreen",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(X.prototype,"scoreLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(X.prototype,"songTimeLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(X.prototype,"comboLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(X.prototype,"progressBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(X.prototype,"healthBar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(X.prototype,"songTitleLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(X.prototype,"songArtistLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(X.prototype,"finalScoreLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(X.prototype,"accuracyLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(X.prototype,"maxComboLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(X.prototype,"perfectCountLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(X.prototype,"goodCountLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(X.prototype,"okCountLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(X.prototype,"missCountLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(X.prototype,"transitionDuration",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),Le=t(X.prototype,"popupScaleDuration",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),V=X))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/multiply.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,c,i,r,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){i=t.register},function(t){r=t.ShaderNode},function(t){o=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"eb609R33glDfpL2KytmHUQe","multiply",void 0);t("default",i({menu:"Math/Basic/Multiply",title:"Multiply"})(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).concretePrecisionType=o.Max,e.data={inputs:[u("A",c.ZERO,"vec4","vector"),u("B",c.ZERO,"vec4","vector")],outputs:[u("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var i=n.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = "+t+" * "+e+";\n        "},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/negate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"1b741yPEQlEVL911xSY0qGi","negate",void 0);t("default",c({menu:"Math/Advanced/Negate",title:"Negate"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = -"+t+";\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/noise-sine-wave.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var n,t,i,o,s,r,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e.Vec4,o=e.Vec2},function(e){s=e.register},function(e){r=e.ShaderNode},function(e){a=e.slot}],execute:function(){var c;t._RF.push({},"fdd3afGjspKIb7t04FDpYVl","noise-sine-wave",void 0);e("default",s({menu:"Math/Wave/NoiseSineWave",title:"NoiseSineWave"})(c=function(e){function t(){for(var n,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(n=e.call.apply(e,[this].concat(s))||this).data={inputs:[a("In",i.ZERO,"vec4","vector"),a("MinMax",o.ZERO,"vec2","vector")],outputs:[a("Out",i.ZERO,"vec4","vector")]},n}n(t,e);var s=t.prototype;return s.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},s.generateCode=function(){var e=this.getInputValue(0),n=this.getInputValue(1);return"\n            float sinIn = sin("+e+");\n            float sinInOffset = sin("+e+" + 1.0);\n            float randomno =  frac(sin((sinIn - sinInOffset) * (12.9898 + 78.233))*43758.5453);\n            float noise = lerp("+n+".x, "+n+".y, randomno);\n            "+this.getOutputVarDefine(0)+" = sinIn + noise;\n        "},t}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/normal-vector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,r,o,n,i,c,a,u,l,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e.Vec3},function(e){n=e.ShaderNode},function(e){i=e.NormalSpace,c=e.ConcretePrecisionType},function(e){a=e.getEnumDefine,u=e.prop,l=e.slot},null,function(e){s=e.register}],execute:function(){var p;r._RF.push({},"f4d52tjGCZK1JsKsZ4QUDNC","normal-vector",void 0);e("default",s({menu:"Input/Geometry/NormalVector",title:"NormalVector"})(p=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).concretePrecisionType=c.Fixed,t.fixedConcretePrecision=3,t.data={props:[u("Space",i.World,"enum",{enum:i})],outputs:[l("Normal",o.ZERO,"vec3","vector")]},t}return t(r,e),r.prototype.generateCode=function(){var e=this.getPropWithName("Space"),t="normal";return e.value===i.Local?t="normal":e.value===i.View?t="viewNormal":e.value===i.World&&(t="worldNormal"),this.defines=[a(i,e.value)],this.getOutputVarDefine(0)+" = "+t+";"},r}(n))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/normalize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,o,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){o=t.register},function(t){i=t.ShaderNode},function(t){c=t.slot}],execute:function(){var u;n._RF.push({},"00775HyBCRKYqjtgTFMEtIo","normalize",void 0);t("default",o({menu:"Math/Advanced/Normalize",title:"Normalize"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).data={inputs:[c("In",r.ZERO,"vec4","vector")],outputs:[c("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = normalize("+t+");\n        "},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/not.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){c=t.slot}],execute:function(){var u;n._RF.push({},"aad29jVDvZJX7eHgVCkzuSx","not",void 0);t("default",o({menu:"Logic/Not",title:"Not"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).concretePrecisionType=i.Max,e.data={inputs:[c("In",!1,"boolean","boolean")],outputs:[c("Out",!1,"boolean","boolean")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = (!"+t+");\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectPoolData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,o,n,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e._decorator,n=e.Prefab,a=e.Node}],execute:function(){var c,l,u,p,s,b,f;i._RF.push({},"6de52PO/FFI4qh57HrWi8RF","ObjectPoolData",void 0);var P=o.ccclass,h=o.property;e("ObjectPoolData",(c=P("ObjectPoolData"),l=h(n),u=h(a),c((b=t((s=function(){r(this,"prefab",b,this),r(this,"container",f,this)}).prototype,"prefab",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(s.prototype,"container",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=s))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/one-minus.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){i=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;n._RF.push({},"cd61fVd7UJBB6ngXO+30nVS","one-minus",void 0);t("default",c({menu:"Math/Range/OneMinus",title:"OneMinus"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = 1. - "+t+";\n        "},n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/or.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){c=t.slot}],execute:function(){var u;n._RF.push({},"a2b3fR0/g9EC7haT+6NqTEL","or",void 0);t("default",o({menu:"Logic/Or",title:"Or"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).concretePrecisionType=i.Max,e.data={inputs:[c("A",!1,"boolean","boolean"),c("B",!1,"boolean","boolean")],outputs:[c("Out",!1,"boolean","boolean")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = ("+t+" || "+e+");\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PageViewBasePage.ts"],(function(e){var t,i,a,n,r,s,o,g,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Node,g=e.Prefab,l=e.instantiate,c=e.Component},function(e){h=e.PageViewBasePage}],execute:function(){var u,P,f,p,m,v,d;r._RF.push({},"fe2875NRMFPRoZfEkgoBxVz","PageViewBase",void 0);var b=s.ccclass,w=s.property;e("PageViewBase",(u=b("PageViewBase"),P=w(o),f=w(g),u((v=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"content",v,n(t)),a(t,"prefabPageView",d,n(t)),t.onSelectedItem=void 0,t.onCreatedItem=void 0,t.itemPerPage=0,t.firstPage=null,t.pages=[],t.items=[],t}i(t,e);var r=t.prototype;return r.init=function(e){e.length<=0||(this.items=e,this.createFristPage(),this.createPages(),this.setPageData())},r.createPages=function(){for(var e=Math.ceil(this.items.length/this.itemPerPage),t=this.pages.length;t<e;t++)this.createPage()},r.setPageData=function(){var e=this;if(!(this.pages.length<=0)){for(var t=0,i=0,a=function(t,i){t.node.active=!0,t.onSelectItem=e.onPageSelectItem.bind(e),t.onCreatedItem=e.onPageCreateItem.bind(e),t.init(i)},n=0;n<this.items.length;n+=this.itemPerPage){var r=this.items.slice(n,n+this.itemPerPage);a(this.pages[t],r),i=n+r.length,t++}if(i<this.items.length-1){var s=this.items.slice(i,this.items.length);a(this.pages[t],s)}for(var o=++t;o<this.pages.length;o++)this.pages[o].node.active=!1}},r.createFristPage=function(){var e;null==this.firstPage&&(this.firstPage=this.createPage(),this.itemPerPage=null==(e=this.firstPage)?void 0:e.getChildNumber())},r.createPage=function(){var e=l(this.prefabPageView);e.parent=this.content;var t=e.getComponent(h);return this.pages.push(t),t},r.onPageCreateItem=function(e){var t;null==(t=this.onCreatedItem)||t.call(this,e)},r.onPageSelectItem=function(e){var t;null==(t=this.onSelectedItem)||t.call(this,e)},t}(c)).prototype,"content",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(m.prototype,"prefabPageView",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=m))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewBaseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.Component}],execute:function(){var r;n._RF.push({},"63b2flj0OJDBKxMBXVQtrFG","PageViewBaseItem",void 0);var c=o.ccclass;o.property,e("PageViewBaseItem",c("PageViewBaseItem")(r=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).onSelected=void 0,t}t(n,e);var o=n.prototype;return o.init=function(e,t){this.onSelected=t},o.onTouch_Main=function(){var e;null==(e=this.onSelected)||e.call(this,this)},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewBasePage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PageViewBaseItem.ts"],(function(e){var t,i,n,s,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,s=e.Component},function(e){a=e.PageViewBaseItem}],execute:function(){var o;i._RF.push({},"1049b+/UgpATrtKU8hoqIHQ","PageViewBasePage",void 0);var r=n.ccclass;n.property,e("PageViewBasePage",r("PageViewBasePage")(o=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).items=[],t.itemData=[],t.onSelectItem=void 0,t.onCreatedItem=void 0,t}t(i,e);var n=i.prototype;return n.onLoad=function(){this.getChilds()},n.getChildNumber=function(){return this.items.length>0&&this.items.length,this.getChilds(),this.items.length},n.getChilds=function(){this.items.length>0||(this.items=this.getComponentsInChildren(a))},n.init=function(e){var t=this;this.getChilds(),this.itemData=e;for(var i=0;i<this.items.length;i++){var n=this.items[i],s=i<e.length;if(n.node.active=s,s){var a,o=e[i];n.init(o,(function(e){null==t.onSelectItem||t.onSelectItem(e)})),null==(a=this.onCreatedItem)||a.call(this,n)}}},i}(s))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){var t,n,i,r,a,o,s,l,h,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator},function(e){l=e.Manager},function(e){h=e.AlwaysScroll},function(e){c=e.ScrollManager},function(e){g=e.ViewManager}],execute:function(){var u,d,_,p,f,E,b,T,O,v,L,P,S,N;o._RF.push({},"e3a2d9kCydCzZKVh5E8qZ8J","PageViewManager",void 0);var M=s.ccclass,x=s.property,I=function(e){return e[e.ON_PAGE_LENGTH_CHANGED=0]="ON_PAGE_LENGTH_CHANGED",e[e.ON_SCROLL_PAGE_BEFOR=1]="ON_SCROLL_PAGE_BEFOR",e[e.ON_SCROLL_PAGE_END=2]="ON_SCROLL_PAGE_END",e}(I||{});e("PageViewManager",(u=M("PageViewManager"),d=x("boolean"),_=x({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原"}),p=x({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"设置 PageView PageTurning 事件的发送时机"}),f=x({visible:function(){return this.enabled},tooltip:"快速滑动翻页临界值\n        当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值\n        该值与此临界值相比较，如果大于临界值，则进行自动翻页"}),E=x({visible:function(){return this.enabled},tooltip:"每个页面翻页时所需时间。单位：秒"}),u(((N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"_enabled",O,r(t)),i(t,"scrollThreshold",v,r(t)),i(t,"pageTurningEventTiming",L,r(t)),i(t,"autoPageTurningThreshold",P,r(t)),i(t,"pageTurningSpeed",S,r(t)),t._currentIndex=0,t}n(t,e);var o=t.prototype;return o.onInit=function(){this._register()},o._register=function(){this.adapter&&this.enabled&&(this.adapter.scrollManager.on(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.on(g.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this,!0))},o._unregister=function(){this.adapter&&!this.enabled&&(this.adapter.scrollManager.off(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.off(g.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this))},o.scrollToPage=function(e,t,n){t<0||t>=this.length||t==this.currentIndex&&0!=this.adapter.scrollManager.calcOffset()||(this.adapter.scrollManager.scrollToGroupIndex(e,t,n),this.emit(I.ON_SCROLL_PAGE_BEFOR,t))},o.scrollToPrevPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Header),0!=this._currentIndex?this.scrollToPage(e,this._currentIndex-1,t):this.adapter.viewManager.loopHeader&&this.scrollToPage(e,this.length-1,t)},o.scrollToNextPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Footer),this._currentIndex>=this.length-1?this.adapter.viewManager.loopFooter&&this.scrollToPage(e,0,t):this.scrollToPage(e,this._currentIndex+1,t)},o._onUpdateViews=function(){this.emit(I.ON_PAGE_LENGTH_CHANGED),this._currentIndex=0,this.scrollToPage(this.pageTurningSpeed,this._currentIndex)},o._onScrollToIndex=function(e){this._currentIndex=e,this.emit(I.ON_SCROLL_PAGE_END,e)},o._handleReleaseLogic=function(e){if(this._enabled&&this.adapter.scrollManager.isMyEventAndMoved){var t=e.getUIStartLocation()[this.adapter.mainAxis]-e.getUILocation()[this.adapter.mainAxis],n=this._getNextIndex(t);this._isScrollable(t)||this._isQuicklyScrollable(this.adapter.scrollManager.velocity)?this.scrollToPage(this.pageTurningSpeed,n):this.scrollToPage(this.pageTurningSpeed,this._currentIndex)}},o._getNextIndex=function(e){var t=this._currentIndex;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e>0?t++:e<0&&t--:(e<0&&t++,e>0&&t--):this.adapter.isArrangeAxisStart?e<0?t++:e>0&&t--:e>0?t++:e<0&&t--,t>=this.length&&this.adapter.viewManager.loopFooter?t=0:t<0&&this.adapter.viewManager.loopHeader&&(t=this.length-1),(t<0||t>=this.length)&&(t=this._currentIndex),t},o._isScrollable=function(e){return Math.abs(e)>=this.adapter.mainAxisSize*this.scrollThreshold},o._isQuicklyScrollable=function(e){return Math.abs(e)>this.autoPageTurningThreshold},a(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._enabled?this._register():this._unregister())}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"length",get:function(){return this.adapter.viewManager.groupLength}}]),t}(l)).Event=I,O=t((T=N).prototype,"_enabled",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(T.prototype,"enabled",[d],Object.getOwnPropertyDescriptor(T.prototype,"enabled"),T.prototype),v=t(T.prototype,"scrollThreshold",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),L=t(T.prototype,"pageTurningEventTiming",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),P=t(T.prototype,"autoPageTurningThreshold",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),S=t(T.prototype,"pageTurningSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),b=T))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/PatternData.ts",["cc"],(function(){var t,c;return{setters:[function(e){t=e.cclegacy,c=e._decorator}],execute:function(){t._RF.push({},"8d217zLJ19F45Uddptd55ZX","PatternData",void 0);c.ccclass,c.property;t._RF.pop()}}}));

System.register("chunks:///_virtual/polar-coordinates.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,c,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec2},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"db427Xs0q5CMbRASs8quHqY","polar-coordinates",void 0);t("default",r({menu:"Uv/PolarCoordinates",title:"PolarCoordinates"})(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Fixed,e.depChunks=["uv"],e.data={inputs:[u("uv",o.ZERO,"vec2","vector"),u("center",o.ZERO,"vec2","vector"),u("radialScale",0,"float","vector"),u("lengthScale",0,"float","vector")],outputs:[u("Out",o.ZERO,"vec2","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);this.inputs[0].connectSlot||(t="v_uv.xy");var e=this.getInputValue(1),n=this.getInputValue(2),o=this.getInputValue(3);return this.getOutputVarDefine(0)+" = PolarCoordinates("+t+", "+e+", "+n+", "+o+");"},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,a;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t._decorator,i=t.instantiate,a=t.NodePool}],execute:function(){var r,c;n._RF.push({},"411ad/aVKtGja0EX2BBJnVT","poolManager",void 0);var s=e.ccclass;e.property,t("PoolManager",s("PoolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var n=t.prototype;return n.getNode=function(t,o){var n=t.name;t.position||(n=t.data.name),this._dictPrefab[n]=t;var e=null;if(this._dictPool.hasOwnProperty(n)){var r=this._dictPool[n];e=r.size()>0?r.get():i(t)}else{var c=new a;this._dictPool[n]=c,e=i(t)}return e.parent=o,e.active=!0,e.name=n,e},n.putNode=function(t){if(t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new a,this._dictPool[o]=n),n.put(t)}},n.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},n.preloadPool=function(t,o){var n=t.name;t.position||(n=t.data.name);var e=null;this._dictPool.hasOwnProperty(n)?e=this._dictPool[n]:(e=new a,this._dictPool[n]=e);for(var r=0;r<o;r++){var c=i(t);e.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,r=c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/PopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./AnimationPanel.ts"],(function(n){var e,t,i,o,a;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator},function(n){o=n.UIManager},function(n){a=n.AnimationPanel}],execute:function(){var r;t._RF.push({},"60806q+/XRP8Yh7Fpwhr+Nd","PopupBase",void 0);var s=i.ccclass;n("PopupBase",s("PopupBase")(r=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.doUImanagerHide=function(){var n=this;this.hide((function(){o.instance.hideDialog(n.node.name)}))},t}(a))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/PopupLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts"],(function(t){var e,i,n,o,r,a,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Label},function(t){p=t.PopupBase}],execute:function(){var s,u,c,f,g;r._RF.push({},"f3854cZ+7tJvbx0v7anFQPX","PopupLoading",void 0);var h=a.ccclass,v=a.property;t("PopupLoading",(s=h("PopupLoading"),u=v(l),s((g=e((f=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"lbDetail",g,o(e)),e}i(e,t);var r=e.prototype;return r.show=function(e,i){var n;t.prototype.show.call(this,e,i);var o=null!=(n=e)?n:"";this.lbDetail.string=o},r.setLoadingDetail=function(t){this.lbDetail.string=t},e}(p)).prototype,"lbDetail",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./uiManager.ts","./Constants.ts"],(function(t){var n,e,i,l,o,r,a,u,s,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.Label},function(t){u=t.PopupBase},function(t){s=t.UIManager},function(t){c=t.GameConstant}],execute:function(){var p,b,f,h,g,y,P,m,C;o._RF.push({},"7cf33btXkBJaJszpFBOgTb7","PopupMessage",void 0);var T=r.ccclass,v=r.property;t("PopupMessage",(p=T("PopupMessage"),b=v(a),f=v(a),h=v(a),p((P=n((y=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"lbContent",P,l(n)),i(n,"lbTitle",m,l(n)),i(n,"lbButtonText",C,l(n)),n.confirmCallback=null,n}e(n,t);var o=n.prototype;return o.show=function(n,e){var i,l;t.prototype.show.call(this,n,e),this.confirmCallback=n.buttonCallback,this.lbContent.string=n.message,this.lbTitle.string=null!=(i=n.title)?i:"",this.lbButtonText.string=null!=(l=n.buttonText)?l:"OK"},o.onTouch_Confirm=function(){var t;null==(t=this.confirmCallback)||t.call(this),this.hide((function(){s.instance.hideDialog(c.POPUP.MESSAGE)}))},n}(u)).prototype,"lbContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(y.prototype,"lbTitle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(y.prototype,"lbButtonText",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/PopupMTSongSelection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./resourceUtil.ts","./MTItemSong.ts","./GameplayManager.ts"],(function(e){var t,n,a,o,r,i,c,l,s,p,u,f,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,i=e._decorator,c=e.Node,l=e.director,s=e.JsonAsset,p=e.instantiate},function(e){u=e.PopupBase},function(e){f=e.resourceUtil},function(e){g=e.MTItemSong},function(e){m=e.GameplayManager}],execute:function(){var d,h,S,y,b,M,v;r._RF.push({},"3828eDIEe1G/rr9u6tsVC3f","PopupMTSongSelection",void 0);var P=i.ccclass,I=i.property;e("PopupMTSongSelection",(d=P("PopupMTSongSelection"),h=I(c),S=I(c),d((M=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(t,"contentNode",M,o(t)),a(t,"itemSongPrefab",v,o(t)),t.beatmaps=new Map,t.gameplayManager=null,t}n(t,e);var r=t.prototype;return r.start=function(){this.gameplayManager=l.getScene().getComponentInChildren(m),this.loadAllBeatmaps()},r.loadAllBeatmaps=function(){var e=this;f.loadAllResources("magic_tiles/beatmaps",(function(t){t.filter((function(e){return e instanceof s})).forEach((function(t){if(t&&t.json)try{var n=t.json;n&&n.metadata&&(n.metadata.id=t.name,e.beatmaps.set(n.metadata.id,n.metadata))}catch(e){console.error("Failed to parse beatmap JSON: "+t.name,e)}})),e.createSongItems()}))},r.createSongItems=function(){var e=this;this.contentNode.removeAllChildren(),this.beatmaps.forEach((function(t){var n=p(e.itemSongPrefab);n.active=!0;var a=n.getComponent(g);a&&(a.setSongData(t,e.onSongSelected.bind(e)),e.contentNode.addChild(n))}))},r.onSongSelected=function(e){var t=this;this.gameplayManager?this.gameplayManager.LoadBeatMap(e).then((function(n){n?t.hide():console.error("Failed to load beatmap: "+e)})):console.error("GameplayManager not found")},t}(u)).prototype,"contentNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"itemSongPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/position.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,o,n,i,r,s,u,c,l,a;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e.Vec3},function(e){i=e.ShaderNode},function(e){r=e.PositionSpace,s=e.ConcretePrecisionType},function(e){u=e.getEnumDefine,c=e.prop,l=e.slot},null,function(e){a=e.register}],execute:function(){var p;o._RF.push({},"c4117F5YClIWKQl+GltCNqQ","position",void 0);e("default",a({menu:"Input/Geometry/Position",title:"Position"})(p=function(e){function o(){for(var t,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return(t=e.call.apply(e,[this].concat(i))||this).concretePrecisionType=s.Fixed,t.fixedConcretePrecision=3,t.data={props:[c("Space",r.World,"enum",{enum:r})],outputs:[l("Position",new n,"vec3","vector")]},t}return t(o,e),o.prototype.generateCode=function(){var e=this.getPropWithName("Space"),t="position";return e.value===r.Local?t="position":e.value===r.View?t="viewPos":e.value===r.World&&(t="worldPos"),this.defines=[u(r,e.value)],this.getOutputVarDefine(0)+" = "+t+".xyz;"},o}(i))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/posterize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){o=t.register},function(t){c=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"83ac4Oj/INHY7tCCfwuaa6d","posterize",void 0);t("default",o({menu:"Math/Advanced/Posterize",title:"Posterize"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).data={inputs:[i("In",r.ZERO,"vec4","vector"),i("Steps",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = floor("+t+" / (1. / "+e+")) * (1. / "+e+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/power.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,r,o,c,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){o=e.register},function(e){c=e.ShaderNode},function(e){i=e.ConcretePrecisionType},function(e){u=e.slot}],execute:function(){var s;n._RF.push({},"94eaaC4omdHcaTHrDX60+tq","power",void 0);e("default",o({menu:"Math/Basic/Power",title:"Power"})(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=i.Fixed,t.data={inputs:[u("A",r.ZERO,"vec4","vector"),u("B",r.ZERO,"vec4","vector")],outputs:[u("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = pow("+e+", "+t+");\n        "},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/PreviewNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts"],(function(e){var t,n,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){i=e.ShaderNode}],execute:function(){n._RF.push({},"f8b0fdliVNBereLRNhLivTf","PreviewNode",void 0);e("default",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.generateCode=function(){return this.getOutputVarDefine(0)+" = "+this.getInputValue(0)+";"},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cannon.ts","./Cursor.ts"],(function(t){var n,i,o,e,s,r,a,c,u,l,h,f,p,m,v,T;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Camera,c=t.sys,u=t.input,l=t.Input,h=t.PhysicsSystem,f=t.Vec3,p=t.tween,m=t.Component},function(t){v=t.Cannon},function(t){T=t.Cursor}],execute:function(){var y,E,P,g,M,O,A,S,C;s._RF.push({},"065763s9dBIZrOHBYD+VlHO","ProjectileController",void 0);var _=r.ccclass,U=r.property;t("ProjectileController",(y=_("ProjectileController"),E=U({type:a}),P=U({type:v}),g=U({type:T}),y((A=n((O=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,o(n,"camera",A,e(n)),o(n,"cannon",S,e(n)),o(n,"cursor",C,e(n)),n.isActive=!1,n.aimValue={value:0},n.tweenAim=null,n.beginAimPosition=null,n.targetAimPosition=null,n}i(n,t);var s=n.prototype;return s.onLoad=function(){},s.onDestroy=function(){},s.update=function(t){this.updateAimPosition(t)},s.registerEvent=function(){c.platform===c.Platform.MOBILE_BROWSER?(u.on(l.EventType.TOUCH_START,this.onTouchStart,this),u.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(l.EventType.TOUCH_END,this.onTouchEnd,this)):(u.on(l.EventType.MOUSE_DOWN,this.onMouseDown,this),u.on(l.EventType.MOUSE_MOVE,this.onMouseMove,this),u.on(l.EventType.MOUSE_UP,this.onMouseUp,this))},s.unregisterEvent=function(){c.platform===c.Platform.MOBILE_BROWSER?(u.off(l.EventType.TOUCH_START,this.onTouchStart,this),u.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(l.EventType.TOUCH_END,this.onTouchEnd,this)):(u.off(l.EventType.MOUSE_DOWN,this.onMouseDown,this),u.off(l.EventType.MOUSE_MOVE,this.onMouseMove,this),u.off(l.EventType.MOUSE_UP,this.onMouseUp,this))},s.onTouchStart=function(t){t.getAllTouches().length>1||this.aimWithScreenPos(t.getLocation())},s.onTouchMove=function(t){t.getAllTouches().length>1||this.aimWithScreenPos(t.getLocation())},s.onTouchEnd=function(t){t.getAllTouches().length>0||(this.aimWithScreenPos(t.getLocation()),this.fire())},s.onMouseDown=function(t){this.aimWithScreenPos(t.getLocation())},s.onMouseMove=function(t){this.aimWithScreenPos(t.getLocation())},s.onMouseUp=function(t){this.fire()},s.aimWithScreenPos=function(t){if(this.isActive){var n=this.camera.screenPointToRay(t.x,t.y);if(h.instance.raycastClosest(n)){var i=h.instance.raycastClosestResult,o=i.hitPoint,e=i.hitNormal;this.cannon.aim(o),this.cursor.set(o,e)}}},s.aimToPosition=function(t,n,i){var o,e=this;if(void 0===n&&(n=0),void 0===i&&(i=null),n<=0)return this.cannon.aim(t),void this.cursor.set(t,f.FORWARD);this.aimValue.value=0,this.beginAimPosition=this.cannon.curTargetPos.clone(),this.targetAimPosition=t.clone(),null==(o=this.tweenAim)||o.stop(),this.tweenAim=p(this.aimValue).to(n,{value:1}).call((function(){e.tweenAim=null,e.cannon.aim(e.targetAimPosition),e.cursor.set(e.targetAimPosition,f.FORWARD),null==i||i()})).start()},s.updateAimPosition=function(t){if(null!==this.tweenAim){var n=f.lerp(new f,this.beginAimPosition,this.targetAimPosition,this.aimValue.value);this.cannon.aim(n),this.cursor.set(n,f.FORWARD)}},s.fire=function(){this.cannon.fire()},n}(m)).prototype,"camera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(O.prototype,"cannon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(O.prototype,"cursor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=O))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileMath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts"],(function(t){var a,n,e;return{setters:[function(t){a=t.createClass},function(t){n=t.cclegacy},function(t){e=t.GameConstant}],execute:function(){n._RF.push({},"cc22b8mSmVF0q6lb6/6cNhf","ProjectileMath",void 0);var r=180/Math.PI,c=Math.PI/180;t("ProjectileMath",function(){function t(){}return t.calculateTotalTime=function(t,a,n){var e=a*c;return t/(n*Math.cos(e))},t.calculateAngleAtMoment=function(a,n,e,i){void 0===i&&(i=!1);var o=t.gravity,l=a*c,u=n*Math.cos(l),h=n*Math.sin(l)-o*e,M=Math.atan(h/u);return i?M:M*r},t.calculateDisplacementAtMoment=function(a,n,e){var r=t.gravity,i=a*c;return{x:n*Math.cos(i)*e,y:n*Math.sin(i)*e-.5*r*Math.pow(e,2)}},t.calculateWithAngle=function(t,a,n){var r=e.GAME.PHYSIC_GRAVITY,i=n*c,o=2*t*Math.sin(i)*Math.cos(i)-2*a*Math.pow(Math.cos(i),2);return o<0?NaN:Math.sqrt(r*Math.pow(t,2)/o)},t.calculateWithVelocity=function(a,n,e){var c=t.gravity,i=e,o=Math.pow(i,2),l=Math.pow(i,4)-c*(c*Math.pow(a,2)+2*n*o);if(l<0)return{angle1:NaN,angle2:NaN};var u=Math.sqrt(l),h=Math.atan((-o+u)/(-c*a)),M=Math.atan((-o-u)/(-c*a));return{angle1:h*r,angle2:M*r}},t.calculateWithMaxHeight=function(a,n,e){var c=t.gravity,i=e;if(i<0||i-n<0)return{angle:NaN,velocity:NaN,time:NaN};var o=Math.sqrt(2*c*i),l=Math.sqrt(2*c*(i-n)),u=(-o+l)/-c,h=(-o-l)/-c,M=Math.max(u,h),s=Math.atan(o*M/a),v=o/Math.sin(s);return{angle:s*r,velocity:v,time:M}},a(t,null,[{key:"gravity",get:function(){return e.GAME.PHYSIC_GRAVITY}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/projection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"76ce8feSIBML7x6UxKZ/iDJ","projection",void 0);t("default",r({menu:"Math/Vector/Projection",title:"Projection"})(u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[i("A",o.ZERO,"vec4","vector"),i("B",o.ZERO,"vec4","vector")],outputs:[i("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = "+e+" * dot("+t+", "+e+") / dot("+e+", "+e+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/property-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./context.ts","./property.ts","./type.ts","./utils.ts","./register.ts"],(function(e){var t,r,n,o,c,s,i,a;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy},function(e){n=e.ShaderNode},function(e){o=e.shaderContext},function(e){c=e.ShaderPropertyType},function(e){s=e.ConcretePrecisionType},function(e){i=e.slot},function(e){a=e.register}],execute:function(){var u;r._RF.push({},"93194csMENJ+oWCPxFCx+9c","property-node",void 0);e("default",a({style:{headerColor:"#ec7063"}})(u=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).concretePrecisionType=s.Fixed,t.property=null,t.name="",t.data={outputs:[i("Out",{},"any","any")]},t.isPropertyNode=!0,t}t(r,e);var n=r.prototype;return n.calcConcretePrecision=function(){var e=this,t=0;switch(o.properties.find((function(t){return t.name===e.name})).type){case c.Float:case c.Boolean:t=1;break;case c.Vector2:t=2;break;case c.Vector3:t=4;break;case c.Vector4:case c.Color:t=4}this.slots[0]._concretePrecision=t},n.generateCode=function(){return""},r}(n))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/property.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(e){var t,u,s,r,o,a,i,c,l,n,h;return{setters:[function(e){t=e.createClass},function(e){u=e.cclegacy,s=e.ValueType,r=e.TextureCube,o=e.Texture2D,a=e.Color,i=e.Vec4,c=e.Vec3,l=e.Vec2},function(e){n=e.slot,h=e.getValueConcretePrecision}],execute:function(){u._RF.push({},"b05a8ea74hDTb7wArT51Kxn","property",void 0);var v=e("ShaderPropertyType",function(e){return e.Float="Float",e.Boolean="Boolean",e.Vector2="Vector2",e.Vector3="Vector3",e.Vector4="Vector4",e.Color="Color",e.Texture2D="Texture2D",e.TextureCube="TextureCube",e}({}));e("ShaderProperty",function(){function e(e){this.details={menu:"",style:{headerColor:"#ec7063"}},this.name="",this.type=v.Float,this.value=0,this.outputs=[],this.type="string"==typeof e?v[e]:e,this.name=v[e],this.details.menu=this.name,this.updateDefaultValue()}var u=e.prototype;return u.setValue=function(e){this.value instanceof s?this.value.set(e):this.type===v.Texture2D||this.type===v.TextureCube?this.value._uuid=e.uuid:this.value=e},u.updateDefaultValue=function(){switch(this.type){case v.Float:this.value=0,this.outputs=[n("Out",this.value,"float","vector")];break;case v.Boolean:this.value=!1,this.outputs=[n("Out",this.value,"boolean","boolean")];break;case v.Vector2:this.value=new l,this.outputs=[n("Out",this.value,"vec2","vector")];break;case v.Vector3:this.value=new c,this.outputs=[n("Out",this.value,"vec3","vector")];break;case v.Vector4:this.value=new i,this.outputs=[n("Out",this.value,"vec4","vector")];break;case v.Color:this.value=new a,this.outputs=[n("Out",this.value,"color","vector")];break;case v.Texture2D:this.value=new o,this.outputs=[n("Out",this.value,"texture2D","texture2D")];break;case v.TextureCube:this.value=new r,this.outputs=[n("Out",this.value,"textureCube","textureCube")]}},u.isTexture=function(){switch(this.type){case v.Texture2D:case v.TextureCube:return!0}return!1},t(e,[{key:"concretePrecision",get:function(){return h(this.value)}}]),e}());u._RF.pop()}}}));

System.register("chunks:///_virtual/radians-to-degrees.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,r,o,s,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){o=e.register},function(e){s=e.ShaderNode},function(e){i=e.slot}],execute:function(){var c;n._RF.push({},"122290sL5ZBopCyAP2bpg8T","radians-to-degrees",void 0);e("default",o({menu:"Math/Trigonometry/RadiansToDegrees",title:"RadiansToDegrees"})(c=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = degrees("+e+");\n        "},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/random-range.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,o,r,a,c,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.Vec2},function(e){r=e.register},function(e){a=e.ShaderNode},function(e){c=e.ConcretePrecisionType},function(e){i=e.slot}],execute:function(){var u;n._RF.push({},"33710RUTT1JXZDzqyhgRRxS","random-range",void 0);e("default",r({menu:"Math/Range/RandomRange",title:"RandomRange"})(u=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).concretePrecisionType=c.Fixed,t.depChunks=["range"],t.data={inputs:[i("seed",o.ZERO,"vec2","vector"),i("minv",0,"float","vector"),i("maxv",0,"float","vector")],outputs:[i("Out",0,"float","vector")]},t}t(n,e);var r=n.prototype;return r.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1),n=this.getInputValue(2);return this.getOutputVarDefine(0)+" = RandomRange("+e+", "+t+", "+n+");"},n}(a))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/reciprocal-square.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,r,n,c,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e.Vec4},function(e){c=e.register},function(e){o=e.ShaderNode},function(e){i=e.slot}],execute:function(){var u;r._RF.push({},"eae1erXirxEXq46sl0FpxV0","reciprocal-square",void 0);e("default",c({menu:"Math/Advanced/ReciprocalSquare",title:"ReciprocalSquare"})(u=function(e){function r(){for(var t,r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))||this).data={inputs:[i("In",n.ZERO,"vec4","vector")],outputs:[i("Out",n.ZERO,"vec4","vector")]},t}t(r,e);var c=r.prototype;return c.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = 1. / ("+e+" * "+e+");\n        "},r}(o))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/reciprocal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"5e330r2wGBAfouLL0jpsqul","reciprocal",void 0);t("default",c({menu:"Math/Advanced/Reciprocal",title:"Reciprocal"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = 1. / "+t+";\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/rectangle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,c,r,o,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e.Vec2},function(e){r=e.register},function(e){o=e.ShaderNode},function(e){i=e.ConcretePrecisionType},function(e){u=e.slot}],execute:function(){var a;n._RF.push({},"c5bfexyH39Fw4zoC+a2iqVE","rectangle",void 0);e("default",r({menu:"Procedural/Shape/Rectangle",title:"Rectangle"})(a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).concretePrecisionType=i.Fixed,t.depChunks=["shape"],t.data={inputs:[u("uv",c.ZERO,"vec2","vector"),u("width",.5,"float","vector")],outputs:[u("Out",0,"float","vector")]},t}t(n,e);var r=n.prototype;return r.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var e=this.getInputValue(0);this.inputs[0].connectSlot||(e="v_uv.xy");var t=this.getInputValue(1);return this.getOutputVarDefine(0)+" = Rectangle("+e+", "+t+");"},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/reflection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"83264s8H2BKlb81PIs6fbLm","reflection",void 0);t("default",c({menu:"Math/Vector/Reflection",title:"Reflection"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[i("In",r.ZERO,"vec4","vector"),i("Normal",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = reflect("+t+", "+e+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/register-local-var.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,r,n,a,i,o,s,c;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,a=e.Vec4},function(e){i=e.ShaderNode},function(e){o=e.prop,s=e.slot},null,function(e){c=e.register}],execute:function(){var u;n._RF.push({},"b61a9DvFcxESK2/fNFtqY0h","register-local-var",void 0);e("default",c({menu:"Input/Variable/RegisterLocalVar",title:"RegisterLocalVar"})(u=function(e){function n(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).isRegisterLocalVar=!0,t.data={props:[o("Name","local_var","string",{registerEnumType:"RegisterLocalVarName"})],inputs:[s("In",a.ZERO,"vec4","vector")]},t}return t(n,e),n.prototype.generateCode=function(){return""},r(n,[{key:"name",get:function(){return this.getPropWithName("Name").value},set:function(e){this.getPropWithName("Name").value=e}}]),n}(i))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/register.ts",["cc","./property.ts"],(function(e){var t,r,a;return{setters:[function(e){t=e.cclegacy},function(e){r=e.ShaderPropertyType,a=e.ShaderProperty}],execute:function(){e("register",(function(e){return function(t){var s=new t,c=Object.getPrototypeOf(s.constructor).name,i={type:s.type,extend:c,details:e,node:s.data};"PropertyNode"===s.type&&function(e){for(var t in p.clear(),r){var n=r[t];if("string"==typeof n){var o=new a(n);o.type=n,p.set(n,{type:n,declareType:e,name:o.name,outputs:o.outputs,default:o.value,details:o.details})}}}(s.type),o.set(s.type,t),n.set(s.type,i)}})),t._RF.push({},"663baRF6QZFi6zhc8Qt66NF","register",void 0);var n=e("shaderNodeMap",new Map),p=e("shaderPropertyMap",new Map),o=e("shaderNodeClassMap",new Map);t._RF.pop()}}}));

System.register("chunks:///_virtual/rejection.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,c,o,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){o=t.register},function(t){r=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"36176dcQhhIm7tg8pihGhm0","rejection",void 0);t("default",o({menu:"Math/Vector/Rejection",title:"Rejection"})(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).data={inputs:[i("A",c.ZERO,"vec4","vector"),i("B",c.ZERO,"vec4","vector")],outputs:[i("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var o=n.prototype;return o.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = "+t+" - ("+e+" * dot("+t+", "+e+") / dot("+e+", "+e+"))\n        "},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ReleaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts"],(function(t){var e,i,a,s,n,r,o,l,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,a=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){l=t.Manager},function(t){h=t.ReleaseState},function(t){p=t.ScrollManager}],execute:function(){var _,u,c,d,f,g,L,b,v,S,E,m,w,M;r._RF.push({},"797a5chXbhC64OnuHlVCMHV","ReleaseManager",void 0);var R=o.ccclass,y=o.property,O=function(t){return t[t.ON_PULL_UP=0]="ON_PULL_UP",t[t.ON_PULL_DOWN=1]="ON_PULL_DOWN",t[t.ON_PULL_LEFT=2]="ON_PULL_LEFT",t[t.ON_PULL_RIGHT=3]="ON_PULL_RIGHT",t}(O||{}),U=(t("ReleaseManager",(_=R("ReleaseManager"),u=y("boolean"),c=y({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),d=y({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),f=y({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),g=y({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),_(((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,s(e,"_enabled",v,n(e)),s(e,"left",S,n(e)),s(e,"right",E,n(e)),s(e,"top",m,n(e)),s(e,"bottom",w,n(e)),e._pullUp=void 0,e._pullDown=void 0,e._pullLeft=void 0,e._pullRight=void 0,e}a(e,t);var r=e.prototype;return r.onInit=function(){this.enabled&&(this._pullUp=new U(this,O.ON_PULL_UP,this.bottom),this._pullDown=new U(this,O.ON_PULL_DOWN,this.top),this._pullLeft=new U(this,O.ON_PULL_LEFT,this.right),this._pullRight=new U(this,O.ON_PULL_RIGHT,this.left),this.adapter.scrollManager.on(p.Event.ON_SCROLL_START,this.onScrollStart,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_END,this.onScrollEnd,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_CANCEL,this.onScrollEnd,this),this.checkLoop())},r.checkLoop=function(){this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?(this.left>0&&(this.adapter.viewManager.loopHeader=!1),this.right>0&&(this.adapter.viewManager.loopFooter=!1)):(this.left>0&&(this.adapter.viewManager.loopFooter=!1),this.right>0&&(this.adapter.viewManager.loopHeader=!1)):this.adapter.isArrangeAxisStart?(this.top>0&&(this.adapter.viewManager.loopHeader=!1),this.bottom>0&&(this.adapter.viewManager.loopFooter=!1)):(this.top>0&&(this.adapter.viewManager.loopFooter=!1),this.bottom>0&&(this.adapter.viewManager.loopHeader=!1))},r.onScrollStart=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.IDLE),this.right>0&&this._pullLeft._setState(h.IDLE)):(this.top>0&&this._pullDown._setState(h.IDLE),this.bottom>0&&this._pullUp._setState(h.IDLE))},r.onScrollEnd=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.RELEASE),this.right>0&&this._pullLeft._setState(h.RELEASE)):(this.top>0&&this._pullDown._setState(h.RELEASE),this.bottom>0&&this._pullUp._setState(h.RELEASE))},r.internal_lateUpdate=function(t){if(this.enabled){var e=this.adapter.scrollManager.boundaryOffset;this.adapter.scrollManager.dragging||(e=0),this.adapter.isHorizontal?(this.left>0&&this._pullRight._set(Math.max(-e,0),e<0),this.right>0&&this._pullLeft._set(Math.max(e,0),e>0)):(this.top>0&&this._pullDown._set(Math.max(e,0),e>0),this.bottom>0&&this._pullUp._set(Math.max(-e,0),e<0))}},i(e,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}},{key:"max",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullLeft?this._pullLeft.expand:0:this._pullDown?this._pullDown.expand:0:0}},{key:"min",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullRight?this._pullRight.expand:0:this._pullUp?this._pullUp.expand:0:0}}]),e}(l)).Event=O,v=e((b=M).prototype,"_enabled",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"enabled",[u],Object.getOwnPropertyDescriptor(b.prototype,"enabled"),b.prototype),S=e(b.prototype,"left",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(b.prototype,"right",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=e(b.prototype,"top",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(b.prototype,"bottom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=b))||L)),t("ReleaseEvent",function(){function t(t,e,i){this._expand=0,this._progress=0,this._offset=0,this._state=void 0,this._defaultPercentage=void 0,this._manager=void 0,this._event=void 0,this._stop=void 0,this._defaultPercentage=i,this._manager=t,this._event=e}var e=t.prototype;return e._set=function(t,e){e&&(this._stop=!1),this._stop||(this._offset=t,this._progress=t/(this._defaultPercentage*this._manager.adapter.mainAxisSize),this._stop=this._offset<=.1,this._setState(h.PULL),this._manager.emit(this._event,this))},e._setState=function(t){this._state!=h.WAIT&&(t==h.PULL&&this._state==h.RELEASE||(this._state=t))},e.wait=function(t){void 0===t&&(t=this._defaultPercentage*this._manager.adapter.mainAxisSize),this._expand=t,this._state=h.WAIT},e.release=function(){this._expand=0,this._state=h.IDLE,this.offset<=.1&&(this._offset=0,this._progress=0,this._manager.emit(this._event,this))},i(t,[{key:"expand",get:function(){return this._expand}},{key:"progress",get:function(){return this._progress}},{key:"offset",get:function(){return this._offset}},{key:"state",get:function(){return this._state}}]),t}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/remap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,c,r,i,o,u,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e.Vec4,r=e.Vec2},function(e){i=e.register},function(e){o=e.ShaderNode},function(e){u=e.ConcretePrecisionType},function(e){a=e.slot}],execute:function(){var s;n._RF.push({},"c8987U3zUlCXZn8OW+mTz8j","remap",void 0);e("default",i({menu:"Math/Range/Remap",title:"Remap"})(s=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).concretePrecisionType=u.Max,t.data={inputs:[a("In",c.ZERO,"vec4","vector"),a("InMinMax",r.ZERO,"vec2","vector"),a("OutMinMax",r.ZERO,"vec2","vector")],outputs:[a("Out",c.ZERO,"vec4","vector")]},t}t(n,e);var i=n.prototype;return i.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var e=this.getInputValue(0),t=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = "+n+".x + ("+e+" - "+t+".x) * ("+n+".y - "+n+".x) / ("+t+".y - "+t+".x);\n        "},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){var r,n,o,t,i,a,s,l,u,f,d;return{setters:[function(e){r=e.cclegacy,n=e._decorator,o=e.resources,t=e.error,i=e.Prefab,a=e.SpriteFrame,s=e.Texture2D,l=e.instantiate,u=e.find,f=e.isValid,d=e.SpriteAtlas}],execute:function(){var c,p;r._RF.push({},"f11da56ne5J4oRL4Avag26V","resourceUtil",void 0);var m=n.ccclass;e("resourceUtil",m("resourceUtil")(((p=function(){function e(){}return e.loadRes=function(e,r,n){var i=this;void 0===n&&(n=function(){}),this.resLoadedMap.has(e)?n&&n(null,this.resLoadedMap.get(e)):o.load(e,(function(r,o){return r?(t(r.message||r),void n(r,o)):o?(i.resLoadedMap.set(e,o),void(n&&n(null,o))):(t("res not found"),void n("res not found",o))}))},e.loadResNoCache=function(e,r,n){var i=this;void 0===n&&(n=function(){}),o.load(e,(function(r,o){if(r)return t(r.message||r),void n(r,o);i.resLoadedMap.set(e,o),n&&n(null,o)}))},e.loadEffectRes=function(e){var r=this;return new Promise((function(n,o){r.loadRes("prefab/effect/"+e,i,(function(r,t){if(r)return console.error("effect load failed",e),void(o&&o());n&&n(t)}))}))},e.loadModelResArr=function(e,r,n,t){var a=r.map((function(r){return e+"/"+r}));o.load(a,i,n,t)},e.loadResArr=function(e,r,n){o.load(e,i,r,n)},e.loadSpriteFrameRes=function(e){var r=this;return new Promise((function(n,o){r.loadRes(e,a,(function(r,t){if(r)return console.error("spriteFrame load failed!",e,r),void(o&&o());var i=new s;i.image=t;var l=new a;l.texture=i,n&&n(l)}))}))},e.getMap=function(e,r){var n="map";n+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+n,null,(function(e,n){if(e)r(e,n);else{var o="";if(n._file){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(n._file));var t=JSON.parse(o);r(null,t)}else if(n.text){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(n.text));t=JSON.parse(o);r(null,t)}else n.json?r(null,n.json):r("failed")}}))},e.getMapObj=function(e,r,n,t){for(var a=[],s=0;s<r.length;s++)a.push("map/"+e+"/"+r[s]);o.load(a,i,n,t)},e.getUIPrefabRes=function(e,r){this.loadRes("prefab/ui/"+e,i,r)},e.createUI=function(e,r,n,o){void 0===o&&(o="Game/Canvas/Popup"),this.getUIPrefabRes(e,(function(e,t){if(!e){var i=l(t);i.setPosition(0,0,0),n||(n=u(o)),n?(n.addChild(i),r&&r(null,i)):r&&r(null,i)}}))},e.preloadUI=function(e,r){this.getUIPrefabRes(e,(function(e,n){if(e)r&&r(e,null);else{var o=l(n);r&&r(null,o)}}))},e.getJsonData=function(e,r){this.loadRes("datas/"+e,null,(function(e,n){e?t(e.message||e):n.json?r(e,n.json):r("failed!!!")}))},e.getTextData=function(e,r){this.loadRes("datas/"+e,null,(function(e,n){if(e)t(e.message||e);else{var o=n.text;r(e,o)}}))},e.setSpriteFrame=function(e,r,n){o.load(e,(function(e,o){if(e)return t(e.message||e),void n(e,o);r&&f(r)&&(r.spriteFrame=o,null==n||n(null))}))},e.setSpriteFrameFromAtlas=function(e,r,n,t){o.load(e,d,(function(o,i){if(o)return console.error("set sprite frame form atlas failed! err:",e,o),void(null==t||t(o));if(n&&f(n)){var a=i.getSpriteFrame(r);n.spriteFrame=a,null==t||t(null)}}))},e.setSpriteFrameFromAutoAtlas=function(e,r,n,t){o.load(e+"/"+r,a,(function(r,o){if(r)return console.error("set sprite frame form atlas failed! err:",e,r),void(null==t||t(r));n&&f(n)&&(n.spriteFrame=o,null==t||t(null))}))},e.loadAndConvertSpriteFrame=function(e,r,n){this.loadRes(e,a,(function(o,t){if(o)return console.error("set sprite frame failed! err:",e,o),void(null==n||n(o));var i=new s;i.image=t;var l=new a;l.texture=i,l&&f(l)&&(r.spriteFrame=l,null==n||n(null))}))},e.setSpriteFrameRenderer=function(e,r,n){this.loadRes(e,a,(function(o,t){if(o)return console.error("set sprite frame failed! err:",e,o),void(null==n||n(o));var i=new s;i.image=t;var l=new a;l.texture=i,l&&f(l)&&(r.spriteFrame=l,null==n||n(null))}))},e.loadAllResources=function(e,r){o.loadDir(e,(function(e,n){e?console.error("Error loading resources: ",e):r(n)}))},e.loadAllSprites=function(e,r){o.loadDir(e,(function(e,n){if(e)console.error("Error loading resources: ",e);else{var o=n.filter((function(e){return e instanceof a}));r(o)}}))},e}()).resLoadedMap=new Map,c=p))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/rotate-coordinates.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,o,n,r,c,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t.Vec2},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;o._RF.push({},"d6912eLcHVBjrq4U/b1qppk","rotate-coordinates",void 0);t("default",r({menu:"Uv/RotateCoordinates",title:"RotateCoordinates"})(s=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Fixed,e.depChunks=["uv"],e.data={inputs:[u("uv",n.ZERO,"vec2","vector"),u("center",n.ZERO,"vec2","vector"),u("rotation",0,"float","vector")],outputs:[u("Out",n.ZERO,"vec2","vector")]},e}e(o,t);var r=o.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);this.inputs[0].connectSlot||(t="v_uv.xy");var e=this.getInputValue(1),o=this.getInputValue(2);return this.getOutputVarDefine(0)+" = RotateCoordinates("+t+", "+e+", "+o+");"},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/round-rectangle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,r,c,u,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec2},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){u=t.ConcretePrecisionType},function(t){i=t.slot}],execute:function(){var a;n._RF.push({},"ce89b57LA5CTpEIa3CV7imi","round-rectangle",void 0);t("default",r({menu:"Procedural/Shape/RoundRectangle",title:"RoundRectangle"})(a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=u.Fixed,e.depChunks=["shape"],e.data={inputs:[i("uv",o.ZERO,"vec2","vector"),i("width",.5,"float","vector"),i("radius",.1,"float","vector")],outputs:[i("Out",0,"float","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);this.inputs[0].connectSlot||(t="v_uv.xy");var e=this.getInputValue(1),n=this.getInputValue(2);return this.getOutputVarDefine(0)+" = RoundRectangle("+t+", "+e+", "+n+");"},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/round.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,u,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){u=t.ShaderNode},function(t){c=t.slot}],execute:function(){var i;n._RF.push({},"62b43+zJdRCqaCEyKSYFKtF","round",void 0);t("default",r({menu:"Math/Round/Round",title:"Round"})(i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[c("In",o.ZERO,"vec4","vector")],outputs:[c("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = floor("+t+" + 0.5);\n        "},n}(u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/sample-cubemap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-node.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.default}],execute:function(){n._RF.push({},"6f28a7ED/hGlLSDg1Rd/nOf","sample-cubemap",void 0);t("default",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.generateCode=function(){var t,e=this.getSlotWithSlotName("Cube"),n=(null==e?void 0:e.connectSlot)&&(null==e?void 0:e.connectSlot.node);if(!n)return"";var o="view",l="normal",u=this.getSlotWithSlotName("ViewDir");null!=u&&u.connectSlot&&(o=null==u?void 0:u.connectSlot.varName);var i=this.getSlotWithSlotName("Normal");null!=i&&i.connectSlot&&(l=null==i?void 0:i.connectSlot.varName);var r=this.getOutputVarName(0)+"_R",a="";return a+="vec3 "+r+" = reflect( -normalize( "+o+" ), "+l+" );\n",a+=this.getOutputVarDefine(0)+" = texture("+(null==(t=n.property)?void 0:t.name)+", "+r+");\n"},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/sample-texture2d.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input-node.ts","./utils.ts","./index3.ts","./register.ts"],(function(t){var e,n,o,r,a,l,u,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Texture2D,r=t.Vec2,a=t.Vec4},function(t){l=t.default},function(t){u=t.prop,c=t.slot},null,function(t){i=t.register}],execute:function(){var s;n._RF.push({},"5895aMpjJJED5bYGNm0JmUq","sample-texture2d",void 0);var m=function(t){return t[t.Default=0]="Default",t[t.Normal=1]="Normal",t}(m||{}),v=function(t){return t[t.Tangent=0]="Tangent",t[t.Object=1]="Object",t}(v||{});t("default",i({menu:"Input/Texture/SampleTexture2D",title:"SampleTexture2D"})(s=function(t){function n(){for(var e,n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))||this).data={props:[u("TextureType",m.Default,"enum",{enum:m}),u("NormalSpace",v.Tangent,"enum",{enum:v})],inputs:[c("Texture",new o,"texture2D","texture2D"),c("UV",r.ZERO,"vec2","vector")],outputs:[c("RGBA",a.ZERO,"vec4","vector"),c("R",0,"float","vector"),c("G",0,"float","vector"),c("B",0,"float","vector"),c("A",0,"float","vector")]},e}return e(n,t),n.prototype.generateCode=function(){var t,e,n=this.getSlotWithSlotName("Texture"),o=this.getSlotWithSlotName("UV"),r=this.getSlotWithSlotName("RGBA"),a=null==r?void 0:r.varName;null!=n&&n.connectSlot?(e=o.connectSlot?o.slotValue:"v_uv",t="vec4 "+a+" = texture("+(null==n?void 0:n.connectSlot.varName)+", "+e+");\n"):t="vec4 "+a+" = vec4(1.);\n";var l=this.getPropWithName("TextureType"),u=this.getPropWithName("NormalSpace");l.value===m.Normal&&u.value===v.Tangent&&(t+=a+".xyz -= vec3(0.5);\n",t+=a+".xyz = \n",t+="  "+a+".x * normalize(worldTangent) +\n",t+="  "+a+".y * normalize(worldBinormal) +\n",t+="  "+a+".z * normalize(worldNormal);\n",this.defines.push("CC_SURFACES_USE_TANGENT_SPACE"));var c=this.getSlotWithSlotName("R");c&&c.connectSlot&&(t+="float "+c.varName+" = "+a+".r;\n");var i=this.getSlotWithSlotName("G");i&&i.connectSlot&&(t+="float "+i.varName+" = "+a+".g;\n");var s=this.getSlotWithSlotName("B");s&&s.connectSlot&&(t+="float "+s.varName+" = "+a+".b;\n");var S=this.getSlotWithSlotName("A");return S&&S.connectSlot&&(t+="float "+S.varName+" = "+a+".a;\n"),t},n}(l))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/saturate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,u,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){u=t.register},function(t){a=t.ShaderNode},function(t){c=t.slot}],execute:function(){var o;n._RF.push({},"28c0baw9D1DwrDezfnwuGKN","saturate",void 0);t("default",u({menu:"Math/Range/Saturate",title:"Saturate"})(o=function(t){function n(){for(var e,n=arguments.length,u=new Array(n),a=0;a<n;a++)u[a]=arguments[a];return(e=t.call.apply(t,[this].concat(u))||this).data={inputs:[c("In",r.ZERO,"vec4","vector")],outputs:[c("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var u=n.prototype;return u.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},u.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = saturate("+t+");\n        "},n}(a))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/sawtooth-wave.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){a=t.slot}],execute:function(){var i;n._RF.push({},"00c7bwAaf9HZYpgf9WzhbZa","sawtooth-wave",void 0);t("default",r({menu:"Math/Wave/SawtoothWave",title:"SawtoothWave"})(i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[a("In",o.ZERO,"vec4","vector")],outputs:[a("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = 2 * ("+t+" - floor(0.5 + "+t+"));\n        "},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TapValidator.ts","./Tile.ts"],(function(e){var r,t,i,o,a,c,n,s,l,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,n=e.Label,s=e.Component},function(e){l=e.TapValidator},function(e){u=e.HitRating}],execute:function(){var h,g,S,f,p,b,d,y,m,k,v,C,T,w,z;a._RF.push({},"9daf9azaSJIKJ3U9ri2+dcr","ScoreManager",void 0);var L=c.ccclass,V=c.property;e("ScoreManager",(h=L("ScoreManager"),g=V(l),S=V(n),f=V(n),h((d=r((b=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return r=e.call.apply(e,[this].concat(a))||this,i(r,"tapValidator",d,o(r)),i(r,"scoreLabel",y,o(r)),i(r,"accuracyLabel",m,o(r)),i(r,"perfectScore",k,o(r)),i(r,"goodScore",v,o(r)),i(r,"okScore",C,o(r)),i(r,"missScore",T,o(r)),i(r,"maxComboBonus",w,o(r)),i(r,"accuracyBonus",z,o(r)),r.currentScore=0,r.finalScore=0,r.isTracking=!1,r.highScores=new Map,r.onScoreChangedCallback=null,r}t(r,e);var a=r.prototype;return a.onLoad=function(){this.updateScoreDisplay(),this.tapValidator&&this.tapValidator.onRating(this.onRatingEvent.bind(this))},a.startTracking=function(){this.resetScore(),this.isTracking=!0},a.pauseTracking=function(){this.isTracking=!1},a.resumeTracking=function(){this.isTracking=!0},a.stopTracking=function(){this.isTracking=!1,this.finalizeScore()},a.resetScore=function(){this.currentScore=0,this.finalScore=0,this.updateScoreDisplay()},a.onRatingEvent=function(e,r){if(this.isTracking){var t=0;switch(r){case u.PERFECT:t=this.perfectScore;break;case u.GREAT:t=this.goodScore;break;case u.COOL:t=this.okScore;break;case u.MISS:t=this.missScore}var i=this.tapValidator.getCombo();if(i>1){var o=1+Math.min(i/100,.5);t=Math.round(t*o)}this.addScore(t)}},a.addScore=function(e){this.isTracking&&(this.currentScore+=e,this.updateScoreDisplay(),this.onScoreChangedCallback&&this.onScoreChangedCallback(this.currentScore))},a.updateScoreDisplay=function(){if(this.scoreLabel&&(this.scoreLabel.string=this.formatScore(this.currentScore)),this.accuracyLabel&&this.tapValidator){var e=this.tapValidator.getAccuracy();this.accuracyLabel.string=e+"%"}},a.formatScore=function(e){return e.toLocaleString()},a.finalizeScore=function(){if(this.tapValidator){var e=this.tapValidator.getAccuracy(),r=this.tapValidator.getMaxCombo(),t=(this.tapValidator.getRatingCounts(),this.tapValidator.getTotalNotes()),i=this.currentScore,o=t>0?r/t:0,a=Math.round(this.maxComboBonus*o),c=Math.round(this.accuracyBonus*(e/100));this.finalScore=i+a+c,console.log("Score Breakdown:"),console.log("Base Score: "+i),console.log("Combo Bonus ("+r+"x): "+a),console.log("Accuracy Bonus ("+e+"%): "+c),console.log("Final Score: "+this.finalScore),this.checkHighScore()}else this.finalScore=this.currentScore},a.checkHighScore=function(){var e="current";return(!this.highScores.has(e)||this.finalScore>this.highScores.get(e))&&(this.highScores.set(e,this.finalScore),!0)},a.getCurrentScore=function(){return this.currentScore},a.getFinalScore=function(){return this.finalScore},a.onScoreChanged=function(e){this.onScoreChangedCallback=e},a.getHighScore=function(e){return this.highScores.get(e)||0},a.saveHighScores=function(){var e={};this.highScores.forEach((function(r,t){e[t]=r}));var r=JSON.stringify(e);localStorage.setItem("magicTilesHighScores",r)},a.loadHighScores=function(){var e=localStorage.getItem("magicTilesHighScores");if(e)try{var r=JSON.parse(e);for(var t in this.highScores.clear(),r)Object.prototype.hasOwnProperty.call(r,t)&&this.highScores.set(t,r[t])}catch(e){console.error("Failed to parse high scores:",e)}},r}(s)).prototype,"tapValidator",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(b.prototype,"scoreLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(b.prototype,"accuracyLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(b.prototype,"perfectScore",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),v=r(b.prototype,"goodScore",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),C=r(b.prototype,"okScore",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),T=r(b.prototype,"missScore",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=r(b.prototype,"maxComboBonus",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),z=r(b.prototype,"accuracyBonus",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e4}}),p=b))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Holder.ts","./View.ts"],(function(e){var t,n,i,r,a,o,s,l,c,g,u,h,M,f,p,w,d,y,A,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Component},function(e){c=e.Orientation,g=e.ArrangeAxis,u=e.ViewEvent,h=e.HolderEvent},function(e){M=e.CenterManager},function(e){f=e.LayoutManager},function(e){p=e.ModelManager},function(e){w=e.PageViewManager},function(e){d=e.ReleaseManager},function(e){y=e.ScrollManager},function(e){A=e.ViewManager},function(e){v=e.Holder},function(e){m=e.View}],execute:function(){var b,S,_,V,x,z,k,H,D,E,L,P,C,I,B;o._RF.push({},"4f9c5h5sDhP/78kLerCTNfA","ScrollAdapter",void 0);var R=s.ccclass,U=s.property,F=(e("ScrollAdapter",(b=R("ScrollAdapter"),S=U(y),_=U(A),V=U(f),x=U(w),z=U(d),k=U(M),b((E=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"scrollManager",E,r(t)),i(t,"viewManager",L,r(t)),i(t,"layoutManager",P,r(t)),i(t,"pageViewManager",C,r(t)),i(t,"releaseManager",I,r(t)),i(t,"centerManager",B,r(t)),t.modelManager=new p,t}n(t,e);var o=t.prototype;return o.initElement=function(e,t){},o.getView=function(){return new F(this)},o.getHolder=function(e,t){return new T(e,t,this)},o.getParentAdapter=function(e){if(null!=e){var t=e.getComponent("ScrollAdapter");return t||this.getParentAdapter(e.parent)}},o.__preload=function(){this.scrollManager.internal_create(this),this.viewManager.internal_create(this),this.modelManager.internal_create(this),this.releaseManager.internal_create(this),this.layoutManager.internal_create(this),this.pageViewManager.internal_create(this),this.centerManager.internal_create(this),this.viewManager.internal_init(),this.releaseManager.internal_init(),this.layoutManager.internal_init(),this.pageViewManager.internal_init(),this.centerManager.internal_init(),this.scrollManager.internal_init(),this.modelManager.internal_init()},o.lateUpdate=function(e){this.scrollManager.internal_lateUpdate(e),this.viewManager.internal_lateUpdate(e),this.layoutManager.internal_lateUpdate(e),this.releaseManager.internal_lateUpdate(e)},a(t,[{key:"isVertical",get:function(){return this.scrollManager.orientation==c.Vertical}},{key:"isHorizontal",get:function(){return this.scrollManager.orientation==c.Horizontal}},{key:"isArrangeAxisStart",get:function(){return this.viewManager.arrangeAxis==g.Start}},{key:"mainAxis",get:function(){return this.isVertical?"y":"x"}},{key:"crossAxis",get:function(){return this.isVertical?"x":"y"}},{key:"mainAxisAnchorPoint",get:function(){var e=this.isVertical?1:0;return this.isArrangeAxisStart?e:1-e}},{key:"mainAxisSize",get:function(){return this.scrollManager.view.contentSize[this.mainAxis]}},{key:"crossAxisSize",get:function(){return this.scrollManager.view.contentSize[this.crossAxis]}},{key:"multiplier",get:function(){var e=this.isVertical?-1:1;return this.isArrangeAxisStart?-e:e}},{key:"paddingHeader",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.left:this.viewManager.right:this.isArrangeAxisStart?this.viewManager.top:this.viewManager.bottom}},{key:"paddingFooter",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.right:this.viewManager.left:this.isArrangeAxisStart?this.viewManager.bottom:this.viewManager.top}},{key:"mainAxisPadding",get:function(){return this.isHorizontal?this.viewManager.left+this.viewManager.right:this.viewManager.top+this.viewManager.bottom}}]),t}(l)).prototype,"scrollManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),L=t(D.prototype,"viewManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),P=t(D.prototype,"layoutManager",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),C=t(D.prototype,"pageViewManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w}}),I=t(D.prototype,"releaseManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),B=t(D.prototype,"centerManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M}}),H=D))||H)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){this.adapter.node.emit(u.VISIBLE,this)},i.onDisable=function(){this.adapter.node.emit(u.DISABLE,this)},t}(m)),T=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onCreated=function(){this.node.emit(h.CREATED,this)},i.onVisible=function(){this.node.emit(h.VISIBLE,this)},i.onDisable=function(){this.node.emit(h.DISABLE,this)},t}(v);o._RF.pop()}}}));

System.register("chunks:///_virtual/Scrollbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./helper.ts","./ScrollManager.ts"],(function(t){var i,e,n,r,o,a,s,h,l,c,u,p,_,f,d,g,m,b,S,T,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Color,l=t.Sprite,c=t.SpriteFrame,u=t.Node,p=t.v3,_=t.UITransform,f=t.Component,d=t.Vec2},function(t){g=t.ScrollAdapter},function(t){m=t.ScrollbarDirection,b=t.Transition,S=t.Orientation},function(t){T=t.Helper},function(t){v=t.ScrollManager,y=t.ADAPTER}],execute:function(){var E,w,z,C,H,M,A,O,L,x,R,U,G,D,I,k,N,P,V,F,B,j,J,W,q,K,Q,X,Y,Z,$,tt,it,et,nt,rt,ot,at,st,ht;a._RF.push({},"67fa5ko0UJAJpbCzgGfagdw","Scrollbar",void 0);var lt=s.ccclass,ct=s.property,ut=new h;t("Scrollbar",(E=lt("Scrollbar"),w=ct(g),z=ct(l),C=ct({type:m,tooltip:"滚动方向"}),H=ct({tooltip:"开启后会允许用户滑动进度条"}),M=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最小限制，默认=0不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),A=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最大限制，默认=1不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),O=ct({type:b}),L=ct({type:b,visible:function(){return this.interactable}}),x=ct({type:l,visible:function(){return this.transition!=b.None&&this.interactable}}),R=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),U=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),G=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),D=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),I=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),k=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),N=ct({visible:function(){return this.transition==b.Scale||this.transition==b.ColorTint&&this.interactable}}),P=ct({range:[0,11],slide:!0,step:1,tooltip:"用于进度的步数。值为 < 2 将禁用"}),V=ct({tooltip:"开启后会在滚动条无更新时自动隐藏"}),F=ct({visible:function(){return this.enableAutoHide},tooltip:"自动隐藏滚动条的时间"}),E((J=i((j=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"adapter",J,r(i)),n(i,"handle",W,r(i)),n(i,"direction",q,r(i)),n(i,"interactable",K,r(i)),n(i,"dragMinLimit",Q,r(i)),n(i,"dragMaxLimit",X,r(i)),n(i,"_transition",Y,r(i)),n(i,"targetGraphic",Z,r(i)),n(i,"hoverSprite",$,r(i)),n(i,"pressedSprite",tt,r(i)),n(i,"hoverColor",it,r(i)),n(i,"pressedColor",et,r(i)),n(i,"hoverScale",nt,r(i)),n(i,"pressedScale",rt,r(i)),n(i,"transitionDuration",ot,r(i)),n(i,"numberOfSteps",at,r(i)),n(i,"enableAutoHide",st,r(i)),n(i,"autoHideTime",ht,r(i)),i._transitionInfo=void 0,i._targetEnter=void 0,i._targetStart=void 0,i._isDirty=!1,i._transform=void 0,i._handleTransform=void 0,i._size=0,i._value=-1,i._pointerEvent=void 0,i._offset=void 0,i._isHide=void 0,i._opacity=255,i._autoHideRemainingTime=void 0,i._rawTargetScale=void 0,i._rawTargetFrame=void 0,i._rawTargetColor=void 0,i}e(i,t);var a=i.prototype;return a.__preload=function(){this.transform.setAnchorPoint(.5,.5),this.handleTransform.setAnchorPoint(.5,.5),this.handle.node.setPosition(0,0),this.adapter&&(this.adapter.scrollManager.on(v.Event.ON_UPDATE_PERCENTAGE,this._onUpdateScrollbar,this),this._updateVisuals()),this.targetGraphic&&(this._rawTargetScale=this.targetGraphic.node.getScale().clone(),this._rawTargetFrame=this.targetGraphic.spriteFrame,this._rawTargetColor=this.targetGraphic.color.clone()),this._openAutoHide(!0)},a.onEnable=function(){var t=this.node.getComponent(l);t&&(this._opacity=t.color.a),this.adapter&&(this.node[y]=!0,this.node.on(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.on(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.on(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.on(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.on(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this)))},a.onDisable=function(){this.node.off(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.off(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.off(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.off(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.off(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this))},a._targetMouseEnter=function(){switch(this._targetEnter=!0,this._openAutoHide(!1),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this.hoverScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this.hoverSprite);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this.hoverColor)}},a._targetMouseLeave=function(){switch(this._targetEnter=!1,this._openAutoHide(!0),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this._rawTargetColor)}},a._transitionScale=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.node.getScale().clone(),to:t})},a._transitionColor=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.color,to:t})},a._transitionSprite=function(t){t&&this.targetGraphic&&(this.targetGraphic.spriteFrame=t)},a._mouseEnter=function(t){this.interactable&&this._openAutoHide(!1)},a._mouseLeave=function(t){this.interactable&&this._openAutoHide(!0)},a._openAutoHide=function(t){this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._isHide=t,t||this._setOpacity(this._opacity))},a._onTouchStart=function(t){if(this.interactable&&1!=this.size&&0!=this.size){this._openAutoHide(!1),this._pointerEvent=null,this._targetStart=!0;var i=t.getUIStartLocation();if(this._offset=this.handleTransform.convertToNodeSpaceAR(p(i.x,i.y)),Math.abs(this._offset[this.xy])>.5*this.handleTransform[this.wh]){this._offset=null,this._pointerEvent=t;var e=this._calcPercentage(t);this._setPercentage(e)}this.transition==b.Scale?this._transitionScale(this.pressedScale):this.transition==b.SpriteSwap?this._transitionSprite(this.pressedSprite):this.transition==b.ColorTint&&this._transitionColor(this.pressedColor)}},a._onTouchMove=function(t){if(this.interactable&&1!=this.size&&0!=this.size&&this._offset){var i=this._calcPercentage(t,this._offset[this.xy]);this._setPercentage(i)}},a._onTouchEnd=function(t){if(this.interactable&&1!=this.size&&0!=this.size){switch(this._offset=null,this._pointerEvent=null,this._targetStart=!1,this.transition){case b.Scale:this._transitionScale(this._targetEnter?this.hoverScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetEnter?this.hoverSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetEnter?this.hoverColor:this._rawTargetColor)}this.adapter.centerManager.scrollToCenter()}},a._setPercentage=function(t){this.adapter.scrollManager.stopScroll(),this.adapter.scrollManager.setPercentage(t)},a._calcPercentage=function(t,i){void 0===i&&(i=0);var e=(this.axis==S.Horizontal?this.transform.width:this.transform.height)*(1-this.size),n=t.getUILocation(),r=this.transform.convertToNodeSpaceAR(p(n.x,n.y))[this.xy]-i-.5*-this.transform[this.wh];r-=.5*this.handleTransform[this.wh];var o=this.adapter.scrollManager.percentage;switch(this.direction){case m.Right_To_Left:case m.Top_To_Bottom:o=T.clamp(1-r/e,this.dragMinLimit,this.dragMaxLimit);break;case m.Left_To_Right:case m.Bottom_To_Top:o=T.clamp(r/e,this.dragMinLimit,this.dragMaxLimit)}return this.getSteps(o)},a._onUpdateScrollbar=function(t,i){var e=0,n=0;this.adapter.viewManager.virtualSize>0&&(e=this.adapter.viewManager.virtualSize>=this.adapter.mainAxisSize?T.clamp01((this.adapter.mainAxisSize-Math.abs(i))/this.adapter.viewManager.virtualSize):1),n=t,this.size=e,this.numberOfSteps>1&&(n=Math.round(n*(this.numberOfSteps-1))/(this.numberOfSteps-1),n=T.clamp01(n)),this.value=n,this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},a._updateVisuals=function(){if(this.handleTransform&&this.adapter){var t={x:0,y:0},i={x:0,y:0},e=this.adapter.mainAxis,n=T.clamp01(this.value)*(1-this.size);t[e]=n,i[e]=n+this.size;var r=this.transform.contentSize[this.wh]-i[e]*this.transform.contentSize[this.wh],o=t[e]*this.transform.contentSize[this.wh],a=this.handle.node.getPosition();switch(this.direction){case m.Bottom_To_Top:case m.Left_To_Right:a[this.xy]=.5*(o-r);break;case m.Top_To_Bottom:case m.Right_To_Left:a[this.xy]=.5*(r-o)}this.handleTransform[this.wh]=this.transform.contentSize[this.wh]-r-o,this.handle.node.setPosition(a)}},a.update=function(t){this._clearDirty(),this._autoHide(t),this._tranitionHandler(t)},a._clearDirty=function(){if(this._isDirty&&(this._isDirty=!1,this._updateVisuals(),this._pointerEvent)){var t=this._pointerEvent.getUILocation();this._offset=this.handleTransform.convertToNodeSpaceAR(p(t.x,t.y)),this._pointerEvent=null}},a._autoHide=function(t){if(this.enableAutoHide&&this._isHide&&!(this._autoHideRemainingTime<=0)&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this.autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var i=this._opacity*(this._autoHideRemainingTime/this.autoHideTime);this._setOpacity(i)}},a._tranitionHandler=function(t){var i=this.targetGraphic;if(this.transition!=b.None&&i&&this._transitionInfo){this._transitionInfo.time+=t;var e=1;if(this.transitionDuration>0&&(e=this._transitionInfo.time/this.transitionDuration),e>=1&&(e=1),this.transition==b.Scale){this._transitionInfo.current=i.node.getScale();var n=this._transitionInfo.from,r=this._transitionInfo.to;this._transitionInfo.current.x=T.lerp(n.x,r.x,e),this._transitionInfo.current.y=T.lerp(n.y,r.y,e),i.node.setScale(this._transitionInfo.current)}else if(this.transition==b.ColorTint){var o=this._transitionInfo.from,a=this._transitionInfo.to;h.lerp(ut,o,a,e),i.color=ut}1===e&&(this._transitionInfo=null)}},a._setOpacity=function(t){if(this.handle){var i=function(i){i&&(ut.set(i.color),ut.a=t,i.color=ut)};i(this.node.getComponent(l)),i(this.handle.getComponent(l))}},a.getSteps=function(t){return this.numberOfSteps>1&&(t=Math.round(t*(this.numberOfSteps-1))/(this.numberOfSteps-1),t=T.clamp(t,this.dragMinLimit,this.dragMaxLimit)),t},o(i,[{key:"transition",get:function(){return this._transition},set:function(t){t!=this._transition&&(this._transition=t,t!=b.None&&(this.targetGraphic||(this.targetGraphic=this.handle)))}},{key:"size",get:function(){return this._size},set:function(t){t!=this._size&&(this._size=T.clamp(t,.01,1),this._isDirty=!0)}},{key:"value",get:function(){return this._value},set:function(t){t!=this._value&&(this._value=this.getSteps(t),this._isDirty=!0)}},{key:"stepSize",get:function(){return this.numberOfSteps>1?1/(this.numberOfSteps-1):.1}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(_)),this._transform}},{key:"handleTransform",get:function(){return this.handle?(this._handleTransform||(this._handleTransform=this.handle.node.getComponent(_)),this._handleTransform):null}},{key:"xy",get:function(){return this.axis==S.Horizontal?"x":"y"}},{key:"wh",get:function(){return this.axis==S.Horizontal?"width":"height"}},{key:"axis",get:function(){return this.direction==m.Left_To_Right||this.direction==m.Right_To_Left?S.Horizontal:S.Vertical}}]),i}(f)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(j.prototype,"handle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(j.prototype,"direction",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.Top_To_Bottom}}),K=i(j.prototype,"interactable",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=i(j.prototype,"dragMinLimit",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=i(j.prototype,"dragMaxLimit",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=i(j.prototype,"_transition",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),i(j.prototype,"transition",[L],Object.getOwnPropertyDescriptor(j.prototype,"transition"),j.prototype),Z=i(j.prototype,"targetGraphic",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(j.prototype,"hoverSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(j.prototype,"pressedSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(j.prototype,"hoverColor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.WHITE.clone()}}),et=i(j.prototype,"pressedColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(211,211,211,255)}}),nt=i(j.prototype,"hoverScale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1,1)}}),rt=i(j.prototype,"pressedScale",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1.2,1.2)}}),ot=i(j.prototype,"transitionDuration",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),at=i(j.prototype,"numberOfSteps",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),st=i(j.prototype,"enableAutoHide",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=i(j.prototype,"autoHideTime",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=j))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./debug.ts","./enum.ts","./helper.ts","./ViewManager.ts"],(function(t){var e,i,n,a,r,o,s,h,l,c,_,d,u,p,g,v,f,y,E,O,M,T,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,h=t.Vec3,l=t.UITransform,c=t.Node,_=t.Widget,d=t.EventTouch,u=t.macro,p=t.easing},function(t){g=t.Manager},null,function(t){v=t.Orientation,f=t.TouchMode,y=t.MovementType,E=t.NestedDirection,O=t.ScrollDirection,M=t.Layer},function(t){T=t.Helper},function(t){A=t.ViewManager}],execute:function(){var S,m,w,b,P,C,N,L,D,x,H,R,z,I,U,k,V,B,F,G,X,W,Z,j,q,Y,J,K,Q,$;o._RF.push({},"38125A9jl5DlJflB6yBKrYI","ScrollManager",void 0);var tt=s.ccclass,et=s.property,it=new h,nt=t("ADAPTER","__ADAPTER__"),at=function(t){return t[t.ON_SCROLL=0]="ON_SCROLL",t[t.ON_UPDATE_PERCENTAGE=1]="ON_UPDATE_PERCENTAGE",t[t.ON_VIEW_SIZE_CHANGED=2]="ON_VIEW_SIZE_CHANGED",t[t.ON_ABOUT_TO_STOP=3]="ON_ABOUT_TO_STOP",t[t.ON_SCROLL_START=4]="ON_SCROLL_START",t[t.ON_SCROLL_END=5]="ON_SCROLL_END",t[t.ON_SCROLL_CANCEL=6]="ON_SCROLL_CANCEL",t[t.ON_CHANGED_ORIENTATION=7]="ON_CHANGED_ORIENTATION",t[t.ON_SCROLL_TO_GROUPINDEX_BEFOR=8]="ON_SCROLL_TO_GROUPINDEX_BEFOR",t[t.ON_SCROLL_TO_GROUPINDEX_AFTER=9]="ON_SCROLL_TO_GROUPINDEX_AFTER",t[t.ON_SCROLL_TO_MODELINDEX_BEFOR=10]="ON_SCROLL_TO_MODELINDEX_BEFOR",t[t.ON_SCROLL_TO_MODELINDEX_AFTER=11]="ON_SCROLL_TO_MODELINDEX_AFTER",t}(at||{});t("ScrollManager",(S=tt("ScrollManager"),m=et(l),w=et(l),b=et(l),P=et(l),C=et({type:v}),N=et({type:v}),L=et({type:f,tooltip:"Auto: 当内容撑满可视区域或开启ReleaseManager时允许拖动\n        AlwaysAllow: 任何情况下都可以拖动，即使没有任何元素\n        Disabled: 任何情况下都禁用拖动\n        "}),D=et({type:y}),x=et({range:[0,1],slide:!0,step:.001,visible:function(){return this.movementType==y.Elastic}}),H=et({range:[0,1],slide:!0,step:.001,visible:function(){return this.inertia}}),R=et({tooltip:"当滚动速度小于这个值时，会发送ON_ABOUT_TO_STOP广播"}),z=et({tooltip:"取消子节点的Button点击事件"}),I=et({range:[0,.5],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),U=et({range:[.5,1],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),S((($=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_view",B,a(e)),n(e,"_content",F,a(e)),n(e,"_orientation",G,a(e)),n(e,"touchMode",X,a(e)),n(e,"movementType",W,a(e)),n(e,"elasticity",Z,a(e)),n(e,"inertia",j,a(e)),n(e,"decelerationRate",q,a(e)),n(e,"aboutToStopVelocity",Y,a(e)),n(e,"cancelInnerEvents",J,a(e)),n(e,"nestedMinThreshold",K,a(e)),n(e,"nestedMaxThreshold",Q,a(e)),e.__debug_graphics=void 0,e._boundaryOffset=0,e._viewWidget=null,e._parentAdapter=void 0,e._layerLowest=void 0,e._layerMedium=void 0,e._layerHighest=void 0,e._percentage=0,e._velocity=0,e._dragging=!1,e._scrolling=!1,e._isCanceledEvent=!1,e._contentStartPosition=new h,e._prevContentPosition=new h,e._nestedDirection=E.Both,e._parentTouch=!1,e._stopCheckNested=!1,e._scrollHandlePercentage=null,e._scrollHandlePosition=null,e._isEmitAboutToStop=!1,e._isMyEventAndMoved=!1,e._scrollDirection=O.None,e._laseScrollDirection=O.None,e._touchEvent=null,e.test=!1,e}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this._initView(),this._initContent(),this._parentAdapter=this.adapter.getParentAdapter(this.adapter.node.parent),this.view.node[nt]=!0,this.adapter.viewManager.on(A.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this),this.adapter.viewManager.on(A.Event.ON_CHANGED_VIRTUALSIZE,this._onChangedVirtualSize,this),this.adapter.viewManager.on(A.Event.ON_CHANGED_OVERFLOWHEADER,this._onChangedOverflowHeader,this),this.adapter.viewManager.on(A.Event.ON_RESET_ALL_STATE,this._onResetAllState,this),this.adapter.viewManager.on(A.Event.ON_CLEARVIEWS,this._onResetAllState,this),this.adapter.node.on(c.EventType.SIZE_CHANGED,this._onAdapterSizeChanged,this),this.view.node.on(c.EventType.SIZE_CHANGED,this._onViewSizeChanged,this),this._registerTouchEvent(),this.__createDebug(),this.view.scheduleOnce((function(){t._updatePercentage()}))},o._initView=function(){if(!this.view)throw Error("ScrollManager view 参数为空！");var t={x:.5,y:.5};t[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint,this.view.setAnchorPoint(t.x,t.y);var e=this.view.getComponent(_);e||((e=this.view.addComponent(_)).isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0),e.updateAlignment(),this._viewWidget=e},o.__createDebug=function(){},o.__drawDebug=function(){if(this.__debug_graphics){this.__debug_graphics.clear();var t=this.adapter.mainAxis,e=this.adapter.crossAxis,i=this.adapter.multiplier,n={x:0,y:0},a={x:0,y:0};a[t]=this.adapter.viewManager.virtualSize,a[e]=this.adapter.crossAxisSize,n[t]=this.contentPosition-a[t]*this.content.anchorPoint[t]*i,n[t]+=this.adapter.viewManager.overflowHeader,n[e]-=a[e]*this.view.anchorPoint[e],this.__debug_graphics.fillRect(n.x,n.y,a.x,a.y),this.__debug_graphics.stroke()}},o._initContent=function(){if(!this.content)throw Error("ScrollManager content 参数为空！");this.content.setAnchorPoint(this.view.anchorPoint);var t={x:0,y:0};t[this.adapter.crossAxis]=this.view.contentSize[this.adapter.crossAxis],this.content.setContentSize(t.x,t.y),this._layerLowest||(this._layerLowest=new c("_layerLowest"),this._layerMedium=new c("_layerMedium"),this._layerHighest=new c("_layerHighest"),this.content.node.addChild(this._layerLowest),this.content.node.addChild(this._layerMedium),this.content.node.addChild(this._layerHighest)),this._updateContentPosition({x:0,y:0})},o._registerTouchEvent=function(){this.view.node.on(c.EventType.TOUCH_START,this._onTouchStart,this,!0),this.view.node.on(c.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.view.node.on(c.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0),this.view.node.on(c.EventType.TOUCH_MOVE,this._onTouchMove,this,!0)},o._bubbleToParent=function(t){this._parentAdapter&&this._parentAdapter.scrollManager.view.node.dispatchEvent(t)},o._emitCancelEvent=function(t){if(!this._isCanceledEvent){var e=t.getUILocation();e.subtract(t.getUIStartLocation()),this.cancelInnerEvents&&e.length()>7&&t.target!==this.view.node&&(this._simulateEvent(t,c.EventType.MOUSE_LEAVE),this._simulateEvent(t,c.EventType.TOUCH_CANCEL),this._isCanceledEvent=!0)}},o._simulateEvent=function(t,e,i){if(void 0===i&&(i=!0),t){var n=new d(t.getTouches(),t.bubbles),a=t.target;n.type=e,n.touch=t.touch,n.simulate=i,a.dispatchEvent(n)}},o._onUpdateViews=function(){this._velocity=0,this._updatePercentage()},o._onChangedVirtualSize=function(){this._updatePercentage(),null!=this._scrollHandlePosition&&null!=this._scrollHandlePosition.change&&this._scrollHandlePosition.change()},o._onChangedOverflowHeader=function(t){this.__drawDebug()},o._onResetAllState=function(){this._velocity=0,this._scrolling=!1,this._dragging=!1,this._isMyEventAndMoved=!1,this._scrollDirection=O.None,this._percentage=0,this._isEmitAboutToStop=!1,this._boundaryOffset=0,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._scrollDirection=O.None,this._touchEvent=null,this.stopScroll(),this._initView(),this._initContent()},o._onAdapterSizeChanged=function(){this._viewWidget.updateAlignment()},o._onViewSizeChanged=function(){this.emit(at.ON_VIEW_SIZE_CHANGED)},o._isMyEvent=function(t,e){return t.eventPhase==d.AT_TARGET||!e||e[0]==this.view.node&&!t.target[nt]},o._onTouchStart=function(t){this._velocity=0,this._dragging=!0,this._isMyEventAndMoved=!1,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._isEmitAboutToStop=!1,this._scrollDirection=O.None,this._contentStartPosition.set(this.content.node.position),this._touchEvent=t,this.stopScroll(),this._calcNestedDirection(),this.emit(at.ON_SCROLL_START)},o._onTouchEnd=function(t,e){this._dragging=!1,this._touchEvent=null,this.emit(at.ON_SCROLL_END,t)},o._onTouchCancel=function(t,e){t.simulate||(this._dragging=!1,this._touchEvent=null,this.emit(at.ON_SCROLL_CANCEL,t))},o._onTouchMove=function(t,e){if(this._isMyEvent(t,e)){if(this._emitCancelEvent(t),this._parentTouch||!this.canTouch)return this._bubbleToParent(t);if(this._touchEvent){var i=this.adapter.mainAxis,n=t.getUILocation(),a=t.getUIStartLocation(),r=n.subtract(a);if(!r.equals2f(0,0)){var o={x:0,y:0};o[i]=this._contentStartPosition[i]+r[i];var s=o[i]-this.contentPosition,h=this.calcOffset(s),l=this.adapter.isHorizontal?-1:1;o[i]+=l*h,this.movementType==y.Elastic&&0!=h&&(o[i]-=l*this._rubberDelta(h,this.adapter.mainAxisSize)),this._checkNested(t,o,this._parentAdapter),this._parentTouch?this._bubbleToParent(t):(this._isMyEventAndMoved=!0,this._updateContentPosition(o))}}}},o._calcNestedDirection=function(){this._parentAdapter&&(this.percentage<=this.nestedMinThreshold&&!this.adapter.viewManager.loopHeader?this._nestedDirection=1==this.adapter.multiplier?E.Footer:E.Header:this.percentage>=this.nestedMaxThreshold&&!this.adapter.viewManager.loopFooter?this._nestedDirection=1==this.adapter.multiplier?E.Header:E.Footer:this._nestedDirection=E.Both)},o._checkNested=function(t,e,i){if(i&&!this._stopCheckNested){if(this.orientation==i.scrollManager.orientation){var n=e[this.adapter.mainAxis]-this._contentStartPosition[this.adapter.mainAxis];if(Math.abs(n)<=.1)return;this._nestedDirection==E.Footer?n<0&&(this._parentTouch=!0):this._nestedDirection==E.Header&&n>0&&(this._parentTouch=!0)}else{var a=0,r=0;if(t instanceof d){var o=t.getUIStartLocation(),s=t.getUILocation();a=Math.abs(o.x-s.x),r=Math.abs(o.y-s.y)}else a=Math.abs(t.getScrollX()),r=Math.abs(t.getScrollY());if(a==r)return;a>r?this.adapter.isVertical&&(this._parentTouch=!0):r>a&&this.adapter.isHorizontal&&(this._parentTouch=!0)}if(!this._parentTouch&&i.scrollManager.parentAdapter)return this._checkNested(t,e,i.scrollManager.parentAdapter);this._stopCheckNested=!0}},o._updateContentPosition=function(t,e){void 0===e&&(e=!0),this._updateScrollDirection(t),this.content.node.setPosition(t.x,t.y),this.emit(at.ON_SCROLL,this._scrollDirection),e?this._updatePercentage():this.__drawDebug()},o._updatePrevContentPosition=function(){this._prevContentPosition.set(this.content.node.position)},o._calcPercentage=function(t,e){var i=this.internal_getHiddenSize(),n=this.adapter.viewManager.loopHeader,a=this.adapter.viewManager.loopFooter,r=this.adapter.multiplier,o=this.adapter.viewManager.overflowHeader,s=t*r;if(this.adapter.isHorizontal?s-=e*r:s+=e*r,a)s+=(o+(i+=this.adapter.viewManager.spacing)*r)*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s+=1,s%=i;else if(n){s+=this.adapter.mainAxisSize-1,this.adapter.centerManager.enabled?s-=this.adapter.centerManager.getContainerOffset():s-=this.adapter.paddingFooter,s+=(o+i*r)*r,t*-r>o*r&&(s+=this.adapter.viewManager.spacing),s%=i}else s+=o*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s>i&&(s=i);return s/i},o._updatePercentage=function(){var t=this.calcOffset();this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this._percentage=0:this._percentage=this._calcPercentage(this.contentPosition,t),this.emit(at.ON_UPDATE_PERCENTAGE,this._percentage,t),this.__drawDebug()},o.internal_disableTouchTarget=function(t){if(this._touchEvent&&this._touchEvent.target==t){var e=this._touchEvent;this._simulateEvent(e,c.EventType.TOUCH_CANCEL,!1),this._simulateEvent(e,c.EventType.MOUSE_LEAVE,!1),this._touchEvent=null}},o.internal_getHiddenSize=function(){var t=this.adapter.viewManager.loopHeader,e=this.adapter.viewManager.loopFooter,i=this.adapter.viewManager.virtualSize;return t||e||this.adapter.centerManager.enabled||(i-=this.adapter.mainAxisSize,i+=this.adapter.mainAxisPadding),i},o._getContentMinBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMax+t:e+this._defaultMin+t:this.adapter.viewManager.min+t},o._getContentMaxBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMin+t:e+this._defaultMax+t:this.adapter.viewManager.max+t},o._getMaxBoundaryOffset=function(t){var e=this._viewMax;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?t:e+t:this.adapter.isArrangeAxisStart?-t:e-t},o._getMinBoundaryOffset=function(t){var e=this._viewMin;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e+t:t:this.adapter.isArrangeAxisStart?e-t:-t},o._rubberDelta=function(t,e){return(1-1/(.55*Math.abs(t)/e+1))*e*Math.sign(t)},o._calcElastic=function(t,e,i){var n=this.adapter.mainAxis,a=this.elasticity;this._scrolling&&(a*=3);var r=this.adapter.isHorizontal?-1:1,o=T.smoothDamp(this.contentPosition,this.contentPosition+r*e,this._velocity,a,T.Infinity,t),s=o.velocity,h=o.position;Math.abs(s)<1&&(s=0),this._velocity=s,i[n]=h},o._calcInertia=function(t,e){this._velocity*=Math.pow(this.decelerationRate,t),Math.abs(this._velocity)<1&&(this._velocity=0),e[this.adapter.mainAxis]+=this._velocity*t},o._calcClamped=function(t){var e=this.adapter.mainAxis,i=t[e]-this.contentPosition,n=this.calcOffset(i);this.adapter.isHorizontal?t[e]-=n:t[e]+=n},o._updateScrollDirection=function(t){var e=t[this.adapter.mainAxis]-this.contentPosition;0!=e?(this.adapter.isHorizontal?this._scrollDirection=e>0?O.Right:O.Left:this._scrollDirection=e>0?O.Up:O.Down,this._laseScrollDirection=this._scrollDirection):this._scrollDirection=O.None},o.internal_setContentPosition=function(t,e){void 0===e&&(e=!0);var i={x:0,y:0};i[this.adapter.mainAxis]=t,this._updateContentPosition(i,e)},o.internal_lateUpdate=function(t){this.test||(this._autoScrolling(t),this._scrollHandler(t,this._scrollHandlePosition,this._scrollPositionHandler.bind(this)),this._scrollHandler(t,this._scrollHandlePercentage,this._scrollPercentageHandler.bind(this)))},o._autoScrolling=function(t){var e=this.calcOffset();if(this._boundaryOffset=e,this._dragging||0==e&&0==this._velocity||(this.content.node.getPosition(it),this.movementType==y.Elastic&&0!=e?this._calcElastic(t,e,it):this.inertia?this._calcInertia(t,it):this._velocity=0,this.movementType==y.Clamped&&this._calcClamped(it),this._updateContentPosition(it)),this._dragging&&this.inertia){var i=(this.contentPosition-this._prevContentPosition[this.adapter.mainAxis])/t;this._velocity=T.lerp(this._velocity,i,10*t)}this._prevContentPosition.equals(this.content.node.position)||this._updatePrevContentPosition(),!this._isEmitAboutToStop&&!this._dragging&&Math.abs(this._velocity)<=this.aboutToStopVelocity&&(this._scrollHandlePercentage||this._scrollHandlePosition||(this.emit(at.ON_ABOUT_TO_STOP,this._velocity),this._isEmitAboutToStop=!0)),this._scrolling=!1},o._scrollHandler=function(t,e,i){if(null!=e){e.deltaTime+=t;var n=e.deltaTime/(e.duration>u.FLT_EPSILON?e.duration:u.FLT_EPSILON);n=T.clamp01(n);var a=p.quintOut(n);e.current=T.progress(e.from,e.to,e.current,a),i(e,n)}},o._scrollPercentageHandler=function(t,e){var i=this.percentage;if(this.setPercentage(t.current),1==e||i==this.percentage){var n=!0;this._scrollHandlePercentage.stop&&(n=this._scrollHandlePercentage.stop()),n&&(this._scrollHandlePercentage=null)}},o._scrollPositionHandler=function(t,e){var i={x:0,y:0};i[this.adapter.mainAxis]=t.current,this._setAutoScroll(i),(1==e||Math.abs(this.contentPosition-t.to)<=1e-4)&&(this._scrollHandlePosition.stop&&this._scrollHandlePosition.stop(),this._scrollHandlePosition=null)},o._setAutoScroll=function(t){var e=this,i=function(t){e._updateContentPosition(t),e._updatePrevContentPosition(),e._velocity=0};i(t);var n=this.calcOffset();if(0!=n){var a=this.adapter.isHorizontal?-1:1;return t[this.adapter.mainAxis]+=n*a,i(t),!1}return!0},o._scrollToPosition=function(t,e,i){var n=this;if(!this.canAutoScroll)return!1;var a=e();return!(null==a||Math.abs(this.contentPosition-a)<u.FLT_EPSILON)&&(this._scrollHandlePercentage=null,this._scrollHandlePosition={current:0,from:this.contentPosition,to:a,deltaTime:0,duration:Math.max(0,t),change:function(){a=e(),n._scrollHandlePosition.to=a},stop:function(){i()}},!0)},o.getLayerNode=function(t){switch(t){case M.Medium:return this._layerMedium;case M.Highest:return this._layerHighest;default:return this._layerLowest}},o.scrollToModelIndex=function(t,e,i){var n=this,a=this.adapter.viewManager.getGroupIndexByModelIndex(e);if(-1!=a){var r=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(a,i,r);return r=!0,t}),(function(){n.emit(at.ON_SCROLL_TO_MODELINDEX_AFTER,e)}))&&this.emit(at.ON_SCROLL_TO_MODELINDEX_BEFOR,e)}},o.scrollToGroupIndex=function(t,e,i){var n=this,a=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(e,i,a);return a=!0,t}),(function(){n.emit(at.ON_SCROLL_TO_GROUPINDEX_AFTER,e)}))&&this.emit(at.ON_SCROLL_TO_GROUPINDEX_BEFOR,e)},o.scrollToHeader=function(t){this.scrollToGroupIndex(t,0)},o.scrollToFooter=function(t){this.scrollToGroupIndex(t,this.adapter.viewManager.groupLength-1)},o.scrollToPercentage=function(t,e){if(!this.canAutoScroll)return!1;Math.abs(this._percentage-e)<.001||(e=T.clamp01(e),t=Math.max(0,t),this._scrollHandlePercentage=null,this._scrollHandlePercentage={deltaTime:0,duration:t,current:0,from:this._percentage,to:e})},o.stopVelocity=function(){this._velocity=0},o.setVelocity=function(t){this._velocity=t},o.stopScroll=function(){this._scrollHandlePosition=null,this._scrollHandlePercentage=null,this.stopVelocity()},o.setPercentage=function(t){for(var e=this.internal_getHiddenSize(),i={x:0,y:0},n=0,a=null;n<100;){n++;var r=this._percentage-t;if(null!=a&&this._percentage===a)break;if(Math.abs(r)<u.FLT_EPSILON)break;a=this._percentage;var o=this.contentPosition-r*this.adapter.multiplier*e;if(i[this.adapter.mainAxis]=o,!this._setAutoScroll(i))break}100==n&&console.warn("Số vòng lặp đã đạt đến giá trị tối đa. Cố gắng không sửa đổi kích thước thường xuyên trong quá trình cuộn.")},o.calcOffset=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.contentPosition);var i=0;if(this.movementType==y.Unrestricted)return i;var n=this._getContentMaxBoundaryOffset(t,e),a=this._getContentMinBoundaryOffset(t,e),r=this._getMaxBoundaryOffset(n),o=this._getMinBoundaryOffset(a);!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize&&(this.adapter.isVertical?(r-=this.adapter.viewManager.top,o+=this.adapter.viewManager.bottom):(r-=this.adapter.viewManager.left,o+=this.adapter.viewManager.right));var s=0,h=0;if(this.adapter.centerManager.enabled&&this.adapter.viewManager.groupLength>0)h=this.adapter.centerManager.max,s=this.adapter.centerManager.min;else{var l=this.adapter.viewManager.getMagneticOffset();r-=l,o-=l}return this.adapter.releaseManager.enabled&&(h=Math.max(h,this.adapter.releaseManager.max),s=Math.max(s,this.adapter.releaseManager.min)),r-=h,(o+=s)<-.001?i=o:r>.001&&(i=r),i},r(e,[{key:"view",get:function(){return this._view},set:function(t){this._view=t}},{key:"content",get:function(){return this._content},set:function(t){this._content=t}},{key:"orientation",get:function(){return this._orientation},set:function(t){t!=this._orientation&&(this._orientation=t,this.emit(at.ON_CHANGED_ORIENTATION))}},{key:"_viewMin",get:function(){return-this.adapter.mainAxisSize}},{key:"_viewMax",get:function(){return this.adapter.mainAxisSize}},{key:"_defaultMin",get:function(){return 1==this.adapter.multiplier?-this.adapter.mainAxisSize:0}},{key:"_defaultMax",get:function(){return 1==this.adapter.multiplier?0:this.adapter.mainAxisSize}},{key:"isMyEventAndMoved",get:function(){return this._isMyEventAndMoved}},{key:"velocity",get:function(){return this._velocity}},{key:"scrollDirection",get:function(){return this._scrollDirection}},{key:"laseScrollDirection",get:function(){return this._laseScrollDirection}},{key:"percentage",get:function(){return this._percentage}},{key:"dragging",get:function(){return this._dragging}},{key:"boundaryOffset",get:function(){return this._boundaryOffset}},{key:"parentAdapter",get:function(){return this._parentAdapter}},{key:"canAutoScroll",get:function(){return!this.dragging&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize}},{key:"canTouch",get:function(){return this.touchMode==f.AlwaysAllow||this.touchMode!=f.Disabled&&(!!this.adapter.centerManager.enabled||(!!this.adapter.releaseManager.enabled||this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize))}},{key:"contentPosition",get:function(){return this.content.node.position[this.adapter.mainAxis]}}]),e}(g)).Event=at,B=e((V=$).prototype,"_view",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(V.prototype,"view",[w],Object.getOwnPropertyDescriptor(V.prototype,"view"),V.prototype),F=e(V.prototype,"_content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(V.prototype,"content",[P],Object.getOwnPropertyDescriptor(V.prototype,"content"),V.prototype),G=e(V.prototype,"_orientation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Vertical}}),e(V.prototype,"orientation",[N],Object.getOwnPropertyDescriptor(V.prototype,"orientation"),V.prototype),X=e(V.prototype,"touchMode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Auto}}),W=e(V.prototype,"movementType",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Elastic}}),Z=e(V.prototype,"elasticity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),j=e(V.prototype,"inertia",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=e(V.prototype,"decelerationRate",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.135}}),Y=e(V.prototype,"aboutToStopVelocity",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),J=e(V.prototype,"cancelInnerEvents",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K=e(V.prototype,"nestedMinThreshold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.001}}),Q=e(V.prototype,"nestedMaxThreshold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.999}}),k=V))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollViewBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollViewBaseLine.ts"],(function(e){var t,i,n,r,s,l,a,o,c,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,l=e._decorator,a=e.Node,o=e.Prefab,c=e.instantiate,h=e.Component},function(e){u=e.ScrollViewBaseLine}],execute:function(){var f,m,L,p,v,d,g;s._RF.push({},"c6578BkEldD6Ymz3t6pB6h0","ScrollViewBase",void 0);var b=l.ccclass,S=l.property;e("ScrollViewBase",(f=b("ScrollViewBase"),m=S(a),L=S(o),f((d=t((v=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return t=e.call.apply(e,[this].concat(s))||this,n(t,"content",d,r(t)),n(t,"prefabLine",g,r(t)),t.onSelectedItem=void 0,t.onCreatedItem=void 0,t.itemPerLine=0,t.firstLine=null,t.lines=[],t.items=[],t}i(t,e);var s=t.prototype;return s.init=function(e){e.length<=0||(this.items=e,this.createFristLine(),this.createLines(),this.setLineData())},s.createLines=function(){for(var e=Math.ceil(this.items.length/this.itemPerLine),t=this.lines.length;t<e;t++)this.createLine()},s.setLineData=function(){var e=this;if(!(this.lines.length<=0)){for(var t=0,i=0,n=function(t,i){t.node.active=!0,t.onSelectItem=e.onLineSelectItem.bind(e),t.onCreatedItem=e.onLineCreateItem.bind(e),t.init(i)},r=0;r<this.items.length;r+=this.itemPerLine){var s=this.items.slice(r,r+this.itemPerLine);n(this.lines[t],s),i=r+s.length,t++}if(i<this.items.length-1){var l=this.items.slice(i,this.items.length);n(this.lines[t],l)}for(var a=++t;a<this.lines.length;a++)this.lines[a].node.active=!1}},s.createFristLine=function(){var e;null==this.firstLine&&(this.firstLine=this.createLine(),this.itemPerLine=null==(e=this.firstLine)?void 0:e.getChildNumber())},s.createLine=function(){var e=c(this.prefabLine);e.parent=this.content;var t=e.getComponent(u);return this.lines.push(t),t},s.onLineCreateItem=function(e){var t;null==(t=this.onCreatedItem)||t.call(this,e)},s.onLineSelectItem=function(e){var t;null==(t=this.onSelectedItem)||t.call(this,e)},t}(h)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"prefabLine",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollViewBaseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,c=e.Component}],execute:function(){var r;n._RF.push({},"24d73F5z1hKK5U8r6924kDc","ScrollViewBaseItem",void 0);var i=o.ccclass;o.property,e("ScrollViewBaseItem",i("ScrollViewBaseItem")(r=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).onSelected=void 0,t}t(n,e);var o=n.prototype;return o.init=function(e,t){this.onSelected=t},o.onTouch_Main=function(){var e;null==(e=this.onSelected)||e.call(this,this)},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollViewBaseLine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollViewBaseItem.ts"],(function(t){var e,i,n,s,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.Component},function(t){l=t.ScrollViewBaseItem}],execute:function(){var o;i._RF.push({},"4fd8fTpdO9H04vVXP8RzKRM","ScrollViewBaseLine",void 0);var r=n.ccclass;t("ScrollViewBaseLine",r("ScrollViewBaseLine")(o=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).items=[],e.itemData=[],e.onSelectItem=void 0,e.onCreatedItem=void 0,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this.getChilds()},n.getChildNumber=function(){return this.items.length>0&&this.items.length,this.getChilds(),this.items.length},n.getChilds=function(){this.items.length>0||(this.items=this.getComponentsInChildren(l))},n.init=function(t){var e=this;this.getChilds(),this.itemData=t;for(var i=0;i<this.items.length;i++){var n=this.items[i],s=i<t.length;if(s&&(s=null!=t[0]),n.node.active=s,s){var l,o=t[i];n.init(o,(function(t){null==e.onSelectItem||e.onSelectItem(t)})),null==(l=this.onCreatedItem)||l.call(this,n)}}},i}(s))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/shadergraph.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c03d0yZbI5CPJyIvpnia5dO","shadergraph",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/sign.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){i=t.register},function(t){o=t.ShaderNode},function(t){c=t.slot}],execute:function(){var u;n._RF.push({},"48af6KxjgJDrLG+h1577MoC","sign",void 0);t("default",i({menu:"Math/Round/Sign",title:"Sign"})(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).data={inputs:[c("In",r.ZERO,"vec4","vector")],outputs:[c("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var i=n.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = sign("+t+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/simple-noise.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(e){var t,n,i,o,r,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.Vec2},function(e){o=e.register},function(e){r=e.ShaderNode},function(e){c=e.ConcretePrecisionType},function(e){s=e.slot}],execute:function(){var u;n._RF.push({},"35746vutFFE/Y01CS8ARMHq","simple-noise",void 0);e("default",o({menu:"Procedural/Noise/SimpleNoise",title:"SimpleNoise"})(u=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=c.Fixed,t.depChunks=["noise"],t.data={inputs:[s("uv",i.ZERO,"vec2","vector"),s("scale",0,"float","vector")],outputs:[s("Out",0,"float","vector")]},t}t(n,e);var o=n.prototype;return o.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},o.generateCode=function(){var e=this.getInputValue(0);this.inputs[0].connectSlot||(e="v_uv.xy");var t=this.getInputValue(1);return this.getOutputVarDefine(0)+" = SimpleNoise("+e+", "+t+");"},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/sine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,i,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){i=t.register},function(t){o=t.ShaderNode},function(t){c=t.slot}],execute:function(){var u;n._RF.push({},"203ea3iMklAUK9FzJeavWJF","sine",void 0);t("default",i({menu:"Math/Trigonometry/Sine",title:"Sine"})(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).data={inputs:[c("In",r.ZERO,"vec4","vector")],outputs:[c("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var i=n.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = sin("+t+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/slider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,r,i,o,c,s;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){r=t.cclegacy},function(t){i=t.register},function(t){o=t.ShaderNode},function(t){c=t.ConcretePrecisionType},function(t){s=t.slot}],execute:function(){var u;r._RF.push({},"263a8VilSVCp4Eyo8YtLJnX","slider",void 0);t("default",i({menu:"Input/Basic/Slider",title:"Slider"})(u=function(t){function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=c.Fixed,e.data={inputs:[s("In",0,"float","vector")],outputs:[s("Out",0,"float","vector")]},e}e(r,t);var i=r.prototype;return i.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = "+t+";\n        "},n(r,[{key:"type",get:function(){return"Slider"}}]),r}(o))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/slot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./context.ts"],(function(t){var e,n,i,o,c,s,r,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,i=t.ValueType},function(t){o=t.getPrecisionName,c=t.getValueElementStr,s=t.getFloatString,r=t.getValueConcretePrecision},function(t){a=t.shaderContext}],execute:function(){t("resetGlobalShaderSlotID",(function(){u=0})),n._RF.push({},"37bc8lcJkpAuZFrukwcAg+H","slot",void 0);var u=0;var l=t("ShaderSlotType",function(t){return t[t.Input=0]="Input",t[t.Output=1]="Output",t}({}));t("ShaderSlot",function(){function t(t,e){this.data=void 0,this.globalID=0,this.id=0,this.displayName="",this.type=l.Input,this.defaultValue=void 0,this.value=void 0,this.connectSlots=[],this.node=void 0,this._concretePrecision=-1,this.displayName=t.display,this.defaultValue=t.default,t.default instanceof i?this.value=t.default.clone():this.value=t.default,this.data=t,this.node=e,this.globalID=u++}return e(t,[{key:"connectSlot",get:function(){var t=this.connectSlots[0];return t&&a.getLocalVars.includes(t.node)?a.localVars.find((function(e){return e.name===t.node.name})).inputs[0].connectSlot:this.connectSlots[0]},set:function(t){this.connectSlots.length=0,t&&(this.connectSlots[0]=t)}},{key:"connectNode",get:function(){return this.connectSlot&&this.connectSlot.node}},{key:"varName",get:function(){var t;return null!=(t=this.node)&&t.isPropertyNode?this.node.name:"var_"+this.globalID}},{key:"varDefine",get:function(){var t=o(this.concretePrecision,this.data.type);return t&&(t+=" "),t+this.varName}},{key:"precisionName",get:function(){return o(this.concretePrecision,this.data.type)}},{key:"isVector",get:function(){return"vector"===this.data.connectType}},{key:"slotValue",get:function(){var t=this.defaultConcretePrecision,e=this.concretePrecision,n="";if(this.connectSlot){if(t=this.connectSlot.concretePrecision,n=this.connectSlot.varName,this.isVector&&e!==t)if(e<t)1===e?n+=".x":2===e?n+=".xy":3===e&&(n+=".xyz");else if(1!==t){for(var i=e-t,o=[],a=0;a<i;a++)o.push("0.");n+=", "+o.join(", ")}}else{var u=this.value;if(this.isVector){var l=c(u,0),h=c(u,1),d=c(u,2),f=c(u,3);"object"!=typeof u&&(l=s(u)),t=r(u);for(var v=[l,h,d,f],p=[],y=0;y<e;y++)p.push(void 0===v[y]?0:v[y]);n=p.join(", ")}else n=u}var g=""+n;return this.isVector&&(2===e?g="vec2("+n+")":3===e?g="vec3("+n+")":4===e&&(g="vec4("+n+")")),g}},{key:"defaultConcretePrecision",get:function(){var t=1,e=this.defaultValue;return"object"==typeof e&&(void 0!==e.w?t=4:void 0!==e.z?t=3:void 0!==e.y&&(t=2)),t}},{key:"concretePrecision",get:function(){if(-1===this._concretePrecision){var t,e=this.defaultValue;if(void 0===e)null!=(t=this.node)&&t.isPropertyNode&&(e=this.node.property.value);void 0===e&&console.error("Slot Value is undefined, concrete precision maybe wrong."),this._concretePrecision=r(e)}return this._concretePrecision}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/smoothstep.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,o,r,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){r=t.register},function(t){c=t.ShaderNode},function(t){s=t.slot}],execute:function(){var u;n._RF.push({},"d4d9cMuNpBHKICVJVXTyXRO","smoothstep",void 0);t("default",r({menu:"Math/Interpolation/Smoothstep",title:"Smoothstep"})(u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))||this).data={inputs:[s("Edge1",o.ZERO,"vec4","vector"),s("Edge2",o.ZERO,"vec4","vector"),s("In",o.ZERO,"vec4","vector")],outputs:[s("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = smoothstep("+t+", "+e+", "+n+");\n        "},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/SocketEventDefines.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f75e0dYk2hItL6AtoKH1J3L","SocketEventDefines",void 0);e("SOCKET_EVENT",function(e){return e.CONNECT="connect",e.DISCONNECT="disconnect",e.CONNECT_ERROR="connect_error",e.CUSTOM_ERROR="custom_error",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SongSelectionManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BeatmapManager.ts","./AudioManager2.ts","./GameplayManager.ts","./MTUIManager.ts"],(function(e){var t,i,a,n,r,s,o,l,u,c,g,p,h,f,d,m,v,b,w,y,L,B,P,M,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,l=e._decorator,u=e.ScrollView,c=e.Prefab,g=e.Node,p=e.ToggleContainer,h=e.ProgressBar,f=e.Label,d=e.Sprite,m=e.Button,v=e.Layout,b=e.instantiate,w=e.Vec3,y=e.tween,L=e.Component},function(e){B=e.BeatmapManager},function(e){P=e.MagicTilesAudioManager},function(e){M=e.GameplayManager},function(e){I=e.MTUIManager}],execute:function(){var S,T,A,C,D,E,F,U,z,R,x,N,k,H,Y,G,O,X,_,V,W,j,q,J,K,Q,Z,$,ee,te,ie,ae,ne,re,se,oe,le;o._RF.push({},"799d06L3O1HXqAs90sgfX8H","SongSelectionManager",void 0);var ue=l.ccclass,ce=l.property,ge=function(e){return e[e.ALPHABETICAL=0]="ALPHABETICAL",e[e.DIFFICULTY=1]="DIFFICULTY",e[e.NEWEST=2]="NEWEST",e[e.POPULARITY=3]="POPULARITY",e}(ge||{}),pe=function(e){return e[e.ALL=0]="ALL",e[e.EASY=1]="EASY",e[e.MEDIUM=2]="MEDIUM",e[e.HARD=3]="HARD",e[e.EXTREME=4]="EXTREME",e}(pe||{});e("SongSelectionManager",(S=ue("SongSelectionManager"),T=ce(u),A=ce(c),C=ce(g),D=ce(g),E=ce(p),F=ce(p),U=ce(h),z=ce(g),R=ce(f),x=ce(d),N=ce(f),k=ce(f),H=ce(f),Y=ce(f),G=ce(f),O=ce(m),X=ce(m),S((W=t((V=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"songListScrollView",W,n(t)),a(t,"songItemPrefab",j,n(t)),a(t,"songItemContainer",q,n(t)),a(t,"songDetailsPanel",J,n(t)),a(t,"difficultyToggles",K,n(t)),a(t,"sortMethodToggles",Q,n(t)),a(t,"previewProgressBar",Z,n(t)),a(t,"noSongsMessage",$,n(t)),a(t,"searchResultsLabel",ee,n(t)),a(t,"songCoverImage",te,n(t)),a(t,"songTitleLabel",ie,n(t)),a(t,"songArtistLabel",ae,n(t)),a(t,"songBPMLabel",ne,n(t)),a(t,"songDifficultyLabel",re,n(t)),a(t,"songDurationLabel",se,n(t)),a(t,"playButton",oe,n(t)),a(t,"previewButton",le,n(t)),t.beatmapManager=null,t.audioManager=null,t.gameplayManager=null,t.loadedBeatmaps=[],t.filteredBeatmaps=[],t.selectedBeatmapId="",t.previewAudioId="",t.previewAS=null,t.isPreviewPlaying=!1,t.previewUpdateTimer=null,t.currentSortMethod=ge.ALPHABETICAL,t.currentDifficultyFilter=pe.ALL,t.searchText="",t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.beatmapManager=B.instance,this.audioManager=P.instance,this.initializeUI(),this.loadBeatmaps()},o.onDestroy=function(){this.stopPreview(),null!==this.previewUpdateTimer&&(clearInterval(this.previewUpdateTimer),this.previewUpdateTimer=null)},o.initializeUI=function(){this.songDetailsPanel&&(this.songDetailsPanel.active=!1),this.sortMethodToggles,this.difficultyToggles,this.noSongsMessage&&(this.noSongsMessage.active=!1),this.searchResultsLabel&&(this.searchResultsLabel.node.active=!1)},o.loadBeatmaps=function(){var e=r(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I.instance.showLoadingScreen(!0),e.next=4,this.beatmapManager.loadBeatmapIndex();case 4:this.loadedBeatmaps=e.sent,this.applyFiltersAndSort(),I.instance.showLoadingScreen(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to load beatmaps:",e.t0),I.instance.showLoadingScreen(!1),I.instance.showPopup("Failed to load song list. Please try again later.","Error");case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),o.refreshSongList=function(){var e=this;if(this.songItemContainer&&this.songItemContainer.removeAllChildren(),0!==this.filteredBeatmaps.length){this.noSongsMessage&&(this.noSongsMessage.active=!1),this.searchText&&this.searchResultsLabel?(this.searchResultsLabel.string="Found "+this.filteredBeatmaps.length+' results for "'+this.searchText+'"',this.searchResultsLabel.node.active=!0):this.searchResultsLabel&&(this.searchResultsLabel.node.active=!1),this.filteredBeatmaps.forEach((function(t,i){e.createSongItem(t,i)}));var t=this.songItemContainer.getComponent(v);t&&t.updateLayout()}else this.noSongsMessage&&(this.noSongsMessage.active=!0)},o.createSongItem=function(e,t){var i,a,n,r,s=this;if(this.songItemPrefab&&this.songItemContainer){var o=b(this.songItemPrefab);o.parent=this.songItemContainer;var l=null==(i=o.getChildByName("TitleLabel"))?void 0:i.getComponent(f),u=null==(a=o.getChildByName("ArtistLabel"))?void 0:a.getComponent(f),c=null==(n=o.getChildByName("DifficultyLabel"))?void 0:n.getComponent(f),p=null==(r=o.getChildByName("CoverImage"))?void 0:r.getComponent(d);if(l&&(l.string=e.title),u&&(u.string=e.artist),c&&(c.string=e.difficultyName+" (Lv."+e.level+")"),p&&e.coverImage,e.id===this.selectedBeatmapId){var h,m=null==(h=o.getChildByName("Background"))?void 0:h.getComponent(d);m&&m.color.set(200,200,255,255)}o.on(g.EventType.TOUCH_END,(function(){s.onSongItemClicked(e.id)})),o.scale=new w(.9,.9,1),y(o).delay(.05*t).to(.2,{scale:new w(1,1,1)}).start()}},o.onSongItemClicked=function(e){this.stopPreview(),this.selectedBeatmapId=e,this.showSongDetails(e),this.refreshSongList()},o.showSongDetails=function(){var e=r(s().mark((function e(t){var i,a,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.songDetailsPanel){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.beatmapManager.loadBeatmapInfo(t);case 4:if(i=e.sent){e.next=8;break}return console.error("Failed to load beatmap details for ID: "+t),e.abrupt("return");case 8:this.songDetailsPanel.active=!0,this.songTitleLabel&&(this.songTitleLabel.string=i.metadata.title),this.songArtistLabel&&(this.songArtistLabel.string=i.metadata.artist),this.songBPMLabel&&(this.songBPMLabel.string=i.metadata.bpm+" BPM"),this.songDifficultyLabel&&(this.songDifficultyLabel.string=i.metadata.difficultyName+" (Lv."+i.metadata.level+")"),this.songDurationLabel&&(a=i.notes.length>0?i.notes[i.notes.length-1].time:0,n=Math.floor(a/60),r=Math.floor(a%60),this.songDurationLabel.string=n+":"+(r<10?"0"+r:r)),this.songCoverImage&&i.metadata.coverImage,this.playButton&&(this.playButton.interactable=!0),this.previewButton&&(this.previewButton.interactable=!0),this.songDetailsPanel.scale=new w(.9,.9,1),y(this.songDetailsPanel).to(.2,{scale:new w(1,1,1)}).start();case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.startPreview=function(){var e,t=this;if(this.selectedBeatmapId){var i=this.beatmapManager.getActiveBeatmap();if(i){this.stopPreview();null==(e=i.metadata.preview)||e.start;if(this.previewAS=this.audioManager.playSound(i.metadata.audioPath,.8),this.isPreviewPlaying=!0,this.previewButton){var a,n=null==(a=this.previewButton.node.getChildByName("Label"))?void 0:a.getComponent(f);n&&(n.string="Stop")}this.previewUpdateTimer=setInterval((function(){t.updatePreviewProgress()}),100)}}},o.stopPreview=function(){if(this.previewAudioId&&this.isPreviewPlaying){if(this.previewAS.stop(),this.isPreviewPlaying=!1,this.previewButton){var e,t=null==(e=this.previewButton.node.getChildByName("Label"))?void 0:e.getComponent(f);t&&(t.string="Preview")}null!==this.previewUpdateTimer&&(clearInterval(this.previewUpdateTimer),this.previewUpdateTimer=null),this.previewProgressBar&&(this.previewProgressBar.progress=0)}},o.togglePreview=function(){this.isPreviewPlaying?this.stopPreview():this.startPreview()},o.updatePreviewProgress=function(){if(this.isPreviewPlaying&&this.previewProgressBar){var e=this.previewAS;if(e){var t=e.duration,i=e.currentTime;t>0&&(this.previewProgressBar.progress=i/t),i>=t&&this.stopPreview()}}},o.applyFiltersAndSort=function(){var e=this;if(this.loadedBeatmaps.length){if(this.filteredBeatmaps=[].concat(this.loadedBeatmaps),this.currentDifficultyFilter!==pe.ALL&&(this.filteredBeatmaps=this.filteredBeatmaps.filter((function(t){var i=t.level;switch(e.currentDifficultyFilter){case pe.EASY:return i<=3;case pe.MEDIUM:return i>3&&i<=6;case pe.HARD:return i>6&&i<=9;case pe.EXTREME:return i>9;default:return!0}}))),this.searchText){var t=this.searchText.toLowerCase();this.filteredBeatmaps=this.filteredBeatmaps.filter((function(e){return e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t)}))}switch(this.currentSortMethod){case ge.ALPHABETICAL:this.filteredBeatmaps.sort((function(e,t){return e.title.localeCompare(t.title)}));break;case ge.DIFFICULTY:this.filteredBeatmaps.sort((function(e,t){return e.level-t.level}));break;case ge.NEWEST:this.filteredBeatmaps.sort((function(e,t){return t.id.localeCompare(e.id)}));break;case ge.POPULARITY:}this.refreshSongList()}},o.setSortMethod=function(e){this.currentSortMethod=e,this.applyFiltersAndSort()},o.setDifficultyFilter=function(e){this.currentDifficultyFilter=e,this.applyFiltersAndSort()},o.setSearchText=function(e){this.searchText=e,this.applyFiltersAndSort()},o.playSong=function(){if(this.selectedBeatmapId){if(this.stopPreview(),!this.gameplayManager){var e,t=null==(e=this.node.parent)?void 0:e.getChildByName("GameplayManager");t&&(this.gameplayManager=t.getComponent(M))}this.gameplayManager?this.gameplayManager.LoadBeatMap(this.selectedBeatmapId):console.error("GameplayManager not found")}},t}(L)).prototype,"songListScrollView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(V.prototype,"songItemPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(V.prototype,"songItemContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(V.prototype,"songDetailsPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(V.prototype,"difficultyToggles",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(V.prototype,"sortMethodToggles",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(V.prototype,"previewProgressBar",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(V.prototype,"noSongsMessage",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(V.prototype,"searchResultsLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(V.prototype,"songCoverImage",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(V.prototype,"songTitleLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(V.prototype,"songArtistLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(V.prototype,"songBPMLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(V.prototype,"songDifficultyLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(V.prototype,"songDurationLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(V.prototype,"playButton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(V.prototype,"previewButton",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=V))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/sphere-mask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,r,n,s,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t.Vec4},function(t){s=t.register},function(t){c=t.ShaderNode},function(t){o=t.slot}],execute:function(){var u;r._RF.push({},"2fd4cAU0iRIFbD4p8meWHjx","sphere-mask",void 0);t("default",s({menu:"Math/Vector/SphereMask",title:"SphereMask"})(u=function(t){function r(){for(var e,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))||this).data={inputs:[o("Coords",n.ZERO,"vec4","vector"),o("Center",n.ZERO,"vec4","vector"),o("Radius",0,"float","vector"),o("Hardness",0,"float","vector")],outputs:[o("Out",n.ZERO,"vec4","vector")]},e}e(r,t);var s=r.prototype;return s.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},s.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1),r=this.getInputValue(2),n=this.getInputValue(3);return"\n            "+this.getOutputVarDefine(0)+" = 1 - saturate((distance("+t+", "+e+") - "+r+") / (1 - "+n+"));\n        "},r}(c))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/split.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./base.ts","./type.ts","./utils.ts","./register.ts"],(function(t){var e,n,o,i,r,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},null,function(t){i=t.ShaderNode},function(t){r=t.ConcretePrecisionType},function(t){c=t.slot},function(t){u=t.register}],execute:function(){var s;n._RF.push({},"3da06y4hU1Ow4fHMuaVh9Ox","split",void 0);t("default",u({menu:"Channel/Split",title:"Split"})(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return(e=t.call.apply(t,[this].concat(i))||this).concretePrecisionType=r.Fixed,e.data={inputs:[c("Vector",new o,"vec4","vector")],outputs:[c("R",0,"float","vector"),c("G",0,"float","vector"),c("B",0,"float","vector"),c("A",0,"float","vector")]},e}return e(n,t),n.prototype.generateCode=function(){var t=this,e=this.getInputValue(0),n=[];return this.data.outputs.forEach((function(o){var i=t.getOutputSlotWithSlotName(o.display);i&&i.connectSlot&&n.push("float "+(null==i?void 0:i.varName)+" = "+e+"."+o.display.toLowerCase()+";")})),n.join("\n")},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/square-wave.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,r,u,c,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){u=e.register},function(e){c=e.ShaderNode},function(e){o=e.slot}],execute:function(){var a;n._RF.push({},"d9905hEvfVIh6Iwo+//rZfV","square-wave",void 0);e("default",u({menu:"Math/Wave/SquareWave",title:"SquareWave"})(a=function(e){function n(){for(var t,n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(t=e.call.apply(e,[this].concat(u))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var u=n.prototype;return u.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},u.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = 1.0 - 2.0 * round(frac("+e+"));\n        "},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/square.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,u,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){u=t.ShaderNode},function(t){o=t.slot}],execute:function(){var i;n._RF.push({},"861eejAxE9Kk5MHkzbOdXlI","square",void 0);t("default",c({menu:"Math/Basic/Square",title:"Square"})(i=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("A",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = sqrt("+t+");\n        "},n}(u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/step.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){u=t.slot}],execute:function(){var i;n._RF.push({},"2b4cb9lBRBMqrQTPqc1e+XN","step",void 0);t("default",c({menu:"Math/Round/Step",title:"Step"})(i=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[u("Edge",r.ZERO,"vec4","vector"),u("In",r.ZERO,"vec4","vector")],outputs:[u("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = step("+t+", "+e+");\n        "},n}(o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(t){var a,s,n,e,i,o,r;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,n=t._decorator,e=t.sys,i=t.native,o=t.log},function(t){r=t.Utils}],execute:function(){var c,h;s._RF.push({},"5e557ZxbcNFsbXuz8xq4hnD","storageManager",void 0);var u=n.ccclass;n.property,t("StorageManager",u("StorageManager")(((h=function(){function t(){this._jsonData={},this._path=null,this.KEY_CONFIG="coindfo",this._markSave=!1,this._saveTimer=-1}var s=t.prototype;return s.start=function(){var t;(this._jsonData={userId:""},this._path=this._getConfigPath(),e.isNative)?t=i.fileUtils.getValueMapFromFile(this._path)[this.KEY_CONFIG]:t=e.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=r.decrypt(t));try{var a=JSON.parse(t);this._jsonData=a}catch(t){}}},s.setConfigDataWithoutSave=function(t,a){var s=this._jsonData.userId;this._jsonData[s]?this._jsonData[s][t]=a:console.error("no account can not save")},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},s.getConfigData=function(t){var a=this._jsonData.userId;if(this._jsonData[a]){var s=this._jsonData[a][t];return s||""}return o("no account can not load"),""},s.removeGlobalData=function(t){delete this._jsonData[t]},s.setGlobalData=function(t,a){this._jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this._jsonData[t]},s.setUserId=function(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()},s.getUserId=function(){return this._jsonData.userId},s.scheduleSave=function(){this._markSave&&this.save()},s.markModified=function(){this._markSave=!0},s.save=function(){var t=JSON.stringify(this._jsonData),a="@"+r.encrypt(t);if(this._markSave=!1,e.isNative){var s={};s[this.KEY_CONFIG]=a,i.fileUtils.writeValueMapToFile(s,this._getConfigPath())}else{e.localStorage.setItem(this.KEY_CONFIG,a)}},s._getConfigPath=function(){var t=e.platform,a="";return t===e.OS.WINDOWS?a="src/conf":t===e.OS.LINUX?a="./conf":e.isNative?(a=i.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/SubGraphNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./index3.ts","./utils.ts","./register.ts"],(function(t){var n,e,r,u,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.ShaderNode},null,function(t){u=t.slot},function(t){o=t.register}],execute:function(){var s;e._RF.push({},"159abqfjclCYp0gqjzKIy69","SubGraphNode",void 0);t("default",o({style:{headerColor:"#757575"}})(s=function(t){function e(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t.call.apply(t,[this].concat(r))||this).data={inputs:[u("In",0,"any","any")],outputs:[u("Out",0,"any","any")]},n}return n(e,t),e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/SubGraphOutputNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./index3.ts","./utils.ts","./register.ts"],(function(t){var e,n,u,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){u=t.ShaderNode},null,function(t){r=t.slot},function(t){s=t.register}],execute:function(){var o;n._RF.push({},"a7a1dWl92NFI7N6B5WUHBcO","SubGraphOutputNode",void 0);t("default",s({title:"Output",master:!0,style:{headerColor:"#81ff2f"}})(o=function(t){function n(){for(var e,n=arguments.length,u=new Array(n),s=0;s<n;s++)u[s]=arguments[s];return(e=t.call.apply(t,[this].concat(u))||this).data={inputs:[r("Out",0,"any","any")]},e}return e(n,t),n}(u))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/substract.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,c,r,o,s,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec4},function(t){r=t.register},function(t){o=t.ShaderNode},function(t){s=t.ConcretePrecisionType},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"5fbb9DNFjJODZFHdbDe+csv","substract",void 0);t("default",r({menu:"Math/Basic/Substract",title:"Substract"})(u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=s.Max,e.data={inputs:[i("A",c.ZERO,"vec4","vector"),i("B",c.ZERO,"vec4","vector")],outputs:[i("Out",c.ZERO,"vec4","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = "+t+" - "+e+";\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/SurfaceMasterNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MasterNode.ts","./utils.ts","./index3.ts","./context.ts","./register.ts"],(function(e){var t,o,n,r,c,l,a,s,u,i,p;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){n=e.cclegacy,r=e.Vec3,c=e.Vec4},function(e){l=e.default,a=e.MasterSlotType},function(e){s=e.slot,u=e.path},null,function(e){i=e.shaderContext},function(e){p=e.register}],execute:function(){var h;n._RF.push({},"3dc0bllbkxAsKzvUgvzcrgb","SurfaceMasterNode",void 0);e("default",p({title:"Surface",master:!0})(h=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).data={inputs:[s("Vertex Position",r.ZERO,"vec3","vector",{slotType:a.Vertex,codeChunk:0}),s("Vertex Normal",r.ZERO,"vec3","vector",{slotType:a.Vertex,codeChunk:0}),s("Vertex Tangent",r.ZERO,"vec3","vector",{slotType:a.Vertex,codeChunk:0}),s("Albedo",new c(.5,.5,.5,.5),"color","vector",{slotType:a.Fragment,codeChunk:3}),s("Normal",r.ZERO,"vec3","vector",{slotType:a.Fragment,codeChunk:3}),s("Emission",r.ZERO,"vec3","vector",{slotType:a.Fragment,codeChunk:3}),s("Metallic",.6,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("Roughness",.5,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("Occlusion",1,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("SpecularIntensity",.5,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("Alpha",1,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("AlphaClipThreshold",.5,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("AnisotropyRotation",0,"float","vector",{slotType:a.Fragment,codeChunk:3}),s("AnisotropyShape",1,"float","vector",{slotType:a.Fragment,codeChunk:3})]},t}return t(n,e),n.prototype.generateCode=function(){var t,o;null==(t=this.getSlotWithSlotName("AnisotropyRotation"))||t.connectSlot,null==(o=this.getSlotWithSlotName("AnisotropyShape"))||o.connectSlot;return e.prototype.generateCode.call(this)},o(n,[{key:"templatePath",get:function(){return u.join(i.shaderTemplatesDir,"master/SurfaceMasterNode.effect")}}]),n}(l))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/tangent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,o,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){i=t.slot}],execute:function(){var u;n._RF.push({},"adcb4trf/1C6627yz7YeTXn","tangent",void 0);t("default",c({menu:"Math/Trigonometry/Tangent",title:"Tangent"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[i("In",r.ZERO,"vec4","vector")],outputs:[i("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = tan("+t+");\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/TapValidator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts","./BeatmapManager.ts"],(function(o){var t,n,i,e,a,c,s,u,r;return{setters:[function(o){t=o.applyDecoratedDescriptor,n=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){a=o.cclegacy,c=o._decorator,s=o.Component},function(o){u=o.HitRating},function(o){r=o.BeatmapManager}],execute:function(){var b,h,m,C,f,l;a._RF.push({},"7032aoU25dAwZKrnbS2Peig","TapValidator",void 0);var g=c.ccclass,p=c.property;o("TapValidator",g("TapValidator")((m=t((h=function(o){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=o.call.apply(o,[this].concat(a))||this,i(t,"audioOffset",m,e(t)),i(t,"perfectWindow",C,e(t)),i(t,"goodWindow",f,e(t)),i(t,"okWindow",l,e(t)),t.beatmapManager=null,t.combo={count:0,maxCount:0,lastRating:u.MISS,perfectCount:0,goodCount:0,okCount:0,missCount:0},t.onComboChangeCallbacks=[],t.onRatingCallbacks=[],t}n(t,o);var a=t.prototype;return a.onLoad=function(){this.resetCombo(),this.beatmapManager=r.instance},a.validateTap=function(o,t,n){return this.updateCombo(n),console.log("combo",this.combo),this.onRatingCallbacks.forEach((function(t){return t(o,n)})),n},a.updateCombo=function(o){var t=this;switch(o){case u.PERFECT:this.combo.perfectCount++,this.combo.count++;break;case u.GREAT:this.combo.goodCount++,this.combo.count=0;break;case u.COOL:this.combo.okCount++,this.combo.count=0;break;case u.MISS:this.combo.missCount++,this.combo.count=0}this.combo.count>this.combo.maxCount&&(this.combo.maxCount=this.combo.count),this.combo.lastRating=o,this.onComboChangeCallbacks.forEach((function(o){return o(t.combo.count)}))},a.resetCombo=function(){this.combo={count:0,maxCount:0,lastRating:u.MISS,perfectCount:0,goodCount:0,okCount:0,missCount:0},this.onComboChangeCallbacks.forEach((function(o){return o(0)}))},a.getCombo=function(){return this.combo.count},a.getMaxCombo=function(){return this.combo.maxCount},a.getAccuracy=function(){var o=this.combo.perfectCount+this.combo.goodCount+this.combo.okCount+this.combo.missCount;if(0===o)return 100;var t=100*this.combo.perfectCount+80*this.combo.goodCount+50*this.combo.okCount;return Math.round(t/(100*o)*100)},a.getRatingCounts=function(){return{perfect:this.combo.perfectCount,good:this.combo.goodCount,ok:this.combo.okCount,miss:this.combo.missCount}},a.getTotalNotes=function(){return this.combo.perfectCount+this.combo.goodCount+this.combo.okCount+this.combo.missCount},a.onComboChange=function(o){this.onComboChangeCallbacks.push(o)},a.offComboChange=function(o){var t=this.onComboChangeCallbacks.indexOf(o);-1!==t&&this.onComboChangeCallbacks.splice(t,1)},a.onRating=function(o){this.onRatingCallbacks.push(o)},a.offRating=function(o){var t=this.onRatingCallbacks.indexOf(o);-1!==t&&this.onRatingCallbacks.splice(t,1)},a.setAudioOffset=function(o){this.audioOffset=o},a.getAudioOffset=function(){return this.audioOffset},a.setHitWindows=function(o,t,n){this.perfectWindow=o,this.goodWindow=t,this.okWindow=n},a.isComboMilestone=function(o){return this.combo.count===o},a.calculateScore=function(){var o=Math.min(this.combo.maxCount/10,100),t=this.getAccuracy(),n=1e3*this.combo.perfectCount+500*this.combo.goodCount+100*this.combo.okCount;return Math.round(n*(1+o/100+t/100))},t}(s)).prototype,"audioOffset",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=t(h.prototype,"perfectWindow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),f=t(h.prototype,"goodWindow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),l=t(h.prototype,"okWindow",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),b=h))||b);a._RF.pop()}}}));

System.register("chunks:///_virtual/texture-asset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts"],(function(e){var t,n,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.ShaderNode},function(e){c=e.ConcretePrecisionType}],execute:function(){n._RF.push({},"ae6c5dYR/dM3qMNrhlBY9Hs","texture-asset",void 0);e("default",function(e){function n(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).concretePrecisionType=c.Texture,t}return t(n,e),n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/texture2d-asset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./texture-asset.ts"],(function(t){var e,u,n;return{setters:[function(t){e=t.inheritsLoose},function(t){u=t.cclegacy},function(t){n=t.default}],execute:function(){u._RF.push({},"1e7d5h/dpNKOKPycPdVfiDZ","texture2d-asset",void 0);t("default",function(t){function u(){return t.apply(this,arguments)||this}return e(u,t),u.prototype.generateCode=function(){return"sampler2D "+this.getOutputVarName(0)+" = "+this.getInputValue(0)+";"},u}(n));u._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MTDefines.ts"],(function(t){var e,i,n,o,s,r,a,h,l,c,u,f,m,d,p,g,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Sprite,h=t.UITransform,l=t.UIOpacity,c=t.Node,u=t.Vec3,f=t.Size,m=t.game,d=t.tween,p=t.Component,g=t.Color},function(t){T=t.NoteType}],execute:function(){var v,y,w,S,E,b,H,C,I,L,D,P,M,A,z,R,N,O,Y,G,k,B,V,F;s._RF.push({},"0693cAdL+JB3Jn4GXrhDvzS","Tile",void 0);var x=r.ccclass,W=r.property,_=t("TileStatus",function(t){return t[t.WAITING=0]="WAITING",t[t.ACTIVE=1]="ACTIVE",t[t.HOLDING=2]="HOLDING",t[t.HIT=3]="HIT",t[t.MISSED=4]="MISSED",t[t.EXPIRED=5]="EXPIRED",t}({})),U=t("HitRating",function(t){return t[t.PERFECT=0]="PERFECT",t[t.GREAT=1]="GREAT",t[t.COOL=2]="COOL",t[t.MISS=3]="MISS",t}({}));t("Tile",(v=x("Tile"),y=W(a),w=W(h),S=W(l),E=W(c),b=W({type:c,group:{name:"Long Press"}}),H=W({type:c,group:{name:"Long Press"}}),C=W({type:h,group:{name:"Long Press"}}),v(((F=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"background",D,o(e)),n(e,"transform",P,o(e)),n(e,"opacity",M,o(e)),n(e,"bufferHeight",A,o(e)),n(e,"nodeBeginning",z,o(e)),n(e,"nodeLongPress",R,o(e)),n(e,"nodeHoldEffect",N,o(e)),n(e,"holdEffectTransform",O,o(e)),n(e,"normalColor",Y,o(e)),n(e,"holdColor",G,o(e)),n(e,"slideColor",k,o(e)),n(e,"hitColor",B,o(e)),n(e,"missColor",V,o(e)),e.noteData=null,e.status=_.WAITING,e.startY=0,e.targetY=0,e.lane=0,e.scrollSpeed=0,e.spawnTime=0,e.hitTime=0,e.touchStartTime=0,e.touchEndTime=0,e.isTouching=!1,e.isLongPress=!1,e.isSliding=!1,e.moveTween=null,e.scaleTween=null,e.opacityTween=null,e.holdRating=U.MISS,e.movementStartTime=0,e.movementDuration=0,e.movementStartY=0,e.movementTargetY=0,e.isMovementActive=!1,e.tempVec3=new u,e.updatePriority=0,e.frameCounter=0,e.holdRange=0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.background||(this.background=this.getComponent(a)),this.transform||(this.transform=this.getComponent(h)),this.opacity||(this.opacity=this.getComponent(l)),this.nodeHoldEffect&&!this.holdEffectTransform&&(this.holdEffectTransform=this.nodeHoldEffect.getComponent(h))},s.init=function(t,e,i,n,o,s,r){this.noteData=t,this.lane=e,this.startY=i,this.targetY=n,this.scrollSpeed=s,this.status=_.WAITING,this.holdRange=0,this.isTouching=!1,this.touchStartTime=0,this.touchEndTime=0,this.node.position=new u(0,i,0),this.moveTween&&(this.moveTween.stop(),this.moveTween=null),this.scaleTween&&(this.scaleTween.stop(),this.scaleTween=null),this.opacityTween&&(this.opacityTween.stop(),this.opacityTween=null),this.opacity.opacity=255;var a=t.duration*s;this.transform.contentSize=new f(o,Math.max(a,r)),this.transform.node.position=new u(0,-this.bufferHeight,0),this.nodeBeginning.active=!1,t.type===T.HOLD&&t.duration>0?(this.isLongPress=!0,this.setLongPressNodeActive(!0),this.nodeHoldEffect&&(this.nodeHoldEffect.active=!1),this.holdEffectTransform&&(this.holdEffectTransform.height=0)):(this.isLongPress=!1,this.setLongPressNodeActive(!1)),t.type===T.SLIDE?this.isSliding=!0:this.isSliding=!1,this.node.active=!0},s.setBeginningNodeActive=function(t){this.nodeBeginning.active=t},s.setLongPressNodeActive=function(t){this.nodeLongPress.active=t},s.getTileHeight=function(){return this.transform.contentSize.height},s.setBufferHeight=function(t){this.bufferHeight=t,this.transform.node.position=new u(0,-this.bufferHeight,0)},s.startMovement=function(t,e){this.status=_.ACTIVE,this.spawnTime=Date.now()/1e3;var i=this.targetY-(t*this.scrollSpeed-(this.startY-this.targetY));this.movementStartTime=e,this.movementDuration=t,this.movementStartY=this.node.position.y,this.movementTargetY=i,this.isMovementActive=!0,this.moveTween&&(this.moveTween.stop(),this.moveTween=null)},s.setUpdatePriority=function(t){this.updatePriority=t},s.update=function(t){this.updatePriority>0&&(this.frameCounter=(this.frameCounter+1)%(this.updatePriority+1),0!==this.frameCounter)||(this.isMovementActive&&this.updateTileMovement(),this.status===_.HOLDING&&this.isLongPress&&this.nodeHoldEffect&&this.updateHoldEffect(t))},s.updateTileMovement=function(){var t=this.calculateCurrentTime()-this.movementStartTime,e=Math.min(1,t/this.movementDuration),i=this.movementStartY+(this.movementTargetY-this.movementStartY)*e;return this.tempVec3.set(0,i,0),this.node.position=this.tempVec3,e>=1&&(this.isMovementActive=!1),i},s.calculateCurrentTime=function(){return Date.now()/1e3-this.spawnTime+this.movementStartTime},s.tap=function(t){if(!this.noteData||this.status!==_.ACTIVE)return U.MISS;this.touchStartTime=t,this.isTouching=!0;var e,i=this.noteData.time,n=Math.abs(t-i),o=m.deltaTime,s=Math.min(Math.max(o/(1/60),1),3),r=.3*s,a=.5*s;return e=n<.1*s?U.PERFECT:n<r?U.GREAT:n<a?U.COOL:U.MISS,this.noteData.type===T.TAP?this.completeHit(e):this.noteData.type===T.HOLD&&this.triggerLongPress(e),e},s.release=function(t){if(!this.isTouching||!this.isLongPress||!this.noteData)return U.MISS;if(this.touchEndTime=t,this.isTouching=!1,this.noteData.type===T.HOLD){var e=this.noteData.duration,i=this.touchEndTime-this.touchStartTime,n=m.deltaTime,o=Math.min(Math.max(n/(1/60),1),2),s=U.COOL,r=i/e,a=.8/o;return r>=.95/o?s=U.PERFECT:r>=a&&(s=U.GREAT),this.completeHit(s),s}return U.MISS},s.completeHit=function(t){t!==U.MISS?(this.status=_.HIT,this.playHitAnimation()):this.miss()},s.triggerLongPress=function(t){if(t!==U.MISS){if(this.status=_.HOLDING,this.holdRating=t,this.holdRange=Math.abs(this.node.position.y-this.targetY),this.nodeHoldEffect&&(this.nodeHoldEffect.active=!0,this.holdEffectTransform)){var e=this.holdEffectTransform.contentSize;this.holdEffectTransform.contentSize=new f(e.width,0)}this.background.color=this.holdColor}else this.miss()},s.playHitAnimation=function(){this.background.color=this.normalColor,this.opacity.opacity=100},s.miss=function(){var t=this;this.status=_.MISSED,e.missCount++,this.background.color=this.missColor,this.opacityTween=d(this.opacity).to(.3,{opacity:100}).call((function(){t.node.active=!1})).start()},s.getNote=function(){return this.noteData},s.getStatus=function(){return this.status},s.getLane=function(){return this.lane},s.isLongPressType=function(){return this.isLongPress},s.isSlideType=function(){return this.isSliding},s.recycle=function(){this.moveTween&&(this.moveTween.stop(),this.moveTween=null),this.scaleTween&&(this.scaleTween.stop(),this.scaleTween=null),this.opacityTween&&(this.opacityTween.stop(),this.opacityTween=null),this.status=_.WAITING,this.noteData=null,this.isTouching=!1,this.isLongPress=!1,this.isSliding=!1,this.holdRange=0,this.nodeHoldEffect&&(this.nodeHoldEffect.active=!1),this.isMovementActive=!1,this.node.active=!1},s.updateHoldEffect=function(t){if(this.isTouching){this.holdRange=Math.min(this.holdRange+this.scrollSpeed*t,this.transform.contentSize.height-this.bufferHeight),this.nodeHoldEffect.active||(this.nodeHoldEffect.active=!0);var e=this.nodeHoldEffect.position,i=this.holdRange+this.bufferHeight;if(this.nodeHoldEffect.position=new u(e.x,i,e.z),this.holdEffectTransform){var n=this.holdEffectTransform.contentSize;this.holdEffectTransform.contentSize=new f(n.width,i)}}},e}(p)).missCount=0,D=e((L=F).prototype,"background",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(L.prototype,"transform",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(L.prototype,"opacity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(L.prototype,"bufferHeight",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),z=e(L.prototype,"nodeBeginning",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(L.prototype,"nodeLongPress",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(L.prototype,"nodeHoldEffect",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(L.prototype,"holdEffectTransform",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(L.prototype,"normalColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(0,0,0,255)}}),G=e(L.prototype,"holdColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(50,50,200,255)}}),k=e(L.prototype,"slideColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(50,200,50,255)}}),B=e(L.prototype,"hitColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(200,200,200,255)}}),V=e(L.prototype,"missColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(200,50,50,255)}}),I=L))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/TileManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BeatmapManager.ts","./Tile.ts","./AudioManager2.ts","./MTUIManager.ts"],(function(e){var t,i,a,n,s,o,r,l,h,u,c,d,p,m,g,f,T,v,y,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,r=e._decorator,l=e.Prefab,h=e.Node,u=e.Vec3,c=e.instantiate,d=e.UITransform,p=e.director,m=e.Component},function(e){g=e.BeatmapManager},function(e){f=e.Tile,T=e.TileStatus,v=e.HitRating},function(e){y=e.MagicTilesAudioManager},function(e){P=e.MTUIManager}],execute:function(){var S,A,b,M,w,x,I,L,C,Y,z,F,k,H,N,B;o._RF.push({},"bf871T6LV9LXZ2T/yZkKnKK","TileManager",void 0);var _=r.ccclass,U=r.property;e("TileManager",(S=_("TileManager"),A=U(l),b=U([h]),S((x=t((w=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,a(t,"tilePrefab",x,n(t)),a(t,"laneContainers",I,n(t)),a(t,"spawnPositionY",L,n(t)),a(t,"targetPositionY",C,n(t)),a(t,"recyclePositionY",Y,n(t)),a(t,"lookAheadTime",z,n(t)),a(t,"defaultScrollSpeed",F,n(t)),t.scrollSpeed=600,a(t,"laneWidth",k,n(t)),a(t,"maxPoolSize",H,n(t)),t.beatmapManager=null,t.audioManager=null,t.tilePool=[],t.activeTiles=[],t.nextNoteIndex=0,t.gameTime=0,t.gameState="stopped",t._updateScheduled=!1,a(t,"isAutoplay",N,n(t)),a(t,"missThreshold",B,n(t)),t.touchedTiles=new Map,t.minTileHeight=300,t.lastAudioTimeCheck=0,t.cachedAudioTime=0,t.audioTimeCheckInterval=.05,t.timeSinceLastAudioCheck=0,t.laneArrays=[],t.tempVec3=new u,t.lanePositionVec3=new u,t.tilePositionsY=null,t.tileIndices=new Map,t.nextTileIndex=0,t.updateBudgetPerFrame=20,t.updateQueue=[],t.fpsHistory=[],t.lastFrameTime=0,t.frameCounter=0,t.performanceLevel="high",t}i(t,e);var o=t.prototype;return o.initialize=function(e,t){this.beatmapManager=e,this.audioManager=t,this.initTilePool()},o.onLoad=function(){this.beatmapManager||(this.beatmapManager=g.instance),this.audioManager||(this.audioManager=y.instance),this.initTilePool()},o.start=function(){this.ensureLaneContainers()},o.initTilePool=function(){var e;this.tilePool=[];var t=null==(e=this.beatmapManager)?void 0:e.getNotes();if(t&&t.length>0){var i=this.spawnPositionY-this.recyclePositionY,a=t[t.length-1].time-t[0].time,n=this.scrollSpeed||this.defaultScrollSpeed,s=Math.ceil(t.length*(i/(n*Math.max(.1,a))));this.maxPoolSize=Math.max(this.maxPoolSize,s+10),console.log("Dynamic pool size calculated: "+this.maxPoolSize+" (estimated visible: "+s+")")}for(var o=0;o<this.maxPoolSize;o++){var r=c(this.tilePrefab),l=r.getComponent(f);r.active=!1,this.tilePool.push(l)}this.tilePositionsY=new Float32Array(this.maxPoolSize),this.tileIndices=new Map,this.nextTileIndex=0,this.initLaneArrays()},o.initLaneArrays=function(){var e=Math.max(4,this.laneContainers.length);this.laneArrays=new Array(e);for(var t=0;t<e;t++)this.laneArrays[t]=[]},o.ensureLaneContainers=function(){if(this.laneContainers.length<4){console.warn("TileManager needs 4 lane containers, but only "+this.laneContainers.length+" were provided.");for(var e=this.laneContainers.length;e<4;e++){var t=new h("Lane_"+e);t.parent=this.node,this.lanePositionVec3.set((e-2+.5)*this.laneWidth,0,0),t.position=this.lanePositionVec3,this.laneContainers.push(t)}}this.laneWidth=this.laneContainers[0].getComponent(d).width,this.initLaneArrays()},o.initGame=function(){this.clearActiveTiles(),this.nextNoteIndex=0,this.gameTime=0,this.activeTiles=[],this.touchedTiles.clear();for(var e=0;e<this.laneArrays.length;e++)this.laneArrays[e].length=0;this.calculateDynamicScrollSpeed()},o.startGame=function(){this.gameState="playing",this._updateScheduled||(p.getScheduler().schedule(this.update,this,0),this._updateScheduled=!0),this.fpsHistory=[],this.lastFrameTime=Date.now(),this.frameCounter=0,this.performanceLevel="high"},o.stopGame=function(){this.gameState="stopped",this._updateScheduled&&(p.getScheduler().unschedule(this.update,this),this._updateScheduled=!1),this.clearActiveTiles()},o.pauseGame=function(){this.gameState="paused"},o.resumeGame=function(){this.gameState="playing",this._updateScheduled||(p.getScheduler().schedule(this.update,this,0),this._updateScheduled=!0)},o.update=function(e){this.monitorPerformance(e),"playing"===this.gameState&&(this.audioManager?this.gameTime=this.audioManager.getEstimatedAudioTime():(this.timeSinceLastAudioCheck+=e,this.timeSinceLastAudioCheck>=this.audioTimeCheckInterval?(this.cachedAudioTime=y.instance.getAudioTime(),this.timeSinceLastAudioCheck=0):this.cachedAudioTime+=e,this.gameTime=this.cachedAudioTime),Math.random()<.03&&P.instance.updateSongTimeDisplay(this.gameTime),this.spawnTiles(),this.balancedUpdateActiveTiles())},o.updateTilePriorities=function(){for(var e,t=s(this.activeTiles);!(e=t()).done;){var i=e.value,a=Math.abs(i.node.position.y-this.targetPositionY),n=0;a>1500?n=2:a>1e3&&(n=1),i.setUpdatePriority(n)}},o.spawnTiles=function(){var e=this.beatmapManager.getNotes();if(e.length)for(var t=this.gameTime+this.lookAheadTime;this.nextNoteIndex<e.length&&e[this.nextNoteIndex].time<=t;)this.spawnTile(e[this.nextNoteIndex]),this.nextNoteIndex++},o.updateTilePosition=function(e,t){this.tempVec3.set(0,t,0),e.node.position=this.tempVec3},o.spawnTile=function(e){var t=this.getTileFromPool();if(t){var i=e.lane;if(i<0||i>=this.laneContainers.length)console.error("Invalid lane "+i+" for note "+e.midi);else{var a=this.laneContainers[i];t.node.parent=a,t.init(e,i,this.spawnPositionY,this.targetPositionY,this.laneWidth,this.scrollSpeed,this.minTileHeight),t.setBufferHeight(this.minTileHeight/2);var n=this.nextTileIndex%this.maxPoolSize;this.tileIndices.set(t,n),this.tilePositionsY[n]=this.spawnPositionY,this.nextTileIndex++,this.updateTilePosition(t,this.spawnPositionY);var s=this.spawnPositionY-this.recyclePositionY+t.getTileHeight()+500,o=(this.spawnPositionY-this.targetPositionY)/this.scrollSpeed,r=s/this.scrollSpeed,l=e.time-o;if(l<=this.gameTime)t.startMovement(r,l);else{var h=l-this.gameTime;this.scheduleOnce((function(){t.node.active&&t.startMovement(r,l)}),h)}this.activeTiles.push(t),i>=0&&i<this.laneArrays.length&&this.laneArrays[i].push(t)}}else console.warn("Tile pool exhausted, cannot spawn more tiles")},o.balancedUpdateActiveTiles=function(){var e=this;if(this.isAutoplay&&this.handleAutoplay(),this.updateQueue.length>0)for(var t=Math.min(this.updateBudgetPerFrame/2,this.updateQueue.length),i=0;i<t;i++){var a=this.updateQueue.shift();this.processTileUpdate(a)}if(this.activeTiles.length>this.updateBudgetPerFrame){this.activeTiles.sort((function(t,i){return Math.abs(t.node.position.y-e.targetPositionY)-Math.abs(i.node.position.y-e.targetPositionY)}));for(var n=0;n<this.updateBudgetPerFrame;n++)n<this.activeTiles.length&&this.processTileUpdate(this.activeTiles[n]);for(var o=this.updateBudgetPerFrame;o<this.activeTiles.length;o++)o<this.activeTiles.length&&!this.isInUpdateQueue(this.activeTiles[o])&&this.updateQueue.push(this.activeTiles[o])}else for(var r,l=s(this.activeTiles);!(r=l()).done;){var h=r.value;this.processTileUpdate(h)}this.checkRecycleTiles()},o.processTileUpdate=function(e){e.getStatus()===T.ACTIVE&&e.node.position.y<=this.missThreshold&&e.miss()},o.checkRecycleTiles=function(){for(var e=0;e<this.activeTiles.length;){var t=this.activeTiles[e];if(t.node.position.y+t.getTileHeight()<=this.recyclePositionY){t.getStatus()===T.HOLDING&&t.isLongPressType()&&t.release(this.gameTime),this.returnTileToPool(t),this.activeTiles[e]=this.activeTiles[this.activeTiles.length-1],this.activeTiles.pop();var i=this.updateQueue.indexOf(t);-1!==i&&this.updateQueue.splice(i,1)}else e++}},o.handleAutoplay=function(){var e=this;if(this.isAutoplay){for(var t,i=this.activeTiles.filter((function(t){if(t.getStatus()!==T.ACTIVE)return!1;var i=t.getNote();return!!i&&i.time-e.gameTime<=.05})),a=s(i);!(t=a()).done;){var n=t.value,o=n.getLane();if(n.getNote())if(n.isLongPressType()){if(!this.touchedTiles.has(o))n.tap(this.gameTime)!==v.MISS&&this.touchedTiles.set(o,n)}else n.tap(this.gameTime)}this.touchedTiles.forEach((function(t,i){var a=t.getNote();a&&t.getStatus()===T.HOLDING?a.time+a.duration<=e.gameTime&&(t.release(e.gameTime),e.touchedTiles.delete(i)):e.touchedTiles.delete(i)}))}},o.toggleAutoplay=function(e){this.isAutoplay=void 0!==e?e:!this.isAutoplay,console.log("Autoplay "+(this.isAutoplay?"enabled":"disabled"))},o.isAutoplayEnabled=function(){return this.isAutoplay},o.clearActiveTiles=function(){for(var e,t=s(this.activeTiles);!(e=t()).done;){var i=e.value;this.returnTileToPool(i)}this.activeTiles=[]},o.getTileFromPool=function(){if(0===this.tilePool.length)return this.activeTiles.length<this.maxPoolSize?c(this.tilePrefab).getComponent(f):null;var e=this.tilePool.pop();return e.node.active=!0,e},o.returnTileToPool=function(e){var t=e.getLane();if(this.touchedTiles.has(t)&&this.touchedTiles.get(t)===e&&(e.getStatus()===T.HOLDING&&e.release(this.gameTime),this.touchedTiles.delete(t)),e.recycle(),this.tilePool.push(e),t>=0&&t<this.laneArrays.length){var i=this.laneArrays[t],a=i.indexOf(e);-1!==a&&(i[a]=i[i.length-1],i.pop())}this.tileIndices.delete(e)},o.handleLaneTouch=function(e,t){var i=this;if(console.log("handleLaneTouch",e,t),!t){var a=this.touchedTiles.get(e);if(a&&a.isLongPressType())return this.touchedTiles.delete(e),a.release(this.gameTime)}var n=(e>=0&&e<this.laneArrays.length?this.laneArrays[e]:[]).filter((function(e){return e.getStatus()===T.ACTIVE}));if(n.sort((function(e,t){var a=e.getNote(),n=t.getNote();return a&&n?Math.abs(a.time-i.gameTime)-Math.abs(n.time-i.gameTime):0})),0===n.length)return v.MISS;var s=n[0];if(t){var o=s.tap(this.gameTime);return s.isLongPressType()&&o!==v.MISS&&this.touchedTiles.set(e,s),o}return v.MISS},o.setScrollSpeed=function(e){this.scrollSpeed;this.scrollSpeed=e},o.getScrollSpeed=function(){return this.scrollSpeed},o.getActiveTileCount=function(){return this.activeTiles.length},o.getGameTime=function(){return this.gameTime},o.setGameTime=function(e){this.gameTime=e},o.calculateDynamicScrollSpeed=function(){var e=this.beatmapManager.getNotes();if(!e||e.length<2)this.scrollSpeed=this.defaultScrollSpeed;else{for(var t=.5*this.defaultScrollSpeed,i=1.5*this.defaultScrollSpeed,a=!0,n=1;n<e.length;n++)if(e[n].time<e[n-1].time){a=!1;break}for(var s=a?e:[].concat(e).sort((function(e,t){return e.time-t.time})),o=Number.MAX_VALUE,r=0,l=0,h=0,u=1;u<s.length;u++){var c=s[u].time-s[u-1].time;c>0&&(c<o&&(o=c),r+=c,l++);var d=s[u].duration;d>h&&(h=d)}var p=l>0?r/l:1;o===Number.MAX_VALUE&&(o=1);var m=Math.min(1,.7*o+.3),g=Math.min(1,.5*p+.5),f=1;h>0&&(f=Math.max(.7,1-.1*h));var T=t+(i-t)*(.6*m+.25*g+.15*f);this.setScrollSpeed(2.5*T),"high"===this.performanceLevel&&console.log("Dynamic scroll speed: "+Math.round(this.scrollSpeed)+" px/s")}},o.updateTilePositionsFromArray=function(){for(var e,t=s(this.activeTiles);!(e=t()).done;){var i=e.value,a=this.tileIndices.get(i);void 0!==a&&this.updateTilePosition(i,this.tilePositionsY[a])}},o.isInUpdateQueue=function(e){return-1!==this.updateQueue.findIndex((function(t){return t===e}))},o.monitorPerformance=function(e){this.frameCounter++;var t=Date.now();if(t-this.lastFrameTime>1e3){var i=this.frameCounter;this.fpsHistory.push(i),this.fpsHistory.length>5&&this.fpsHistory.shift();var a=this.fpsHistory.reduce((function(e,t){return e+t}),0)/this.fpsHistory.length;this.adjustPerformanceSettings(a),this.frameCounter=0,this.lastFrameTime=t}},o.adjustPerformanceSettings=function(e){var t=this.performanceLevel;if(this.performanceLevel=e<30?"low":e<50?"medium":"high",t!==this.performanceLevel)switch(console.log("Performance level changed: "+t+" -> "+this.performanceLevel+" (Average FPS: "+e.toFixed(1)+")"),this.performanceLevel){case"low":this.updateBudgetPerFrame=10,this.audioTimeCheckInterval=60;break;case"medium":this.updateBudgetPerFrame=15,this.audioTimeCheckInterval=45;break;case"high":this.updateBudgetPerFrame=20,this.audioTimeCheckInterval=30}},o.setupBeginningTile=function(){this.clearActiveTiles(),this.gameState="paused";var e=Math.min(Math.floor(this.laneContainers.length/2),this.laneContainers.length-1);this.createBeginningTile(e)},o.createBeginningTile=function(e){var t=this.getTileFromPool();if(t){var i={midi:60,time:0,lane:e,type:0,duration:.3,durationTicks:0,velocity:100},a=this.laneContainers[e];t.node.parent=a;var n=this.targetPositionY;t.init(i,e,n,n,this.laneWidth,this.scrollSpeed,this.minTileHeight),t.setBufferHeight(this.minTileHeight/2),t.setBeginningNodeActive(!0),t.node.name="beginning_tile",this.activeTiles.push(t),e>=0&&e<this.laneArrays.length&&this.laneArrays[e].push(t)}else console.error("Failed to create beginning tile - pool empty")},o.checkBeginningTileTap=function(e){for(var t=0;t<this.activeTiles.length;t++){var i=this.activeTiles[t];if("beginning_tile"===i.node.name&&i.getLane()===e)return i.startMovement(1,this.gameTime),!0}return!1},o.removeTile=function(e){var t=this.activeTiles.indexOf(e);t>=0&&this.activeTiles.splice(t,1);var i=e.getLane();if(i>=0&&i<this.laneArrays.length){var a=this.laneArrays[i].indexOf(e);a>=0&&this.laneArrays[i].splice(a,1)}this.returnTileToPool(e)},t}(m)).prototype,"tilePrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"laneContainers",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(w.prototype,"spawnPositionY",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1200}}),C=t(w.prototype,"targetPositionY",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-400}}),Y=t(w.prototype,"recyclePositionY",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1500}}),z=t(w.prototype,"lookAheadTime",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),F=t(w.prototype,"defaultScrollSpeed",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),k=t(w.prototype,"laneWidth",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 160}}),H=t(w.prototype,"maxPoolSize",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),N=t(w.prototype,"isAutoplay",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=t(w.prototype,"missThreshold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-450}}),M=w))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/tilling-and-offset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,i,c,o,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Vec2},function(t){c=t.register},function(t){o=t.ShaderNode},function(t){r=t.ConcretePrecisionType},function(t){s=t.slot}],execute:function(){var u;n._RF.push({},"5f40e+RWa9OQYJs/kAgd0eT","tilling-and-offset",void 0);t("default",c({menu:"Uv/TillingAndOffset",title:"TillingAndOffset"})(u=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this).concretePrecisionType=r.Fixed,e.depChunks=["uv"],e.data={inputs:[s("uv",i.ZERO,"vec2","vector"),s("tilling",i.ZERO,"vec2","vector"),s("offset",i.ZERO,"vec2","vector")],outputs:[s("Out",i.ZERO,"vec2","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);this.inputs[0].connectSlot||(t="v_uv.xy");var e=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = "+t+" * "+e+" + "+n+";\n        "},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/time.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./input-node.ts","./index3.ts","./register.ts"],(function(t){var e,o,i,l,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){i=t.slot},function(t){l=t.default},null,function(t){n=t.register}],execute:function(){var a;o._RF.push({},"d78e7iowiJHXbVo2J+jhSXo","time",void 0);t("default",n({menu:"Input/Basic/Time",title:"Time"})(a=function(t){function o(){for(var e,o=arguments.length,l=new Array(o),n=0;n<o;n++)l[n]=arguments[n];return(e=t.call.apply(t,[this].concat(l))||this).data={outputs:[i("Time",0,"float","vector"),i("Sine Time",0,"float","vector"),i("Cosine Time",0,"float","vector"),i("Delta Time",0,"float","vector"),i("Smooth Delta",0,"float","vector")]},e}return e(o,t),o.prototype.generateCode=function(){var t=this.getOutputSlotWithSlotName("Time"),e=this.getOutputSlotWithSlotName("Sine Time"),o=this.getOutputSlotWithSlotName("Cosine Time"),i=this.getOutputSlotWithSlotName("Delta Time"),l=this.getOutputSlotWithSlotName("Smooth Delta"),n="";return null!=t&&t.connectSlot&&(n+="float "+t.varName+" = cc_time.x;"),null!=e&&e.connectSlot&&(n+="float "+e.varName+" = sin(cc_time.x);"),null!=o&&o.connectSlot&&(n+="float "+o.varName+" = cos(cc_time.x);"),null!=i&&i.connectSlot&&(n+="float "+i.varName+" = cc_time.y;"),null!=l&&l.connectSlot&&(console.warn("Not support smooth delta time"),n+="float "+l.varName+" = cc_time.y;"),n},o}(l))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/ToggleAutoSound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){var o,t,n,i,r,u,a,l,g,c;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,a=e.Toggle,l=e.EventHandler,g=e.Component},function(e){c=e.AudioManager}],execute:function(){var s,d,f,p;r._RF.push({},"36cdeVcYgBP746cVQn6km3N","ToggleAutoSound",void 0);var h=u.ccclass,m=u.property;e("ToggleAutoSound",h("ToggleAutoSound")((f=o((d=function(e){function o(){for(var o,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return o=e.call.apply(e,[this].concat(r))||this,n(o,"onAudioName",f,i(o)),n(o,"offAudioName",p,i(o)),o.toggle=null,o}t(o,e);var r=o.prototype;return r.onLoad=function(){if(this.toggle=this.getComponent(a),this.toggle){var e=new l;e.target=this.node,e.component="ToggleAutoSound",e.handler="onToggleChanged",this.toggle.checkEvents.push(e)}},r.onToggleChanged=function(){this.toggle&&c.instance.playSound(this.toggle.isChecked?this.onAudioName:this.offAudioName)},o}(g)).prototype,"onAudioName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"sfx_lobby_ui_01"}}),p=o(d.prototype,"offAudioName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"sfx_lobby_ui_01_Low"}}),s=d))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/ToggleHotKey.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HotKey.ts"],(function(t){var e,o,n,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Toggle},function(t){c=t.Hotkey}],execute:function(){var g;o._RF.push({},"37345Pr89dKxKXe+sjSuW5N","ToggleHotKey",void 0);var i=n.ccclass;n.property,t("ToggleHotKey",i("ToggleHotKey")(g=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).toggle=null,e}e(o,t);var n=o.prototype;return n.onLoad=function(){t.prototype.onLoad.call(this),this.toggle=this.getComponent(r)},n.trigger=function(){t.prototype.trigger.call(this),this.toggle&&(this.toggle.isChecked=!this.toggle.isChecked,this.toggle.checkEvents.forEach((function(t){t.emit(null)})))},o}(c))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/TrajectoryDrawer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ProjectileMath.ts","./VectorUtil.ts"],(function(t){var e,i,r,n,o,a,l,c,s,u,p,f,h,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Prefab,c=t.NodePool,s=t.Vec3,u=t.Quat,p=t.MeshRenderer,f=t.instantiate,h=t.Component},function(t){d=t.ProjectileMath},function(t){y=t.VectorUtil}],execute:function(){var P,m,b,v,g,w,D,j,M;o._RF.push({},"01c94oOie9EDZDjFFfzDe9j","TrajectoryDrawer",void 0);var z=a.ccclass,x=a.property;t("TrajectoryDrawer",(P=z("TrajectoryDrawer"),m=x({type:l,displayName:"prefab"}),b=x({displayName:"fixedQuantity"}),v=x({visible:function(){return this.fixedQuantity},displayName:"quantity"}),P((D=e((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"prefab",D,n(e)),r(e,"fixedQuantity",j,n(e)),r(e,"quantity",M,n(e)),e.points=[],e.nodePool=new c,e.tempVec3=new s,e.tempQuat=new u,e}i(e,t);var o=e.prototype;return o.draw=function(t,e,i,r,n,o){var a,l=s.subtract(new s,e,t),c=y.projectOnPlane(l,s.UP),p=null!=n?n:c.length(),f=d.calculateTotalTime(p,i,r)/(a=this.fixedQuantity?Math.ceil(this.quantity):Math.max(8,Math.ceil(3*p)));this.producePoints(a);for(var h=c.normalize(),P=this.points,m=this.tempVec3,b=this.tempQuat,v=0;v<a;v++){var g=P[v];g.active=!0;var w=(v+1)*f,D=d.calculateDisplacementAtMoment(i,r,w),j=D.x,M=D.y,z=t.clone();z.add(m.set(h).multiplyScalar(j)),z.add(m.set(s.UP).multiplyScalar(M)),g.setWorldPosition(z);var x=u.fromViewUp(b,h,s.UP),Q=-d.calculateAngleAtMoment(i,r,w,!0);u.rotateX(x,x,Q),g.setWorldRotation(x)}},o.clear=function(){this.producePoints(0)},o.setColor=function(t){var e=this.prefab.data.getComponent(p);e||(e=this.prefab.data.getComponentInChildren(p)),e&&e.sharedMaterial.setProperty("mainColor",t)},o.producePoints=function(t){var e=this.points;if(e.length<t)for(var i=t-e.length;i>0;)e.push(this.getPoint()),i--;else if(e.length>t)for(var r=e.length-t;r>0;)this.putPoint(e.pop()),r--},o.getPoint=function(){var t;return(t=this.nodePool.size()>0?this.nodePool.get():f(this.prefab)).setParent(this.node),t},o.putPoint=function(t){this.nodePool.size()<50?this.nodePool.put(t):t.destroy()},e}(h)).prototype,"prefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(w.prototype,"fixedQuantity",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=e(w.prototype,"quantity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),g=w))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/triangle-wave.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(e){var t,n,r,i,o,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){i=e.register},function(e){o=e.ShaderNode},function(e){a=e.slot}],execute:function(){var c;n._RF.push({},"92a3eZPGhZGbpxgWBNEKAGs","triangle-wave",void 0);e("default",i({menu:"Math/Wave/TriangleWave",title:"TriangleWave"})(c=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).data={inputs:[a("In",r.ZERO,"vec4","vector")],outputs:[a("Out",r.ZERO,"vec4","vector")]},t}t(n,e);var i=n.prototype;return i.calcConcretePrecision=function(){e.prototype.calcConcretePrecision.call(this)},i.generateCode=function(){var e=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = 2.0 * abs( 2 * ("+e+" - floor(0.5 + "+e+")) ) - 1.0;\n        "},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/truncate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./utils.ts"],(function(t){var e,n,r,c,u,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.Vec4},function(t){c=t.register},function(t){u=t.ShaderNode},function(t){o=t.slot}],execute:function(){var i;n._RF.push({},"96ddfY+NwRNKa+F0/nHJXIw","truncate",void 0);t("default",c({menu:"Math/Round/Truncate",title:"Truncate"})(i=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))||this).data={inputs:[o("In",r.ZERO,"vec4","vector")],outputs:[o("Out",r.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0);return"\n            "+this.getOutputVarDefine(0)+" = trunc("+t+");\n        "},n}(u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/type.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"298c3IQrZBP6Lx7XE+N393z","type",void 0),e("ConcretePrecisionType",function(e){return e[e.Min=0]="Min",e[e.Max=1]="Max",e[e.Fixed=2]="Fixed",e[e.Texture=3]="Texture",e}({}))._name="ConcretePrecisionType",e("TextureConcretePrecision",function(e){return e[e.Texture2D=100]="Texture2D",e[e.TextureCube=101]="TextureCube",e}({}))._name="TextureConcretePrecision",e("PositionSpace",function(e){return e[e.Local=0]="Local",e[e.View=1]="View",e[e.World=2]="World",e}({}))._name="PositionSpace",e("NormalSpace",function(e){return e[e.Local=0]="Local",e[e.View=1]="View",e[e.World=2]="World",e}({}))._name="NormalSpace",e("ViewDirSpace",function(e){return e[e.Local=0]="Local",e[e.View=1]="View",e[e.World=2]="World",e}({}))._name="ViewDirSpace";e("NormalMapSpace",300);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIAutoVersion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(t){var e,r,n,o,i,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,u=t.Label,c=t.Component},null],execute:function(){var l,a,p,f,y;i._RF.push({},"ade5btidtpL5YVAIw3v0u9e","UIAutoVersion",void 0);var b=s.ccclass,d=s.property;t("UIAutoVersion",(l=b("UIAutoVersion"),a=d(u),l((y=e((f=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,n(e,"lbVersion",y,o(e)),e}r(e,t);var i=e.prototype;return i.start=function(){},i.onFocusInEditor=function(){},e}(c)).prototype,"lbVersion",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAvatar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./assetRemoteUtil.ts","./ImageLoader.ts"],(function(t){var a,n,i,e,r,o,s;return{setters:[function(t){a=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,e=t.Sprite,r=t.Component},function(t){o=t.assetRemoteUtil},function(t){s=t.ImageLoader}],execute:function(){var l;n._RF.push({},"03f5c6o2sJBCL/VJkJmJTZA","UIAvatar",void 0);var u=i.ccclass,c=(i.property,i.requireComponent);t("UIAvatar",u("UIAvatar")(l=c(e)(l=function(t){function n(){for(var a,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(a=t.call.apply(t,[this].concat(i))||this).sprite=null,a.data=null,a.url=null,a.id=null,a.loadAvatarFunction=null,a}a(n,t);var i=n.prototype;return i.onLoad=function(){this.sprite=this.getComponent(e)},i.onDisable=function(){this.loadAvatarFunction&&o.removeListenAvatar(this.url,this.loadAvatarFunction)},i.setData=function(t,a){this.sprite&&(this.sprite.spriteFrame=s.instance.getAvatar(this.id),this.id=a,this.url=t,this.loadAvatarFunction=this.onLoadedAvatar.bind(this),o.loadAndListenAvatar(t,this.loadAvatarFunction))},i.onLoadedAvatar=function(t){this.sprite.spriteFrame=null!=t?t:s.instance.getAvatar(this.id),this.loadAvatarFunction=null},i.clear=function(){this.sprite.spriteFrame=null},n}(r))||l)||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIBattleShipTicket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientEvent.ts","./Constants.ts","./UserManager.ts","./Utils2.ts"],(function(t){var n,e,i,a,s,o,l,r,u,c,h,p,f,d,v,w,k,M;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,l=t._decorator,r=t.Node,u=t.Label,c=t.tween,h=t.v3,p=t.Vec3,f=t.easing,d=t.Component},function(t){v=t.ClientEvent},function(t){w=t.GameConstant},function(t){k=t.UserManager},function(t){M=t.Utils}],execute:function(){var b,g,E,T,I,y;o._RF.push({},"2b1dcvDX25I56xUx4yKRCbl","UIBattleShipTicket",void 0);var C=l.ccclass,S=l.property;t("UIBattleShipTicket",(b=C("UIBattleShipTicket"),g=S(r),b(((y=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return n=t.call.apply(t,[this].concat(s))||this,i(n,"nodeIcon",I,a(n)),n.labelMain=null,n.showValue={value:0},n.tweenMain=null,n.tweenNodeCoin=null,n}e(n,t);var o=n.prototype;return o.onEnable=function(){null==this.labelMain&&(this.labelMain=this.getComponent(u)),v.on(w.EVENT_NAME.USERBATTLESHIPTICKETS_UPDATED,this.updateData,this),n.uistacks.push(this)},o.onDisable=function(){var t,e=this;v.off(w.EVENT_NAME.USERBATTLESHIPTICKETS_UPDATED,this.updateData,this),n.uistacks=n.uistacks.filter((function(t){return t!=e})),null==(t=this.tweenMain)||t.stop(),this.tweenMain=null},o.updateData=function(){var t,n,e=this,i=null!=(t=k.instance.battleShipTickets)?t:0;null==(n=this.tweenMain)||n.stop(),this.tweenMain=c(this.showValue).to(.35,{value:i}).call((function(){var t;e.tweenMain=null,e.labelMain.string=M.formatNumber(Math.round(null==(t=e.showValue)?void 0:t.value))})).start()},o.update=function(t){var n;if(null!=this.tweenMain){var e=M.formatNumber(Math.round(null==(n=this.showValue)?void 0:n.value));this.labelMain.string!=e&&(this.labelMain.string=e)}},o.doSpriteEffect=function(){var t;this.nodeIcon&&(this.nodeIcon.scale=h(1.1,1.1),null==(t=this.tweenNodeCoin)||t.stop(),this.tweenNodeCoin=c(this.nodeIcon).to(.15,{scale:p.ONE},{easing:f.backIn}).start())},s(n,null,[{key:"position",get:function(){try{return this.uistacks[this.uistacks.length-1].node.worldPosition}catch(t){return new p(0,0,0)}}},{key:"iconPosition",get:function(){try{return this.uistacks[this.uistacks.length-1].nodeIcon.worldPosition}catch(t){return new p(0,0,0)}}},{key:"current",get:function(){try{return this.uistacks[this.uistacks.length-1]}catch(t){return null}}}]),n}(d)).uistacks=[],I=n((T=y).prototype,"nodeIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/UICashAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,s,i,e,o,r,p,a;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,e=t.Sprite,o=t.Vec3,r=t.v3,p=t.tween,a=t.Component}],execute:function(){var c;s._RF.push({},"60a69bp1SlI3LOxXGNq+M1o","UICashAnimation",void 0);var l=i.ccclass;i.property,t("UICashAnimation",l("UICashAnimation")(c=function(t){function s(){for(var n,s=arguments.length,i=new Array(s),e=0;e<s;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).posY=[],n.sprites=[],n.tweens=[],n}n(s,t);var i=s.prototype;return i.init=function(){var t=this;this.sprites=this.getComponentsInChildren(e),this.sprites.forEach((function(n){t.posY.push(n.node.position.y),t.tweens.push(null)}))},i.setVisible=function(t,n,s,i){var e=this;if(void 0===i&&(i=-1),this.sprites.length<=0&&this.init(),i=i<0?this.sprites.length:Math.min(this.sprites.length,i),t){this.sprites.forEach((function(t){return t.node.position=o.ZERO}));for(var a=n/i,c=function(){var t,o=l*a,c=l;if(e.sprites[c].node.active=!0,n<=0)return e.sprites[c].node.position=r(0,e.posY[c]),1;null==(t=e.tweens[c])||t.stop(),e.tweens[c]=p(e.sprites[c].node).to(o,{position:r(0,e.posY[c])}).call((function(){c==i-1&&(null==s||s())})).start()},l=0;l<i;l++)c()}else for(var u=function(){var t,i=h;if(n<=0)return e.sprites[i].node.active=!1,1;null==(t=e.tweens[i])||t.stop(),e.tweens[i]=p(e.sprites[i].node).to(n,{position:o.ZERO}).call((function(){e.sprites[i].node.active=!1,i==e.sprites.length-1&&(null==s||s())})).start()},h=0;h<this.sprites.length;h++)u()},s}(a))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/UICoins.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientEvent.ts","./Constants.ts","./UserManager.ts","./Utils2.ts"],(function(t){var n,i,e,s,o,a,r,l,u,c,h,f,p,d,v,w,C,M;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,u=t.Label,c=t.tween,h=t.v3,f=t.Vec3,p=t.easing,d=t.Component},function(t){v=t.ClientEvent},function(t){w=t.GameConstant},function(t){C=t.UserManager},function(t){M=t.Utils}],execute:function(){var g,b,k,y,E,I;a._RF.push({},"f56b3kOhzpA5qPzFsat65CR","UICoins",void 0);var N=r.ccclass,U=r.property;t("UICoins",(g=N("UICoins"),b=U(l),g(((I=function(t){function n(){for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,e(n,"nodeIcon",E,s(n)),n.labelMain=null,n.showCoins={value:0},n.tweenMain=null,n.tweenNodeCoin=null,n}i(n,t);var a=n.prototype;return a.onEnable=function(){null==this.labelMain&&(this.labelMain=this.getComponent(u)),v.on(w.EVENT_NAME.USERCOIN_UPDATED,this.updateData,this),n.uistacks.push(this)},a.onDisable=function(){var t,i=this;v.off(w.EVENT_NAME.USERCOIN_UPDATED,this.updateData,this),n.uistacks=n.uistacks.filter((function(t){return t!=i})),null==(t=this.tweenMain)||t.stop(),this.tweenMain=null},a.updateData=function(){var t,n=this,i=C.instance.coins;null==(t=this.tweenMain)||t.stop(),this.tweenMain=c(this.showCoins).to(.35,{value:i}).call((function(){var t;n.tweenMain=null,n.labelMain.string=M.formatNumber(Math.round(null==(t=n.showCoins)?void 0:t.value))})).start()},a.update=function(t){var n;if(null!=this.tweenMain){var i=M.formatNumber(Math.round(null==(n=this.showCoins)?void 0:n.value));this.labelMain.string!=i&&(this.labelMain.string=i)}},a.doSpriteEffect=function(){var t;this.nodeIcon&&(this.nodeIcon.scale=h(1.1,1.1),null==(t=this.tweenNodeCoin)||t.stop(),this.tweenNodeCoin=c(this.nodeIcon).to(.15,{scale:f.ONE},{easing:p.backIn}).start())},o(n,null,[{key:"position",get:function(){try{return this.uistacks[this.uistacks.length-1].node.worldPosition}catch(t){return new f(0,0,0)}}},{key:"iconPosition",get:function(){try{return this.uistacks[this.uistacks.length-1].nodeIcon.worldPosition}catch(t){return new f(0,0,0)}}},{key:"current",get:function(){try{return this.uistacks[this.uistacks.length-1]}catch(t){return null}}}]),n}(d)).uistacks=[],E=n((y=I).prototype,"nodeIcon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=y))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/UICountdownNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UINumberLabel.ts"],(function(t){var e,r,l,o,u,n,i,s,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,l=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){u=t.cclegacy,n=t._decorator,i=t.Sprite,s=t.CCBoolean,a=t.math},function(t){c=t.UINumberLabel}],execute:function(){var h,p,b,d,m,f,v;u._RF.push({},"64605hgPdJFkLm/270UV/jD","UICountdownNumber",void 0);var C=n.ccclass,N=n.property;t("UICountdownNumber",(h=C("UICountdownNumber"),p=N(i),b=N(s),h((f=e((m=function(t){function e(){for(var e,r=arguments.length,u=new Array(r),n=0;n<r;n++)u[n]=arguments[n];return e=t.call.apply(t,[this].concat(u))||this,l(e,"sprtProgress",f,o(e)),l(e,"isProgressSpriteRevert",v,o(e)),e.startValue=0,e.onRoundNumberCallback=null,e.lastRoundNumberCall=0,e}r(e,t);var u=e.prototype;return u.startCountdownFrom=function(t,e,r,l){void 0===e&&(e=null),void 0===r&&(r=""),void 0===l&&(l=null),this.startValue=t,this.onRoundNumberCallback=l,this.lastRoundNumberCall=0,this.showValue.value=t,this.setNumber(0,t,!0,e,r,0)},u.update=function(e){if(t.prototype.update.call(this,e),this.sprtProgress){var r=a.clamp(this.showValue.value/this.startValue,0,1);this.isProgressSpriteRevert&&(r=1-r),this.sprtProgress.fillRange=r}this.checkCallRoundNumber()},u.checkCallRoundNumber=function(){var t,e=Math.round(this.showValue.value);e!=this.lastRoundNumberCall&&(this.lastRoundNumberCall=e,null==(t=this.onRoundNumberCallback)||t.call(this,this.lastRoundNumberCall))},e}(c)).prototype,"sprtProgress",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(m.prototype,"isProgressSpriteRevert",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=m))||d));u._RF.pop()}}}));

System.register("chunks:///_virtual/UIDiamond.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientEvent.ts","./Constants.ts","./UserManager.ts","./Utils2.ts"],(function(t){var n,e,i,s,o,r,a,u,l,c,h,d,f,p,C,w,D,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,a=t._decorator,u=t.Node,l=t.Label,c=t.tween,h=t.v3,d=t.Vec3,f=t.easing,p=t.Component},function(t){C=t.ClientEvent},function(t){w=t.GameConstant},function(t){D=t.UserManager},function(t){g=t.Utils}],execute:function(){var v,y,E,b,k,m;r._RF.push({},"832d1/WxSlIpLLYnZz2dGO+","UIDiamond",void 0);var I=a.ccclass,M=a.property;t("UIDiamond",(v=I("UIDiamond"),y=M(u),v(((m=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"nodeIcon",k,s(n)),n.labelMain=null,n.showCurrent={value:0},n.tweenCurrent=null,n.tweenNodeCoin=null,n}e(n,t);var r=n.prototype;return r.onEnable=function(){null==this.labelMain&&(this.labelMain=this.getComponent(l)),C.on(w.EVENT_NAME.USERDIAMOND_UPDATED,this.updateData,this),n.uistacks.push(this)},r.onDisable=function(){var t,e=this;C.off(w.EVENT_NAME.USERDIAMOND_UPDATED,this.updateData,this),n.uistacks=n.uistacks.filter((function(t){return t!=e})),null==(t=this.tweenCurrent)||t.stop(),this.tweenCurrent=null},r.setCoins=function(t){null==this.labelMain&&(this.labelMain=this.getComponent(l)),this.labelMain.string=g.formatNumber(Math.round(t))},r.updateData=function(){var t,n=this,e=D.instance.diamonds;null==(t=this.tweenCurrent)||t.stop(),this.tweenCurrent=c(this.showCurrent).to(.35,{value:e}).call((function(){n.tweenCurrent=null,n.setCoins(D.instance.diamonds)})).start()},r.update=function(t){var n;null!=this.tweenCurrent&&this.setCoins(null==(n=this.showCurrent)?void 0:n.value)},r.doSpriteEffect=function(){var t;this.nodeIcon&&(this.nodeIcon.scale=h(1.1,1.1),null==(t=this.tweenNodeCoin)||t.stop(),this.tweenNodeCoin=c(this.nodeIcon).to(.1,{scale:d.ONE},{easing:f.linear}).start())},o(n,null,[{key:"position",get:function(){try{return this.uistacks[this.uistacks.length-1].node.worldPosition}catch(t){return new d(0,0,0)}}},{key:"iconPosition",get:function(){try{return this.uistacks[this.uistacks.length-1].nodeIcon.worldPosition}catch(t){return new d(0,0,0)}}},{key:"current",get:function(){try{return this.uistacks[this.uistacks.length-1]}catch(t){return null}}}]),n}(p)).uistacks=[],k=n((b=m).prototype,"nodeIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=b))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIFastToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,a,i,s,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,s=e.Node,c=e.EventHandler,l=e.Toggle}],execute:function(){var u,p,d,g,h;a._RF.push({},"0c915T7nLRFS43XBQpOPZlf","UIFastToggle",void 0);var f=i.ccclass,v=i.property;e("UIFastToggle",(u=f("UIFastToggle"),p=v([s]),u((h=t((g=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,o(t,"nodes",h,r(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=new c;e.target=this.node,e.component="UIFastToggle",e.handler="updateNodesState",this.checkEvents.push(e),this.updateNodesState()},a.updateNodesState=function(){var e=this;this.nodes.forEach((function(t){return t.active=e.isChecked}))},t}(l)).prototype,"nodes",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=g))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIHotkeyLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HotKey.ts","./Constants.ts","./ClientEvent.ts","./storageManager.ts"],(function(t){var e,n,o,i,a,r,l,s,u,c,y,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,s=t.Label,u=t.Component},function(t){c=t.Hotkey},function(t){y=t.GameConstant},function(t){p=t.ClientEvent},function(t){h=t.StorageManager}],execute:function(){var f,E,b,H,d,g,k;a._RF.push({},"3d20epSqOJE7Yu882uRz4oI","UIHotkeyLabel",void 0);var v=r.ccclass,M=r.property;t("UIHotkeyLabel",(f=v("UIHotkeyLabel"),E=M(l),b=M(s),f((g=e((d=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"nodeMain",g,i(e)),o(e,"lbMain",k,i(e)),e.hotkey=null,e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.hotkey=this.node.getComponent(c),this.hotkey?(this.lbMain.string=this.hotkey.getKeyString(),p.on(y.EVENT_NAME.HOTKEY_STATE_CHANGED,this.updateHotKeyState,this),this.updateHotKeyState()):console.error("UIHotkeylabel the hotkey is null")},a.onDestroy=function(){p.off(y.EVENT_NAME.HOTKEY_STATE_CHANGED,this.updateHotKeyState,this)},a.updateHotKeyState=function(){var t,e=null!=(t=h.instance.getGlobalData(y.STORAGE_KEY.HOTKEY))&&t;this.nodeMain.active=e},e}(u)).prototype,"nodeMain",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(d.prototype,"lbMain",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=d))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIItemUser.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UICoins.ts","./UIAvatar.ts","./UIDiamond.ts","./UIName.ts","./UITon.ts","./UITicket.ts"],(function(e){var t,n,r,a,i,l,s,o,u,U,c,m,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,s=e.Component},function(e){o=e.UICoins},function(e){u=e.UIAvatar},function(e){U=e.UIDiamond},function(e){c=e.UIName},function(e){m=e.UITon},function(e){p=e.UITicket}],execute:function(){var b,f,I,d,h,v,y,g,N,D,T,z,w,_,k,C,A;i._RF.push({},"5a859+X7W5OBYSIMvu0QJVW","UIItemUser",void 0);var F=l.ccclass,B=l.property;e("UIItemUser",(b=F("UIItemUser"),f=B({type:c,group:{name:"User Info",id:"1"}}),I=B({type:c,group:{name:"User Info",id:"1"}}),d=B({type:o,group:{name:"User Info",id:"1"}}),h=B({type:U,group:{name:"User Info",id:"1"}}),v=B({type:m,group:{name:"User Info",id:"1"}}),y=B({type:p,group:{name:"User Info",id:"1"}}),g=B({type:u,group:{name:"User Info",id:"1"}}),b((T=t((D=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,r(t,"lbUserName",T,a(t)),r(t,"lbUserUserName",z,a(t)),r(t,"lbCoins",w,a(t)),r(t,"lbDiamond",_,a(t)),r(t,"lbTon",k,a(t)),r(t,"lbTicket",C,a(t)),r(t,"avatarUser",A,a(t)),t}n(t,e);var i=t.prototype;return i.setUserData=function(e){var t,n,r,a,i,l,s,o,u,U,c,m,p;if(!e)return null==(c=this.lbUserName)||c.setName(""),null==(m=this.lbUserUserName)||m.setName(""),void(null==(p=this.avatarUser)||p.setData(null,null));null==(t=this.lbUserName)||t.setName((null!=(n=null==e?void 0:e.first_name)?n:"")+" "+(null!=(r=null==e?void 0:e.last_name)?r:"")),null==(a=this.lbUserUserName)||a.setName("@"+(null!=(i=null==e?void 0:e.username)?i:"")),null==(l=this.lbCoins)||l.updateData(),null==(s=this.lbDiamond)||s.updateData(),null==(o=this.lbTon)||o.updateData(),null==(u=this.lbTicket)||u.updateData(),null==(U=this.avatarUser)||U.setData(e.photo_url,e.telegram_id)},i.setFechtingData=function(e){void 0===e&&(e="loading..."),this.lbUserName&&this.lbUserName.setName(e),this.lbUserUserName&&this.lbUserUserName.setName("@"+e),this.avatarUser&&this.avatarUser.setData("","")},i.setNullAvatar=function(){this.avatarUser&&this.avatarUser.clear()},t}(s)).prototype,"lbUserName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"lbUserUserName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(D.prototype,"lbCoins",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(D.prototype,"lbDiamond",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"lbTon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(D.prototype,"lbTicket",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"avatarUser",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=D))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./resourceUtil.ts","./Constants.ts","./PopupBase.ts"],(function(i){var t,a,o,e,n,s,r,p;return{setters:[function(i){t=i.cclegacy,a=i._decorator,o=i.isValid,e=i.find,n=i.Node},function(i){s=i.resourceUtil},function(i){r=i.GameConstant},function(i){p=i.PopupBase}],execute:function(){var h,l;t._RF.push({},"c34cbKAQZdEpJrFv/VJuh+B","uiManager",void 0);var u=a.ccclass,c=(a.property,i("PopupLayer",function(i){return i.LAYER_1="Game/Canvas/Popup",i.LAYER_2="Game/Canvas/Popup-2",i.LAYER_3="Game/Canvas/Popup-3",i.LAYER_4="Game/Canvas/Popup-4",i}({})));i("UIManager",u("UIManager")(((l=function(){function i(){this.preloadPrefabNames=[r.POPUP.LOADING],this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this.layerNodeMap=new Map,this.blockNode=null,this.delayTimeoutDefine=0,this.popupLoading=null,this.popupLoadingData=null,this.preloadUIs()}var t=i.prototype;return t.preloadUIs=function(){var i=this;this.preloadPrefabNames.forEach((function(t){i.preloadDialog(t,null)}))},t.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return o(t)&&t.active&&o(t.parent)},t.getLayerNode=function(i){if(this.layerNodeMap.has(i)){var t=this.layerNodeMap.get(i);if(o(t))return t}var a=e(i);if(!a){a=new n;var s=i.split("/");a.name=s[s.length-1],a.parent=e("Game/Canvas")}return this.layerNodeMap.set(i,a),a},t.showDialog=function(i,t,a,e,n){var r=this;if(void 0===e&&(e=-1),void 0===n&&(n=c.LAYER_1),!this._dictLoading[i]){var p=i.lastIndexOf("/"),h=i.slice(p+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var l=this._dictSharedPanel[i];if(o(l)&&o(l.parent))try{l.parent=this.getLayerNode(n),l.active=!0;var u=l.getComponent(h),d=l.getComponent(h.charAt(0).toUpperCase()+h.slice(1));if(u&&u.show)u.show.apply(u,t),a&&a(u);else{if(!d||!d.show)throw""+h;d.show.apply(d,t),a&&a(d)}return}catch(i){return void this.showMessage({message:"Error while showing dialog",title:"Error"})}}this.setLoading(!0,.5),this._dictLoading[i]=!0,s.createUI(i,(function(o,n){if(r.setLoading(!1),!o){var s=!1;r._dictLoading[i]||(s=!0),r._dictLoading[i]=!1,e>=0&&n.setSiblingIndex(e),r._dictSharedPanel[i]=n;var p=n.getComponent(h),l=n.getComponent(h.charAt(0).toUpperCase()+h.slice(1));if(p&&p.show)p.show.apply(p,t),a&&a(p);else{if(!l||!l.show)throw""+h;l.show.apply(l,t),a&&a(l)}s&&r.hideDialog(i)}}),null,n)}},t.createUI=function(i,t,a,o){},t.preloadDialog=function(i,t){var a=this;this._dictLoading[i]=!0,s.preloadUI(i,(function(o,e){o?null==t||t(o):(a._dictLoading[i]=!1,a._dictSharedPanel[i]=e,e.parent=null,null==t||t(null))}))},t.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var a=this._dictSharedPanel[i];if(a&&o(a)){var e=a.getComponent("animationUI");e?e.close((function(){a.parent=null,t&&"function"==typeof t&&t()})):(a.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},t.hidePopup=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var a=this._dictSharedPanel[i];if(a&&o(a)){var e=a.getComponent(p);e?e.hide((function(){a.parent=null,t&&"function"==typeof t&&t()})):(a.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},t.pushToPopupSeq=function(i,t,a){var o={panelPath:i,scriptName:t,param:a,isShow:!1};this._arrPopupDialog.push(o),this._checkPopupSeq()},t.insertToPopupSeq=function(i,t,a){var o={panelPath:t,param:a,isShow:!1};this._arrPopupDialog.splice(i,0,o)},t.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},t._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},t.showMessage=function(i){this.showDialog(r.POPUP.MESSAGE,[i],(function(i){}),9999,c.LAYER_4)},t.setBlock=function(i){this.blockNode||(this.blockNode=e("Game/Canvas/Block")),this.blockNode.active=i,this.blockNode.setSiblingIndex(999)},t.setLoading=function(i,t,a){var o=this;if(void 0===t&&(t=2),void 0===a&&(a=null),clearTimeout(this.delayTimeoutDefine),i){if(this.setBlock(!0),this.popupLoadingData=a,this.popupLoading)return void this.popupLoading.setLoadingDetail(a);this.delayTimeoutDefine=setTimeout((function(){o.showLoading()}),1e3*t)}else clearTimeout(this.delayTimeoutDefine),this.setBlock(!1),this.hidePopup(r.POPUP.LOADING),this.popupLoading=null,this.popupLoadingData=null},t.showLoading=function(){var i=this;this.showDialog(r.POPUP.LOADING,[this.popupLoadingData],(function(t){i.popupLoading=t}),1,c.LAYER_4)},i}()).instance=void 0,h=l))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIName.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(t){var e,r,i,n,a,o,c,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.CCInteger,l=t.Label},function(t){s=t.Utils}],execute:function(){var u,p,h,f,m;a._RF.push({},"4a84fL/AtlOh5ZYcK3uvEF8","UIName",void 0);var y=o.ccclass,g=o.property;t("UIName",(u=y("UIName"),p=g(c),u((m=e((f=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"limitChar",m,n(e)),e}return r(e,t),e.prototype.setName=function(t){var e=Math.round((this.limitChar-3)/2);this.string=s.truncateString(t,this.limitChar,e,e)},e}(l)).prototype,"limitChar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),h=f))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/UINumberByImages.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(e){var r,t,i,n,a,s,o,u,c,l,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.SpriteFrame,u=e.Sprite,c=e.Node,l=e.Component},function(e){p=e.Utils}],execute:function(){var m,h,b,f,g,N,v,y,d,D,I;a._RF.push({},"63144Dta6NLH4Ot5UmPJL47","UINumberByImages",void 0);var U=s.ccclass,w=s.property;e("UINumberByImages",(m=U("UINumberByImages"),h=w([o]),b=w([u]),f=w([u]),g=w(c),m((y=r((v=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return r=e.call.apply(e,[this].concat(a))||this,i(r,"spriteframeNumbers",y,n(r)),i(r,"spriteNumbers",d,n(r)),i(r,"spriteDecimals",D,n(r)),i(r,"nodeDot",I,n(r)),r.charMap=new Map,r}t(r,e);var a=r.prototype;return a.onLoad=function(){var e=this;this.spriteframeNumbers.forEach((function(r){return e.charMap.set(r.name,r)}))},a.getChar=function(e){return this.charMap.get(e)},a.setNumber=function(e){this.setNumberString(p.toFixed(e,5))},a.setNumberString=function(e){var r,t,i=e.split(".");this.nodeDot.active=i.length>1;for(var n=null!=(r=i[0])?r:"",a=0;a<this.spriteNumbers.length;a++){var s=n[a];this.spriteNumbers[a].node.active=!!s,s&&(this.spriteNumbers[a].spriteFrame=this.getChar(s))}for(var o=null!=(t=i[1])?t:"",u=0;u<this.spriteDecimals.length;u++){var c=o[u];this.spriteDecimals[u].node.active=!!c,c&&(this.spriteDecimals[u].spriteFrame=this.getChar(c))}},r}(l)).prototype,"spriteframeNumbers",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=r(v.prototype,"spriteNumbers",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=r(v.prototype,"spriteDecimals",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=r(v.prototype,"nodeDot",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=v))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/UINumberLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(t){var e,i,n,u,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,u=t.tween,r=t.Label},function(t){s=t.Utils}],execute:function(){var a;i._RF.push({},"4bf9dim3D5ES4wXF3TDJfmM","UINumberLabel",void 0);var o=n.ccclass;t("UINumberLabel",o("UINumberLabel")(a=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))||this).showValue={value:0},e.tweenMain=null,e.isReformatNumber=!1,e.decimalNumberCount=0,e.format="",e}e(i,t);var n=i.prototype;return n.getNumber=function(t){return this.isReformatNumber?s.formatNumber(this.showValue.value,this.decimalNumberCount,this.decimalNumberCount):s.toFixed(t,3)},n.getString=function(t){var e=this.getNumber(t);return this.format?this.format.replace("value",e):e},n.onDisable=function(){this.stop()},n.setNumber=function(t,e,i,n,r,s){var a,o=this;if(void 0===e&&(e=.35),void 0===i&&(i=!0),void 0===n&&(n=null),void 0===r&&(r=""),void 0===s&&(s=2),this.isReformatNumber=i,this.decimalNumberCount=s,this.format=r,null==(a=this.tweenMain)||a.stop(),e<=0)return this.showValue.value=e,void(this.string=this.getString(this.showValue.value));this.tweenMain=u(this.showValue).to(e,{value:t}).call((function(){o.tweenMain=null,o.string=o.getString(o.showValue.value),null==n||n()})).start()},n.stop=function(){var t;null==(t=this.tweenMain)||t.stop(),this.tweenMain=null},n.update=function(t){if(null!=this.tweenMain){var e=this.getString(this.showValue.value);this.string!=e&&(this.string=e)}},i}(r))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/UINumberLabelComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(t){var e,n,i,o,l,u,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Label,l=t.tween,u=t.Component},function(t){r=t.Utils}],execute:function(){var a;n._RF.push({},"3d366e1pk5BN6GTDW/fi9nd","UINumberLabelComponent",void 0);var s=i.ccclass,h=(i.property,i.requireComponent);t("UINumberLabelComponent",s("UINumberLabelComponent")(a=h(o)(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).showValue={value:0},e.tweenMain=null,e.isReformatNumber=!1,e.decimalNumberCount=0,e.format="",e.label=null,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this.label=this.node.getComponent(o)},i.getNumber=function(t){return this.isReformatNumber?r.formatNumber(this.showValue.value,this.decimalNumberCount,this.decimalNumberCount):r.toFixed(t,3)},i.getString=function(t){var e=this.getNumber(t);return this.format?this.format.replace("value",e):e},i.onDisable=function(){this.stop()},i.setNumber=function(t,e,n,i,o,u){var r,a=this;if(void 0===e&&(e=.35),void 0===n&&(n=!0),void 0===i&&(i=null),void 0===o&&(o=""),void 0===u&&(u=2),this.isReformatNumber=n,this.decimalNumberCount=u,this.format=o,null==(r=this.tweenMain)||r.stop(),e<=0)return this.showValue.value=e,void(this.label.string=this.getString(this.showValue.value));this.tweenMain=l(this.showValue).to(e,{value:t}).call((function(){a.tweenMain=null,a.label.string=a.getString(a.showValue.value),null==i||i()})).start()},i.stop=function(){var t;null==(t=this.tweenMain)||t.stop(),this.tweenMain=null},i.update=function(t){if(null!=this.tweenMain){var e=this.getString(this.showValue.value);this.label.string!=e&&(this.label.string=e)}},n}(u))||a)||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIScaler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,o,l,c,u,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.v2,c=e.screen,u=e.math,s=e.v3,p=e.Component}],execute:function(){var h,f,m,y;a._RF.push({},"35e18W5KnNNt7BMewSFb2bH","UIScaler",void 0);var d=o.ccclass,b=o.property;e("UIScaler",d("UIScaler")((m=t((f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"maxValue",m,n(t)),i(t,"minValue",y,n(t)),t}return r(t,e),t.prototype.onLoad=function(){var e=l(1080,1920),t=e.x/e.y,r=c.windowSize.width/c.windowSize.height,i=u.clamp(r/t,this.minValue,this.maxValue);this.node.setScale(s(i,i,i))},t}(p)).prototype,"maxValue",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=t(f.prototype,"minValue",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),h=f))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/UISlider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,l,a,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,s=e.Sprite,c=e.Node,u=e.Slider}],execute:function(){var p,f,d,h,b,v,S,g,y;l._RF.push({},"23aff/dfqZMeJFuAqFaQ5p2","UISlider",void 0);var F=a.ccclass,j=a.property;e("UISlider",(p=F("UISlider"),f=j(s),d=j([c]),h=j([c]),p((S=t((v=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"spriteFiller",S,n(t)),i(t,"objectsOff",g,n(t)),i(t,"objectsOn",y,n(t)),t}r(t,e);var l=t.prototype;return l.start=function(){this.node.on("slide",this.onSliderChange,this),this.onSliderChange()},l.onSliderChange=function(){var e=this.progress;this.updateSpriteFiller(e),this.updateObjects(e)},l.updateSpriteFiller=function(e){this.spriteFiller&&this.spriteFiller.node.setScale(e,1,1)},l.updateObjects=function(e){for(var t,r=0===e,i=o(this.objectsOff);!(t=i()).done;){t.value.active=r}for(var n,l=o(this.objectsOn);!(n=l()).done;){n.value.active=!r}},t}(u)).prototype,"spriteFiller",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"objectsOff",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=t(v.prototype,"objectsOn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/UISliderRectSize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UISlider.ts"],(function(i){var t,r,e,n,a,l,o,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,r=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){a=i.cclegacy,l=i._decorator,o=i.UITransform},function(i){c=i.UISlider}],execute:function(){var s,u,p,d,h,f,S;a._RF.push({},"92959RjXUxD97yy1ukHjcyM","UISliderRectSize",void 0);var y=l.ccclass,g=l.property;i("UISliderRectSize",(s=y("UISliderRectSize"),u=g(o),p=g(o),s((f=t((h=function(i){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=i.call.apply(i,[this].concat(a))||this,e(t,"transSlider",f,n(t)),e(t,"transMain",S,n(t)),t.originalWidth=0,t}r(t,i);var a=t.prototype;return a.start=function(){this.originalWidth=this.transSlider.width,i.prototype.start.call(this)},a.updateSpriteFiller=function(i){this.transMain.width=i*this.originalWidth},t}(c)).prototype,"transSlider",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(h.prototype,"transMain",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/UITicket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientEvent.ts","./Constants.ts","./UserManager.ts","./Utils2.ts"],(function(t){var n,e,i,s,a,o,l,u,r,c,h,f,p,d,v,w,M,k;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,l=t._decorator,u=t.Node,r=t.Label,c=t.tween,h=t.v3,f=t.Vec3,p=t.easing,d=t.Component},function(t){v=t.ClientEvent},function(t){w=t.GameConstant},function(t){M=t.UserManager},function(t){k=t.Utils}],execute:function(){var g,E,b,y,I,T;o._RF.push({},"44067dQ84ZA0YPMUaKnAI8V","UITicket",void 0);var U=l.ccclass,C=l.property;t("UITicket",(g=U("UITicket"),E=C(u),g(((T=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a))||this,i(n,"nodeIcon",I,s(n)),n.labelMain=null,n.showValue={value:0},n.tweenMain=null,n.tweenNodeCoin=null,n}e(n,t);var o=n.prototype;return o.onEnable=function(){null==this.labelMain&&(this.labelMain=this.getComponent(r)),v.on(w.EVENT_NAME.USERTICKET_UPDATED,this.updateData,this),n.uistacks.push(this)},o.onDisable=function(){var t,e=this;v.off(w.EVENT_NAME.USERTICKET_UPDATED,this.updateData,this),n.uistacks=n.uistacks.filter((function(t){return t!=e})),null==(t=this.tweenMain)||t.stop(),this.tweenMain=null},o.updateData=function(){var t,n,e=this,i=null!=(t=M.instance.tickets)?t:0;null==(n=this.tweenMain)||n.stop(),this.tweenMain=c(this.showValue).to(.35,{value:i}).call((function(){var t;e.tweenMain=null,e.labelMain.string=k.commaNumber(Math.round(null==(t=e.showValue)?void 0:t.value))})).start()},o.update=function(t){var n;if(null!=this.tweenMain){var e=k.commaNumber(Math.round(null==(n=this.showValue)?void 0:n.value));this.labelMain.string!=e&&(this.labelMain.string=e)}},o.doSpriteEffect=function(){var t;this.nodeIcon&&(this.nodeIcon.scale=h(1.1,1.1),null==(t=this.tweenNodeCoin)||t.stop(),this.tweenNodeCoin=c(this.nodeIcon).to(.15,{scale:f.ONE},{easing:p.backIn}).start())},a(n,null,[{key:"position",get:function(){try{return this.uistacks[this.uistacks.length-1].node.worldPosition}catch(t){return new f(0,0,0)}}},{key:"iconPosition",get:function(){try{return this.uistacks[this.uistacks.length-1].nodeIcon.worldPosition}catch(t){return new f(0,0,0)}}},{key:"current",get:function(){try{return this.uistacks[this.uistacks.length-1]}catch(t){return null}}}]),n}(d)).uistacks=[],I=n((y=T).prototype,"nodeIcon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/UITimer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils2.ts"],(function(n){var t,e,o,i,l,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.Label,l=n.Component},function(n){r=n.Utils}],execute:function(){var s;e._RF.push({},"d3e939wqpFGLblmd/OMduC5","UITimer",void 0);var u=o.ccclass,c=(o.property,o.requireComponent);n("UITimer",u("UITimer")(s=c(i)(s=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this).label=null,t.endTime=0,t.callback=null,t.scheduleCountingDown=-1,t}t(e,n);var o=e.prototype;return o.onLoad=function(){this.label=this.getComponent(i)},o.onEnable=function(){this.endTime>0&&this.startCountingDown(this.endTime,this.callback)},o.onDisable=function(){this.stopCountingEventDown()},o.startCountingDown=function(n,t){var e=this;this.endTime=n,this.callback=t;var o=n-Date.now();if(o<=0)null==t||t();else{var i=Math.round(o/1e3)+1;this.stopCountingEventDown(),function n(){if(--i<0)null==t||t();else{var o=r.formatTimeForSecond(i);e.label&&(e.label.string=o),e.scheduleCountingDown=setTimeout((function(){n()}),1e3)}}()}},o.stopCountingEventDown=function(){clearTimeout(this.scheduleCountingDown)},e}(l))||s)||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIToggleGroups.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VisiblePanel.ts","./Constants.ts"],(function(e){var t,i,n,o,l,r,a,s,u,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,a=e.Toggle,s=e.EventHandler,u=e.Component},function(e){c=e.VisiblePanel},function(e){g=e.CurrentEnviroment}],execute:function(){var f,h,p,d,b,v,T,y,w,C,m,V,k,z,A;l._RF.push({},"59a6c9CvhtC0L3ZWOHqwOyc","UIToggleGroups",void 0);var E=r.ccclass,G=r.property,I=e("ToggleData",(f=E("ToggleData"),h=G(a),p=G([c]),f((v=t((b=function(){function e(){n(this,"toggle",v,this),n(this,"visibleViews",T,this)}return e.prototype.updateVisible=function(){var e=this;this.visibleViews.forEach((function(t){return null==t?void 0:t.setPanelVisible(e.toggle.isChecked,.25,!0)}))},e}()).prototype,"toggle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(b.prototype,"visibleViews",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=b))||d));e("UIToggleGroups",(y=E("UIToggleGroups"),w=G([I]),C=G(a),y((k=t((V=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"data",k,o(t)),n(t,"default",z,o(t)),n(t,"isAllowOffAll",A,o(t)),t.activeToggle=null,t}i(t,e);var l=t.prototype;return l.onLoad=function(){this.init()},l.init=function(){var e=this;this.data.forEach((function(t){var i=new s;i.target=e.node,i.component="UIToggleGroups",i.handler="onToggleChanged",t.toggle.checkEvents.push(i)})),this.default&&(this.default.isChecked=!0,this.onToggleChanged(this.default))},l.onToggleChanged=function(e){this.isAllowOffAll,this.activeToggle!=e&&(e.isChecked&&(this.activeToggle=e,this.activeToggle.interactable=!1),g.LOG&&console.log("onToggleChanged"+e),e.isChecked&&this.data.forEach((function(t){t.toggle!=e&&(t.toggle.isChecked=!1,t.toggle.interactable=!0),t.updateVisible()})))},l.updateToggles=function(){this.data.forEach((function(e){e.updateVisible()}))},t}(u)).prototype,"data",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(V.prototype,"default",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(V.prototype,"isAllowOffAll",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=V))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/UITon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientEvent.ts","./Constants.ts","./UserManager.ts","./AnimationPanel.ts","./Utils2.ts"],(function(t){var n,e,i,s,o,a,l,u,r,c,h,f,p,d,w,b,g,y,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,u=t.Node,r=t.Label,c=t.tween,h=t.v3,f=t.Vec3,p=t.easing,d=t.Component},function(t){w=t.ClientEvent},function(t){b=t.GameConstant},function(t){g=t.UserManager},function(t){y=t.AnimationPanel},function(t){v=t.Utils}],execute:function(){var k,E,M,T,P,D,I,U;a._RF.push({},"5b662nss5tLyJ+YrVTfoADd","UITon",void 0);var V=l.ccclass,N=l.property;t("UITon",(k=V("UITon"),E=N(u),M=N(y),k(((U=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,i(n,"nodeIcon",D,s(n)),i(n,"nodePanel",I,s(n)),n.labelMain=null,n.showValue={value:0},n.tweenMain=null,n.tweenNodeCoin=null,n}e(n,t);var a=n.prototype;return a.onEnable=function(){null==this.labelMain&&(this.labelMain=this.getComponent(r)),w.on(b.EVENT_NAME.USERTON_UPDATED,this.updateData,this),n.uistacks.push(this)},a.onDisable=function(){var t,e=this;w.off(b.EVENT_NAME.USERTON_UPDATED,this.updateData,this),n.uistacks=n.uistacks.filter((function(t){return t!=e})),null==(t=this.tweenMain)||t.stop()},a.updateData=function(){var t,n=this,e=g.instance.tons;this.setPanelVisible(e>0),null==(t=this.tweenMain)||t.stop(),this.tweenMain=c(this.showValue).to(.35,{value:e}).call((function(){n.tweenMain=null,n.setTextValue(e)})).start()},a.setPanelVisible=function(t){},a.setTextValue=function(t){this.labelMain.string=v.toFixed(t,3)},a.update=function(t){null!=this.tweenMain&&this.setTextValue(this.showValue.value)},a.doSpriteEffect=function(){var t;this.nodeIcon&&(this.nodeIcon.scale=h(1.1,1.1),null==(t=this.tweenNodeCoin)||t.stop(),this.tweenNodeCoin=c(this.nodeIcon).to(.15,{scale:f.ONE},{easing:p.backIn}).start())},o(n,null,[{key:"position",get:function(){try{return this.uistacks[this.uistacks.length-1].node.worldPosition}catch(t){return new f(0,0,0)}}},{key:"iconPosition",get:function(){try{return this.uistacks[this.uistacks.length-1].nodeIcon.worldPosition}catch(t){return new f(0,0,0)}}},{key:"current",get:function(){try{return this.uistacks[this.uistacks.length-1]}catch(t){return null}}}]),n}(d)).uistacks=[],D=n((P=U).prototype,"nodeIcon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(P.prototype,"nodePanel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=P))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIViewDrawer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Constants.ts","./audioManager.ts"],(function(i){var e,t,n,o,r,s,a,c,u,l,d,h,f,b,w,p,I;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized,r=i.createClass},function(i){s=i.cclegacy,a=i._decorator,c=i.Enum,u=i.Vec3,l=i.Node,d=i.tween,h=i.easing,f=i.Component,b=i.v3},function(i){w=i.ViewBeginType},function(i){p=i.GameConstant},function(i){I=i.AudioManager}],execute:function(){var g,v,y,D,P,V,O,T,E,L,S,N,A,H,R;s._RF.push({},"e1a51NjaFRBkoSdI6zruA8N","UIViewDrawer",void 0);var m=a.ccclass,x=a.property,z=i("DrawerDirectionType",function(i){return i[i.HORIZONTAL=0]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL",i}({}));i("UIViewDrawer",(g=m("UIViewDrawer"),v=x({type:c(w)}),y=x({type:c(z)}),D=x(u),P=x(l),V=x([l]),g((E=e((T=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=i.call.apply(i,[this].concat(r))||this,n(e,"beginType",E,o(e)),n(e,"direction",L,o(e)),n(e,"beginPosition",S,o(e)),n(e,"drawerIndicator",N,o(e)),n(e,"nodeVisibles",A,o(e)),n(e,"hidePosX",H,o(e)),n(e,"showPosX",R,o(e)),e.visibleIndex=-1,e}t(e,i);var s=e.prototype;return s.setPosition=function(i,e){switch(this.direction){case z.HORIZONTAL:i.x=e;break;case z.VERTICAL:i.y=e}return i},s.addPosition=function(i,e){switch(this.direction){case z.HORIZONTAL:i.x+=e;break;case z.VERTICAL:i.y+=e}return i},s.onLoad=function(){switch(this.beginType){case w.NONE:break;case w.HIDE:this.nodeVisibles.forEach((function(i){return i.active=!1}));var i=this.beginPosition.clone();this.setPosition(i,this.hidePosX),this.node.setPosition(i),this.drawerIndicator&&(this.drawerIndicator.angle=0),this.visibleIndex=0;break;case w.SHOW:this.node.setPosition(this.beginPosition),this.nodeVisibles.forEach((function(i){return i.active=!0})),this.drawerIndicator&&(this.drawerIndicator.angle=180),this.visibleIndex=1}},s.setDrawerVisible=function(i,e,t){var n=this;if(void 0===e&&(e=null),void 0===t&&(t=.2),this.visibleIndex!=(i?1:0)){this.visibleIndex=i?1:0,i&&this.nodeVisibles.forEach((function(i){return i.active=!0}));var o=this.node.position.clone();this.setPosition(o,i?this.showPosX:this.hidePosX),d(this.node).stop(),d(this.node).to(t,{position:o},{easing:h.quartOut}).call((function(){0==i&&n.nodeVisibles.forEach((function(i){return i.active=!1})),null==e||e()})).start();var r=i?180:0;this.drawerIndicator&&(d(this.drawerIndicator).stop(),d(this.drawerIndicator).to(t,{angle:r},{easing:h.backOut}).start())}},s.show=function(i,e){var t=this;void 0===e&&(e=null),this.setDrawerVisible(!0,(function(){t.shown(),null==e||e()})),I.instance.playSound(p.SOUND_FILES.SLIDE_IN)},s.doShow=function(){this.show(null)},s.doHide=function(){this.hide()},s.hide=function(i){var e=this;void 0===i&&(i=null),this.setDrawerVisible(!1,(function(){e.hided(),null==i||i()})),I.instance.playSound(p.SOUND_FILES.SLIDE_OUT)},s.shown=function(){},s.hided=function(){},s.onTouch_ShowHide=function(){1==this.visibleIndex?this.doHide():this.doShow()},r(e,[{key:"isShowing",get:function(){return 1==this.visibleIndex}}]),e}(f)).prototype,"beginType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.HIDE}}),L=e(T.prototype,"direction",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.HORIZONTAL}}),S=e(T.prototype,"beginPosition",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b(0,0,0)}}),N=e(T.prototype,"drawerIndicator",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(T.prototype,"nodeVisibles",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=e(T.prototype,"hidePosX",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(T.prototype,"showPosX",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=T))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/UnlitMasterNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MasterNode.ts","./utils.ts","./index3.ts","./context.ts","./register.ts"],(function(e){var t,o,n,r,s,a,l,c,i,u,f;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){n=e.cclegacy,r=e.Vec3,s=e.Vec4},function(e){a=e.MasterSlotType,l=e.default},function(e){c=e.slot,i=e.path},null,function(e){u=e.shaderContext},function(e){f=e.register}],execute:function(){var p;n._RF.push({},"f3fa2kI6ulBJKyUfbfTCT2P","UnlitMasterNode",void 0);e("default",f({title:"Unlit",master:!0})(p=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).data={inputs:[c("Vertex Position",r.ZERO,"vec3","vector",{slotType:a.Vertex,codeChunk:0}),c("Vertex Normal",r.ZERO,"vec3","vector",{slotType:a.Vertex,codeChunk:0}),c("Vertex Tangent",r.ZERO,"vec3","vector",{slotType:a.Vertex,codeChunk:0}),c("BaseColor",new s(.5,.5,.5,.5),"color","vector",{slotType:a.Fragment,codeChunk:3}),c("Alpha",1,"float","vector",{slotType:a.Fragment,codeChunk:3}),c("AlphaClipThreshold",0,"float","vector",{slotType:a.Fragment,codeChunk:3})]},t}return t(n,e),n.generatePreviewCode=function(e){var t=new n;t.init();var o=t.getSlotWithSlotName("BaseColor");return o&&(o.connectSlots[0]=e.outputs[0]),t.generateCode()},o(n,[{key:"templatePath",get:function(){return i.join(u.shaderTemplatesDir,"master/UnlitMasterNode.effect")}}]),n}(l))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/UserInteractHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(t){var e,i,s,n,o,r,a,h,c,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.Node,h=t.NodeEventType,c=t.Vec2,u=t.Component},function(t){l=t.UserInteractEventType}],execute:function(){var T,g,d,p,v;o._RF.push({},"6cc02rpxS1ESpwuMymGkGQL","UserInteractHandler",void 0);var f=r.ccclass,E=r.property,y=t("EventBase",(function(){this.type=l.NONE,this.data=null}));t("UserInteractHandler",(T=f("TouchController"),g=E(a),T((v=e((p=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,s(e,"listenerNode",v,n(e)),e.listeners={},e.initialDistance=null,e.startTouchPos=null,e.isTouchMoveTrigger=!1,e.lastDragPos=null,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.initInteracting()},o.onDestroy=function(){},o.addListener=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},o.removeListener=function(t,e){if(this.listeners[t]){var i=this.listeners[t].indexOf(e);i>-1&&this.listeners[t].splice(i,1)}},o.dispatchEvent=function(t){this.listeners[t.type]&&this.listeners[t.type].forEach((function(e){return e(t.data)}))},o.resetValues=function(){this.startTouchPos=null,this.initialDistance=null,this.lastDragPos=null},o.initInteracting=function(){var t=this;this.listenerNode.on(h.MOUSE_WHEEL,(function(e){var i=new y;i.type=l.ZOOM,i.data=-e.getScrollY()/10,t.dispatchEvent(i)}),this),this.listenerNode.on(h.TOUCH_START,this.onTouchStart,this),this.listenerNode.on(h.TOUCH_MOVE,this.onTouchMove,this),this.listenerNode.on(h.TOUCH_END,this.onTouchEnd,this),this.listenerNode.on(h.TOUCH_CANCEL,this.onTouchEnd,this),this.listenerNode.on(h.MOUSE_ENTER,this.onHoverBackground,this)},o.onHoverBackground=function(t){var e=new y;e.type=l.HOVER,this.dispatchEvent(e)},o.onTouchStart=function(t){2===t.getTouches().length&&(this.initialDistance=this.getDistanceBetweenTouches(t)),1===t.getTouches().length&&(this.startTouchPos=t.getTouches()[0].getLocation()),this.isTouchMoveTrigger=!1},o.onTouchMove=function(t){if(2===t.getTouches().length){var e=this.getDistanceBetweenTouches(t)-this.initialDistance,i=new y;i.type=l.ZOOM;i.data=-.01*e,this.dispatchEvent(i),this.isTouchMoveTrigger=!0}else if(1===t.getTouches().length){var s=t.getTouches()[0].getLocation(),n=new y;n.type=l.DRAG,n.data={start:null==this.lastDragPos?this.startTouchPos:this.lastDragPos,current:s},this.dispatchEvent(n),this.isTouchMoveTrigger=!0,this.lastDragPos=s.clone()}},o.onTouchEnd=function(t){if(t.getTouches().length<2&&(this.initialDistance=null,this.lastDragPos=null,0==this.isTouchMoveTrigger)){var e=new y;e.type=l.TOUCH,e.data=this.startTouchPos,this.dispatchEvent(e)}if(0===t.getTouches().length&&this.startTouchPos){var i=t.getTouches()[0].getLocation();if(c.distance(i,this.startTouchPos)>100){var s=new y;s.type=l.SWIPE,s.data={start:this.startTouchPos,end:i},this.dispatchEvent(s)}}var n=new y;n.type=l.END_INTERACTED,this.dispatchEvent(n),this.startTouchPos=null},o.getDistanceBetweenTouches=function(t){var e=t.getTouches(),i=e[0].getLocation(),s=e[1].getLocation();return c.distance(i,s)},e}(u)).prototype,"listenerNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/UserManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"e2cc7nhdnVFF5CMWYmDA7HF","UserManager",void 0);var r=n("UserManager",function(){function n(){this.userdata=null,n.instance=this}return n.prototype.setUserData=function(n){this.userdata=n},e(n,[{key:"id",get:function(){var n;return null!=(n=this.userdata.id)?n:""}},{key:"coins",get:function(){var n,e;return null!=(n=null==(e=this.userdata)?void 0:e.coin)?n:0}}]),n}());r.instance=null;new r;t._RF.pop()}}}));

System.register("chunks:///_virtual/UserModel.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2863714705FO4J9mAWwN/3b","UserModel",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc","./env","./type.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy},function(e){r=e.EDITOR},function(e){n=e.TextureConcretePrecision}],execute:function(){e({ensureEnumDefines:function(e,t){return l(e).forEach((function(r){var n=f(e,e[r]);t.includes(n)||(t+="#define "+n+" 0\n")})),t},getEnumDefine:function(e,t){return"#define "+f(e,t)+" 1"},getEnumDefineName:f,getEnumNames:l,getFloatString:o,getJsonObject:function(e){var t;try{t=JSON.parse(e)}catch(e){console.error(e)}return t},getPrecisionName:function(e,t){var r="";"boolean"===t?r="bool":1===e?r="float":2===e?r="vec2":3===e?r="vec3":4===e?r="vec4":e===n.Texture2D?r="sampler2D":e===n.TextureCube&&(r="samplerCube");return r},getValueConcretePrecision:function(e){var t=1;"object"==typeof e&&(void 0!==e.w||void 0!==e.a?t=4:void 0!==e.z||void 0!==e.b?t=3:void 0!==e.y||void 0!==e.g?t=2:void 0!==e.m_SerializedTexture?t=n.Texture2D:void 0!==e.m_SerializedCubemap&&(t=n.TextureCube));return t},getValueElement:s,getValueElementStr:function(e,t){return o(s(e,t))},prop:function(e,t,r,n){void 0===n&&(n={});var i={display:e,default:t,type:r};return Object.assign(i,n),i},slot:function(e,t,r,n,i){void 0===i&&(i={});var o={display:e,default:t,type:r,connectType:n};return Object.assign(o,i),o}}),t._RF.push({},"7ceabXBz/tABa7CTXDAMxJn","utils",void 0);var i=globalThis.electron;e("Editor",i&&globalThis.Editor),e("projectPath",r),e("fs",i&&globalThis.require("fs-extra")),e("path",i&&globalThis.require("path"));function o(e){if("number"!=typeof e)return e;var t=e+"";return t.includes(".")||(t+="."),t}var u=["x","y","z","w"],a=["r","g","b","a"],c=["e00","e01","e02","e03"];function s(e,t){return"number"==typeof e?e:(void 0!==e.x?r=u:void 0!==e.r?r=a:void 0!==e.e00&&(r=c),e[r[t]]||0);var r}function l(e){var t=Object.getOwnPropertyNames(e);return t=t.filter((function(e){return Number.isNaN(Number.parseFloat(e))&&"_name"!==e}))}function f(e,t){return("CC_"+e._name.replace("Space","")+"_"+e[t]).toUpperCase()}t._RF.pop()}}}));

System.register("chunks:///_virtual/Utils2.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e._decorator}],execute:function(){var n,o;t._RF.push({},"f17deAL74VOroYmPuGafWvU","Utils",void 0),Number.prototype.clamp=function(e,t){return Math.min(Math.max(this.valueOf(),e),t)},Number.prototype.pingPong=function(e,t){var r=t-e,n=(this.valueOf()-e)/r,o=Math.floor(n),i=n-o;return o%2==0?e+r*i:t-r*i},Number.prototype.randomInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},Array.prototype.shuffle=function(){for(var e=this.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),r=[this[t],this[e]];this[e]=r[0],this[t]=r[1]}return this},Array.prototype.distinct=function(){return this.filter((function(e,t,r){return r.findIndex((function(t){return t.id===e.id}))===t}))},Array.prototype.randomElement=function(){return this.length<=0?null:this[Math.floor(Math.random()*this.length)]};var i=r.ccclass;r.property,e("Utils",i("util")(((o=function(){function e(){}return e.formatNumber=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=2),!e)return"0";for(var n=["","K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","Ud","Dd","Td","Qua","Qui","Sx","Sp","Oc","No","Vi","Dv","Tv","Qaa","Qaq","Qap","Qaop","Qit"],o=0;e>=1e3&&(e/=1e3,!(++o>=n.length-1)););return 0==o?this.toFixed(e,t):""+this.toFixed(e,r).replace(".",",")+n[o]},e.toFixed=function(e,t){return e.toFixed(t).replace(/(\.\d*?[1-9])0+$|\.0*$/,"$1")},e.commaNumber=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},e.mapAbbreviationToWord=function(e){return{"":" ",K:"Thousand",M:"Million",B:"Billion",T:"Trillion",Qa:"Quadrillion",Qi:"Quintillion",Sx:"Sextillion",Sp:"Septillion",Oc:"Octillion",No:"Nonillion",Dc:"Decillion",Ud:"Undecillion",Dd:"Duodecillion",Td:"Tredecillion",Qua:"Quattuordecillion",Qui:"Quindecillion",Vi:"Sexdecillion",Dv:"Septendecillion",Tv:"Octodecillion",Qaa:"Novemdecillion",Qaq:"Vigintillion",Qap:"Unvigintillion",Qaop:"Duovigintillion",Qit:"Tresvigintillion"}[e]||""},e.getTokenParam=function(){return this.getUrlkeyValue("tk")},e.getRefreshTokenParam=function(){return this.getUrlkeyValue("rtk")},e.getDeviceKeyParam=function(){return this.getUrlkeyValue("dk")},e.getIdPasswordUrl=function(){return{username:this.getUrlkeyValue("username"),password:this.getUrlkeyValue("password")}},e.WaitFor=function(e,t){e()?t():setTimeout(this.WaitFor.bind(null,e,t),100)},e.loadScript=function(e,t){var r=document.createElement("script");r.type="text/javascript",r.src=e,t&&(r.onload=t),document.head.appendChild(r)},e.clone=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var r in e.constructor===Array&&(t=[]),e)e.hasOwnProperty(r)&&(t[r]=this.clone(e[r]));return t},e.objectToArray=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t},e.arrayToObject=function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&e[n][t]&&(r[e[n][t]]=e[n]);return r},e.getWeightRandIndex=function(e,t){for(var r=Math.floor(Math.random()*t),n=0,o=0;o<e.length&&!(r<(n+=e[o]));o++);return o},e.getRandomNFromM=function(e,t){for(var r=[],n=0,o=0;o<t&&!(o>=e+1);){n=this.getRandomInt(0,e);for(var i=0,a=0;a<o;a++)if(r[a]===n){i=1;break}0===i&&(r[o]=n,o++)}return r},e.getRandomInt=function(e,t){var r=Math.random()*(t-e+1)+e;return Math.floor(r)},e.getStringLength=function(e){for(var t=e,r=0,n=0,o=t.length;n<o;n++){r+=t.charCodeAt(n)<=255?1:2}return Math.ceil(r/2)},e.isEmptyObject=function(e){var t=!0;if(e&&e.constructor===Object){for(var r in e)if(e.hasOwnProperty(r)){t=!1;break}}else t=!1;return t},e.isNewDay=function(e){var t=new Date(e),r=new Date,n=t.getYear(),o=t.getMonth(),i=t.getDate(),a=r.getYear(),u=r.getMonth(),f=r.getDate();return a>n||(u>o||f>i)},e.getPropertyCount=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},e.difference=function(e,t){var r=[];if(e.constructor!==Array||t.constructor!==Array)return r;for(var n=e.length,o=0;o<n;o++)-1===t.indexOf(e[o])&&r.push(e[o]);return r},e._stringToArray=function(e){var t,r="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+r+"]"),i="\\ud83c[\\udffb-\\udfff]",a="[\\ufe0e\\ufe0f]?",u="["+n+"]",f="(?:"+u+"|"+i+")"+"?",c="[\\ud800-\\udfff]",h="[^\\ud800-\\udfff]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",g=a+f+("(?:\\u200d(?:"+[h,l,d].join("|")+")"+a+f+")*"),s="(?:"+[h+u+"?",u,l,d,c].join("|")+")",m=RegExp(i+"(?="+i+")|"+s+g,"g");return t=e,o.test(t)?function(e){return e.match(m)||[]}(e):function(e){return e.split("")}(e)},e.simulationUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.isNowValid=function(e,t){var r=new Date(e),n=new Date(t),o=!1;if(r.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var i=new Date;o=i<n&&i>r}return o},e.getDeltaDays=function(e,t){e=new Date(e),t=new Date(t);var r=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=t.getFullYear(),a=t.getMonth()+1,u=t.getDate();e=new Date(r+"/"+n+"/"+o+" GMT+0800").getTime();var f=(t=new Date(i+"/"+a+"/"+u+" GMT+0800").getTime())-e;return Math.floor(f/864e5)},e.getUserTimezone=function(){var e=(new Date).getTimezoneOffset(),t=Math.abs(e/60),r=Math.abs(e%60);return"GMT"+(e>0?"-":"+")+String(t)+String(r)},e.getMin=function(e){var t=null;if(e.constructor===Array)for(var r=e.length,n=0;n<r;n++)t=0===n?Number(e[0]):t>Number(e[n])?Number(e[n]):t;return t},e.formatTwoDigits=function(e){return(Array(2).join(0)+e).slice(-2)},e.getRemainingTime=function(e,t){if(!t)return{string:"",isZero:!0,remainSeconds:0};var r=1e3,n=6e4,o=36e5,i=864e5,a=t.getTime()-e.getTime(),u=Math.floor(a/i),f=Math.floor(a%i/o),c=Math.floor(a%o/n),h=Math.floor(a%n/r),l=a<=0,d=function(e){return e<10?"0"+e:e+""},g=(u>0?d(u)+":":"")+d(f)+":"+d(c)+":"+d(h);return u<=0&&f<=0&&c<=0&&h<=10&&(g=d(h)),{string:g,isZero:l,remainSeconds:a/r}},e.formatDate=function(e,t){t.includes("MMMM")?t=t.replace("MMMM",["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]):t.includes("MMM")&&(t=t.replace("MMM",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]));var r={"Y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[n].toString():("00"+r[n]).substr((""+r[n]).length)));return t},e.getDay=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.formatName=function(e,t){t=t||6;var r=this._stringToArray(e),n="";if(r.length>t){for(var o=0;o<t;o++)n+=r[o];n+="..."}else n=e;return n},e.formatMoney=function(e){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],r="",n=0;n<t.length;n++){if(!(e>=1e4)){r=Math.floor(e).toLocaleString()+t[n];break}e/=1e3}return""===r&&(r=Math.floor(e)+"U"),r.replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.formatValue=function(e){for(var t=[],r="",n=0;n<26;n++)t.push(String.fromCharCode(97+n));for(var o=0;o<t.length;o++){if(!(e>=1e4)){r=Math.floor(e)+t[o];break}e/=1e3}return r},e.formatTimeForSecond=function(e,t){void 0===t&&(t=!1);var r="",n=e%60,o=Math.floor(e/60);o=o<0?0:o;var i=Math.floor(o/60),a=o%60;return i>0?(r+=i>9?i.toString():"0"+i,r+=":"):r+="00:",r+=a>9?a.toString():"0"+a,t||(r+=":",r+=n>9?n.toString():"0"+n),r},e.formatTimeForMillisecond=function(e){var t=Math.floor(e/1e3%60),r=Math.floor(e/1e3/60%60);return{hour:Math.floor(e/1e3/60/60),minute:r,second:t}},e.rand=function(e){for(var t=this.clone(e),r=t.length-1;r>=0;r--){var n=Math.floor(Math.random()*(r+1)),o=t[n];t[n]=t[r],t[r]=o}return t},e.getOffsetMimutes=function(e,t){var r=t-e;return Math.floor(r%36e5/6e4)},e.formatNumToFixed=function(e,t){return void 0===t&&(t=0),Number(e.toFixed(t))},e.lerp=function(e,t,r){void 0===r&&(r=.25);var n=t;return e>t?n=t+(e-t)*r:e<t&&(n=t-(t-e)*r),n},e.decrypt=function(e){var t=6;e.length%2==0&&(t=7);for(var r="",n=0;n<e.length-t;n+=2)r+=e[n+1],r+=e[n];return r+=e.slice(e.length-t+1),r=this._base64Decode(r)},e.encrypt=function(e){var t=this._base64encode(e),r=6;t.length%2==0&&(r=7);for(var n="",o=0;o<(t.length-r+1)/2;o++)n+=t[2*o+1],n+=t[2*o];return n+=t.slice(t.length-r+1)},e._base64encode=function(e){var t,r,n,o,i,a,u,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",h=0;for(e=this._utf8Encode(e);h<e.length;)o=(t=e.charCodeAt(h++))>>2,i=(3&t)<<4|(r=e.charCodeAt(h++))>>4,a=(15&r)<<2|(n=e.charCodeAt(h++))>>6,u=63&n,isNaN(r)?a=u=64:isNaN(n)&&(u=64),c=c+f.charAt(o)+f.charAt(i)+f.charAt(a)+f.charAt(u);return c},e._utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},e._utf8Decode=function(e){for(var t="",r=0,n=0,o=0,i=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),i=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&i),r+=3);return t},e._base64Decode=function(e){var t,r,n,o,i,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=u.indexOf(e.charAt(c++))<<2|(o=u.indexOf(e.charAt(c++)))>>4,r=(15&o)<<4|(i=u.indexOf(e.charAt(c++)))>>2,n=(3&i)<<6|(a=u.indexOf(e.charAt(c++))),f+=String.fromCharCode(t),64!=i&&(f+=String.fromCharCode(r)),64!=a&&(f+=String.fromCharCode(n));return f=this._utf8Decode(f)},e.checkIsLowPhone=function(){if(window.wx){var e=-1,t=window.wx.getSystemInfoSync();if(t.system.indexOf("iOS")>=0){for(var r=t.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],i=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],a=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8"],u=0;u<n.length;u++)r.indexOf(n[u])>=0&&(e=5);for(var f=0;f<o.length;f++)r.indexOf(o[f])>=0&&(e=10);for(var c=0;c<i.length;c++)r.indexOf(i[c])>=0&&(e=20);for(var h=0;h<a.length;h++)r.indexOf(a[h])>=0&&(e=30)}else e=t.benchmarkLevel;return e<22}return!1},e.truncateString=function(e,t,r,n){return void 0===t&&(t=15),void 0===r&&(r=5),void 0===n&&(n=5),e.length<=t?e:e.slice(0,r)+"..."+e.slice(-n)},e.getVectorString=function(e){return e.x.toFixed(2)+"-"+e.y.toFixed(2)},e.getCoorKey=function(e,t){return e+"_"+t},e}()).getUrlkeyValue=function(e){var t=window.location.href,r=new URL(t);return r.searchParams.has(e)?r.searchParams.get(e):""},o.getAngle=function(e){return e<0?360+e%360:e>360?e%360:e},o.getPointText=function(e,t){return t<=0?e+"":e+"(<color=green>"+t+"</color>)"},o.getGuildShortName=function(e){var t=e.split(" "),r="";return t.forEach((function(e){return r+=e[0]})),r.toUpperCase()},o.capitalizeWords=function(e){return e.toLowerCase().replace(/\b\w/g,(function(e){return e.toUpperCase()}))},n=o))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/uv.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,n,r,o,i,u,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec2},function(e){o=e.ShaderNode},function(e){i=e.ConcretePrecisionType},function(e){u=e.prop,c=e.slot},null,function(e){s=e.register}],execute:function(){var a;n._RF.push({},"95b7bSNki1Ba5Pk4AQXXcG5","uv",void 0);e("default",s({menu:"Input/Geometry/UV",title:"UV"})(a=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=i.Fixed,t.fixedConcretePrecision=2,t.data={props:[u("Channel",0,"float")],outputs:[c("UV",new r,"vec2","vector")]},t}return t(n,e),n.prototype.generateCode=function(){var e=this.getPropWithName("Channel");if(!e)return console.warn("UV Node generate code undefined"),"";var t="v_uv"+(e.value>0?e.value:"");return this.getOutputVarDefine(0)+" = "+t+";"},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/vector2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,c,r,o,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t.Vec2},function(t){r=t.register},function(t){o=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"7f058nmp+ZIQ6FPIyLJ3wpK","vector2",void 0);t("default",r({menu:"Input/Basic/Vector2",title:"Vector2"})(s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).concretePrecisionType=i.Fixed,e.data={inputs:[u("X",0,"float","vector"),u("Y",0,"float","vector")],outputs:[u("Out",c.ZERO,"vec2","vector")]},e}e(n,t);var r=n.prototype;return r.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},r.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1);return"\n            "+this.getOutputVarDefine(0)+" = vec2("+t+", "+e+");\n        "},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/vector3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,c,r,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec3},function(t){c=t.register},function(t){r=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"99486WpmApIPoULZGXK9dCS","vector3",void 0);t("default",c({menu:"Input/Basic/Vector3",title:"Vector3"})(s=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))||this).concretePrecisionType=i.Fixed,e.data={inputs:[u("X",0,"float","vector"),u("Y",0,"float","vector"),u("Z",0,"float","vector")],outputs:[u("Out",o.ZERO,"vec3","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1),n=this.getInputValue(2);return"\n            "+this.getOutputVarDefine(0)+" = vec3("+t+", "+e+", "+n+");\n        "},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/vector4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./register.ts","./base.ts","./type.ts","./utils.ts"],(function(t){var e,n,o,c,r,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.Vec4},function(t){c=t.register},function(t){r=t.ShaderNode},function(t){i=t.ConcretePrecisionType},function(t){u=t.slot}],execute:function(){var s;n._RF.push({},"4e4e9VghSdMAohxS4AJDF0m","vector4",void 0);t("default",c({menu:"Input/Basic/Vector4",title:"Vector4"})(s=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))||this).concretePrecisionType=i.Fixed,e.data={inputs:[u("X",0,"float","vector"),u("Y",0,"float","vector"),u("Z",0,"float","vector"),u("W",0,"float","vector")],outputs:[u("Out",o.ZERO,"vec4","vector")]},e}e(n,t);var c=n.prototype;return c.calcConcretePrecision=function(){t.prototype.calcConcretePrecision.call(this)},c.generateCode=function(){var t=this.getInputValue(0),e=this.getInputValue(1),n=this.getInputValue(2),o=this.getInputValue(3);return"\n            "+this.getOutputVarDefine(0)+" = vec4("+t+", "+e+", "+n+", "+o+");\n        "},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/VectorUtil.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.Vec3}],execute:function(){n._RF.push({},"59f54A7NwlOiY/boc9L5zON","VectorUtil",void 0);var r=180/Math.PI,c=new e;t("VectorUtil",function(){function t(){}return t.projectOnPlane=function(t,n){var r=e.dot(t,n),o=c.set(n).multiplyScalar(r);return e.subtract(new e,t,o)},t.signedAngle=function(n,c,o){var i=t.projectOnPlane(n,o),a=t.projectOnPlane(c,o),u=i.normalize(),l=a.normalize(),s=e.cross(new e,u,l).normalize(),f=e.dot(s,o);return Math.acos(e.dot(u,l))*f*r},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/vertex-color.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,n,r,o,c,i,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec4},function(e){o=e.ShaderNode},function(e){c=e.ConcretePrecisionType},function(e){i=e.slot},null,function(e){u=e.register}],execute:function(){var s;n._RF.push({},"57f73xnQclNJoH/LZDbCo8N","vertex-color",void 0);e("default",u({menu:"Input/Geometry/VertexColor",title:"VertexColor"})(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(t=e.call.apply(e,[this].concat(o))||this).concretePrecisionType=c.Fixed,t.fixedConcretePrecision=4,t.data={outputs:[i("Out",new r,"vec4","vector")]},t}return t(n,e),n.prototype.generateCode=function(){return this.getOutputVarDefine(0)+" = FSInput_vertexColor;"},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/view-direction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts","./type.ts","./utils.ts","./index3.ts","./register.ts"],(function(e){var t,i,n,r,o,c,u,s,a,l,p;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,r=e.Vec3},function(e){o=e.ShaderNode},function(e){c=e.ViewDirSpace,u=e.ConcretePrecisionType},function(e){s=e.getEnumDefine,a=e.prop,l=e.slot},null,function(e){p=e.register}],execute:function(){var f;n._RF.push({},"fbe73AP6NxBTqOrL07ng2zD","view-direction",void 0);e("default",p({menu:"Input/Geometry/ViewDirection",title:"ViewDirection"})(f=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).concretePrecisionType=u.Fixed,t.fixedConcretePrecision=3,t.data={props:[a("Space",c.World,"enum",{enum:c})],outputs:[l("ViewDirection",new r,"vec3","vector")]},t}return t(n,e),n.prototype.generateCode=function(){var e=this.getPropWithName("Space"),t="view";return e.value===c.Local?t="view":e.value===c.View?t="viewView":e.value===c.World&&(t="worldView"),this.defines=[s(c,e.value)],this.getOutputVarDefine(0)+" = "+t+";"},i(n,[{key:"type",get:function(){return"ViewDirection"}}]),n}(o))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/View.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./enum.ts","./helper.ts","./LayoutManager.ts","./ViewManager.ts"],(function(e){var t,i,r,a,s,n,o,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,r=e._decorator},function(e){a=e.DEBUG_DRAW_LIND_WIDTH},function(e){s=e.WrapMode},function(e){n=e.Helper},function(e){o=e.LayoutManager},function(e){h=e.ViewManager}],execute:function(){var l;i._RF.push({},"2de05BThzdKpKfaXzu3wLES","View",void 0);var d=r.ccclass;r.property,e("View",d("View")(l=function(){function e(e){this.__debug_graphics=void 0,this._adapter=void 0,this._total=0,this._innerSize=0,this._group=null,this._holderList=[],this._tempHolderList=[],this._isOverflowFixed=void 0,this._adapter=e,this.internal_reset(),this.__createDebug()}var i=e.prototype;return i.__createDebug=function(){},i.__drawDebug=function(){if(this.__debug_graphics&&this.group){this.__debug_graphics.clear();var e=this.adapter.mainAxis,t=this.adapter.crossAxis,i={x:0,y:0},r={x:this.group.size.x,y:this.group.size.y},s={x:this.group.anchorPoint.x,y:this.group.anchorPoint.y};i[e]=this.group.position[e]-r[e]*s[e],i[e]+=.5*a,i[t]=this.group.position[t]-r[t]*(1-s[t]),i[t]+=.5*a,r[e]-=a,r[t]-=a,this.__debug_graphics.roundRect(i.x,i.y,r.x,r.y,2),this.__debug_graphics.stroke()}},i.getFixedHolders=function(){if(!this.group.isFixed)return[];for(var e=[],t=this.holderList.length,i=0;i<t;i++){var r=this.holderList[i];r.model.element.fixed&&e.push(r)}return e},i.internal_isWrap=function(e,t){var i=!1,r=t&&t.models[t.models.length-1];if(r)switch(e.element.wrapBeforeMode){case s.Wrap:i=!0;break;case s.Nowrap:i=r.element.wrapAfterMode==s.Wrap;break;case s.Auto:(i=r.element.wrapAfterMode==s.Wrap)||(i=this._calculateInnerSize(e,t))}return i},i.internal_reset=function(){this._group=null,this._innerSize=0,this._total=0,this._holderList.length=0,this._isOverflowFixed=!0,this._tempHolderList.length=0,this.__debug_graphics&&this.__debug_graphics.clear()},i.internal_push=function(e){this._total++;var t=this.adapter.crossAxis;(!e.element.ignoreLayout||e.element.ignoreLayout&&e.element.placeholder)&&(0!=this._innerSize&&(this._innerSize+=this.adapter.layoutManager.spacing),this._innerSize+=e.size[t])},i.internal_recycleHolders=function(e){for(var t=0;t<this._holderList.length;t++){var i=this._holderList[t];i.internal_disable(),e(i)}this._holderList.length=0},i.internal_preVisible=function(e,t){return this._group=e,this._createHolders(t),this},i.internal_visible=function(){this.register();for(var e=0;e<this._tempHolderList.length;e++){var t=this._tempHolderList[e],i=t.holder,r=t.model,a=t.isNew;i.internal_visible(this,r,a)}this._tempHolderList.length=0,this.adapter.layoutManager.layout(this.group),this.onVisible()},i.internal_disable=function(){this.adapter.layoutManager.unLayout(this.index),this.unregister(),this.onDisable(),this.internal_reset()},i.internal_holderChanged=function(e){var t=!0,i=this.adapter.mainAxis,r=this.group.size[i];if(!e){for(var a=0,s=0;s<this.group.models.length;s++){var o=this.group.models[s],h=o.size[i];(this.adapter.isVertical&&this.adapter.layoutManager.controlScaleHeight||this.adapter.isHorizontal&&this.adapter.layoutManager.controlScaleWidth)&&(h*=o.scale[i]),a=Math.max(a,h)}n.approximately(this.group.size[i],a)||(this.group.oldSize[i]=this.group.size[i],this.group.size[i]=a,t=!1)}t?this.adapter.layoutManager.layout(this.group):this.adapter.viewManager.internal_viewChanged(this,r)},i.register=function(){this.adapter.viewManager.on(h.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.on(h.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.on(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.on(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i.unregister=function(){this.adapter.viewManager.off(h.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.off(h.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.off(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.off(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i._createHolders=function(e){var t=this.adapter.mainAxis;this._tempHolderList.length=0;for(var i=0;i<this.group.models.length;i++){var r=this.group.models[i],a=!1,s=e&&e(r);s||(s=this.adapter.viewManager.internal_getHolder(r),a=!0),r.position[t]=this.group.position[t],this._holderList.push(s),this._tempHolderList.push({holder:s,model:r,isNew:a})}},i._calculateInnerSize=function(e,t){if(0==this._total)return!1;var i=e.size[this.adapter.crossAxis];return this._innerSize+i+this.adapter.layoutManager.spacing>t.size[this.adapter.crossAxis]},i._onLayoutComplated=function(e){if(-1!=e.indexOf(this.index)){for(var t=0;t<this.holderList.length;t++){this.holderList[t].internal_layout()}this.group.isFixed&&this._calcFixedPosition()}},i._calcFixedPosition=function(){for(var e=this._holderList.length,t=this.adapter.mainAxis,i=0;i<e;i++){var r=this._holderList[i];if(r.element.fixed){var a={x:r.model.position.x,y:r.model.position.y},s=0,n=this._getModelBoundary(r.model);if(this._isNeedFixed(n)){a[t]-=n;var o=this.adapter.viewManager.getNextFixedHolders(this.index);s=this._getRelativeNextHolderOffset(r,o)}a[t]+=s*this.adapter.multiplier,a[t]!=r.node.position[t]&&r.node.setPosition(a.x,a.y)}}},i._onChangedLayoutState=function(){this.adapter.layoutManager.layout(this.group)},i._onScroll=function(){this.group.isFixed&&0!=this._holderList.length&&this._calcFixedPosition()},i._onLateUpdate=function(e){},i._isNeedFixed=function(e){return 1==this.adapter.multiplier?e>=0:e<=0},i._getModelBoundary=function(e){var t=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0;return 1==this.adapter.multiplier?this._getModelHeaderBoundary(e)+t:this._getModelFooterBoundary(e)-t},i._getModelHeaderBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]+e.size[t]*(1-e.anchorPoint[t])*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelFooterBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]-e.size[t]*e.anchorPoint[t]*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelSizeWithSpacing=function(e){var t=this.adapter.mainAxis,i=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0,r=n.isNumber(e.element.fixedSpacing)?e.element.fixedSpacing:this.adapter.viewManager.spacing;return e.size[t]*e.scale[t]+i+r},i._getReatureRelativeBoundary=function(e,t){var i=1==this.adapter.multiplier?this._getModelHeaderBoundary(e):this._getModelFooterBoundary(e),r=1==this.adapter.multiplier?i+t:t-i;return Math.min(r,t)},i._getRelativeNextHolderOffset=function(e,t){for(var i=t.length,r=this.adapter.crossAxis,a=this._getModelSizeWithSpacing(e.model),s=0,n=0;n<i;n++){var o=t[n],h=this._getReatureRelativeBoundary(o.model,a),l=e.model.scale[r]==o.model.scale[r],d=e.model.size[r]==o.model.size[r];if(e.fixedIndex==o.fixedIndex&&l&&d){s=h>0?h:0;break}h>0&&(s=Math.max(s,h))}return s},t(e,[{key:"isOverflowFixed",get:function(){return this._isOverflowFixed}},{key:"adapter",get:function(){return this._adapter}},{key:"group",get:function(){return this._group}},{key:"holderList",get:function(){return this._holderList}},{key:"index",get:function(){return this.group?this.group.index:-1}}]),e}())||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/ViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Group.ts","./Manager.ts","./View.ts","./enum.ts","./helper.ts","./ModelManager.ts","./ScrollManager.ts"],(function(i){var e,t,r,a,s,n,o,l,h,d,u,p,c,_,g,f,v,x;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,a=i.assertThisInitialized,s=i.createClass},function(i){n=i.cclegacy,o=i._decorator,l=i.instantiate},function(i){h=i.Group},function(i){d=i.Manager},function(i){u=i.View},function(i){p=i.ArrangeAxis,c=i.StretchDirection,_=i.MagneticDirection,g=i.ScrollDirection},function(i){f=i.Helper},function(i){v=i.ModelManager},function(i){x=i.ScrollManager}],execute:function(){var b,m,w,A,V,H,z,S,y,F,I,E,M,O,P,D,T,N,G,L,C,R,k,B,U,W,Z,j,q,K,J,Q,X,Y,$;n._RF.push({},"f2204qKI49MuZnaH/naH4DF","ViewManager",void 0);var ii=o.ccclass,ei=o.property,ti=function(i){return i[i.ON_SCROLL=0]="ON_SCROLL",i[i.ON_LATEUPDATE=1]="ON_LATEUPDATE",i[i.ON_CLEARVIEWS=2]="ON_CLEARVIEWS",i[i.ON_UPDATE_VIEWS=3]="ON_UPDATE_VIEWS",i[i.ON_CHANGED_VIRTUALSIZE=4]="ON_CHANGED_VIRTUALSIZE",i[i.ON_MAGNETIC=5]="ON_MAGNETIC",i[i.ON_CHANGED_OVERFLOWHEADER=6]="ON_CHANGED_OVERFLOWHEADER",i[i.ON_RESET_ALL_STATE=7]="ON_RESET_ALL_STATE",i[i.ON_CHANGED_SPACING=8]="ON_CHANGED_SPACING",i}(ti||{});i("ViewManager",(b=ii("ViewManager"),m=ei({type:p}),w=ei({type:p,tooltip:"主轴方向的排列方式\n        Start: 从上到下、从左到右\n        End: 从下到上、从右到左"}),A=ei({type:c,tooltip:"当元素的尺寸、缩放改变时，受影响的其他元素应该如何计算新的位置\n        Auto: 以可视区域中心为起点，所有其他元素向两边延伸\n        Center: 以当前变化的元素为起点，所有其他元素向两边延伸\n        Header: 以当前变化的元素和它头部的所有元素向头部延伸\n        Footer: 以当前变化的元素和它尾部的所有元素向尾部延伸"}),V=ei({range:[0,1],slide:!0,step:.01,tooltip:"当元素移动到可视区域外偏移多少时才进行回收\n        比如元素的尺寸为100，当元素超出可视范围 100+100*0.3 时就会被回收\n        没有特殊需求时，默认值即可"}),H=ei({range:[0,1],slide:!0,step:.01,tooltip:"此值会影响填充元素的时机\n        没有特殊需求时，默认值即可"}),z=ei({tooltip:"主轴方向元素的间隙"}),S=ei({group:{id:"padding",name:"padding"}}),y=ei({group:{id:"padding",name:"padding"}}),F=ei({group:{id:"padding",name:"padding"}}),I=ei({group:{id:"padding",name:"padding"}}),E=ei({tooltip:"磁性停靠\n        开启后，会在增加数据时，根据设置进行自动滚动到顶部或底部"}),M=ei({type:_,visible:function(){return this.magnetic},tooltip:"停靠的方向"}),O=ei({visible:function(){return this.magnetic},tooltip:"停靠动画的时长"}),P=ei({visible:function(){return this.magnetic},tooltip:"默认情况下，仅当添加数据时才会触发停靠\n        当开启时，元素的尺寸改变时,也会否触发停靠"}),D=ei({tooltip:"头部循环"}),T=ei({tooltip:"尾部循环"}),b((($=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e=i.call.apply(i,[this].concat(s))||this,r(e,"_arrangeAxis",L,a(e)),r(e,"stretchDirection",C,a(e)),r(e,"overflowOffset",R,a(e)),r(e,"enterOffset",k,a(e)),r(e,"_spacing",B,a(e)),r(e,"left",U,a(e)),r(e,"right",W,a(e)),r(e,"top",Z,a(e)),r(e,"bottom",j,a(e)),r(e,"magnetic",q,a(e)),r(e,"magneticDirection",K,a(e)),r(e,"magneticDuration",J,a(e)),r(e,"magneticSizeChanges",Q,a(e)),r(e,"loopHeader",X,a(e)),r(e,"loopFooter",Y,a(e)),e._groupLength=0,e._cacheGroups=[],e._groups=[],e._disableViews=[],e._visibleViews=[],e._fixedViews=[],e._disableHolders=[],e._isFill=!1,e._headerIndex=-1,e._footerIndex=-1,e._virtualSize=0,e._overflowHeader=0,e._cacheHeadeDatas=[],e._cacheHeadePosition=void 0,e}t(e,i);var n=e.prototype;return n.onInit=function(){this.adapter.modelManager.on(v.Event.ON_CHANGE_BEFORE,this._onModelChangeBefore,this),this.adapter.modelManager.on(v.Event.ON_INSERT,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_REMOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_MOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_CLEAR,this._onClearModel,this),this.adapter.scrollManager.on(x.Event.ON_SCROLL,this._onScroll,this),this.adapter.scrollManager.on(x.Event.ON_VIEW_SIZE_CHANGED,this._resetAllState,this),this.adapter.scrollManager.on(x.Event.ON_CHANGED_ORIENTATION,this._resetAllState,this)},n._clearAll=function(){for(var i,e=0,t=this._visibleViews.length;e<t;e++)this._recycleViewToDisableViews(this._visibleViews[e]);(i=this._cacheGroups).push.apply(i,this._groups),this._clearFixedViews(),this._visibleViews.length=0,this._groups.length=0,this.virtualSize=0,this.overflowHeader=0},n._onClearModel=function(){this._clearAll(),this.emit(ti.ON_CLEARVIEWS)},n._resetAllState=function(){this._clearAll(),this.internal_updateVisibleView(0),this.emit(ti.ON_RESET_ALL_STATE)},n._onModelChangeBefore=function(){if(this.header&&this.virtualSize>this.adapter.mainAxisSize){var i=this.getVisibleIndexByGroupIndex(0);if(-1!=i){var e=this._visibleViews[i];this._cacheHeadeDatas=e.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:e.group.position.x,y:e.group.position.y}}else this._cacheHeadeDatas=this.header.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:this.header.group.position.x,y:this.header.group.position.y}}},n._updateGroups=function(i){var e,t=this,r=this._getViewFromDisibleViews(null),a=this.getGroupIndexByModelIndex(i);-1==a&&(a=this._groupLength-1);var s=null,n=!1,o={modelIndex:i,fixedIndex:-1},l=this._groups[a-1];for(l&&(o.fixedIndex=l.fixedIndex);;){(s=this._groups[a])||((s=this._getGroupFromCache()).internal_setIndex(this._groups.length),this._groups.push(s),a=this._groups.length);var h=s.internal_insert(o,r,n);if(a++,n=!0,!h)break}var d=this._groups.splice(a,this._groups.length);(e=this._cacheGroups).push.apply(e,d),this._groupLength=this._groups.length;var u=-1,p=0;this._cacheHeadeDatas.length>0&&(u=this._groups.findIndex((function(i){return i.internal_includes(t._cacheHeadeDatas)})));var c=this._groups[u];c&&(p+=c.size[this.adapter.mainAxis]+this.spacing,c.internal_setPosition(this._cacheHeadePosition[this.adapter.mainAxis]));for(var g=u-1;g>=0;g--){var f=this._groups[g];this._calcMainAxisPosition(f,c,_.Header),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}c=this._groups[u];for(var v=u+1;v<this.groupLength;v++){f=this._groups[v];this._calcMainAxisPosition(f,c,_.Footer),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}p-=this.spacing,this._virtualSize=Math.max(0,p),this._resetOverflowHeader(this._groups[0]),r.internal_reset(),this._disableViews.push(r),this.updateVisibles(u),this._cacheHeadeDatas=[],this._cacheHeadePosition=null},n.updateVisibles=function(i){var e=[];i=Math.max(0,i);for(var t=function(i){var t=e.findIndex((function(e){return e.oldData==i.data}));return-1!=t?e.splice(t,1)[0]:null},r=0;r<this._visibleViews.length;r++){var a=this._visibleViews[r];e=e.concat(a.holderList),a.internal_reset()}for(var s=this.adapter.mainAxisSize,n=0,o=this.visibleLength,l=i,h=this._groups.length;l<h;l++){var d=this._groups[l];if(this.getVisibleMainAxisSize()>=s&&o<=0)break;(p=this._visibleViews[n++])||(p=this._getViewFromDisibleViews(d.index),this._visibleViews.push(p)),p.internal_preVisible(d,t),o--}for(var u=this._visibleViews.length-1;u>=0;u--){var p;if((p=this._visibleViews[u]).holderList.length>0)break;this._disableFromVisibleViews(u)}for(var c=0,_=e.length;c<_;c++){var g=e[c];g.internal_disable(),this._disableHolders.push(g)}for(var f=0;f<this.visibleLength;f++)this._visibleViews[f].internal_visible();this._forceFill(),this._calcMagnetic(),this.emit(ti.ON_UPDATE_VIEWS)},n._getGroupFromCache=function(){var i=this._cacheGroups.pop();return i||(i=new h(this.adapter)),i.internal_reset(),i},n._calcMagnetic=function(){if(this.magnetic&&this.header){var i=!1;0==this.adapter.scrollManager.velocity&&(this.magneticDirection==_.Footer?this.footer.index==this._groupLength-1&&(this.adapter.scrollManager.scrollToFooter(this.magneticDuration),i=!0):0==this.header.index&&(this.adapter.scrollManager.scrollToHeader(this.magneticDuration),i=!0)),this.emit(ti.ON_MAGNETIC,i)}},n._calcMainAxisPosition=function(i,e,t){if(i)if(e){var r,a,s=this.adapter.mainAxis,n=this.adapter.multiplier,o=t==_.Footer?1:-1;t==_.Footer?(r=1==n?e.anchorPoint[s]:1-e.anchorPoint[s],a=1==n?1-i.anchorPoint[s]:i.anchorPoint[s]):(r=1==n?1-e.anchorPoint[s]:e.anchorPoint[s],a=1==n?i.anchorPoint[s]:1-i.anchorPoint[s]);var l=e.position[s];l-=e.size[s]*r*o*n,l-=this.spacing*n*o,l-=i.size[s]*a*o*n,i.internal_setPosition(l)}else i.internal_setPosition(this._getMainAxisHeaderPosition(i))},n._getMainAxisHeaderPosition=function(i){var e=0,t=0;return this.adapter.isVertical?(e=this.adapter.isArrangeAxisStart?-this.top:this.bottom,t=this.adapter.isArrangeAxisStart?1-i.anchorPoint[this.adapter.mainAxis]:i.anchorPoint[this.adapter.mainAxis]):(e=this.adapter.isArrangeAxisStart?this.left:-this.right,t=this.adapter.isArrangeAxisStart?i.anchorPoint[this.adapter.mainAxis]:1-i.anchorPoint[this.adapter.mainAxis]),e-=t*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n._getViewFromDisibleViews=function(i){var e=null;if(null!=i){var t=this._fixedViews.findIndex((function(e){return e.index==i}));if(-1!=t){var r=this._fixedViews.splice(t,1)[0];this._recycleViewToDisableViews(r)}}return e||(e=this._disableViews.pop()),e||(e=this.adapter.getView()),e},n._getHolderFromDisableHolders=function(i){var e=this._disableHolders.findIndex((function(e){return e.code==i.code}));if(-1!=e)return this._disableHolders.splice(e,1)[0]},n._disableFromVisibleViews=function(i){var e=-1;e=i instanceof u?this._visibleViews.findIndex((function(e){return e.index==i.index})):i,this._recycleViewToDisableViews(this._visibleViews[e]),this._visibleViews.splice(e,1)},n._recycleViewToDisableViews=function(i){var e=this;i&&(i.internal_recycleHolders((function(i){return e._disableHolders.push(i)})),i.internal_disable(),this._disableViews.push(i))},n._clearFixedViews=function(){for(var i=0,e=this._fixedViews.length;i<e;i++){var t=this._fixedViews[i];this._recycleViewToDisableViews(t)}this._fixedViews.length=0},n._checkHeaderInvisible=function(){this.header&&(this.loopFooter||this.footer.index!=this.groupLength-1)&&this._isOverflowHeader(this.header.group)&&(this._disableFromVisibleViews(0),this._checkHeaderInvisible())},n._checkFooterInvisible=function(){this.footer&&(this.loopHeader||0!=this.header.index)&&this._isOverflowFooter(this.footer.group)&&(this._disableFromVisibleViews(this._visibleViews.length-1),this._checkFooterInvisible())},n._isOverflowHeader=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupFooterBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t>=e:t<=-e},n._isOverflowFooter=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupHeaderBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t+this.adapter.mainAxisSize<=-e:t-this.adapter.mainAxisSize>=e},n._isEnterFooter=function(i){if(!i)return!1;var e=this.internal_getGroupFooterBoundary(i),t=this.enterOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e+this.adapter.mainAxisSize+t>=0:e-this.adapter.mainAxisSize-t<=0},n._isEnterHeader=function(i){if(!i)return!1;var e=this.internal_getGroupHeaderBoundary(i),t=this.overflowOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e-t<=0:e+t>=0},n._fillHeader=function(){var i=this._groups[this._headerIndex];if(this._isEnterHeader(i)){var e=this._accumTargetSizeTowardsHeader(i.index,this.internal_getInitHeaderSize(i)),t=e.index,r=e.size,a=this._groups[t];if(a&&-1==this.getVisibleIndexByGroupIndex(t)){var s=this.internal_convertSizeToHeaderPosition(r,a);a.internal_setPosition(s);var n=this._getViewFromDisibleViews(a.index);this._visibleViews.unshift(n),n.internal_preVisible(a).internal_visible(),0==n.index&&this._resetOverflowHeader(n.group),this._headerIndex=a.index,this._fillHeader()}}},n._fillFooter=function(){var i=this._groups[this._footerIndex];if(this._isEnterFooter(i)){var e=this._accumTargetSizeTowardsFooter(i.index,this.internal_getInitFooterSize(i)),t=e.index,r=e.size,a=this._groups[t];if(a&&-1==this.getVisibleIndexByGroupIndex(t)){var s=this.internal_convertSizeToFooterPosition(r,a);a.internal_setPosition(s);var n=this._getViewFromDisibleViews(a.index);this._visibleViews.push(n),n.internal_preVisible(a).internal_visible(),0==n.index&&this._resetOverflowHeader(n.group),this._footerIndex=a.index,this._fillFooter()}}},n._fillFixedView=function(){if(this.header&&(-1!=this.header.group.fixedIndex||this.header.group.isFixed))for(var i=this.header.index,e=this.adapter.mainAxis,t=this.internal_getInitHeaderSize(this.header.group),r=i-1;r>=0;r--){var a=this._groups[r];if(!a)return void console.error("_fillFixedView错误 找不到group",r);if(t+=a.size[e]+this.spacing,a.isFixed){var s=this.internal_convertSizeToHeaderPosition(t,a);if(-1!=this._fixedViews.findIndex((function(i){return i.index==a.index}))){f.approximately(s,a.position[e])||(a.internal_setPosition(s),this.adapter.layoutManager.layout(a));break}this._clearFixedViews();s=this.internal_convertSizeToHeaderPosition(t,a);a.internal_setPosition(s);var n=this._getViewFromDisibleViews(a.index);n.internal_preVisible(a).internal_visible(),this._fixedViews.push(n);break}}},n._accumTargetSizeTowardsHeader=function(i,e){for(var t=this._groups.length;;){if(0==i&&this.loopHeader&&(i=t),0==i)return{index:i,size:e};if(i--,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._accumTargetSizeTowardsFooter=function(i,e){for(var t=this._groups.length;;){if(i==t-1&&this.loopFooter&&(i=-1),i==t-1)return{index:i,size:e};if(i++,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._fillFooterHandle=function(){this._checkHeaderInvisible(),this._fillFooter()},n._fillHeaderHandle=function(){this._checkFooterInvisible(),this._fillHeader()},n._forceFill=function(){this._updateHeaderFooterIndex(),this._fillHeaderHandle(),this._fillFooterHandle()},n._updateHeaderFooterIndex=function(){this._headerIndex=this.header?this.header.index:0,this._footerIndex=this.footer?this.footer.index:0},n._onScroll=function(i){if(0!=this._groups.length){switch(this._updateHeaderFooterIndex(),i){case g.Up:case g.Left:this.adapter.isArrangeAxisStart?this._fillFooterHandle():this._fillHeaderHandle();break;case g.Down:case g.Right:this.adapter.isArrangeAxisStart?this._fillHeaderHandle():this._fillFooterHandle()}this._fillFixedView(),this.emit(ti.ON_SCROLL)}},n._stretchToHeader=function(i,e){for(var t=this._visibleViews[i],r=e;r>=0;r--){var a=this._visibleViews[r];t?(this._calcMainAxisPosition(a.group,t.group,_.Header),this.adapter.layoutManager.layout(a.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(a.group,null,_.Header),t=a}},n._stretchToFooter=function(i,e){for(var t=this._visibleViews[i],r=e;r<this._visibleViews.length;r++){var a=this._visibleViews[r];t?(this._calcMainAxisPosition(a.group,t.group,_.Footer),this.adapter.layoutManager.layout(a.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(a.group,null,_.Footer),t=a}},n._resetOverflowHeader=function(i){if(!i)return this.overflowHeader=0;var e=this.adapter.mainAxis,t=i.anchorPoint[e];t=1==this.adapter.multiplier?1-t:t;var r=i.position[e];r+=i.size[e]*t*this.adapter.multiplier,this.overflowHeader=r},n._calcOverflowHeader=function(i,e,t){var r=this.getVisibleIndexByGroupIndex(0);if(-1!=r){var a=this._visibleViews[r];return this._resetOverflowHeader(a.group)}var s=this.adapter.mainAxis,n=i.anchorPoint[s];n=1==this.adapter.multiplier?1-n:n;var o=i.oldSize[s],l=i.size[s],h=this.adapter.multiplier;switch(this.stretchDirection){case c.Header:var d=i.oldPosition[s]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)&&(this.overflowHeader+=(l-o)*h);break;case c.Footer:d=i.oldPosition[s]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)||(this.overflowHeader-=(l-o)*h);break;case c.Center:d=i.oldPosition[s]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)?this.overflowHeader+=.5*(l-o)*h:this.overflowHeader-=.5*(l-o)*h;break;case c.Auto:d=i.oldPosition[s]+o*n*h;var u=1==h?this.overflowHeader>=d:this.overflowHeader<=d;e<=t&&(d=i.oldPosition[s]+o*n*h,u=-1==h?this.overflowHeader>=d:this.overflowHeader<=d),u&&(e<=t?this.overflowHeader-=(l-o)*h:this.overflowHeader+=(l-o)*h)}},n.internal_lateUpdate=function(i){this._isFill&&(this._isFill=!1,this._forceFill()),this.emit(ti.ON_LATEUPDATE,i)},n.internal_viewChanged=function(i,e){var t=i.group.size[this.adapter.mainAxis]-e;this.virtualSize+=t;var r=this.getVisibleIndexByGroupIndex(i.index),a=-1;if(this.getVisibleMainAxisSize()<this.adapter.mainAxisSize||this.stretchDirection==c.Footer){var s=r-1;this._visibleViews[s]||this.adapter.layoutManager.layout(i.group),this._stretchToFooter(s,r)}else if(this.stretchDirection==c.Header){var n=r+1;this._visibleViews[n]||this.adapter.layoutManager.layout(i.group),this._stretchToHeader(n,r)}else if(this.stretchDirection==c.Center)this.adapter.layoutManager.layout(i.group),this._stretchToHeader(r,r-1),this._stretchToFooter(r,r+1);else{if(-1==(a=this.adapter.centerManager.getCenterVisibleIndex()))throw Error("找不到中心索引"+i.index);var o=this._visibleViews[a];this.adapter.layoutManager.layout(o.group),this._stretchToHeader(a,a-1),this._stretchToFooter(a,a+1)}this._calcOverflowHeader(i.group,a,r),this.magneticSizeChanges&&this._calcMagnetic(),this._isFill=!0,this.emit(ti.ON_CHANGED_VIRTUALSIZE)},n.internal_getHolder=function(i){var e=this._getHolderFromDisableHolders(i);if(!e){var t=this.adapter.getPrefab(i.data),r=l(t);e=this.adapter.getHolder(r,i.code)}return e.node.parent=this.adapter.scrollManager.getLayerNode(i.element.layer),e},n.internal_updateVisibleView=function(i){this._onModelChangeBefore(),this._updateGroups(i)},n.internal_getGroupFooterBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=i.position[this.adapter.mainAxis];return t-=i.size[this.adapter.mainAxis]*e*this.adapter.multiplier,t+=this.adapter.scrollManager.contentPosition},n.internal_getGroupHeaderBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];return e=1==this.adapter.multiplier?1-e:e,i.position[this.adapter.mainAxis]+this.adapter.scrollManager.contentPosition+e*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n.internal_getInitHeaderSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?1-e:e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t-=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier,t=this.adapter.mainAxisSize-t},n.internal_getInitFooterSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t+=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier},n.internal_accumulationSize=function(i){var e=this._groups[i];return e?e.size[this.adapter.mainAxis]+this.spacing:0},n.internal_convertSizeToFooterPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?t:1-t;var r=e.size[this.adapter.mainAxis]*t,a=-this.adapter.scrollManager.contentPosition;return a-=this.adapter.multiplier*i-this.adapter.multiplier*r},n.internal_convertSizeToHeaderPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?1-t:t;var r=e.size[this.adapter.mainAxis]*t,a=this.adapter.multiplier*i-this.adapter.multiplier*r;return a-=this.adapter.multiplier*this.adapter.mainAxisSize,a-=this.adapter.scrollManager.contentPosition},n.getGroup=function(i){return this._groups[i]},n.getVisibleView=function(i){return this._visibleViews[i]},n.getVisibleMainAxisSize=function(){if(0==this._visibleViews.length)return 0;for(var i=0,e=this.adapter.mainAxis,t=0,r=this._visibleViews.length;t<r;t++){var a=this._visibleViews[t];a.group&&(i+=a.group.size[e]+this.spacing)}return i-=this.spacing},n.getGroupIndexByModelIndex=function(i){for(var e=0,t=this._groups.length;e<t;e++){if(-1!=this._groups[e].findModelIndex(i))return e}return-1},n.getVisibleIndexByGroupIndex=function(i){return this._visibleViews.findIndex((function(e){return e.index==i}))},n.getNextFixedHolders=function(i){for(var e=[],t=this.getVisibleIndexByGroupIndex(i)+1,r=this._visibleViews.length;t<r;t++){var a=this._visibleViews[t];if(a.index!=i&&a.group.isFixed){e=a.getFixedHolders();break}}return e},n.getMagneticOffset=function(){if(!this.magnetic)return 0;var i=this.adapter.isHorizontal?-this.adapter.multiplier:this.adapter.multiplier;return this.magneticDirection==_.Footer?this.footer?Math.max(0,this.adapter.mainAxisSize-this.adapter.mainAxisPadding-this.getVisibleMainAxisSize())*i:this.adapter.mainAxisSize*i:0},s(e,[{key:"arrangeAxis",get:function(){return this._arrangeAxis},set:function(i){i!=this._arrangeAxis&&(this._arrangeAxis=i,this._resetAllState())}},{key:"spacing",get:function(){return this._spacing},set:function(i){i!=this._spacing&&(this._spacing=i,this._resetAllState())}},{key:"header",get:function(){return this._visibleViews[0]}},{key:"footer",get:function(){return this._visibleViews[this._visibleViews.length-1]}},{key:"overflowHeader",get:function(){return this._overflowHeader},set:function(i){i!=this._overflowHeader&&(this._overflowHeader=i,this.emit(ti.ON_CHANGED_OVERFLOWHEADER,i))}},{key:"virtualSize",get:function(){return this._virtualSize},set:function(i){i!=this._virtualSize&&(this._virtualSize=i,this.emit(ti.ON_CHANGED_VIRTUALSIZE))}},{key:"groupLength",get:function(){return this._groupLength}},{key:"visibleLength",get:function(){return this._visibleViews.length}},{key:"min",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupFooterBoundary(this.footer.group):this.internal_getGroupHeaderBoundary(this.header.group):0}},{key:"max",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupHeaderBoundary(this.header.group):this.internal_getGroupFooterBoundary(this.footer.group):0}}]),e}(d)).Event=ti,L=e((G=$).prototype,"_arrangeAxis",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.Start}}),e(G.prototype,"arrangeAxis",[w],Object.getOwnPropertyDescriptor(G.prototype,"arrangeAxis"),G.prototype),C=e(G.prototype,"stretchDirection",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Auto}}),R=e(G.prototype,"overflowOffset",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),k=e(G.prototype,"enterOffset",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(G.prototype,"_spacing",[ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(G.prototype,"spacing",[z],Object.getOwnPropertyDescriptor(G.prototype,"spacing"),G.prototype),U=e(G.prototype,"left",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(G.prototype,"right",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=e(G.prototype,"top",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=e(G.prototype,"bottom",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=e(G.prototype,"magnetic",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=e(G.prototype,"magneticDirection",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.Header}}),J=e(G.prototype,"magneticDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Q=e(G.prototype,"magneticSizeChanges",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=e(G.prototype,"loopHeader",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=e(G.prototype,"loopFooter",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=G))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/VisiblePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,n,a,o,l,r,s,c,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,r=i.Node,s=i.UIOpacity,c=i.tween,p=i.Component}],execute:function(){var u,h,d,v,y;o._RF.push({},"c5c0fR4sOtBf6AVBLMy1WNE","VisiblePanel",void 0);var f=l.ccclass,b=l.property;i("VisiblePanel",(u=f("VisiblePanel"),h=b({type:r,group:"VisiblePanel"}),u((y=t((v=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,n(t,"indicator",y,a(t)),t.opMain=null,t.onVisibleChanged=void 0,t.tweenOpacity=null,t}e(t,i);var o=t.prototype;return o.setPanelVisible=function(i,t,e){var n,a=this;void 0===t&&(t=.35),void 0===e&&(e=!0),this.opMain||(this.opMain=this.getComponent(s),null==this.opMain&&(this.opMain=this.addComponent(s))),t<=0&&(this.opMain.opacity=i?255:0),i&&e&&(this.node.active=!0,this.indicator&&(this.indicator.active=!0)),this.opMain.opacity=i?0:255,null==(n=this.tweenOpacity)||n.stop(),this.tweenOpacity=c(this.opMain).to(t,{opacity:i?255:0}).call((function(){!i&&e&&(a.node.active=!1,a.indicator&&(a.indicator.active=!1)),a.visibleChanged(i)})).start()},o.visibleChanged=function(i){var t;null==(t=this.onVisibleChanged)||t.call(this,i)},t}(p)).prototype,"indicator",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});